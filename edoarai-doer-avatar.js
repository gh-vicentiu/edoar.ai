function _mergeNamespaces(tt,_){for(var _e=0;_e<_.length;_e++){const nt=_[_e];if(typeof nt!="string"&&!Array.isArray(nt)){for(const rt in nt)if(rt!=="default"&&!(rt in tt)){const it=Object.getOwnPropertyDescriptor(nt,rt);it&&Object.defineProperty(tt,rt,it.get?it:{enumerable:!0,get:()=>nt[rt]})}}}return Object.freeze(Object.defineProperty(tt,Symbol.toStringTag,{value:"Module"}))}(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const rt of document.querySelectorAll('link[rel="modulepreload"]'))nt(rt);new MutationObserver(rt=>{for(const it of rt)if(it.type==="childList")for(const ot of it.addedNodes)ot.tagName==="LINK"&&ot.rel==="modulepreload"&&nt(ot)}).observe(document,{childList:!0,subtree:!0});function _e(rt){const it={};return rt.integrity&&(it.integrity=rt.integrity),rt.referrerPolicy&&(it.referrerPolicy=rt.referrerPolicy),rt.crossOrigin==="use-credentials"?it.credentials="include":rt.crossOrigin==="anonymous"?it.credentials="omit":it.credentials="same-origin",it}function nt(rt){if(rt.ep)return;rt.ep=!0;const it=_e(rt);fetch(rt.href,it)}})();function getDefaultExportFromCjs(tt){return tt&&tt.__esModule&&Object.prototype.hasOwnProperty.call(tt,"default")?tt.default:tt}var jsxRuntimeExports={},jsxRuntime={get exports(){return jsxRuntimeExports},set exports(tt){jsxRuntimeExports=tt}},reactJsxRuntime_production_min={},reactExports={},react={get exports(){return reactExports},set exports(tt){reactExports=tt}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$3=Symbol.for("react.context"),v$4=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$4=Symbol.for("react.memo"),y$3=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(tt){return tt===null||typeof tt!="object"?null:(tt=z$2&&tt[z$2]||tt["@@iterator"],typeof tt=="function"?tt:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(tt,_,_e){this.props=tt,this.context=_,this.refs=D$2,this.updater=_e||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(tt,_){if(typeof tt!="object"&&typeof tt!="function"&&tt!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,tt,_,"setState")};E$2.prototype.forceUpdate=function(tt){this.updater.enqueueForceUpdate(this,tt,"forceUpdate")};function F$2(){}F$2.prototype=E$2.prototype;function G$2(tt,_,_e){this.props=tt,this.context=_,this.refs=D$2,this.updater=_e||B$2}var H$3=G$2.prototype=new F$2;H$3.constructor=G$2;C$2(H$3,E$2.prototype);H$3.isPureReactComponent=!0;var I$4=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$1={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$3(tt,_,_e){var nt,rt={},it=null,ot=null;if(_!=null)for(nt in _.ref!==void 0&&(ot=_.ref),_.key!==void 0&&(it=""+_.key),_)J$2.call(_,nt)&&!L$3.hasOwnProperty(nt)&&(rt[nt]=_[nt]);var st=arguments.length-2;if(st===1)rt.children=_e;else if(1<st){for(var at=Array(st),lt=0;lt<st;lt++)at[lt]=arguments[lt+2];rt.children=at}if(tt&&tt.defaultProps)for(nt in st=tt.defaultProps,st)rt[nt]===void 0&&(rt[nt]=st[nt]);return{$$typeof:l$3,type:tt,key:it,ref:ot,props:rt,_owner:K$1.current}}function N$3(tt,_){return{$$typeof:l$3,type:tt.type,key:_,ref:tt.ref,props:tt.props,_owner:tt._owner}}function O$2(tt){return typeof tt=="object"&&tt!==null&&tt.$$typeof===l$3}function escape$1(tt){var _={"=":"=0",":":"=2"};return"$"+tt.replace(/[=:]/g,function(_e){return _[_e]})}var P$2=/\/+/g;function Q$2(tt,_){return typeof tt=="object"&&tt!==null&&tt.key!=null?escape$1(""+tt.key):_.toString(36)}function R$2(tt,_,_e,nt,rt){var it=typeof tt;(it==="undefined"||it==="boolean")&&(tt=null);var ot=!1;if(tt===null)ot=!0;else switch(it){case"string":case"number":ot=!0;break;case"object":switch(tt.$$typeof){case l$3:case n$3:ot=!0}}if(ot)return ot=tt,rt=rt(ot),tt=nt===""?"."+Q$2(ot,0):nt,I$4(rt)?(_e="",tt!=null&&(_e=tt.replace(P$2,"$&/")+"/"),R$2(rt,_,_e,"",function(lt){return lt})):rt!=null&&(O$2(rt)&&(rt=N$3(rt,_e+(!rt.key||ot&&ot.key===rt.key?"":(""+rt.key).replace(P$2,"$&/")+"/")+tt)),_.push(rt)),1;if(ot=0,nt=nt===""?".":nt+":",I$4(tt))for(var st=0;st<tt.length;st++){it=tt[st];var at=nt+Q$2(it,st);ot+=R$2(it,_,_e,at,rt)}else if(at=A$2(tt),typeof at=="function")for(tt=at.call(tt),st=0;!(it=tt.next()).done;)it=it.value,at=nt+Q$2(it,st++),ot+=R$2(it,_,_e,at,rt);else if(it==="object")throw _=String(tt),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(tt).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return ot}function S$4(tt,_,_e){if(tt==null)return tt;var nt=[],rt=0;return R$2(tt,nt,"","",function(it){return _.call(_e,it,rt++)}),nt}function T$3(tt){if(tt._status===-1){var _=tt._result;_=_(),_.then(function(_e){(tt._status===0||tt._status===-1)&&(tt._status=1,tt._result=_e)},function(_e){(tt._status===0||tt._status===-1)&&(tt._status=2,tt._result=_e)}),tt._status===-1&&(tt._status=0,tt._result=_)}if(tt._status===1)return tt._result.default;throw tt._result}var U$3={current:null},V$4={transition:null},W$2={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$4,ReactCurrentOwner:K$1};react_production_min.Children={map:S$4,forEach:function(tt,_,_e){S$4(tt,function(){_.apply(this,arguments)},_e)},count:function(tt){var _=0;return S$4(tt,function(){_++}),_},toArray:function(tt){return S$4(tt,function(_){return _})||[]},only:function(tt){if(!O$2(tt))throw Error("React.Children.only expected to receive a single React element child.");return tt}};react_production_min.Component=E$2;react_production_min.Fragment=p$5;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(tt,_,_e){if(tt==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+tt+".");var nt=C$2({},tt.props),rt=tt.key,it=tt.ref,ot=tt._owner;if(_!=null){if(_.ref!==void 0&&(it=_.ref,ot=K$1.current),_.key!==void 0&&(rt=""+_.key),tt.type&&tt.type.defaultProps)var st=tt.type.defaultProps;for(at in _)J$2.call(_,at)&&!L$3.hasOwnProperty(at)&&(nt[at]=_[at]===void 0&&st!==void 0?st[at]:_[at])}var at=arguments.length-2;if(at===1)nt.children=_e;else if(1<at){st=Array(at);for(var lt=0;lt<at;lt++)st[lt]=arguments[lt+2];nt.children=st}return{$$typeof:l$3,type:tt.type,key:rt,ref:it,props:nt,_owner:ot}};react_production_min.createContext=function(tt){return tt={$$typeof:u$3,_currentValue:tt,_currentValue2:tt,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},tt.Provider={$$typeof:t$2,_context:tt},tt.Consumer=tt};react_production_min.createElement=M$3;react_production_min.createFactory=function(tt){var _=M$3.bind(null,tt);return _.type=tt,_};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(tt){return{$$typeof:v$4,render:tt}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(tt){return{$$typeof:y$3,_payload:{_status:-1,_result:tt},_init:T$3}};react_production_min.memo=function(tt,_){return{$$typeof:x$4,type:tt,compare:_===void 0?null:_}};react_production_min.startTransition=function(tt){var _=V$4.transition;V$4.transition={};try{tt()}finally{V$4.transition=_}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(tt,_){return U$3.current.useCallback(tt,_)};react_production_min.useContext=function(tt){return U$3.current.useContext(tt)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(tt){return U$3.current.useDeferredValue(tt)};react_production_min.useEffect=function(tt,_){return U$3.current.useEffect(tt,_)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(tt,_,_e){return U$3.current.useImperativeHandle(tt,_,_e)};react_production_min.useInsertionEffect=function(tt,_){return U$3.current.useInsertionEffect(tt,_)};react_production_min.useLayoutEffect=function(tt,_){return U$3.current.useLayoutEffect(tt,_)};react_production_min.useMemo=function(tt,_){return U$3.current.useMemo(tt,_)};react_production_min.useReducer=function(tt,_,_e){return U$3.current.useReducer(tt,_,_e)};react_production_min.useRef=function(tt){return U$3.current.useRef(tt)};react_production_min.useState=function(tt){return U$3.current.useState(tt)};react_production_min.useSyncExternalStore=function(tt,_,_e){return U$3.current.useSyncExternalStore(tt,_,_e)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.2.0";(function(tt){tt.exports=react_production_min})(react);const React=getDefaultExportFromCjs(reactExports),$2AODx$react=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$3=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$2=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q$2(tt,_,_e){var nt,rt={},it=null,ot=null;_e!==void 0&&(it=""+_e),_.key!==void 0&&(it=""+_.key),_.ref!==void 0&&(ot=_.ref);for(nt in _)m$4.call(_,nt)&&!p$4.hasOwnProperty(nt)&&(rt[nt]=_[nt]);if(tt&&tt.defaultProps)for(nt in _=tt.defaultProps,_)rt[nt]===void 0&&(rt[nt]=_[nt]);return{$$typeof:k$3,type:tt,key:it,ref:ot,props:rt,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;(function(tt){tt.exports=reactJsxRuntime_production_min})(jsxRuntime);const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs;var client={},reactDomExports={},reactDom={get exports(){return reactDomExports},set exports(tt){reactDomExports=tt}},reactDom_production_min={},schedulerExports$1={},scheduler$1={get exports(){return schedulerExports$1},set exports(tt){schedulerExports$1=tt}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(tt){function _(Gt,Xt){var Vt=Gt.length;Gt.push(Xt);e:for(;0<Vt;){var Wt=Vt-1>>>1,$t=Gt[Wt];if(0<rt($t,Xt))Gt[Wt]=Xt,Gt[Vt]=$t,Vt=Wt;else break e}}function _e(Gt){return Gt.length===0?null:Gt[0]}function nt(Gt){if(Gt.length===0)return null;var Xt=Gt[0],Vt=Gt.pop();if(Vt!==Xt){Gt[0]=Vt;e:for(var Wt=0,$t=Gt.length,nn=$t>>>1;Wt<nn;){var en=2*(Wt+1)-1,sn=Gt[en],rn=en+1,an=Gt[rn];if(0>rt(sn,Vt))rn<$t&&0>rt(an,sn)?(Gt[Wt]=an,Gt[rn]=Vt,Wt=rn):(Gt[Wt]=sn,Gt[en]=Vt,Wt=en);else if(rn<$t&&0>rt(an,Vt))Gt[Wt]=an,Gt[rn]=Vt,Wt=rn;else break e}}return Xt}function rt(Gt,Xt){var Vt=Gt.sortIndex-Xt.sortIndex;return Vt!==0?Vt:Gt.id-Xt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;tt.unstable_now=function(){return it.now()}}else{var ot=Date,st=ot.now();tt.unstable_now=function(){return ot.now()-st}}var at=[],lt=[],ct=1,ut=null,ht=3,pt=!1,gt=!1,yt=!1,vt=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,_t=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xt(Gt){for(var Xt=_e(lt);Xt!==null;){if(Xt.callback===null)nt(lt);else if(Xt.startTime<=Gt)nt(lt),Xt.sortIndex=Xt.expirationTime,_(at,Xt);else break;Xt=_e(lt)}}function St(Gt){if(yt=!1,xt(Gt),!gt)if(_e(at)!==null)gt=!0,Yt(Tt);else{var Xt=_e(lt);Xt!==null&&qt(St,Xt.startTime-Gt)}}function Tt(Gt,Xt){gt=!1,yt&&(yt=!1,mt(Pt),Pt=-1),pt=!0;var Vt=ht;try{for(xt(Xt),ut=_e(at);ut!==null&&(!(ut.expirationTime>Xt)||Gt&&!Ot());){var Wt=ut.callback;if(typeof Wt=="function"){ut.callback=null,ht=ut.priorityLevel;var $t=Wt(ut.expirationTime<=Xt);Xt=tt.unstable_now(),typeof $t=="function"?ut.callback=$t:ut===_e(at)&&nt(at),xt(Xt)}else nt(at);ut=_e(at)}if(ut!==null)var nn=!0;else{var en=_e(lt);en!==null&&qt(St,en.startTime-Xt),nn=!1}return nn}finally{ut=null,ht=Vt,pt=!1}}var Mt=!1,bt=null,Pt=-1,wt=5,Bt=-1;function Ot(){return!(tt.unstable_now()-Bt<wt)}function Ut(){if(bt!==null){var Gt=tt.unstable_now();Bt=Gt;var Xt=!0;try{Xt=bt(!0,Gt)}finally{Xt?Nt():(Mt=!1,bt=null)}}else Mt=!1}var Nt;if(typeof _t=="function")Nt=function(){_t(Ut)};else if(typeof MessageChannel<"u"){var zt=new MessageChannel,jt=zt.port2;zt.port1.onmessage=Ut,Nt=function(){jt.postMessage(null)}}else Nt=function(){vt(Ut,0)};function Yt(Gt){bt=Gt,Mt||(Mt=!0,Nt())}function qt(Gt,Xt){Pt=vt(function(){Gt(tt.unstable_now())},Xt)}tt.unstable_IdlePriority=5,tt.unstable_ImmediatePriority=1,tt.unstable_LowPriority=4,tt.unstable_NormalPriority=3,tt.unstable_Profiling=null,tt.unstable_UserBlockingPriority=2,tt.unstable_cancelCallback=function(Gt){Gt.callback=null},tt.unstable_continueExecution=function(){gt||pt||(gt=!0,Yt(Tt))},tt.unstable_forceFrameRate=function(Gt){0>Gt||125<Gt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):wt=0<Gt?Math.floor(1e3/Gt):5},tt.unstable_getCurrentPriorityLevel=function(){return ht},tt.unstable_getFirstCallbackNode=function(){return _e(at)},tt.unstable_next=function(Gt){switch(ht){case 1:case 2:case 3:var Xt=3;break;default:Xt=ht}var Vt=ht;ht=Xt;try{return Gt()}finally{ht=Vt}},tt.unstable_pauseExecution=function(){},tt.unstable_requestPaint=function(){},tt.unstable_runWithPriority=function(Gt,Xt){switch(Gt){case 1:case 2:case 3:case 4:case 5:break;default:Gt=3}var Vt=ht;ht=Gt;try{return Xt()}finally{ht=Vt}},tt.unstable_scheduleCallback=function(Gt,Xt,Vt){var Wt=tt.unstable_now();switch(typeof Vt=="object"&&Vt!==null?(Vt=Vt.delay,Vt=typeof Vt=="number"&&0<Vt?Wt+Vt:Wt):Vt=Wt,Gt){case 1:var $t=-1;break;case 2:$t=250;break;case 5:$t=1073741823;break;case 4:$t=1e4;break;default:$t=5e3}return $t=Vt+$t,Gt={id:ct++,callback:Xt,priorityLevel:Gt,startTime:Vt,expirationTime:$t,sortIndex:-1},Vt>Wt?(Gt.sortIndex=Vt,_(lt,Gt),_e(at)===null&&Gt===_e(lt)&&(yt?(mt(Pt),Pt=-1):yt=!0,qt(St,Vt-Wt))):(Gt.sortIndex=$t,_(at,Gt),gt||pt||(gt=!0,Yt(Tt))),Gt},tt.unstable_shouldYield=Ot,tt.unstable_wrapCallback=function(Gt){var Xt=ht;return function(){var Vt=ht;ht=Xt;try{return Gt.apply(this,arguments)}finally{ht=Vt}}}})(scheduler_production_min$1);(function(tt){tt.exports=scheduler_production_min$1})(scheduler$1);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports$1;function p$3(tt){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+tt,_e=1;_e<arguments.length;_e++)_+="&args[]="+encodeURIComponent(arguments[_e]);return"Minified React error #"+tt+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(tt,_){ha(tt,_),ha(tt+"Capture",_)}function ha(tt,_){for(ea[tt]=_,tt=0;tt<_.length;tt++)da.add(_[tt])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(tt){return ja.call(ma,tt)?!0:ja.call(la,tt)?!1:ka.test(tt)?ma[tt]=!0:(la[tt]=!0,!1)}function pa(tt,_,_e,nt){if(_e!==null&&_e.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return nt?!1:_e!==null?!_e.acceptsBooleans:(tt=tt.toLowerCase().slice(0,5),tt!=="data-"&&tt!=="aria-");default:return!1}}function qa(tt,_,_e,nt){if(_===null||typeof _>"u"||pa(tt,_,_e,nt))return!0;if(nt)return!1;if(_e!==null)switch(_e.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function v$3(tt,_,_e,nt,rt,it,ot){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=nt,this.attributeNamespace=rt,this.mustUseProperty=_e,this.propertyName=tt,this.type=_,this.sanitizeURL=it,this.removeEmptyString=ot}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(tt){z$1[tt]=new v$3(tt,0,!1,tt,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(tt){var _=tt[0];z$1[_]=new v$3(_,1,!1,tt[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(tt){z$1[tt]=new v$3(tt,2,!1,tt.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(tt){z$1[tt]=new v$3(tt,2,!1,tt,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(tt){z$1[tt]=new v$3(tt,3,!1,tt.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(tt){z$1[tt]=new v$3(tt,3,!0,tt,null,!1,!1)});["capture","download"].forEach(function(tt){z$1[tt]=new v$3(tt,4,!1,tt,null,!1,!1)});["cols","rows","size","span"].forEach(function(tt){z$1[tt]=new v$3(tt,6,!1,tt,null,!1,!1)});["rowSpan","start"].forEach(function(tt){z$1[tt]=new v$3(tt,5,!1,tt.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(tt){return tt[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(tt){var _=tt.replace(ra,sa);z$1[_]=new v$3(_,1,!1,tt,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(tt){var _=tt.replace(ra,sa);z$1[_]=new v$3(_,1,!1,tt,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(tt){var _=tt.replace(ra,sa);z$1[_]=new v$3(_,1,!1,tt,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(tt){z$1[tt]=new v$3(tt,1,!1,tt.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$3("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(tt){z$1[tt]=new v$3(tt,1,!1,tt.toLowerCase(),null,!0,!0)});function ta(tt,_,_e,nt){var rt=z$1.hasOwnProperty(_)?z$1[_]:null;(rt!==null?rt.type!==0:nt||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(qa(_,_e,rt,nt)&&(_e=null),nt||rt===null?oa(_)&&(_e===null?tt.removeAttribute(_):tt.setAttribute(_,""+_e)):rt.mustUseProperty?tt[rt.propertyName]=_e===null?rt.type===3?!1:"":_e:(_=rt.attributeName,nt=rt.attributeNamespace,_e===null?tt.removeAttribute(_):(rt=rt.type,_e=rt===3||rt===4&&_e===!0?"":""+_e,nt?tt.setAttributeNS(nt,_,_e):tt.setAttribute(_,_e))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(tt){return tt===null||typeof tt!="object"?null:(tt=Ja&&tt[Ja]||tt["@@iterator"],typeof tt=="function"?tt:null)}var A$1=Object.assign,La;function Ma(tt){if(La===void 0)try{throw Error()}catch(_e){var _=_e.stack.trim().match(/\n( *(at )?)/);La=_&&_[1]||""}return`
`+La+tt}var Na=!1;function Oa(tt,_){if(!tt||Na)return"";Na=!0;var _e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(lt){var nt=lt}Reflect.construct(tt,[],_)}else{try{_.call()}catch(lt){nt=lt}tt.call(_.prototype)}else{try{throw Error()}catch(lt){nt=lt}tt()}}catch(lt){if(lt&&nt&&typeof lt.stack=="string"){for(var rt=lt.stack.split(`
`),it=nt.stack.split(`
`),ot=rt.length-1,st=it.length-1;1<=ot&&0<=st&&rt[ot]!==it[st];)st--;for(;1<=ot&&0<=st;ot--,st--)if(rt[ot]!==it[st]){if(ot!==1||st!==1)do if(ot--,st--,0>st||rt[ot]!==it[st]){var at=`
`+rt[ot].replace(" at new "," at ");return tt.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",tt.displayName)),at}while(1<=ot&&0<=st);break}}}finally{Na=!1,Error.prepareStackTrace=_e}return(tt=tt?tt.displayName||tt.name:"")?Ma(tt):""}function Pa(tt){switch(tt.tag){case 5:return Ma(tt.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return tt=Oa(tt.type,!1),tt;case 11:return tt=Oa(tt.type.render,!1),tt;case 1:return tt=Oa(tt.type,!0),tt;default:return""}}function Qa(tt){if(tt==null)return null;if(typeof tt=="function")return tt.displayName||tt.name||null;if(typeof tt=="string")return tt;switch(tt){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof tt=="object")switch(tt.$$typeof){case Ca:return(tt.displayName||"Context")+".Consumer";case Ba:return(tt._context.displayName||"Context")+".Provider";case Da:var _=tt.render;return tt=tt.displayName,tt||(tt=_.displayName||_.name||"",tt=tt!==""?"ForwardRef("+tt+")":"ForwardRef"),tt;case Ga:return _=tt.displayName||null,_!==null?_:Qa(tt.type)||"Memo";case Ha:_=tt._payload,tt=tt._init;try{return Qa(tt(_))}catch{}}return null}function Ra(tt){var _=tt.type;switch(tt.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return tt=_.render,tt=tt.displayName||tt.name||"",_.displayName||(tt!==""?"ForwardRef("+tt+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_);case 8:return _===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function Sa(tt){switch(typeof tt){case"boolean":case"number":case"string":case"undefined":return tt;case"object":return tt;default:return""}}function Ta(tt){var _=tt.type;return(tt=tt.nodeName)&&tt.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Ua(tt){var _=Ta(tt)?"checked":"value",_e=Object.getOwnPropertyDescriptor(tt.constructor.prototype,_),nt=""+tt[_];if(!tt.hasOwnProperty(_)&&typeof _e<"u"&&typeof _e.get=="function"&&typeof _e.set=="function"){var rt=_e.get,it=_e.set;return Object.defineProperty(tt,_,{configurable:!0,get:function(){return rt.call(this)},set:function(ot){nt=""+ot,it.call(this,ot)}}),Object.defineProperty(tt,_,{enumerable:_e.enumerable}),{getValue:function(){return nt},setValue:function(ot){nt=""+ot},stopTracking:function(){tt._valueTracker=null,delete tt[_]}}}}function Va(tt){tt._valueTracker||(tt._valueTracker=Ua(tt))}function Wa(tt){if(!tt)return!1;var _=tt._valueTracker;if(!_)return!0;var _e=_.getValue(),nt="";return tt&&(nt=Ta(tt)?tt.checked?"true":"false":tt.value),tt=nt,tt!==_e?(_.setValue(tt),!0):!1}function Xa(tt){if(tt=tt||(typeof document<"u"?document:void 0),typeof tt>"u")return null;try{return tt.activeElement||tt.body}catch{return tt.body}}function Ya(tt,_){var _e=_.checked;return A$1({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_e??tt._wrapperState.initialChecked})}function Za(tt,_){var _e=_.defaultValue==null?"":_.defaultValue,nt=_.checked!=null?_.checked:_.defaultChecked;_e=Sa(_.value!=null?_.value:_e),tt._wrapperState={initialChecked:nt,initialValue:_e,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function ab(tt,_){_=_.checked,_!=null&&ta(tt,"checked",_,!1)}function bb(tt,_){ab(tt,_);var _e=Sa(_.value),nt=_.type;if(_e!=null)nt==="number"?(_e===0&&tt.value===""||tt.value!=_e)&&(tt.value=""+_e):tt.value!==""+_e&&(tt.value=""+_e);else if(nt==="submit"||nt==="reset"){tt.removeAttribute("value");return}_.hasOwnProperty("value")?cb(tt,_.type,_e):_.hasOwnProperty("defaultValue")&&cb(tt,_.type,Sa(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(tt.defaultChecked=!!_.defaultChecked)}function db(tt,_,_e){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var nt=_.type;if(!(nt!=="submit"&&nt!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+tt._wrapperState.initialValue,_e||_===tt.value||(tt.value=_),tt.defaultValue=_}_e=tt.name,_e!==""&&(tt.name=""),tt.defaultChecked=!!tt._wrapperState.initialChecked,_e!==""&&(tt.name=_e)}function cb(tt,_,_e){(_!=="number"||Xa(tt.ownerDocument)!==tt)&&(_e==null?tt.defaultValue=""+tt._wrapperState.initialValue:tt.defaultValue!==""+_e&&(tt.defaultValue=""+_e))}var eb=Array.isArray;function fb(tt,_,_e,nt){if(tt=tt.options,_){_={};for(var rt=0;rt<_e.length;rt++)_["$"+_e[rt]]=!0;for(_e=0;_e<tt.length;_e++)rt=_.hasOwnProperty("$"+tt[_e].value),tt[_e].selected!==rt&&(tt[_e].selected=rt),rt&&nt&&(tt[_e].defaultSelected=!0)}else{for(_e=""+Sa(_e),_=null,rt=0;rt<tt.length;rt++){if(tt[rt].value===_e){tt[rt].selected=!0,nt&&(tt[rt].defaultSelected=!0);return}_!==null||tt[rt].disabled||(_=tt[rt])}_!==null&&(_.selected=!0)}}function gb(tt,_){if(_.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A$1({},_,{value:void 0,defaultValue:void 0,children:""+tt._wrapperState.initialValue})}function hb(tt,_){var _e=_.value;if(_e==null){if(_e=_.children,_=_.defaultValue,_e!=null){if(_!=null)throw Error(p$3(92));if(eb(_e)){if(1<_e.length)throw Error(p$3(93));_e=_e[0]}_=_e}_==null&&(_=""),_e=_}tt._wrapperState={initialValue:Sa(_e)}}function ib(tt,_){var _e=Sa(_.value),nt=Sa(_.defaultValue);_e!=null&&(_e=""+_e,_e!==tt.value&&(tt.value=_e),_.defaultValue==null&&tt.defaultValue!==_e&&(tt.defaultValue=_e)),nt!=null&&(tt.defaultValue=""+nt)}function jb(tt){var _=tt.textContent;_===tt._wrapperState.initialValue&&_!==""&&_!==null&&(tt.value=_)}function kb(tt){switch(tt){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(tt,_){return tt==null||tt==="http://www.w3.org/1999/xhtml"?kb(_):tt==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":tt}var mb,nb=function(tt){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,_e,nt,rt){MSApp.execUnsafeLocalFunction(function(){return tt(_,_e,nt,rt)})}:tt}(function(tt,_){if(tt.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in tt)tt.innerHTML=_;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=mb.firstChild;tt.firstChild;)tt.removeChild(tt.firstChild);for(;_.firstChild;)tt.appendChild(_.firstChild)}});function ob(tt,_){if(_){var _e=tt.firstChild;if(_e&&_e===tt.lastChild&&_e.nodeType===3){_e.nodeValue=_;return}}tt.textContent=_}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(tt){qb.forEach(function(_){_=_+tt.charAt(0).toUpperCase()+tt.substring(1),pb[_]=pb[tt]})});function rb(tt,_,_e){return _==null||typeof _=="boolean"||_===""?"":_e||typeof _!="number"||_===0||pb.hasOwnProperty(tt)&&pb[tt]?(""+_).trim():_+"px"}function sb(tt,_){tt=tt.style;for(var _e in _)if(_.hasOwnProperty(_e)){var nt=_e.indexOf("--")===0,rt=rb(_e,_[_e],nt);_e==="float"&&(_e="cssFloat"),nt?tt.setProperty(_e,rt):tt[_e]=rt}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(tt,_){if(_){if(tb[tt]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(p$3(137,tt));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(p$3(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(p$3(61))}if(_.style!=null&&typeof _.style!="object")throw Error(p$3(62))}}function vb(tt,_){if(tt.indexOf("-")===-1)return typeof _.is=="string";switch(tt){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(tt){return tt=tt.target||tt.srcElement||window,tt.correspondingUseElement&&(tt=tt.correspondingUseElement),tt.nodeType===3?tt.parentNode:tt}var yb=null,zb=null,Ab=null;function Bb(tt){if(tt=Cb(tt)){if(typeof yb!="function")throw Error(p$3(280));var _=tt.stateNode;_&&(_=Db(_),yb(tt.stateNode,tt.type,_))}}function Eb(tt){zb?Ab?Ab.push(tt):Ab=[tt]:zb=tt}function Fb(){if(zb){var tt=zb,_=Ab;if(Ab=zb=null,Bb(tt),_)for(tt=0;tt<_.length;tt++)Bb(_[tt])}}function Gb(tt,_){return tt(_)}function Hb(){}var Ib=!1;function Jb(tt,_,_e){if(Ib)return tt(_,_e);Ib=!0;try{return Gb(tt,_,_e)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(tt,_){var _e=tt.stateNode;if(_e===null)return null;var nt=Db(_e);if(nt===null)return null;_e=nt[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(nt=!nt.disabled)||(tt=tt.type,nt=!(tt==="button"||tt==="input"||tt==="select"||tt==="textarea")),tt=!nt;break e;default:tt=!1}if(tt)return null;if(_e&&typeof _e!="function")throw Error(p$3(231,_,typeof _e));return _e}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(tt,_,_e,nt,rt,it,ot,st,at){var lt=Array.prototype.slice.call(arguments,3);try{_.apply(_e,lt)}catch(ct){this.onError(ct)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(tt){Ob=!0,Pb=tt}};function Tb(tt,_,_e,nt,rt,it,ot,st,at){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(tt,_,_e,nt,rt,it,ot,st,at){if(Tb.apply(this,arguments),Ob){if(Ob){var lt=Pb;Ob=!1,Pb=null}else throw Error(p$3(198));Qb||(Qb=!0,Rb=lt)}}function Vb(tt){var _=tt,_e=tt;if(tt.alternate)for(;_.return;)_=_.return;else{tt=_;do _=tt,_.flags&4098&&(_e=_.return),tt=_.return;while(tt)}return _.tag===3?_e:null}function Wb(tt){if(tt.tag===13){var _=tt.memoizedState;if(_===null&&(tt=tt.alternate,tt!==null&&(_=tt.memoizedState)),_!==null)return _.dehydrated}return null}function Xb(tt){if(Vb(tt)!==tt)throw Error(p$3(188))}function Yb(tt){var _=tt.alternate;if(!_){if(_=Vb(tt),_===null)throw Error(p$3(188));return _!==tt?null:tt}for(var _e=tt,nt=_;;){var rt=_e.return;if(rt===null)break;var it=rt.alternate;if(it===null){if(nt=rt.return,nt!==null){_e=nt;continue}break}if(rt.child===it.child){for(it=rt.child;it;){if(it===_e)return Xb(rt),tt;if(it===nt)return Xb(rt),_;it=it.sibling}throw Error(p$3(188))}if(_e.return!==nt.return)_e=rt,nt=it;else{for(var ot=!1,st=rt.child;st;){if(st===_e){ot=!0,_e=rt,nt=it;break}if(st===nt){ot=!0,nt=rt,_e=it;break}st=st.sibling}if(!ot){for(st=it.child;st;){if(st===_e){ot=!0,_e=it,nt=rt;break}if(st===nt){ot=!0,nt=it,_e=rt;break}st=st.sibling}if(!ot)throw Error(p$3(189))}}if(_e.alternate!==nt)throw Error(p$3(190))}if(_e.tag!==3)throw Error(p$3(188));return _e.stateNode.current===_e?tt:_}function Zb(tt){return tt=Yb(tt),tt!==null?$b(tt):null}function $b(tt){if(tt.tag===5||tt.tag===6)return tt;for(tt=tt.child;tt!==null;){var _=$b(tt);if(_!==null)return _;tt=tt.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(tt){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,tt,void 0,(tt.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(tt){return tt>>>=0,tt===0?32:31-(pc(tt)/qc|0)|0}var rc=64,sc=4194304;function tc(tt){switch(tt&-tt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return tt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return tt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return tt}}function uc(tt,_){var _e=tt.pendingLanes;if(_e===0)return 0;var nt=0,rt=tt.suspendedLanes,it=tt.pingedLanes,ot=_e&268435455;if(ot!==0){var st=ot&~rt;st!==0?nt=tc(st):(it&=ot,it!==0&&(nt=tc(it)))}else ot=_e&~rt,ot!==0?nt=tc(ot):it!==0&&(nt=tc(it));if(nt===0)return 0;if(_!==0&&_!==nt&&!(_&rt)&&(rt=nt&-nt,it=_&-_,rt>=it||rt===16&&(it&4194240)!==0))return _;if(nt&4&&(nt|=_e&16),_=tt.entangledLanes,_!==0)for(tt=tt.entanglements,_&=nt;0<_;)_e=31-oc(_),rt=1<<_e,nt|=tt[_e],_&=~rt;return nt}function vc(tt,_){switch(tt){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(tt,_){for(var _e=tt.suspendedLanes,nt=tt.pingedLanes,rt=tt.expirationTimes,it=tt.pendingLanes;0<it;){var ot=31-oc(it),st=1<<ot,at=rt[ot];at===-1?(!(st&_e)||st&nt)&&(rt[ot]=vc(st,_)):at<=_&&(tt.expiredLanes|=st),it&=~st}}function xc(tt){return tt=tt.pendingLanes&-1073741825,tt!==0?tt:tt&1073741824?1073741824:0}function yc(){var tt=rc;return rc<<=1,!(rc&4194240)&&(rc=64),tt}function zc(tt){for(var _=[],_e=0;31>_e;_e++)_.push(tt);return _}function Ac(tt,_,_e){tt.pendingLanes|=_,_!==536870912&&(tt.suspendedLanes=0,tt.pingedLanes=0),tt=tt.eventTimes,_=31-oc(_),tt[_]=_e}function Bc(tt,_){var _e=tt.pendingLanes&~_;tt.pendingLanes=_,tt.suspendedLanes=0,tt.pingedLanes=0,tt.expiredLanes&=_,tt.mutableReadLanes&=_,tt.entangledLanes&=_,_=tt.entanglements;var nt=tt.eventTimes;for(tt=tt.expirationTimes;0<_e;){var rt=31-oc(_e),it=1<<rt;_[rt]=0,nt[rt]=-1,tt[rt]=-1,_e&=~it}}function Cc(tt,_){var _e=tt.entangledLanes|=_;for(tt=tt.entanglements;_e;){var nt=31-oc(_e),rt=1<<nt;rt&_|tt[nt]&_&&(tt[nt]|=_),_e&=~rt}}var C$1=0;function Dc(tt){return tt&=-tt,1<tt?4<tt?tt&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(tt,_){switch(tt){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_.pointerId)}}function Tc(tt,_,_e,nt,rt,it){return tt===null||tt.nativeEvent!==it?(tt={blockedOn:_,domEventName:_e,eventSystemFlags:nt,nativeEvent:it,targetContainers:[rt]},_!==null&&(_=Cb(_),_!==null&&Fc(_)),tt):(tt.eventSystemFlags|=nt,_=tt.targetContainers,rt!==null&&_.indexOf(rt)===-1&&_.push(rt),tt)}function Uc(tt,_,_e,nt,rt){switch(_){case"focusin":return Lc=Tc(Lc,tt,_,_e,nt,rt),!0;case"dragenter":return Mc=Tc(Mc,tt,_,_e,nt,rt),!0;case"mouseover":return Nc=Tc(Nc,tt,_,_e,nt,rt),!0;case"pointerover":var it=rt.pointerId;return Oc.set(it,Tc(Oc.get(it)||null,tt,_,_e,nt,rt)),!0;case"gotpointercapture":return it=rt.pointerId,Pc.set(it,Tc(Pc.get(it)||null,tt,_,_e,nt,rt)),!0}return!1}function Vc(tt){var _=Wc(tt.target);if(_!==null){var _e=Vb(_);if(_e!==null){if(_=_e.tag,_===13){if(_=Wb(_e),_!==null){tt.blockedOn=_,Ic(tt.priority,function(){Gc(_e)});return}}else if(_===3&&_e.stateNode.current.memoizedState.isDehydrated){tt.blockedOn=_e.tag===3?_e.stateNode.containerInfo:null;return}}}tt.blockedOn=null}function Xc(tt){if(tt.blockedOn!==null)return!1;for(var _=tt.targetContainers;0<_.length;){var _e=Yc(tt.domEventName,tt.eventSystemFlags,_[0],tt.nativeEvent);if(_e===null){_e=tt.nativeEvent;var nt=new _e.constructor(_e.type,_e);wb=nt,_e.target.dispatchEvent(nt),wb=null}else return _=Cb(_e),_!==null&&Fc(_),tt.blockedOn=_e,!1;_.shift()}return!0}function Zc(tt,_,_e){Xc(tt)&&_e.delete(_)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(tt,_){tt.blockedOn===_&&(tt.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(tt){function _(rt){return ad(rt,tt)}if(0<Kc.length){ad(Kc[0],tt);for(var _e=1;_e<Kc.length;_e++){var nt=Kc[_e];nt.blockedOn===tt&&(nt.blockedOn=null)}}for(Lc!==null&&ad(Lc,tt),Mc!==null&&ad(Mc,tt),Nc!==null&&ad(Nc,tt),Oc.forEach(_),Pc.forEach(_),_e=0;_e<Qc.length;_e++)nt=Qc[_e],nt.blockedOn===tt&&(nt.blockedOn=null);for(;0<Qc.length&&(_e=Qc[0],_e.blockedOn===null);)Vc(_e),_e.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(tt,_,_e,nt){var rt=C$1,it=cd.transition;cd.transition=null;try{C$1=1,fd$2(tt,_,_e,nt)}finally{C$1=rt,cd.transition=it}}function gd(tt,_,_e,nt){var rt=C$1,it=cd.transition;cd.transition=null;try{C$1=4,fd$2(tt,_,_e,nt)}finally{C$1=rt,cd.transition=it}}function fd$2(tt,_,_e,nt){if(dd){var rt=Yc(tt,_,_e,nt);if(rt===null)hd(tt,_,nt,id$1,_e),Sc(tt,nt);else if(Uc(rt,tt,_,_e,nt))nt.stopPropagation();else if(Sc(tt,nt),_&4&&-1<Rc.indexOf(tt)){for(;rt!==null;){var it=Cb(rt);if(it!==null&&Ec(it),it=Yc(tt,_,_e,nt),it===null&&hd(tt,_,nt,id$1,_e),it===rt)break;rt=it}rt!==null&&nt.stopPropagation()}else hd(tt,_,nt,null,_e)}}var id$1=null;function Yc(tt,_,_e,nt){if(id$1=null,tt=xb(nt),tt=Wc(tt),tt!==null)if(_=Vb(tt),_===null)tt=null;else if(_e=_.tag,_e===13){if(tt=Wb(_),tt!==null)return tt;tt=null}else if(_e===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;tt=null}else _!==tt&&(tt=null);return id$1=tt,null}function jd(tt){switch(tt){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var tt,_=ld,_e=_.length,nt,rt="value"in kd?kd.value:kd.textContent,it=rt.length;for(tt=0;tt<_e&&_[tt]===rt[tt];tt++);var ot=_e-tt;for(nt=1;nt<=ot&&_[_e-nt]===rt[it-nt];nt++);return md=rt.slice(tt,1<nt?1-nt:void 0)}function od(tt){var _=tt.keyCode;return"charCode"in tt?(tt=tt.charCode,tt===0&&_===13&&(tt=13)):tt=_,tt===10&&(tt=13),32<=tt||tt===13?tt:0}function pd(){return!0}function qd(){return!1}function rd(tt){function _(_e,nt,rt,it,ot){this._reactName=_e,this._targetInst=rt,this.type=nt,this.nativeEvent=it,this.target=ot,this.currentTarget=null;for(var st in tt)tt.hasOwnProperty(st)&&(_e=tt[st],this[st]=_e?_e(it):it[st]);return this.isDefaultPrevented=(it.defaultPrevented!=null?it.defaultPrevented:it.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _e=this.nativeEvent;_e&&(_e.preventDefault?_e.preventDefault():typeof _e.returnValue!="unknown"&&(_e.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var _e=this.nativeEvent;_e&&(_e.stopPropagation?_e.stopPropagation():typeof _e.cancelBubble!="unknown"&&(_e.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(tt){return tt.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$2=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(tt){return tt.relatedTarget===void 0?tt.fromElement===tt.srcElement?tt.toElement:tt.fromElement:tt.relatedTarget},movementX:function(tt){return"movementX"in tt?tt.movementX:(tt!==yd&&(yd&&tt.type==="mousemove"?(wd=tt.screenX-yd.screenX,xd=tt.screenY-yd.screenY):xd=wd=0,yd=tt),wd)},movementY:function(tt){return"movementY"in tt?tt.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(tt){return"clipboardData"in tt?tt.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(tt){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(tt):(tt=Od[tt])?!!_[tt]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(tt){if(tt.key){var _=Md[tt.key]||tt.key;if(_!=="Unidentified")return _}return tt.type==="keypress"?(tt=od(tt),tt===13?"Enter":String.fromCharCode(tt)):tt.type==="keydown"||tt.type==="keyup"?Nd[tt.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(tt){return tt.type==="keypress"?od(tt):0},keyCode:function(tt){return tt.type==="keydown"||tt.type==="keyup"?tt.keyCode:0},which:function(tt){return tt.type==="keypress"?od(tt):tt.type==="keydown"||tt.type==="keyup"?tt.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(tt){return"deltaX"in tt?tt.deltaX:"wheelDeltaX"in tt?-tt.wheelDeltaX:0},deltaY:function(tt){return"deltaY"in tt?tt.deltaY:"wheelDeltaY"in tt?-tt.wheelDeltaY:"wheelDelta"in tt?-tt.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee$1=String.fromCharCode(32),fe=!1;function ge(tt,_){switch(tt){case"keyup":return $d.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(tt){return tt=tt.detail,typeof tt=="object"&&"data"in tt?tt.data:null}var ie=!1;function je(tt,_){switch(tt){case"compositionend":return he(_);case"keypress":return _.which!==32?null:(fe=!0,ee$1);case"textInput":return tt=_.data,tt===ee$1&&fe?null:tt;default:return null}}function ke(tt,_){if(ie)return tt==="compositionend"||!ae&&ge(tt,_)?(tt=nd(),md=ld=kd=null,ie=!1,tt):null;switch(tt){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return de&&_.locale!=="ko"?null:_.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(tt){var _=tt&&tt.nodeName&&tt.nodeName.toLowerCase();return _==="input"?!!le[tt.type]:_==="textarea"}function ne(tt,_,_e,nt){Eb(nt),_=oe(_,"onChange"),0<_.length&&(_e=new td$2("onChange","change",null,_e,nt),tt.push({event:_e,listeners:_}))}var pe=null,qe=null;function re$1(tt){se(tt,0)}function te(tt){var _=ue(tt);if(Wa(_))return tt}function ve(tt,_){if(tt==="change")return _}var we=!1;if(ia){var xe$1;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe$1=ye}else xe$1=!1;we=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(tt){if(tt.propertyName==="value"&&te(qe)){var _=[];ne(_,qe,tt,xb(tt)),Jb(re$1,_)}}function Ce$1(tt,_,_e){tt==="focusin"?(Ae(),pe=_,qe=_e,pe.attachEvent("onpropertychange",Be)):tt==="focusout"&&Ae()}function De(tt){if(tt==="selectionchange"||tt==="keyup"||tt==="keydown")return te(qe)}function Ee(tt,_){if(tt==="click")return te(_)}function Fe(tt,_){if(tt==="input"||tt==="change")return te(_)}function Ge(tt,_){return tt===_&&(tt!==0||1/tt===1/_)||tt!==tt&&_!==_}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(tt,_){if(He(tt,_))return!0;if(typeof tt!="object"||tt===null||typeof _!="object"||_===null)return!1;var _e=Object.keys(tt),nt=Object.keys(_);if(_e.length!==nt.length)return!1;for(nt=0;nt<_e.length;nt++){var rt=_e[nt];if(!ja.call(_,rt)||!He(tt[rt],_[rt]))return!1}return!0}function Je(tt){for(;tt&&tt.firstChild;)tt=tt.firstChild;return tt}function Ke(tt,_){var _e=Je(tt);tt=0;for(var nt;_e;){if(_e.nodeType===3){if(nt=tt+_e.textContent.length,tt<=_&&nt>=_)return{node:_e,offset:_-tt};tt=nt}e:{for(;_e;){if(_e.nextSibling){_e=_e.nextSibling;break e}_e=_e.parentNode}_e=void 0}_e=Je(_e)}}function Le(tt,_){return tt&&_?tt===_?!0:tt&&tt.nodeType===3?!1:_&&_.nodeType===3?Le(tt,_.parentNode):"contains"in tt?tt.contains(_):tt.compareDocumentPosition?!!(tt.compareDocumentPosition(_)&16):!1:!1}function Me$1(){for(var tt=window,_=Xa();_ instanceof tt.HTMLIFrameElement;){try{var _e=typeof _.contentWindow.location.href=="string"}catch{_e=!1}if(_e)tt=_.contentWindow;else break;_=Xa(tt.document)}return _}function Ne$1(tt){var _=tt&&tt.nodeName&&tt.nodeName.toLowerCase();return _&&(_==="input"&&(tt.type==="text"||tt.type==="search"||tt.type==="tel"||tt.type==="url"||tt.type==="password")||_==="textarea"||tt.contentEditable==="true")}function Oe(tt){var _=Me$1(),_e=tt.focusedElem,nt=tt.selectionRange;if(_!==_e&&_e&&_e.ownerDocument&&Le(_e.ownerDocument.documentElement,_e)){if(nt!==null&&Ne$1(_e)){if(_=nt.start,tt=nt.end,tt===void 0&&(tt=_),"selectionStart"in _e)_e.selectionStart=_,_e.selectionEnd=Math.min(tt,_e.value.length);else if(tt=(_=_e.ownerDocument||document)&&_.defaultView||window,tt.getSelection){tt=tt.getSelection();var rt=_e.textContent.length,it=Math.min(nt.start,rt);nt=nt.end===void 0?it:Math.min(nt.end,rt),!tt.extend&&it>nt&&(rt=nt,nt=it,it=rt),rt=Ke(_e,it);var ot=Ke(_e,nt);rt&&ot&&(tt.rangeCount!==1||tt.anchorNode!==rt.node||tt.anchorOffset!==rt.offset||tt.focusNode!==ot.node||tt.focusOffset!==ot.offset)&&(_=_.createRange(),_.setStart(rt.node,rt.offset),tt.removeAllRanges(),it>nt?(tt.addRange(_),tt.extend(ot.node,ot.offset)):(_.setEnd(ot.node,ot.offset),tt.addRange(_)))}}for(_=[],tt=_e;tt=tt.parentNode;)tt.nodeType===1&&_.push({element:tt,left:tt.scrollLeft,top:tt.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<_.length;_e++)tt=_[_e],tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(tt,_,_e){var nt=_e.window===_e?_e.document:_e.nodeType===9?_e:_e.ownerDocument;Te||Qe==null||Qe!==Xa(nt)||(nt=Qe,"selectionStart"in nt&&Ne$1(nt)?nt={start:nt.selectionStart,end:nt.selectionEnd}:(nt=(nt.ownerDocument&&nt.ownerDocument.defaultView||window).getSelection(),nt={anchorNode:nt.anchorNode,anchorOffset:nt.anchorOffset,focusNode:nt.focusNode,focusOffset:nt.focusOffset}),Se&&Ie(Se,nt)||(Se=nt,nt=oe(Re,"onSelect"),0<nt.length&&(_=new td$2("onSelect","select",null,_,_e),tt.push({event:_,listeners:nt}),_.target=Qe)))}function Ve(tt,_){var _e={};return _e[tt.toLowerCase()]=_.toLowerCase(),_e["Webkit"+tt]="webkit"+_,_e["Moz"+tt]="moz"+_,_e}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(tt){if(Xe[tt])return Xe[tt];if(!We[tt])return tt;var _=We[tt],_e;for(_e in _)if(_.hasOwnProperty(_e)&&_e in Ye)return Xe[tt]=_[_e];return tt}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(tt,_){df.set(tt,_),fa(_,[tt])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(tt,_,_e){var nt=tt.type||"unknown-event";tt.currentTarget=_e,Ub(nt,_,void 0,tt),tt.currentTarget=null}function se(tt,_){_=(_&4)!==0;for(var _e=0;_e<tt.length;_e++){var nt=tt[_e],rt=nt.event;nt=nt.listeners;e:{var it=void 0;if(_)for(var ot=nt.length-1;0<=ot;ot--){var st=nt[ot],at=st.instance,lt=st.currentTarget;if(st=st.listener,at!==it&&rt.isPropagationStopped())break e;nf(rt,st,lt),it=at}else for(ot=0;ot<nt.length;ot++){if(st=nt[ot],at=st.instance,lt=st.currentTarget,st=st.listener,at!==it&&rt.isPropagationStopped())break e;nf(rt,st,lt),it=at}}}if(Qb)throw tt=Rb,Qb=!1,Rb=null,tt}function D$1(tt,_){var _e=_[of];_e===void 0&&(_e=_[of]=new Set);var nt=tt+"__bubble";_e.has(nt)||(pf(_,tt,2,!1),_e.add(nt))}function qf(tt,_,_e){var nt=0;_&&(nt|=4),pf(_e,tt,nt,_)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(tt){if(!tt[rf]){tt[rf]=!0,da.forEach(function(_e){_e!=="selectionchange"&&(mf.has(_e)||qf(_e,!1,tt),qf(_e,!0,tt))});var _=tt.nodeType===9?tt:tt.ownerDocument;_===null||_[rf]||(_[rf]=!0,qf("selectionchange",!1,_))}}function pf(tt,_,_e,nt){switch(jd(_)){case 1:var rt=ed;break;case 4:rt=gd;break;default:rt=fd$2}_e=rt.bind(null,_,_e,tt),rt=void 0,!Lb||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(rt=!0),nt?rt!==void 0?tt.addEventListener(_,_e,{capture:!0,passive:rt}):tt.addEventListener(_,_e,!0):rt!==void 0?tt.addEventListener(_,_e,{passive:rt}):tt.addEventListener(_,_e,!1)}function hd(tt,_,_e,nt,rt){var it=nt;if(!(_&1)&&!(_&2)&&nt!==null)e:for(;;){if(nt===null)return;var ot=nt.tag;if(ot===3||ot===4){var st=nt.stateNode.containerInfo;if(st===rt||st.nodeType===8&&st.parentNode===rt)break;if(ot===4)for(ot=nt.return;ot!==null;){var at=ot.tag;if((at===3||at===4)&&(at=ot.stateNode.containerInfo,at===rt||at.nodeType===8&&at.parentNode===rt))return;ot=ot.return}for(;st!==null;){if(ot=Wc(st),ot===null)return;if(at=ot.tag,at===5||at===6){nt=it=ot;continue e}st=st.parentNode}}nt=nt.return}Jb(function(){var lt=it,ct=xb(_e),ut=[];e:{var ht=df.get(tt);if(ht!==void 0){var pt=td$2,gt=tt;switch(tt){case"keypress":if(od(_e)===0)break e;case"keydown":case"keyup":pt=Rd;break;case"focusin":gt="focus",pt=Fd;break;case"focusout":gt="blur",pt=Fd;break;case"beforeblur":case"afterblur":pt=Fd;break;case"click":if(_e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=Vd;break;case $e:case af:case bf:pt=Hd;break;case cf:pt=Xd;break;case"scroll":pt=vd;break;case"wheel":pt=Zd;break;case"copy":case"cut":case"paste":pt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=Td}var yt=(_&4)!==0,vt=!yt&&tt==="scroll",mt=yt?ht!==null?ht+"Capture":null:ht;yt=[];for(var _t=lt,xt;_t!==null;){xt=_t;var St=xt.stateNode;if(xt.tag===5&&St!==null&&(xt=St,mt!==null&&(St=Kb(_t,mt),St!=null&&yt.push(tf(_t,St,xt)))),vt)break;_t=_t.return}0<yt.length&&(ht=new pt(ht,gt,null,_e,ct),ut.push({event:ht,listeners:yt}))}}if(!(_&7)){e:{if(ht=tt==="mouseover"||tt==="pointerover",pt=tt==="mouseout"||tt==="pointerout",ht&&_e!==wb&&(gt=_e.relatedTarget||_e.fromElement)&&(Wc(gt)||gt[uf]))break e;if((pt||ht)&&(ht=ct.window===ct?ct:(ht=ct.ownerDocument)?ht.defaultView||ht.parentWindow:window,pt?(gt=_e.relatedTarget||_e.toElement,pt=lt,gt=gt?Wc(gt):null,gt!==null&&(vt=Vb(gt),gt!==vt||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(pt=null,gt=lt),pt!==gt)){if(yt=Bd,St="onMouseLeave",mt="onMouseEnter",_t="mouse",(tt==="pointerout"||tt==="pointerover")&&(yt=Td,St="onPointerLeave",mt="onPointerEnter",_t="pointer"),vt=pt==null?ht:ue(pt),xt=gt==null?ht:ue(gt),ht=new yt(St,_t+"leave",pt,_e,ct),ht.target=vt,ht.relatedTarget=xt,St=null,Wc(ct)===lt&&(yt=new yt(mt,_t+"enter",gt,_e,ct),yt.target=xt,yt.relatedTarget=vt,St=yt),vt=St,pt&&gt)t:{for(yt=pt,mt=gt,_t=0,xt=yt;xt;xt=vf(xt))_t++;for(xt=0,St=mt;St;St=vf(St))xt++;for(;0<_t-xt;)yt=vf(yt),_t--;for(;0<xt-_t;)mt=vf(mt),xt--;for(;_t--;){if(yt===mt||mt!==null&&yt===mt.alternate)break t;yt=vf(yt),mt=vf(mt)}yt=null}else yt=null;pt!==null&&wf(ut,ht,pt,yt,!1),gt!==null&&vt!==null&&wf(ut,vt,gt,yt,!0)}}e:{if(ht=lt?ue(lt):window,pt=ht.nodeName&&ht.nodeName.toLowerCase(),pt==="select"||pt==="input"&&ht.type==="file")var Tt=ve;else if(me(ht))if(we)Tt=Fe;else{Tt=De;var Mt=Ce$1}else(pt=ht.nodeName)&&pt.toLowerCase()==="input"&&(ht.type==="checkbox"||ht.type==="radio")&&(Tt=Ee);if(Tt&&(Tt=Tt(tt,lt))){ne(ut,Tt,_e,ct);break e}Mt&&Mt(tt,ht,lt),tt==="focusout"&&(Mt=ht._wrapperState)&&Mt.controlled&&ht.type==="number"&&cb(ht,"number",ht.value)}switch(Mt=lt?ue(lt):window,tt){case"focusin":(me(Mt)||Mt.contentEditable==="true")&&(Qe=Mt,Re=lt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ut,_e,ct);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ut,_e,ct)}var bt;if(ae)e:{switch(tt){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else ie?ge(tt,_e)&&(Pt="onCompositionEnd"):tt==="keydown"&&_e.keyCode===229&&(Pt="onCompositionStart");Pt&&(de&&_e.locale!=="ko"&&(ie||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&ie&&(bt=nd()):(kd=ct,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Mt=oe(lt,Pt),0<Mt.length&&(Pt=new Ld(Pt,tt,null,_e,ct),ut.push({event:Pt,listeners:Mt}),bt?Pt.data=bt:(bt=he(_e),bt!==null&&(Pt.data=bt)))),(bt=ce?je(tt,_e):ke(tt,_e))&&(lt=oe(lt,"onBeforeInput"),0<lt.length&&(ct=new Ld("onBeforeInput","beforeinput",null,_e,ct),ut.push({event:ct,listeners:lt}),ct.data=bt))}se(ut,_)})}function tf(tt,_,_e){return{instance:tt,listener:_,currentTarget:_e}}function oe(tt,_){for(var _e=_+"Capture",nt=[];tt!==null;){var rt=tt,it=rt.stateNode;rt.tag===5&&it!==null&&(rt=it,it=Kb(tt,_e),it!=null&&nt.unshift(tf(tt,it,rt)),it=Kb(tt,_),it!=null&&nt.push(tf(tt,it,rt))),tt=tt.return}return nt}function vf(tt){if(tt===null)return null;do tt=tt.return;while(tt&&tt.tag!==5);return tt||null}function wf(tt,_,_e,nt,rt){for(var it=_._reactName,ot=[];_e!==null&&_e!==nt;){var st=_e,at=st.alternate,lt=st.stateNode;if(at!==null&&at===nt)break;st.tag===5&&lt!==null&&(st=lt,rt?(at=Kb(_e,it),at!=null&&ot.unshift(tf(_e,at,st))):rt||(at=Kb(_e,it),at!=null&&ot.push(tf(_e,at,st)))),_e=_e.return}ot.length!==0&&tt.push({event:_,listeners:ot})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(tt){return(typeof tt=="string"?tt:""+tt).replace(xf,`
`).replace(yf,"")}function Af(tt,_,_e){if(_=zf(_),zf(tt)!==_&&_e)throw Error(p$3(425))}function Bf(){}var Cf=null,Df=null;function Ef(tt,_){return tt==="textarea"||tt==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(tt){return Hf.resolve(null).then(tt).catch(If)}:Ff;function If(tt){setTimeout(function(){throw tt})}function Kf(tt,_){var _e=_,nt=0;do{var rt=_e.nextSibling;if(tt.removeChild(_e),rt&&rt.nodeType===8)if(_e=rt.data,_e==="/$"){if(nt===0){tt.removeChild(rt),bd(_);return}nt--}else _e!=="$"&&_e!=="$?"&&_e!=="$!"||nt++;_e=rt}while(_e);bd(_)}function Lf(tt){for(;tt!=null;tt=tt.nextSibling){var _=tt.nodeType;if(_===1||_===3)break;if(_===8){if(_=tt.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return tt}function Mf(tt){tt=tt.previousSibling;for(var _=0;tt;){if(tt.nodeType===8){var _e=tt.data;if(_e==="$"||_e==="$!"||_e==="$?"){if(_===0)return tt;_--}else _e==="/$"&&_++}tt=tt.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(tt){var _=tt[Of];if(_)return _;for(var _e=tt.parentNode;_e;){if(_=_e[uf]||_e[Of]){if(_e=_.alternate,_.child!==null||_e!==null&&_e.child!==null)for(tt=Mf(tt);tt!==null;){if(_e=tt[Of])return _e;tt=Mf(tt)}return _}tt=_e,_e=tt.parentNode}return null}function Cb(tt){return tt=tt[Of]||tt[uf],!tt||tt.tag!==5&&tt.tag!==6&&tt.tag!==13&&tt.tag!==3?null:tt}function ue(tt){if(tt.tag===5||tt.tag===6)return tt.stateNode;throw Error(p$3(33))}function Db(tt){return tt[Pf]||null}var Sf=[],Tf=-1;function Uf(tt){return{current:tt}}function E$1(tt){0>Tf||(tt.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(tt,_){Tf++,Sf[Tf]=tt.current,tt.current=_}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(tt,_){var _e=tt.type.contextTypes;if(!_e)return Vf;var nt=tt.stateNode;if(nt&&nt.__reactInternalMemoizedUnmaskedChildContext===_)return nt.__reactInternalMemoizedMaskedChildContext;var rt={},it;for(it in _e)rt[it]=_[it];return nt&&(tt=tt.stateNode,tt.__reactInternalMemoizedUnmaskedChildContext=_,tt.__reactInternalMemoizedMaskedChildContext=rt),rt}function Zf(tt){return tt=tt.childContextTypes,tt!=null}function $f(){E$1(Wf),E$1(H$2)}function ag(tt,_,_e){if(H$2.current!==Vf)throw Error(p$3(168));G$1(H$2,_),G$1(Wf,_e)}function bg(tt,_,_e){var nt=tt.stateNode;if(_=_.childContextTypes,typeof nt.getChildContext!="function")return _e;nt=nt.getChildContext();for(var rt in nt)if(!(rt in _))throw Error(p$3(108,Ra(tt)||"Unknown",rt));return A$1({},_e,nt)}function cg(tt){return tt=(tt=tt.stateNode)&&tt.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G$1(H$2,tt),G$1(Wf,Wf.current),!0}function dg(tt,_,_e){var nt=tt.stateNode;if(!nt)throw Error(p$3(169));_e?(tt=bg(tt,_,Xf),nt.__reactInternalMemoizedMergedChildContext=tt,E$1(Wf),E$1(H$2),G$1(H$2,tt)):E$1(Wf),G$1(Wf,_e)}var eg=null,fg=!1,gg=!1;function hg(tt){eg===null?eg=[tt]:eg.push(tt)}function ig(tt){fg=!0,hg(tt)}function jg(){if(!gg&&eg!==null){gg=!0;var tt=0,_=C$1;try{var _e=eg;for(C$1=1;tt<_e.length;tt++){var nt=_e[tt];do nt=nt(!0);while(nt!==null)}eg=null,fg=!1}catch(rt){throw eg!==null&&(eg=eg.slice(tt+1)),ac(fc,jg),rt}finally{C$1=_,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(tt,_){kg[lg++]=ng,kg[lg++]=mg,mg=tt,ng=_}function ug(tt,_,_e){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=tt;var nt=rg;tt=sg;var rt=32-oc(nt)-1;nt&=~(1<<rt),_e+=1;var it=32-oc(_)+rt;if(30<it){var ot=rt-rt%5;it=(nt&(1<<ot)-1).toString(32),nt>>=ot,rt-=ot,rg=1<<32-oc(_)+rt|_e<<rt|nt,sg=it+tt}else rg=1<<it|_e<<rt|nt,sg=tt}function vg(tt){tt.return!==null&&(tg(tt,1),ug(tt,1,0))}function wg(tt){for(;tt===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;tt===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$3=!1,zg=null;function Ag(tt,_){var _e=Bg(5,null,null,0);_e.elementType="DELETED",_e.stateNode=_,_e.return=tt,_=tt.deletions,_===null?(tt.deletions=[_e],tt.flags|=16):_.push(_e)}function Cg(tt,_){switch(tt.tag){case 5:var _e=tt.type;return _=_.nodeType!==1||_e.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(tt.stateNode=_,xg=tt,yg=Lf(_.firstChild),!0):!1;case 6:return _=tt.pendingProps===""||_.nodeType!==3?null:_,_!==null?(tt.stateNode=_,xg=tt,yg=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(_e=qg!==null?{id:rg,overflow:sg}:null,tt.memoizedState={dehydrated:_,treeContext:_e,retryLane:1073741824},_e=Bg(18,null,null,0),_e.stateNode=_,_e.return=tt,tt.child=_e,xg=tt,yg=null,!0):!1;default:return!1}}function Dg(tt){return(tt.mode&1)!==0&&(tt.flags&128)===0}function Eg(tt){if(I$3){var _=yg;if(_){var _e=_;if(!Cg(tt,_)){if(Dg(tt))throw Error(p$3(418));_=Lf(_e.nextSibling);var nt=xg;_&&Cg(tt,_)?Ag(nt,_e):(tt.flags=tt.flags&-4097|2,I$3=!1,xg=tt)}}else{if(Dg(tt))throw Error(p$3(418));tt.flags=tt.flags&-4097|2,I$3=!1,xg=tt}}}function Fg(tt){for(tt=tt.return;tt!==null&&tt.tag!==5&&tt.tag!==3&&tt.tag!==13;)tt=tt.return;xg=tt}function Gg(tt){if(tt!==xg)return!1;if(!I$3)return Fg(tt),I$3=!0,!1;var _;if((_=tt.tag!==3)&&!(_=tt.tag!==5)&&(_=tt.type,_=_!=="head"&&_!=="body"&&!Ef(tt.type,tt.memoizedProps)),_&&(_=yg)){if(Dg(tt))throw Hg(),Error(p$3(418));for(;_;)Ag(tt,_),_=Lf(_.nextSibling)}if(Fg(tt),tt.tag===13){if(tt=tt.memoizedState,tt=tt!==null?tt.dehydrated:null,!tt)throw Error(p$3(317));e:{for(tt=tt.nextSibling,_=0;tt;){if(tt.nodeType===8){var _e=tt.data;if(_e==="/$"){if(_===0){yg=Lf(tt.nextSibling);break e}_--}else _e!=="$"&&_e!=="$!"&&_e!=="$?"||_++}tt=tt.nextSibling}yg=null}}else yg=xg?Lf(tt.stateNode.nextSibling):null;return!0}function Hg(){for(var tt=yg;tt;)tt=Lf(tt.nextSibling)}function Ig(){yg=xg=null,I$3=!1}function Jg(tt){zg===null?zg=[tt]:zg.push(tt)}var Kg=ua.ReactCurrentBatchConfig;function Lg(tt,_){if(tt&&tt.defaultProps){_=A$1({},_),tt=tt.defaultProps;for(var _e in tt)_[_e]===void 0&&(_[_e]=tt[_e]);return _}return _}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(tt){var _=Mg.current;E$1(Mg),tt._currentValue=_}function Sg(tt,_,_e){for(;tt!==null;){var nt=tt.alternate;if((tt.childLanes&_)!==_?(tt.childLanes|=_,nt!==null&&(nt.childLanes|=_)):nt!==null&&(nt.childLanes&_)!==_&&(nt.childLanes|=_),tt===_e)break;tt=tt.return}}function Tg(tt,_){Ng=tt,Pg=Og=null,tt=tt.dependencies,tt!==null&&tt.firstContext!==null&&(tt.lanes&_&&(Ug=!0),tt.firstContext=null)}function Vg(tt){var _=tt._currentValue;if(Pg!==tt)if(tt={context:tt,memoizedValue:_,next:null},Og===null){if(Ng===null)throw Error(p$3(308));Og=tt,Ng.dependencies={lanes:0,firstContext:tt}}else Og=Og.next=tt;return _}var Wg=null;function Xg(tt){Wg===null?Wg=[tt]:Wg.push(tt)}function Yg(tt,_,_e,nt){var rt=_.interleaved;return rt===null?(_e.next=_e,Xg(_)):(_e.next=rt.next,rt.next=_e),_.interleaved=_e,Zg(tt,nt)}function Zg(tt,_){tt.lanes|=_;var _e=tt.alternate;for(_e!==null&&(_e.lanes|=_),_e=tt,tt=tt.return;tt!==null;)tt.childLanes|=_,_e=tt.alternate,_e!==null&&(_e.childLanes|=_),_e=tt,tt=tt.return;return _e.tag===3?_e.stateNode:null}var $g=!1;function ah(tt){tt.updateQueue={baseState:tt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(tt,_){tt=tt.updateQueue,_.updateQueue===tt&&(_.updateQueue={baseState:tt.baseState,firstBaseUpdate:tt.firstBaseUpdate,lastBaseUpdate:tt.lastBaseUpdate,shared:tt.shared,effects:tt.effects})}function ch(tt,_){return{eventTime:tt,lane:_,tag:0,payload:null,callback:null,next:null}}function dh(tt,_,_e){var nt=tt.updateQueue;if(nt===null)return null;if(nt=nt.shared,K&2){var rt=nt.pending;return rt===null?_.next=_:(_.next=rt.next,rt.next=_),nt.pending=_,Zg(tt,_e)}return rt=nt.interleaved,rt===null?(_.next=_,Xg(nt)):(_.next=rt.next,rt.next=_),nt.interleaved=_,Zg(tt,_e)}function eh(tt,_,_e){if(_=_.updateQueue,_!==null&&(_=_.shared,(_e&4194240)!==0)){var nt=_.lanes;nt&=tt.pendingLanes,_e|=nt,_.lanes=_e,Cc(tt,_e)}}function fh(tt,_){var _e=tt.updateQueue,nt=tt.alternate;if(nt!==null&&(nt=nt.updateQueue,_e===nt)){var rt=null,it=null;if(_e=_e.firstBaseUpdate,_e!==null){do{var ot={eventTime:_e.eventTime,lane:_e.lane,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null};it===null?rt=it=ot:it=it.next=ot,_e=_e.next}while(_e!==null);it===null?rt=it=_:it=it.next=_}else rt=it=_;_e={baseState:nt.baseState,firstBaseUpdate:rt,lastBaseUpdate:it,shared:nt.shared,effects:nt.effects},tt.updateQueue=_e;return}tt=_e.lastBaseUpdate,tt===null?_e.firstBaseUpdate=_:tt.next=_,_e.lastBaseUpdate=_}function gh(tt,_,_e,nt){var rt=tt.updateQueue;$g=!1;var it=rt.firstBaseUpdate,ot=rt.lastBaseUpdate,st=rt.shared.pending;if(st!==null){rt.shared.pending=null;var at=st,lt=at.next;at.next=null,ot===null?it=lt:ot.next=lt,ot=at;var ct=tt.alternate;ct!==null&&(ct=ct.updateQueue,st=ct.lastBaseUpdate,st!==ot&&(st===null?ct.firstBaseUpdate=lt:st.next=lt,ct.lastBaseUpdate=at))}if(it!==null){var ut=rt.baseState;ot=0,ct=lt=at=null,st=it;do{var ht=st.lane,pt=st.eventTime;if((nt&ht)===ht){ct!==null&&(ct=ct.next={eventTime:pt,lane:0,tag:st.tag,payload:st.payload,callback:st.callback,next:null});e:{var gt=tt,yt=st;switch(ht=_,pt=_e,yt.tag){case 1:if(gt=yt.payload,typeof gt=="function"){ut=gt.call(pt,ut,ht);break e}ut=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=yt.payload,ht=typeof gt=="function"?gt.call(pt,ut,ht):gt,ht==null)break e;ut=A$1({},ut,ht);break e;case 2:$g=!0}}st.callback!==null&&st.lane!==0&&(tt.flags|=64,ht=rt.effects,ht===null?rt.effects=[st]:ht.push(st))}else pt={eventTime:pt,lane:ht,tag:st.tag,payload:st.payload,callback:st.callback,next:null},ct===null?(lt=ct=pt,at=ut):ct=ct.next=pt,ot|=ht;if(st=st.next,st===null){if(st=rt.shared.pending,st===null)break;ht=st,st=ht.next,ht.next=null,rt.lastBaseUpdate=ht,rt.shared.pending=null}}while(1);if(ct===null&&(at=ut),rt.baseState=at,rt.firstBaseUpdate=lt,rt.lastBaseUpdate=ct,_=rt.shared.interleaved,_!==null){rt=_;do ot|=rt.lane,rt=rt.next;while(rt!==_)}else it===null&&(rt.shared.lanes=0);hh|=ot,tt.lanes=ot,tt.memoizedState=ut}}function ih(tt,_,_e){if(tt=_.effects,_.effects=null,tt!==null)for(_=0;_<tt.length;_++){var nt=tt[_],rt=nt.callback;if(rt!==null){if(nt.callback=null,nt=_e,typeof rt!="function")throw Error(p$3(191,rt));rt.call(nt)}}}var jh=new aa.Component().refs;function kh(tt,_,_e,nt){_=tt.memoizedState,_e=_e(nt,_),_e=_e==null?_:A$1({},_,_e),tt.memoizedState=_e,tt.lanes===0&&(tt.updateQueue.baseState=_e)}var nh={isMounted:function(tt){return(tt=tt._reactInternals)?Vb(tt)===tt:!1},enqueueSetState:function(tt,_,_e){tt=tt._reactInternals;var nt=L$2(),rt=lh(tt),it=ch(nt,rt);it.payload=_,_e!=null&&(it.callback=_e),_=dh(tt,it,rt),_!==null&&(mh(_,tt,rt,nt),eh(_,tt,rt))},enqueueReplaceState:function(tt,_,_e){tt=tt._reactInternals;var nt=L$2(),rt=lh(tt),it=ch(nt,rt);it.tag=1,it.payload=_,_e!=null&&(it.callback=_e),_=dh(tt,it,rt),_!==null&&(mh(_,tt,rt,nt),eh(_,tt,rt))},enqueueForceUpdate:function(tt,_){tt=tt._reactInternals;var _e=L$2(),nt=lh(tt),rt=ch(_e,nt);rt.tag=2,_!=null&&(rt.callback=_),_=dh(tt,rt,nt),_!==null&&(mh(_,tt,nt,_e),eh(_,tt,nt))}};function oh(tt,_,_e,nt,rt,it,ot){return tt=tt.stateNode,typeof tt.shouldComponentUpdate=="function"?tt.shouldComponentUpdate(nt,it,ot):_.prototype&&_.prototype.isPureReactComponent?!Ie(_e,nt)||!Ie(rt,it):!0}function ph(tt,_,_e){var nt=!1,rt=Vf,it=_.contextType;return typeof it=="object"&&it!==null?it=Vg(it):(rt=Zf(_)?Xf:H$2.current,nt=_.contextTypes,it=(nt=nt!=null)?Yf(tt,rt):Vf),_=new _(_e,it),tt.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=nh,tt.stateNode=_,_._reactInternals=tt,nt&&(tt=tt.stateNode,tt.__reactInternalMemoizedUnmaskedChildContext=rt,tt.__reactInternalMemoizedMaskedChildContext=it),_}function qh(tt,_,_e,nt){tt=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(_e,nt),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(_e,nt),_.state!==tt&&nh.enqueueReplaceState(_,_.state,null)}function rh(tt,_,_e,nt){var rt=tt.stateNode;rt.props=_e,rt.state=tt.memoizedState,rt.refs=jh,ah(tt);var it=_.contextType;typeof it=="object"&&it!==null?rt.context=Vg(it):(it=Zf(_)?Xf:H$2.current,rt.context=Yf(tt,it)),rt.state=tt.memoizedState,it=_.getDerivedStateFromProps,typeof it=="function"&&(kh(tt,_,it,_e),rt.state=tt.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof rt.getSnapshotBeforeUpdate=="function"||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(_=rt.state,typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount(),_!==rt.state&&nh.enqueueReplaceState(rt,rt.state,null),gh(tt,_e,rt,nt),rt.state=tt.memoizedState),typeof rt.componentDidMount=="function"&&(tt.flags|=4194308)}function sh(tt,_,_e){if(tt=_e.ref,tt!==null&&typeof tt!="function"&&typeof tt!="object"){if(_e._owner){if(_e=_e._owner,_e){if(_e.tag!==1)throw Error(p$3(309));var nt=_e.stateNode}if(!nt)throw Error(p$3(147,tt));var rt=nt,it=""+tt;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===it?_.ref:(_=function(ot){var st=rt.refs;st===jh&&(st=rt.refs={}),ot===null?delete st[it]:st[it]=ot},_._stringRef=it,_)}if(typeof tt!="string")throw Error(p$3(284));if(!_e._owner)throw Error(p$3(290,tt))}return tt}function th(tt,_){throw tt=Object.prototype.toString.call(_),Error(p$3(31,tt==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":tt))}function uh(tt){var _=tt._init;return _(tt._payload)}function vh(tt){function _(mt,_t){if(tt){var xt=mt.deletions;xt===null?(mt.deletions=[_t],mt.flags|=16):xt.push(_t)}}function _e(mt,_t){if(!tt)return null;for(;_t!==null;)_(mt,_t),_t=_t.sibling;return null}function nt(mt,_t){for(mt=new Map;_t!==null;)_t.key!==null?mt.set(_t.key,_t):mt.set(_t.index,_t),_t=_t.sibling;return mt}function rt(mt,_t){return mt=wh(mt,_t),mt.index=0,mt.sibling=null,mt}function it(mt,_t,xt){return mt.index=xt,tt?(xt=mt.alternate,xt!==null?(xt=xt.index,xt<_t?(mt.flags|=2,_t):xt):(mt.flags|=2,_t)):(mt.flags|=1048576,_t)}function ot(mt){return tt&&mt.alternate===null&&(mt.flags|=2),mt}function st(mt,_t,xt,St){return _t===null||_t.tag!==6?(_t=xh(xt,mt.mode,St),_t.return=mt,_t):(_t=rt(_t,xt),_t.return=mt,_t)}function at(mt,_t,xt,St){var Tt=xt.type;return Tt===ya?ct(mt,_t,xt.props.children,St,xt.key):_t!==null&&(_t.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===Ha&&uh(Tt)===_t.type)?(St=rt(_t,xt.props),St.ref=sh(mt,_t,xt),St.return=mt,St):(St=yh(xt.type,xt.key,xt.props,null,mt.mode,St),St.ref=sh(mt,_t,xt),St.return=mt,St)}function lt(mt,_t,xt,St){return _t===null||_t.tag!==4||_t.stateNode.containerInfo!==xt.containerInfo||_t.stateNode.implementation!==xt.implementation?(_t=zh(xt,mt.mode,St),_t.return=mt,_t):(_t=rt(_t,xt.children||[]),_t.return=mt,_t)}function ct(mt,_t,xt,St,Tt){return _t===null||_t.tag!==7?(_t=Ah(xt,mt.mode,St,Tt),_t.return=mt,_t):(_t=rt(_t,xt),_t.return=mt,_t)}function ut(mt,_t,xt){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return _t=xh(""+_t,mt.mode,xt),_t.return=mt,_t;if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case va:return xt=yh(_t.type,_t.key,_t.props,null,mt.mode,xt),xt.ref=sh(mt,null,_t),xt.return=mt,xt;case wa:return _t=zh(_t,mt.mode,xt),_t.return=mt,_t;case Ha:var St=_t._init;return ut(mt,St(_t._payload),xt)}if(eb(_t)||Ka(_t))return _t=Ah(_t,mt.mode,xt,null),_t.return=mt,_t;th(mt,_t)}return null}function ht(mt,_t,xt,St){var Tt=_t!==null?_t.key:null;if(typeof xt=="string"&&xt!==""||typeof xt=="number")return Tt!==null?null:st(mt,_t,""+xt,St);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:return xt.key===Tt?at(mt,_t,xt,St):null;case wa:return xt.key===Tt?lt(mt,_t,xt,St):null;case Ha:return Tt=xt._init,ht(mt,_t,Tt(xt._payload),St)}if(eb(xt)||Ka(xt))return Tt!==null?null:ct(mt,_t,xt,St,null);th(mt,xt)}return null}function pt(mt,_t,xt,St,Tt){if(typeof St=="string"&&St!==""||typeof St=="number")return mt=mt.get(xt)||null,st(_t,mt,""+St,Tt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case va:return mt=mt.get(St.key===null?xt:St.key)||null,at(_t,mt,St,Tt);case wa:return mt=mt.get(St.key===null?xt:St.key)||null,lt(_t,mt,St,Tt);case Ha:var Mt=St._init;return pt(mt,_t,xt,Mt(St._payload),Tt)}if(eb(St)||Ka(St))return mt=mt.get(xt)||null,ct(_t,mt,St,Tt,null);th(_t,St)}return null}function gt(mt,_t,xt,St){for(var Tt=null,Mt=null,bt=_t,Pt=_t=0,wt=null;bt!==null&&Pt<xt.length;Pt++){bt.index>Pt?(wt=bt,bt=null):wt=bt.sibling;var Bt=ht(mt,bt,xt[Pt],St);if(Bt===null){bt===null&&(bt=wt);break}tt&&bt&&Bt.alternate===null&&_(mt,bt),_t=it(Bt,_t,Pt),Mt===null?Tt=Bt:Mt.sibling=Bt,Mt=Bt,bt=wt}if(Pt===xt.length)return _e(mt,bt),I$3&&tg(mt,Pt),Tt;if(bt===null){for(;Pt<xt.length;Pt++)bt=ut(mt,xt[Pt],St),bt!==null&&(_t=it(bt,_t,Pt),Mt===null?Tt=bt:Mt.sibling=bt,Mt=bt);return I$3&&tg(mt,Pt),Tt}for(bt=nt(mt,bt);Pt<xt.length;Pt++)wt=pt(bt,mt,Pt,xt[Pt],St),wt!==null&&(tt&&wt.alternate!==null&&bt.delete(wt.key===null?Pt:wt.key),_t=it(wt,_t,Pt),Mt===null?Tt=wt:Mt.sibling=wt,Mt=wt);return tt&&bt.forEach(function(Ot){return _(mt,Ot)}),I$3&&tg(mt,Pt),Tt}function yt(mt,_t,xt,St){var Tt=Ka(xt);if(typeof Tt!="function")throw Error(p$3(150));if(xt=Tt.call(xt),xt==null)throw Error(p$3(151));for(var Mt=Tt=null,bt=_t,Pt=_t=0,wt=null,Bt=xt.next();bt!==null&&!Bt.done;Pt++,Bt=xt.next()){bt.index>Pt?(wt=bt,bt=null):wt=bt.sibling;var Ot=ht(mt,bt,Bt.value,St);if(Ot===null){bt===null&&(bt=wt);break}tt&&bt&&Ot.alternate===null&&_(mt,bt),_t=it(Ot,_t,Pt),Mt===null?Tt=Ot:Mt.sibling=Ot,Mt=Ot,bt=wt}if(Bt.done)return _e(mt,bt),I$3&&tg(mt,Pt),Tt;if(bt===null){for(;!Bt.done;Pt++,Bt=xt.next())Bt=ut(mt,Bt.value,St),Bt!==null&&(_t=it(Bt,_t,Pt),Mt===null?Tt=Bt:Mt.sibling=Bt,Mt=Bt);return I$3&&tg(mt,Pt),Tt}for(bt=nt(mt,bt);!Bt.done;Pt++,Bt=xt.next())Bt=pt(bt,mt,Pt,Bt.value,St),Bt!==null&&(tt&&Bt.alternate!==null&&bt.delete(Bt.key===null?Pt:Bt.key),_t=it(Bt,_t,Pt),Mt===null?Tt=Bt:Mt.sibling=Bt,Mt=Bt);return tt&&bt.forEach(function(Ut){return _(mt,Ut)}),I$3&&tg(mt,Pt),Tt}function vt(mt,_t,xt,St){if(typeof xt=="object"&&xt!==null&&xt.type===ya&&xt.key===null&&(xt=xt.props.children),typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:e:{for(var Tt=xt.key,Mt=_t;Mt!==null;){if(Mt.key===Tt){if(Tt=xt.type,Tt===ya){if(Mt.tag===7){_e(mt,Mt.sibling),_t=rt(Mt,xt.props.children),_t.return=mt,mt=_t;break e}}else if(Mt.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===Ha&&uh(Tt)===Mt.type){_e(mt,Mt.sibling),_t=rt(Mt,xt.props),_t.ref=sh(mt,Mt,xt),_t.return=mt,mt=_t;break e}_e(mt,Mt);break}else _(mt,Mt);Mt=Mt.sibling}xt.type===ya?(_t=Ah(xt.props.children,mt.mode,St,xt.key),_t.return=mt,mt=_t):(St=yh(xt.type,xt.key,xt.props,null,mt.mode,St),St.ref=sh(mt,_t,xt),St.return=mt,mt=St)}return ot(mt);case wa:e:{for(Mt=xt.key;_t!==null;){if(_t.key===Mt)if(_t.tag===4&&_t.stateNode.containerInfo===xt.containerInfo&&_t.stateNode.implementation===xt.implementation){_e(mt,_t.sibling),_t=rt(_t,xt.children||[]),_t.return=mt,mt=_t;break e}else{_e(mt,_t);break}else _(mt,_t);_t=_t.sibling}_t=zh(xt,mt.mode,St),_t.return=mt,mt=_t}return ot(mt);case Ha:return Mt=xt._init,vt(mt,_t,Mt(xt._payload),St)}if(eb(xt))return gt(mt,_t,xt,St);if(Ka(xt))return yt(mt,_t,xt,St);th(mt,xt)}return typeof xt=="string"&&xt!==""||typeof xt=="number"?(xt=""+xt,_t!==null&&_t.tag===6?(_e(mt,_t.sibling),_t=rt(_t,xt),_t.return=mt,mt=_t):(_e(mt,_t),_t=xh(xt,mt.mode,St),_t.return=mt,mt=_t),ot(mt)):_e(mt,_t)}return vt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(tt){if(tt===Dh)throw Error(p$3(174));return tt}function Ih(tt,_){switch(G$1(Gh,_),G$1(Fh,tt),G$1(Eh,Dh),tt=_.nodeType,tt){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:lb(null,"");break;default:tt=tt===8?_.parentNode:_,_=tt.namespaceURI||null,tt=tt.tagName,_=lb(_,tt)}E$1(Eh),G$1(Eh,_)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(tt){Hh(Gh.current);var _=Hh(Eh.current),_e=lb(_,tt.type);_!==_e&&(G$1(Fh,tt),G$1(Eh,_e))}function Lh(tt){Fh.current===tt&&(E$1(Eh),E$1(Fh))}var M$2=Uf(0);function Mh(tt){for(var _=tt;_!==null;){if(_.tag===13){var _e=_.memoizedState;if(_e!==null&&(_e=_e.dehydrated,_e===null||_e.data==="$?"||_e.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===tt)break;for(;_.sibling===null;){if(_.return===null||_.return===tt)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Nh=[];function Oh(){for(var tt=0;tt<Nh.length;tt++)Nh[tt]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$2=null,O$1=null,P$1=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$1(){throw Error(p$3(321))}function Wh(tt,_){if(_===null)return!1;for(var _e=0;_e<_.length&&_e<tt.length;_e++)if(!He(tt[_e],_[_e]))return!1;return!0}function Xh(tt,_,_e,nt,rt,it){if(Rh=it,N$2=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Ph.current=tt===null||tt.memoizedState===null?Yh:Zh,tt=_e(nt,rt),Th){it=0;do{if(Th=!1,Uh=0,25<=it)throw Error(p$3(301));it+=1,P$1=O$1=null,_.updateQueue=null,Ph.current=$h,tt=_e(nt,rt)}while(Th)}if(Ph.current=ai,_=O$1!==null&&O$1.next!==null,Rh=0,P$1=O$1=N$2=null,Sh=!1,_)throw Error(p$3(300));return tt}function bi(){var tt=Uh!==0;return Uh=0,tt}function ci(){var tt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$2.memoizedState=P$1=tt:P$1=P$1.next=tt,P$1}function di(){if(O$1===null){var tt=N$2.alternate;tt=tt!==null?tt.memoizedState:null}else tt=O$1.next;var _=P$1===null?N$2.memoizedState:P$1.next;if(_!==null)P$1=_,O$1=tt;else{if(tt===null)throw Error(p$3(310));O$1=tt,tt={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$2.memoizedState=P$1=tt:P$1=P$1.next=tt}return P$1}function ei(tt,_){return typeof _=="function"?_(tt):_}function fi(tt){var _=di(),_e=_.queue;if(_e===null)throw Error(p$3(311));_e.lastRenderedReducer=tt;var nt=O$1,rt=nt.baseQueue,it=_e.pending;if(it!==null){if(rt!==null){var ot=rt.next;rt.next=it.next,it.next=ot}nt.baseQueue=rt=it,_e.pending=null}if(rt!==null){it=rt.next,nt=nt.baseState;var st=ot=null,at=null,lt=it;do{var ct=lt.lane;if((Rh&ct)===ct)at!==null&&(at=at.next={lane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),nt=lt.hasEagerState?lt.eagerState:tt(nt,lt.action);else{var ut={lane:ct,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null};at===null?(st=at=ut,ot=nt):at=at.next=ut,N$2.lanes|=ct,hh|=ct}lt=lt.next}while(lt!==null&&lt!==it);at===null?ot=nt:at.next=st,He(nt,_.memoizedState)||(Ug=!0),_.memoizedState=nt,_.baseState=ot,_.baseQueue=at,_e.lastRenderedState=nt}if(tt=_e.interleaved,tt!==null){rt=tt;do it=rt.lane,N$2.lanes|=it,hh|=it,rt=rt.next;while(rt!==tt)}else rt===null&&(_e.lanes=0);return[_.memoizedState,_e.dispatch]}function gi(tt){var _=di(),_e=_.queue;if(_e===null)throw Error(p$3(311));_e.lastRenderedReducer=tt;var nt=_e.dispatch,rt=_e.pending,it=_.memoizedState;if(rt!==null){_e.pending=null;var ot=rt=rt.next;do it=tt(it,ot.action),ot=ot.next;while(ot!==rt);He(it,_.memoizedState)||(Ug=!0),_.memoizedState=it,_.baseQueue===null&&(_.baseState=it),_e.lastRenderedState=it}return[it,nt]}function hi(){}function ii(tt,_){var _e=N$2,nt=di(),rt=_(),it=!He(nt.memoizedState,rt);if(it&&(nt.memoizedState=rt,Ug=!0),nt=nt.queue,ji(ki.bind(null,_e,nt,tt),[tt]),nt.getSnapshot!==_||it||P$1!==null&&P$1.memoizedState.tag&1){if(_e.flags|=2048,li(9,mi.bind(null,_e,nt,rt,_),void 0,null),R$1===null)throw Error(p$3(349));Rh&30||ni(_e,_,rt)}return rt}function ni(tt,_,_e){tt.flags|=16384,tt={getSnapshot:_,value:_e},_=N$2.updateQueue,_===null?(_={lastEffect:null,stores:null},N$2.updateQueue=_,_.stores=[tt]):(_e=_.stores,_e===null?_.stores=[tt]:_e.push(tt))}function mi(tt,_,_e,nt){_.value=_e,_.getSnapshot=nt,oi(_)&&pi(tt)}function ki(tt,_,_e){return _e(function(){oi(_)&&pi(tt)})}function oi(tt){var _=tt.getSnapshot;tt=tt.value;try{var _e=_();return!He(tt,_e)}catch{return!0}}function pi(tt){var _=Zg(tt,1);_!==null&&mh(_,tt,1,-1)}function qi(tt){var _=ci();return typeof tt=="function"&&(tt=tt()),_.memoizedState=_.baseState=tt,tt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:tt},_.queue=tt,tt=tt.dispatch=ri.bind(null,N$2,tt),[_.memoizedState,tt]}function li(tt,_,_e,nt){return tt={tag:tt,create:_,destroy:_e,deps:nt,next:null},_=N$2.updateQueue,_===null?(_={lastEffect:null,stores:null},N$2.updateQueue=_,_.lastEffect=tt.next=tt):(_e=_.lastEffect,_e===null?_.lastEffect=tt.next=tt:(nt=_e.next,_e.next=tt,tt.next=nt,_.lastEffect=tt)),tt}function si(){return di().memoizedState}function ti(tt,_,_e,nt){var rt=ci();N$2.flags|=tt,rt.memoizedState=li(1|_,_e,void 0,nt===void 0?null:nt)}function ui(tt,_,_e,nt){var rt=di();nt=nt===void 0?null:nt;var it=void 0;if(O$1!==null){var ot=O$1.memoizedState;if(it=ot.destroy,nt!==null&&Wh(nt,ot.deps)){rt.memoizedState=li(_,_e,it,nt);return}}N$2.flags|=tt,rt.memoizedState=li(1|_,_e,it,nt)}function vi(tt,_){return ti(8390656,8,tt,_)}function ji(tt,_){return ui(2048,8,tt,_)}function wi(tt,_){return ui(4,2,tt,_)}function xi(tt,_){return ui(4,4,tt,_)}function yi(tt,_){if(typeof _=="function")return tt=tt(),_(tt),function(){_(null)};if(_!=null)return tt=tt(),_.current=tt,function(){_.current=null}}function zi(tt,_,_e){return _e=_e!=null?_e.concat([tt]):null,ui(4,4,yi.bind(null,_,tt),_e)}function Ai(){}function Bi(tt,_){var _e=di();_=_===void 0?null:_;var nt=_e.memoizedState;return nt!==null&&_!==null&&Wh(_,nt[1])?nt[0]:(_e.memoizedState=[tt,_],tt)}function Ci(tt,_){var _e=di();_=_===void 0?null:_;var nt=_e.memoizedState;return nt!==null&&_!==null&&Wh(_,nt[1])?nt[0]:(tt=tt(),_e.memoizedState=[tt,_],tt)}function Di(tt,_,_e){return Rh&21?(He(_e,_)||(_e=yc(),N$2.lanes|=_e,hh|=_e,tt.baseState=!0),_):(tt.baseState&&(tt.baseState=!1,Ug=!0),tt.memoizedState=_e)}function Ei(tt,_){var _e=C$1;C$1=_e!==0&&4>_e?_e:4,tt(!0);var nt=Qh.transition;Qh.transition={};try{tt(!1),_()}finally{C$1=_e,Qh.transition=nt}}function Fi(){return di().memoizedState}function Gi(tt,_,_e){var nt=lh(tt);if(_e={lane:nt,action:_e,hasEagerState:!1,eagerState:null,next:null},Hi(tt))Ii(_,_e);else if(_e=Yg(tt,_,_e,nt),_e!==null){var rt=L$2();mh(_e,tt,nt,rt),Ji(_e,_,nt)}}function ri(tt,_,_e){var nt=lh(tt),rt={lane:nt,action:_e,hasEagerState:!1,eagerState:null,next:null};if(Hi(tt))Ii(_,rt);else{var it=tt.alternate;if(tt.lanes===0&&(it===null||it.lanes===0)&&(it=_.lastRenderedReducer,it!==null))try{var ot=_.lastRenderedState,st=it(ot,_e);if(rt.hasEagerState=!0,rt.eagerState=st,He(st,ot)){var at=_.interleaved;at===null?(rt.next=rt,Xg(_)):(rt.next=at.next,at.next=rt),_.interleaved=rt;return}}catch{}finally{}_e=Yg(tt,_,rt,nt),_e!==null&&(rt=L$2(),mh(_e,tt,nt,rt),Ji(_e,_,nt))}}function Hi(tt){var _=tt.alternate;return tt===N$2||_!==null&&_===N$2}function Ii(tt,_){Th=Sh=!0;var _e=tt.pending;_e===null?_.next=_:(_.next=_e.next,_e.next=_),tt.pending=_}function Ji(tt,_,_e){if(_e&4194240){var nt=_.lanes;nt&=tt.pendingLanes,_e|=nt,_.lanes=_e,Cc(tt,_e)}}var ai={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(tt,_){return ci().memoizedState=[tt,_===void 0?null:_],tt},useContext:Vg,useEffect:vi,useImperativeHandle:function(tt,_,_e){return _e=_e!=null?_e.concat([tt]):null,ti(4194308,4,yi.bind(null,_,tt),_e)},useLayoutEffect:function(tt,_){return ti(4194308,4,tt,_)},useInsertionEffect:function(tt,_){return ti(4,2,tt,_)},useMemo:function(tt,_){var _e=ci();return _=_===void 0?null:_,tt=tt(),_e.memoizedState=[tt,_],tt},useReducer:function(tt,_,_e){var nt=ci();return _=_e!==void 0?_e(_):_,nt.memoizedState=nt.baseState=_,tt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tt,lastRenderedState:_},nt.queue=tt,tt=tt.dispatch=Gi.bind(null,N$2,tt),[nt.memoizedState,tt]},useRef:function(tt){var _=ci();return tt={current:tt},_.memoizedState=tt},useState:qi,useDebugValue:Ai,useDeferredValue:function(tt){return ci().memoizedState=tt},useTransition:function(){var tt=qi(!1),_=tt[0];return tt=Ei.bind(null,tt[1]),ci().memoizedState=tt,[_,tt]},useMutableSource:function(){},useSyncExternalStore:function(tt,_,_e){var nt=N$2,rt=ci();if(I$3){if(_e===void 0)throw Error(p$3(407));_e=_e()}else{if(_e=_(),R$1===null)throw Error(p$3(349));Rh&30||ni(nt,_,_e)}rt.memoizedState=_e;var it={value:_e,getSnapshot:_};return rt.queue=it,vi(ki.bind(null,nt,it,tt),[tt]),nt.flags|=2048,li(9,mi.bind(null,nt,it,_e,_),void 0,null),_e},useId:function(){var tt=ci(),_=R$1.identifierPrefix;if(I$3){var _e=sg,nt=rg;_e=(nt&~(1<<32-oc(nt)-1)).toString(32)+_e,_=":"+_+"R"+_e,_e=Uh++,0<_e&&(_+="H"+_e.toString(32)),_+=":"}else _e=Vh++,_=":"+_+"r"+_e.toString(32)+":";return tt.memoizedState=_},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(tt){var _=di();return Di(_,O$1.memoizedState,tt)},useTransition:function(){var tt=fi(ei)[0],_=di().memoizedState;return[tt,_]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(tt){var _=di();return O$1===null?_.memoizedState=tt:Di(_,O$1.memoizedState,tt)},useTransition:function(){var tt=gi(ei)[0],_=di().memoizedState;return[tt,_]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(tt,_){try{var _e="",nt=_;do _e+=Pa(nt),nt=nt.return;while(nt);var rt=_e}catch(it){rt=`
Error generating stack: `+it.message+`
`+it.stack}return{value:tt,source:_,stack:rt,digest:null}}function Li(tt,_,_e){return{value:tt,source:null,stack:_e??null,digest:_??null}}function Mi(tt,_){try{console.error(_.value)}catch(_e){setTimeout(function(){throw _e})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(tt,_,_e){_e=ch(-1,_e),_e.tag=3,_e.payload={element:null};var nt=_.value;return _e.callback=function(){Pi||(Pi=!0,Qi=nt),Mi(tt,_)},_e}function Ri(tt,_,_e){_e=ch(-1,_e),_e.tag=3;var nt=tt.type.getDerivedStateFromError;if(typeof nt=="function"){var rt=_.value;_e.payload=function(){return nt(rt)},_e.callback=function(){Mi(tt,_)}}var it=tt.stateNode;return it!==null&&typeof it.componentDidCatch=="function"&&(_e.callback=function(){Mi(tt,_),typeof nt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var ot=_.stack;this.componentDidCatch(_.value,{componentStack:ot!==null?ot:""})}),_e}function Ti(tt,_,_e){var nt=tt.pingCache;if(nt===null){nt=tt.pingCache=new Ni;var rt=new Set;nt.set(_,rt)}else rt=nt.get(_),rt===void 0&&(rt=new Set,nt.set(_,rt));rt.has(_e)||(rt.add(_e),tt=Ui.bind(null,tt,_,_e),_.then(tt,tt))}function Vi(tt){do{var _;if((_=tt.tag===13)&&(_=tt.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return tt;tt=tt.return}while(tt!==null);return null}function Wi(tt,_,_e,nt,rt){return tt.mode&1?(tt.flags|=65536,tt.lanes=rt,tt):(tt===_?tt.flags|=65536:(tt.flags|=128,_e.flags|=131072,_e.flags&=-52805,_e.tag===1&&(_e.alternate===null?_e.tag=17:(_=ch(-1,1),_.tag=2,dh(_e,_,1))),_e.lanes|=1),tt)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(tt,_,_e,nt){_.child=tt===null?Ch(_,null,_e,nt):Bh(_,tt.child,_e,nt)}function Zi(tt,_,_e,nt,rt){_e=_e.render;var it=_.ref;return Tg(_,rt),nt=Xh(tt,_,_e,nt,it,rt),_e=bi(),tt!==null&&!Ug?(_.updateQueue=tt.updateQueue,_.flags&=-2053,tt.lanes&=~rt,$i(tt,_,rt)):(I$3&&_e&&vg(_),_.flags|=1,Yi(tt,_,nt,rt),_.child)}function aj(tt,_,_e,nt,rt){if(tt===null){var it=_e.type;return typeof it=="function"&&!bj(it)&&it.defaultProps===void 0&&_e.compare===null&&_e.defaultProps===void 0?(_.tag=15,_.type=it,cj(tt,_,it,nt,rt)):(tt=yh(_e.type,null,nt,_,_.mode,rt),tt.ref=_.ref,tt.return=_,_.child=tt)}if(it=tt.child,!(tt.lanes&rt)){var ot=it.memoizedProps;if(_e=_e.compare,_e=_e!==null?_e:Ie,_e(ot,nt)&&tt.ref===_.ref)return $i(tt,_,rt)}return _.flags|=1,tt=wh(it,nt),tt.ref=_.ref,tt.return=_,_.child=tt}function cj(tt,_,_e,nt,rt){if(tt!==null){var it=tt.memoizedProps;if(Ie(it,nt)&&tt.ref===_.ref)if(Ug=!1,_.pendingProps=nt=it,(tt.lanes&rt)!==0)tt.flags&131072&&(Ug=!0);else return _.lanes=tt.lanes,$i(tt,_,rt)}return dj(tt,_,_e,nt,rt)}function ej(tt,_,_e){var nt=_.pendingProps,rt=nt.children,it=tt!==null?tt.memoizedState:null;if(nt.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=_e;else{if(!(_e&1073741824))return tt=it!==null?it.baseLanes|_e:_e,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:tt,cachePool:null,transitions:null},_.updateQueue=null,G$1(fj,gj),gj|=tt,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt=it!==null?it.baseLanes:_e,G$1(fj,gj),gj|=nt}else it!==null?(nt=it.baseLanes|_e,_.memoizedState=null):nt=_e,G$1(fj,gj),gj|=nt;return Yi(tt,_,rt,_e),_.child}function hj(tt,_){var _e=_.ref;(tt===null&&_e!==null||tt!==null&&tt.ref!==_e)&&(_.flags|=512,_.flags|=2097152)}function dj(tt,_,_e,nt,rt){var it=Zf(_e)?Xf:H$2.current;return it=Yf(_,it),Tg(_,rt),_e=Xh(tt,_,_e,nt,it,rt),nt=bi(),tt!==null&&!Ug?(_.updateQueue=tt.updateQueue,_.flags&=-2053,tt.lanes&=~rt,$i(tt,_,rt)):(I$3&&nt&&vg(_),_.flags|=1,Yi(tt,_,_e,rt),_.child)}function ij(tt,_,_e,nt,rt){if(Zf(_e)){var it=!0;cg(_)}else it=!1;if(Tg(_,rt),_.stateNode===null)jj(tt,_),ph(_,_e,nt),rh(_,_e,nt,rt),nt=!0;else if(tt===null){var ot=_.stateNode,st=_.memoizedProps;ot.props=st;var at=ot.context,lt=_e.contextType;typeof lt=="object"&&lt!==null?lt=Vg(lt):(lt=Zf(_e)?Xf:H$2.current,lt=Yf(_,lt));var ct=_e.getDerivedStateFromProps,ut=typeof ct=="function"||typeof ot.getSnapshotBeforeUpdate=="function";ut||typeof ot.UNSAFE_componentWillReceiveProps!="function"&&typeof ot.componentWillReceiveProps!="function"||(st!==nt||at!==lt)&&qh(_,ot,nt,lt),$g=!1;var ht=_.memoizedState;ot.state=ht,gh(_,nt,ot,rt),at=_.memoizedState,st!==nt||ht!==at||Wf.current||$g?(typeof ct=="function"&&(kh(_,_e,ct,nt),at=_.memoizedState),(st=$g||oh(_,_e,st,nt,ht,at,lt))?(ut||typeof ot.UNSAFE_componentWillMount!="function"&&typeof ot.componentWillMount!="function"||(typeof ot.componentWillMount=="function"&&ot.componentWillMount(),typeof ot.UNSAFE_componentWillMount=="function"&&ot.UNSAFE_componentWillMount()),typeof ot.componentDidMount=="function"&&(_.flags|=4194308)):(typeof ot.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=nt,_.memoizedState=at),ot.props=nt,ot.state=at,ot.context=lt,nt=st):(typeof ot.componentDidMount=="function"&&(_.flags|=4194308),nt=!1)}else{ot=_.stateNode,bh(tt,_),st=_.memoizedProps,lt=_.type===_.elementType?st:Lg(_.type,st),ot.props=lt,ut=_.pendingProps,ht=ot.context,at=_e.contextType,typeof at=="object"&&at!==null?at=Vg(at):(at=Zf(_e)?Xf:H$2.current,at=Yf(_,at));var pt=_e.getDerivedStateFromProps;(ct=typeof pt=="function"||typeof ot.getSnapshotBeforeUpdate=="function")||typeof ot.UNSAFE_componentWillReceiveProps!="function"&&typeof ot.componentWillReceiveProps!="function"||(st!==ut||ht!==at)&&qh(_,ot,nt,at),$g=!1,ht=_.memoizedState,ot.state=ht,gh(_,nt,ot,rt);var gt=_.memoizedState;st!==ut||ht!==gt||Wf.current||$g?(typeof pt=="function"&&(kh(_,_e,pt,nt),gt=_.memoizedState),(lt=$g||oh(_,_e,lt,nt,ht,gt,at)||!1)?(ct||typeof ot.UNSAFE_componentWillUpdate!="function"&&typeof ot.componentWillUpdate!="function"||(typeof ot.componentWillUpdate=="function"&&ot.componentWillUpdate(nt,gt,at),typeof ot.UNSAFE_componentWillUpdate=="function"&&ot.UNSAFE_componentWillUpdate(nt,gt,at)),typeof ot.componentDidUpdate=="function"&&(_.flags|=4),typeof ot.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof ot.componentDidUpdate!="function"||st===tt.memoizedProps&&ht===tt.memoizedState||(_.flags|=4),typeof ot.getSnapshotBeforeUpdate!="function"||st===tt.memoizedProps&&ht===tt.memoizedState||(_.flags|=1024),_.memoizedProps=nt,_.memoizedState=gt),ot.props=nt,ot.state=gt,ot.context=at,nt=lt):(typeof ot.componentDidUpdate!="function"||st===tt.memoizedProps&&ht===tt.memoizedState||(_.flags|=4),typeof ot.getSnapshotBeforeUpdate!="function"||st===tt.memoizedProps&&ht===tt.memoizedState||(_.flags|=1024),nt=!1)}return kj(tt,_,_e,nt,it,rt)}function kj(tt,_,_e,nt,rt,it){hj(tt,_);var ot=(_.flags&128)!==0;if(!nt&&!ot)return rt&&dg(_,_e,!1),$i(tt,_,it);nt=_.stateNode,Xi.current=_;var st=ot&&typeof _e.getDerivedStateFromError!="function"?null:nt.render();return _.flags|=1,tt!==null&&ot?(_.child=Bh(_,tt.child,null,it),_.child=Bh(_,null,st,it)):Yi(tt,_,st,it),_.memoizedState=nt.state,rt&&dg(_,_e,!0),_.child}function lj(tt){var _=tt.stateNode;_.pendingContext?ag(tt,_.pendingContext,_.pendingContext!==_.context):_.context&&ag(tt,_.context,!1),Ih(tt,_.containerInfo)}function mj(tt,_,_e,nt,rt){return Ig(),Jg(rt),_.flags|=256,Yi(tt,_,_e,nt),_.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(tt){return{baseLanes:tt,cachePool:null,transitions:null}}function pj(tt,_,_e){var nt=_.pendingProps,rt=M$2.current,it=!1,ot=(_.flags&128)!==0,st;if((st=ot)||(st=tt!==null&&tt.memoizedState===null?!1:(rt&2)!==0),st?(it=!0,_.flags&=-129):(tt===null||tt.memoizedState!==null)&&(rt|=1),G$1(M$2,rt&1),tt===null)return Eg(_),tt=_.memoizedState,tt!==null&&(tt=tt.dehydrated,tt!==null)?(_.mode&1?tt.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(ot=nt.children,tt=nt.fallback,it?(nt=_.mode,it=_.child,ot={mode:"hidden",children:ot},!(nt&1)&&it!==null?(it.childLanes=0,it.pendingProps=ot):it=qj(ot,nt,0,null),tt=Ah(tt,nt,_e,null),it.return=_,tt.return=_,it.sibling=tt,_.child=it,_.child.memoizedState=oj(_e),_.memoizedState=nj,tt):rj(_,ot));if(rt=tt.memoizedState,rt!==null&&(st=rt.dehydrated,st!==null))return sj(tt,_,ot,nt,st,rt,_e);if(it){it=nt.fallback,ot=_.mode,rt=tt.child,st=rt.sibling;var at={mode:"hidden",children:nt.children};return!(ot&1)&&_.child!==rt?(nt=_.child,nt.childLanes=0,nt.pendingProps=at,_.deletions=null):(nt=wh(rt,at),nt.subtreeFlags=rt.subtreeFlags&14680064),st!==null?it=wh(st,it):(it=Ah(it,ot,_e,null),it.flags|=2),it.return=_,nt.return=_,nt.sibling=it,_.child=nt,nt=it,it=_.child,ot=tt.child.memoizedState,ot=ot===null?oj(_e):{baseLanes:ot.baseLanes|_e,cachePool:null,transitions:ot.transitions},it.memoizedState=ot,it.childLanes=tt.childLanes&~_e,_.memoizedState=nj,nt}return it=tt.child,tt=it.sibling,nt=wh(it,{mode:"visible",children:nt.children}),!(_.mode&1)&&(nt.lanes=_e),nt.return=_,nt.sibling=null,tt!==null&&(_e=_.deletions,_e===null?(_.deletions=[tt],_.flags|=16):_e.push(tt)),_.child=nt,_.memoizedState=null,nt}function rj(tt,_){return _=qj({mode:"visible",children:_},tt.mode,0,null),_.return=tt,tt.child=_}function tj(tt,_,_e,nt){return nt!==null&&Jg(nt),Bh(_,tt.child,null,_e),tt=rj(_,_.pendingProps.children),tt.flags|=2,_.memoizedState=null,tt}function sj(tt,_,_e,nt,rt,it,ot){if(_e)return _.flags&256?(_.flags&=-257,nt=Li(Error(p$3(422))),tj(tt,_,ot,nt)):_.memoizedState!==null?(_.child=tt.child,_.flags|=128,null):(it=nt.fallback,rt=_.mode,nt=qj({mode:"visible",children:nt.children},rt,0,null),it=Ah(it,rt,ot,null),it.flags|=2,nt.return=_,it.return=_,nt.sibling=it,_.child=nt,_.mode&1&&Bh(_,tt.child,null,ot),_.child.memoizedState=oj(ot),_.memoizedState=nj,it);if(!(_.mode&1))return tj(tt,_,ot,null);if(rt.data==="$!"){if(nt=rt.nextSibling&&rt.nextSibling.dataset,nt)var st=nt.dgst;return nt=st,it=Error(p$3(419)),nt=Li(it,nt,void 0),tj(tt,_,ot,nt)}if(st=(ot&tt.childLanes)!==0,Ug||st){if(nt=R$1,nt!==null){switch(ot&-ot){case 4:rt=2;break;case 16:rt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:rt=32;break;case 536870912:rt=268435456;break;default:rt=0}rt=rt&(nt.suspendedLanes|ot)?0:rt,rt!==0&&rt!==it.retryLane&&(it.retryLane=rt,Zg(tt,rt),mh(nt,tt,rt,-1))}return uj(),nt=Li(Error(p$3(421))),tj(tt,_,ot,nt)}return rt.data==="$?"?(_.flags|=128,_.child=tt.child,_=vj.bind(null,tt),rt._reactRetry=_,null):(tt=it.treeContext,yg=Lf(rt.nextSibling),xg=_,I$3=!0,zg=null,tt!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=tt.id,sg=tt.overflow,qg=_),_=rj(_,nt.children),_.flags|=4096,_)}function wj(tt,_,_e){tt.lanes|=_;var nt=tt.alternate;nt!==null&&(nt.lanes|=_),Sg(tt.return,_,_e)}function xj(tt,_,_e,nt,rt){var it=tt.memoizedState;it===null?tt.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:nt,tail:_e,tailMode:rt}:(it.isBackwards=_,it.rendering=null,it.renderingStartTime=0,it.last=nt,it.tail=_e,it.tailMode=rt)}function yj(tt,_,_e){var nt=_.pendingProps,rt=nt.revealOrder,it=nt.tail;if(Yi(tt,_,nt.children,_e),nt=M$2.current,nt&2)nt=nt&1|2,_.flags|=128;else{if(tt!==null&&tt.flags&128)e:for(tt=_.child;tt!==null;){if(tt.tag===13)tt.memoizedState!==null&&wj(tt,_e,_);else if(tt.tag===19)wj(tt,_e,_);else if(tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===_)break e;for(;tt.sibling===null;){if(tt.return===null||tt.return===_)break e;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}nt&=1}if(G$1(M$2,nt),!(_.mode&1))_.memoizedState=null;else switch(rt){case"forwards":for(_e=_.child,rt=null;_e!==null;)tt=_e.alternate,tt!==null&&Mh(tt)===null&&(rt=_e),_e=_e.sibling;_e=rt,_e===null?(rt=_.child,_.child=null):(rt=_e.sibling,_e.sibling=null),xj(_,!1,rt,_e,it);break;case"backwards":for(_e=null,rt=_.child,_.child=null;rt!==null;){if(tt=rt.alternate,tt!==null&&Mh(tt)===null){_.child=rt;break}tt=rt.sibling,rt.sibling=_e,_e=rt,rt=tt}xj(_,!0,_e,null,it);break;case"together":xj(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function jj(tt,_){!(_.mode&1)&&tt!==null&&(tt.alternate=null,_.alternate=null,_.flags|=2)}function $i(tt,_,_e){if(tt!==null&&(_.dependencies=tt.dependencies),hh|=_.lanes,!(_e&_.childLanes))return null;if(tt!==null&&_.child!==tt.child)throw Error(p$3(153));if(_.child!==null){for(tt=_.child,_e=wh(tt,tt.pendingProps),_.child=_e,_e.return=_;tt.sibling!==null;)tt=tt.sibling,_e=_e.sibling=wh(tt,tt.pendingProps),_e.return=_;_e.sibling=null}return _.child}function zj(tt,_,_e){switch(_.tag){case 3:lj(_),Ig();break;case 5:Kh(_);break;case 1:Zf(_.type)&&cg(_);break;case 4:Ih(_,_.stateNode.containerInfo);break;case 10:var nt=_.type._context,rt=_.memoizedProps.value;G$1(Mg,nt._currentValue),nt._currentValue=rt;break;case 13:if(nt=_.memoizedState,nt!==null)return nt.dehydrated!==null?(G$1(M$2,M$2.current&1),_.flags|=128,null):_e&_.child.childLanes?pj(tt,_,_e):(G$1(M$2,M$2.current&1),tt=$i(tt,_,_e),tt!==null?tt.sibling:null);G$1(M$2,M$2.current&1);break;case 19:if(nt=(_e&_.childLanes)!==0,tt.flags&128){if(nt)return yj(tt,_,_e);_.flags|=128}if(rt=_.memoizedState,rt!==null&&(rt.rendering=null,rt.tail=null,rt.lastEffect=null),G$1(M$2,M$2.current),nt)break;return null;case 22:case 23:return _.lanes=0,ej(tt,_,_e)}return $i(tt,_,_e)}var Aj,Bj,Cj,Dj;Aj=function(tt,_){for(var _e=_.child;_e!==null;){if(_e.tag===5||_e.tag===6)tt.appendChild(_e.stateNode);else if(_e.tag!==4&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===_)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===_)return;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}};Bj=function(){};Cj=function(tt,_,_e,nt){var rt=tt.memoizedProps;if(rt!==nt){tt=_.stateNode,Hh(Eh.current);var it=null;switch(_e){case"input":rt=Ya(tt,rt),nt=Ya(tt,nt),it=[];break;case"select":rt=A$1({},rt,{value:void 0}),nt=A$1({},nt,{value:void 0}),it=[];break;case"textarea":rt=gb(tt,rt),nt=gb(tt,nt),it=[];break;default:typeof rt.onClick!="function"&&typeof nt.onClick=="function"&&(tt.onclick=Bf)}ub(_e,nt);var ot;_e=null;for(lt in rt)if(!nt.hasOwnProperty(lt)&&rt.hasOwnProperty(lt)&&rt[lt]!=null)if(lt==="style"){var st=rt[lt];for(ot in st)st.hasOwnProperty(ot)&&(_e||(_e={}),_e[ot]="")}else lt!=="dangerouslySetInnerHTML"&&lt!=="children"&&lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&lt!=="autoFocus"&&(ea.hasOwnProperty(lt)?it||(it=[]):(it=it||[]).push(lt,null));for(lt in nt){var at=nt[lt];if(st=rt!=null?rt[lt]:void 0,nt.hasOwnProperty(lt)&&at!==st&&(at!=null||st!=null))if(lt==="style")if(st){for(ot in st)!st.hasOwnProperty(ot)||at&&at.hasOwnProperty(ot)||(_e||(_e={}),_e[ot]="");for(ot in at)at.hasOwnProperty(ot)&&st[ot]!==at[ot]&&(_e||(_e={}),_e[ot]=at[ot])}else _e||(it||(it=[]),it.push(lt,_e)),_e=at;else lt==="dangerouslySetInnerHTML"?(at=at?at.__html:void 0,st=st?st.__html:void 0,at!=null&&st!==at&&(it=it||[]).push(lt,at)):lt==="children"?typeof at!="string"&&typeof at!="number"||(it=it||[]).push(lt,""+at):lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(lt)?(at!=null&&lt==="onScroll"&&D$1("scroll",tt),it||st===at||(it=[])):(it=it||[]).push(lt,at))}_e&&(it=it||[]).push("style",_e);var lt=it;(_.updateQueue=lt)&&(_.flags|=4)}};Dj=function(tt,_,_e,nt){_e!==nt&&(_.flags|=4)};function Ej(tt,_){if(!I$3)switch(tt.tailMode){case"hidden":_=tt.tail;for(var _e=null;_!==null;)_.alternate!==null&&(_e=_),_=_.sibling;_e===null?tt.tail=null:_e.sibling=null;break;case"collapsed":_e=tt.tail;for(var nt=null;_e!==null;)_e.alternate!==null&&(nt=_e),_e=_e.sibling;nt===null?_||tt.tail===null?tt.tail=null:tt.tail.sibling=null:nt.sibling=null}}function S$3(tt){var _=tt.alternate!==null&&tt.alternate.child===tt.child,_e=0,nt=0;if(_)for(var rt=tt.child;rt!==null;)_e|=rt.lanes|rt.childLanes,nt|=rt.subtreeFlags&14680064,nt|=rt.flags&14680064,rt.return=tt,rt=rt.sibling;else for(rt=tt.child;rt!==null;)_e|=rt.lanes|rt.childLanes,nt|=rt.subtreeFlags,nt|=rt.flags,rt.return=tt,rt=rt.sibling;return tt.subtreeFlags|=nt,tt.childLanes=_e,_}function Fj(tt,_,_e){var nt=_.pendingProps;switch(wg(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(_),null;case 1:return Zf(_.type)&&$f(),S$3(_),null;case 3:return nt=_.stateNode,Jh(),E$1(Wf),E$1(H$2),Oh(),nt.pendingContext&&(nt.context=nt.pendingContext,nt.pendingContext=null),(tt===null||tt.child===null)&&(Gg(_)?_.flags|=4:tt===null||tt.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(tt,_),S$3(_),null;case 5:Lh(_);var rt=Hh(Gh.current);if(_e=_.type,tt!==null&&_.stateNode!=null)Cj(tt,_,_e,nt,rt),tt.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!nt){if(_.stateNode===null)throw Error(p$3(166));return S$3(_),null}if(tt=Hh(Eh.current),Gg(_)){nt=_.stateNode,_e=_.type;var it=_.memoizedProps;switch(nt[Of]=_,nt[Pf]=it,tt=(_.mode&1)!==0,_e){case"dialog":D$1("cancel",nt),D$1("close",nt);break;case"iframe":case"object":case"embed":D$1("load",nt);break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D$1(lf[rt],nt);break;case"source":D$1("error",nt);break;case"img":case"image":case"link":D$1("error",nt),D$1("load",nt);break;case"details":D$1("toggle",nt);break;case"input":Za(nt,it),D$1("invalid",nt);break;case"select":nt._wrapperState={wasMultiple:!!it.multiple},D$1("invalid",nt);break;case"textarea":hb(nt,it),D$1("invalid",nt)}ub(_e,it),rt=null;for(var ot in it)if(it.hasOwnProperty(ot)){var st=it[ot];ot==="children"?typeof st=="string"?nt.textContent!==st&&(it.suppressHydrationWarning!==!0&&Af(nt.textContent,st,tt),rt=["children",st]):typeof st=="number"&&nt.textContent!==""+st&&(it.suppressHydrationWarning!==!0&&Af(nt.textContent,st,tt),rt=["children",""+st]):ea.hasOwnProperty(ot)&&st!=null&&ot==="onScroll"&&D$1("scroll",nt)}switch(_e){case"input":Va(nt),db(nt,it,!0);break;case"textarea":Va(nt),jb(nt);break;case"select":case"option":break;default:typeof it.onClick=="function"&&(nt.onclick=Bf)}nt=rt,_.updateQueue=nt,nt!==null&&(_.flags|=4)}else{ot=rt.nodeType===9?rt:rt.ownerDocument,tt==="http://www.w3.org/1999/xhtml"&&(tt=kb(_e)),tt==="http://www.w3.org/1999/xhtml"?_e==="script"?(tt=ot.createElement("div"),tt.innerHTML="<script><\/script>",tt=tt.removeChild(tt.firstChild)):typeof nt.is=="string"?tt=ot.createElement(_e,{is:nt.is}):(tt=ot.createElement(_e),_e==="select"&&(ot=tt,nt.multiple?ot.multiple=!0:nt.size&&(ot.size=nt.size))):tt=ot.createElementNS(tt,_e),tt[Of]=_,tt[Pf]=nt,Aj(tt,_,!1,!1),_.stateNode=tt;e:{switch(ot=vb(_e,nt),_e){case"dialog":D$1("cancel",tt),D$1("close",tt),rt=nt;break;case"iframe":case"object":case"embed":D$1("load",tt),rt=nt;break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D$1(lf[rt],tt);rt=nt;break;case"source":D$1("error",tt),rt=nt;break;case"img":case"image":case"link":D$1("error",tt),D$1("load",tt),rt=nt;break;case"details":D$1("toggle",tt),rt=nt;break;case"input":Za(tt,nt),rt=Ya(tt,nt),D$1("invalid",tt);break;case"option":rt=nt;break;case"select":tt._wrapperState={wasMultiple:!!nt.multiple},rt=A$1({},nt,{value:void 0}),D$1("invalid",tt);break;case"textarea":hb(tt,nt),rt=gb(tt,nt),D$1("invalid",tt);break;default:rt=nt}ub(_e,rt),st=rt;for(it in st)if(st.hasOwnProperty(it)){var at=st[it];it==="style"?sb(tt,at):it==="dangerouslySetInnerHTML"?(at=at?at.__html:void 0,at!=null&&nb(tt,at)):it==="children"?typeof at=="string"?(_e!=="textarea"||at!=="")&&ob(tt,at):typeof at=="number"&&ob(tt,""+at):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(ea.hasOwnProperty(it)?at!=null&&it==="onScroll"&&D$1("scroll",tt):at!=null&&ta(tt,it,at,ot))}switch(_e){case"input":Va(tt),db(tt,nt,!1);break;case"textarea":Va(tt),jb(tt);break;case"option":nt.value!=null&&tt.setAttribute("value",""+Sa(nt.value));break;case"select":tt.multiple=!!nt.multiple,it=nt.value,it!=null?fb(tt,!!nt.multiple,it,!1):nt.defaultValue!=null&&fb(tt,!!nt.multiple,nt.defaultValue,!0);break;default:typeof rt.onClick=="function"&&(tt.onclick=Bf)}switch(_e){case"button":case"input":case"select":case"textarea":nt=!!nt.autoFocus;break e;case"img":nt=!0;break e;default:nt=!1}}nt&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return S$3(_),null;case 6:if(tt&&_.stateNode!=null)Dj(tt,_,tt.memoizedProps,nt);else{if(typeof nt!="string"&&_.stateNode===null)throw Error(p$3(166));if(_e=Hh(Gh.current),Hh(Eh.current),Gg(_)){if(nt=_.stateNode,_e=_.memoizedProps,nt[Of]=_,(it=nt.nodeValue!==_e)&&(tt=xg,tt!==null))switch(tt.tag){case 3:Af(nt.nodeValue,_e,(tt.mode&1)!==0);break;case 5:tt.memoizedProps.suppressHydrationWarning!==!0&&Af(nt.nodeValue,_e,(tt.mode&1)!==0)}it&&(_.flags|=4)}else nt=(_e.nodeType===9?_e:_e.ownerDocument).createTextNode(nt),nt[Of]=_,_.stateNode=nt}return S$3(_),null;case 13:if(E$1(M$2),nt=_.memoizedState,tt===null||tt.memoizedState!==null&&tt.memoizedState.dehydrated!==null){if(I$3&&yg!==null&&_.mode&1&&!(_.flags&128))Hg(),Ig(),_.flags|=98560,it=!1;else if(it=Gg(_),nt!==null&&nt.dehydrated!==null){if(tt===null){if(!it)throw Error(p$3(318));if(it=_.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$3(317));it[Of]=_}else Ig(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;S$3(_),it=!1}else zg!==null&&(Gj(zg),zg=null),it=!0;if(!it)return _.flags&65536?_:null}return _.flags&128?(_.lanes=_e,_):(nt=nt!==null,nt!==(tt!==null&&tt.memoizedState!==null)&&nt&&(_.child.flags|=8192,_.mode&1&&(tt===null||M$2.current&1?T$2===0&&(T$2=3):uj())),_.updateQueue!==null&&(_.flags|=4),S$3(_),null);case 4:return Jh(),Bj(tt,_),tt===null&&sf(_.stateNode.containerInfo),S$3(_),null;case 10:return Rg(_.type._context),S$3(_),null;case 17:return Zf(_.type)&&$f(),S$3(_),null;case 19:if(E$1(M$2),it=_.memoizedState,it===null)return S$3(_),null;if(nt=(_.flags&128)!==0,ot=it.rendering,ot===null)if(nt)Ej(it,!1);else{if(T$2!==0||tt!==null&&tt.flags&128)for(tt=_.child;tt!==null;){if(ot=Mh(tt),ot!==null){for(_.flags|=128,Ej(it,!1),nt=ot.updateQueue,nt!==null&&(_.updateQueue=nt,_.flags|=4),_.subtreeFlags=0,nt=_e,_e=_.child;_e!==null;)it=_e,tt=nt,it.flags&=14680066,ot=it.alternate,ot===null?(it.childLanes=0,it.lanes=tt,it.child=null,it.subtreeFlags=0,it.memoizedProps=null,it.memoizedState=null,it.updateQueue=null,it.dependencies=null,it.stateNode=null):(it.childLanes=ot.childLanes,it.lanes=ot.lanes,it.child=ot.child,it.subtreeFlags=0,it.deletions=null,it.memoizedProps=ot.memoizedProps,it.memoizedState=ot.memoizedState,it.updateQueue=ot.updateQueue,it.type=ot.type,tt=ot.dependencies,it.dependencies=tt===null?null:{lanes:tt.lanes,firstContext:tt.firstContext}),_e=_e.sibling;return G$1(M$2,M$2.current&1|2),_.child}tt=tt.sibling}it.tail!==null&&B$1()>Hj&&(_.flags|=128,nt=!0,Ej(it,!1),_.lanes=4194304)}else{if(!nt)if(tt=Mh(ot),tt!==null){if(_.flags|=128,nt=!0,_e=tt.updateQueue,_e!==null&&(_.updateQueue=_e,_.flags|=4),Ej(it,!0),it.tail===null&&it.tailMode==="hidden"&&!ot.alternate&&!I$3)return S$3(_),null}else 2*B$1()-it.renderingStartTime>Hj&&_e!==1073741824&&(_.flags|=128,nt=!0,Ej(it,!1),_.lanes=4194304);it.isBackwards?(ot.sibling=_.child,_.child=ot):(_e=it.last,_e!==null?_e.sibling=ot:_.child=ot,it.last=ot)}return it.tail!==null?(_=it.tail,it.rendering=_,it.tail=_.sibling,it.renderingStartTime=B$1(),_.sibling=null,_e=M$2.current,G$1(M$2,nt?_e&1|2:_e&1),_):(S$3(_),null);case 22:case 23:return Ij(),nt=_.memoizedState!==null,tt!==null&&tt.memoizedState!==null!==nt&&(_.flags|=8192),nt&&_.mode&1?gj&1073741824&&(S$3(_),_.subtreeFlags&6&&(_.flags|=8192)):S$3(_),null;case 24:return null;case 25:return null}throw Error(p$3(156,_.tag))}function Jj(tt,_){switch(wg(_),_.tag){case 1:return Zf(_.type)&&$f(),tt=_.flags,tt&65536?(_.flags=tt&-65537|128,_):null;case 3:return Jh(),E$1(Wf),E$1(H$2),Oh(),tt=_.flags,tt&65536&&!(tt&128)?(_.flags=tt&-65537|128,_):null;case 5:return Lh(_),null;case 13:if(E$1(M$2),tt=_.memoizedState,tt!==null&&tt.dehydrated!==null){if(_.alternate===null)throw Error(p$3(340));Ig()}return tt=_.flags,tt&65536?(_.flags=tt&-65537|128,_):null;case 19:return E$1(M$2),null;case 4:return Jh(),null;case 10:return Rg(_.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$2=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$3=null;function Mj(tt,_){var _e=tt.ref;if(_e!==null)if(typeof _e=="function")try{_e(null)}catch(nt){W$1(tt,_,nt)}else _e.current=null}function Nj(tt,_,_e){try{_e()}catch(nt){W$1(tt,_,nt)}}var Oj=!1;function Pj(tt,_){if(Cf=dd,tt=Me$1(),Ne$1(tt)){if("selectionStart"in tt)var _e={start:tt.selectionStart,end:tt.selectionEnd};else e:{_e=(_e=tt.ownerDocument)&&_e.defaultView||window;var nt=_e.getSelection&&_e.getSelection();if(nt&&nt.rangeCount!==0){_e=nt.anchorNode;var rt=nt.anchorOffset,it=nt.focusNode;nt=nt.focusOffset;try{_e.nodeType,it.nodeType}catch{_e=null;break e}var ot=0,st=-1,at=-1,lt=0,ct=0,ut=tt,ht=null;t:for(;;){for(var pt;ut!==_e||rt!==0&&ut.nodeType!==3||(st=ot+rt),ut!==it||nt!==0&&ut.nodeType!==3||(at=ot+nt),ut.nodeType===3&&(ot+=ut.nodeValue.length),(pt=ut.firstChild)!==null;)ht=ut,ut=pt;for(;;){if(ut===tt)break t;if(ht===_e&&++lt===rt&&(st=ot),ht===it&&++ct===nt&&(at=ot),(pt=ut.nextSibling)!==null)break;ut=ht,ht=ut.parentNode}ut=pt}_e=st===-1||at===-1?null:{start:st,end:at}}else _e=null}_e=_e||{start:0,end:0}}else _e=null;for(Df={focusedElem:tt,selectionRange:_e},dd=!1,V$3=_;V$3!==null;)if(_=V$3,tt=_.child,(_.subtreeFlags&1028)!==0&&tt!==null)tt.return=_,V$3=tt;else for(;V$3!==null;){_=V$3;try{var gt=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var yt=gt.memoizedProps,vt=gt.memoizedState,mt=_.stateNode,_t=mt.getSnapshotBeforeUpdate(_.elementType===_.type?yt:Lg(_.type,yt),vt);mt.__reactInternalSnapshotBeforeUpdate=_t}break;case 3:var xt=_.stateNode.containerInfo;xt.nodeType===1?xt.textContent="":xt.nodeType===9&&xt.documentElement&&xt.removeChild(xt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(St){W$1(_,_.return,St)}if(tt=_.sibling,tt!==null){tt.return=_.return,V$3=tt;break}V$3=_.return}return gt=Oj,Oj=!1,gt}function Qj(tt,_,_e){var nt=_.updateQueue;if(nt=nt!==null?nt.lastEffect:null,nt!==null){var rt=nt=nt.next;do{if((rt.tag&tt)===tt){var it=rt.destroy;rt.destroy=void 0,it!==void 0&&Nj(_,_e,it)}rt=rt.next}while(rt!==nt)}}function Rj(tt,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var _e=_=_.next;do{if((_e.tag&tt)===tt){var nt=_e.create;_e.destroy=nt()}_e=_e.next}while(_e!==_)}}function Sj(tt){var _=tt.ref;if(_!==null){var _e=tt.stateNode;switch(tt.tag){case 5:tt=_e;break;default:tt=_e}typeof _=="function"?_(tt):_.current=tt}}function Tj(tt){var _=tt.alternate;_!==null&&(tt.alternate=null,Tj(_)),tt.child=null,tt.deletions=null,tt.sibling=null,tt.tag===5&&(_=tt.stateNode,_!==null&&(delete _[Of],delete _[Pf],delete _[of],delete _[Qf],delete _[Rf])),tt.stateNode=null,tt.return=null,tt.dependencies=null,tt.memoizedProps=null,tt.memoizedState=null,tt.pendingProps=null,tt.stateNode=null,tt.updateQueue=null}function Uj(tt){return tt.tag===5||tt.tag===3||tt.tag===4}function Vj(tt){e:for(;;){for(;tt.sibling===null;){if(tt.return===null||Uj(tt.return))return null;tt=tt.return}for(tt.sibling.return=tt.return,tt=tt.sibling;tt.tag!==5&&tt.tag!==6&&tt.tag!==18;){if(tt.flags&2||tt.child===null||tt.tag===4)continue e;tt.child.return=tt,tt=tt.child}if(!(tt.flags&2))return tt.stateNode}}function Wj(tt,_,_e){var nt=tt.tag;if(nt===5||nt===6)tt=tt.stateNode,_?_e.nodeType===8?_e.parentNode.insertBefore(tt,_):_e.insertBefore(tt,_):(_e.nodeType===8?(_=_e.parentNode,_.insertBefore(tt,_e)):(_=_e,_.appendChild(tt)),_e=_e._reactRootContainer,_e!=null||_.onclick!==null||(_.onclick=Bf));else if(nt!==4&&(tt=tt.child,tt!==null))for(Wj(tt,_,_e),tt=tt.sibling;tt!==null;)Wj(tt,_,_e),tt=tt.sibling}function Xj(tt,_,_e){var nt=tt.tag;if(nt===5||nt===6)tt=tt.stateNode,_?_e.insertBefore(tt,_):_e.appendChild(tt);else if(nt!==4&&(tt=tt.child,tt!==null))for(Xj(tt,_,_e),tt=tt.sibling;tt!==null;)Xj(tt,_,_e),tt=tt.sibling}var X=null,Yj=!1;function Zj(tt,_,_e){for(_e=_e.child;_e!==null;)ak(tt,_,_e),_e=_e.sibling}function ak(tt,_,_e){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,_e)}catch{}switch(_e.tag){case 5:U$2||Mj(_e,_);case 6:var nt=X,rt=Yj;X=null,Zj(tt,_,_e),X=nt,Yj=rt,X!==null&&(Yj?(tt=X,_e=_e.stateNode,tt.nodeType===8?tt.parentNode.removeChild(_e):tt.removeChild(_e)):X.removeChild(_e.stateNode));break;case 18:X!==null&&(Yj?(tt=X,_e=_e.stateNode,tt.nodeType===8?Kf(tt.parentNode,_e):tt.nodeType===1&&Kf(tt,_e),bd(tt)):Kf(X,_e.stateNode));break;case 4:nt=X,rt=Yj,X=_e.stateNode.containerInfo,Yj=!0,Zj(tt,_,_e),X=nt,Yj=rt;break;case 0:case 11:case 14:case 15:if(!U$2&&(nt=_e.updateQueue,nt!==null&&(nt=nt.lastEffect,nt!==null))){rt=nt=nt.next;do{var it=rt,ot=it.destroy;it=it.tag,ot!==void 0&&(it&2||it&4)&&Nj(_e,_,ot),rt=rt.next}while(rt!==nt)}Zj(tt,_,_e);break;case 1:if(!U$2&&(Mj(_e,_),nt=_e.stateNode,typeof nt.componentWillUnmount=="function"))try{nt.props=_e.memoizedProps,nt.state=_e.memoizedState,nt.componentWillUnmount()}catch(st){W$1(_e,_,st)}Zj(tt,_,_e);break;case 21:Zj(tt,_,_e);break;case 22:_e.mode&1?(U$2=(nt=U$2)||_e.memoizedState!==null,Zj(tt,_,_e),U$2=nt):Zj(tt,_,_e);break;default:Zj(tt,_,_e)}}function bk(tt){var _=tt.updateQueue;if(_!==null){tt.updateQueue=null;var _e=tt.stateNode;_e===null&&(_e=tt.stateNode=new Lj),_.forEach(function(nt){var rt=ck.bind(null,tt,nt);_e.has(nt)||(_e.add(nt),nt.then(rt,rt))})}}function dk(tt,_){var _e=_.deletions;if(_e!==null)for(var nt=0;nt<_e.length;nt++){var rt=_e[nt];try{var it=tt,ot=_,st=ot;e:for(;st!==null;){switch(st.tag){case 5:X=st.stateNode,Yj=!1;break e;case 3:X=st.stateNode.containerInfo,Yj=!0;break e;case 4:X=st.stateNode.containerInfo,Yj=!0;break e}st=st.return}if(X===null)throw Error(p$3(160));ak(it,ot,rt),X=null,Yj=!1;var at=rt.alternate;at!==null&&(at.return=null),rt.return=null}catch(lt){W$1(rt,_,lt)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)ek(_,tt),_=_.sibling}function ek(tt,_){var _e=tt.alternate,nt=tt.flags;switch(tt.tag){case 0:case 11:case 14:case 15:if(dk(_,tt),fk(tt),nt&4){try{Qj(3,tt,tt.return),Rj(3,tt)}catch(yt){W$1(tt,tt.return,yt)}try{Qj(5,tt,tt.return)}catch(yt){W$1(tt,tt.return,yt)}}break;case 1:dk(_,tt),fk(tt),nt&512&&_e!==null&&Mj(_e,_e.return);break;case 5:if(dk(_,tt),fk(tt),nt&512&&_e!==null&&Mj(_e,_e.return),tt.flags&32){var rt=tt.stateNode;try{ob(rt,"")}catch(yt){W$1(tt,tt.return,yt)}}if(nt&4&&(rt=tt.stateNode,rt!=null)){var it=tt.memoizedProps,ot=_e!==null?_e.memoizedProps:it,st=tt.type,at=tt.updateQueue;if(tt.updateQueue=null,at!==null)try{st==="input"&&it.type==="radio"&&it.name!=null&&ab(rt,it),vb(st,ot);var lt=vb(st,it);for(ot=0;ot<at.length;ot+=2){var ct=at[ot],ut=at[ot+1];ct==="style"?sb(rt,ut):ct==="dangerouslySetInnerHTML"?nb(rt,ut):ct==="children"?ob(rt,ut):ta(rt,ct,ut,lt)}switch(st){case"input":bb(rt,it);break;case"textarea":ib(rt,it);break;case"select":var ht=rt._wrapperState.wasMultiple;rt._wrapperState.wasMultiple=!!it.multiple;var pt=it.value;pt!=null?fb(rt,!!it.multiple,pt,!1):ht!==!!it.multiple&&(it.defaultValue!=null?fb(rt,!!it.multiple,it.defaultValue,!0):fb(rt,!!it.multiple,it.multiple?[]:"",!1))}rt[Pf]=it}catch(yt){W$1(tt,tt.return,yt)}}break;case 6:if(dk(_,tt),fk(tt),nt&4){if(tt.stateNode===null)throw Error(p$3(162));rt=tt.stateNode,it=tt.memoizedProps;try{rt.nodeValue=it}catch(yt){W$1(tt,tt.return,yt)}}break;case 3:if(dk(_,tt),fk(tt),nt&4&&_e!==null&&_e.memoizedState.isDehydrated)try{bd(_.containerInfo)}catch(yt){W$1(tt,tt.return,yt)}break;case 4:dk(_,tt),fk(tt);break;case 13:dk(_,tt),fk(tt),rt=tt.child,rt.flags&8192&&(it=rt.memoizedState!==null,rt.stateNode.isHidden=it,!it||rt.alternate!==null&&rt.alternate.memoizedState!==null||(gk=B$1())),nt&4&&bk(tt);break;case 22:if(ct=_e!==null&&_e.memoizedState!==null,tt.mode&1?(U$2=(lt=U$2)||ct,dk(_,tt),U$2=lt):dk(_,tt),fk(tt),nt&8192){if(lt=tt.memoizedState!==null,(tt.stateNode.isHidden=lt)&&!ct&&tt.mode&1)for(V$3=tt,ct=tt.child;ct!==null;){for(ut=V$3=ct;V$3!==null;){switch(ht=V$3,pt=ht.child,ht.tag){case 0:case 11:case 14:case 15:Qj(4,ht,ht.return);break;case 1:Mj(ht,ht.return);var gt=ht.stateNode;if(typeof gt.componentWillUnmount=="function"){nt=ht,_e=ht.return;try{_=nt,gt.props=_.memoizedProps,gt.state=_.memoizedState,gt.componentWillUnmount()}catch(yt){W$1(nt,_e,yt)}}break;case 5:Mj(ht,ht.return);break;case 22:if(ht.memoizedState!==null){hk(ut);continue}}pt!==null?(pt.return=ht,V$3=pt):hk(ut)}ct=ct.sibling}e:for(ct=null,ut=tt;;){if(ut.tag===5){if(ct===null){ct=ut;try{rt=ut.stateNode,lt?(it=rt.style,typeof it.setProperty=="function"?it.setProperty("display","none","important"):it.display="none"):(st=ut.stateNode,at=ut.memoizedProps.style,ot=at!=null&&at.hasOwnProperty("display")?at.display:null,st.style.display=rb("display",ot))}catch(yt){W$1(tt,tt.return,yt)}}}else if(ut.tag===6){if(ct===null)try{ut.stateNode.nodeValue=lt?"":ut.memoizedProps}catch(yt){W$1(tt,tt.return,yt)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===tt)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===tt)break e;for(;ut.sibling===null;){if(ut.return===null||ut.return===tt)break e;ct===ut&&(ct=null),ut=ut.return}ct===ut&&(ct=null),ut.sibling.return=ut.return,ut=ut.sibling}}break;case 19:dk(_,tt),fk(tt),nt&4&&bk(tt);break;case 21:break;default:dk(_,tt),fk(tt)}}function fk(tt){var _=tt.flags;if(_&2){try{e:{for(var _e=tt.return;_e!==null;){if(Uj(_e)){var nt=_e;break e}_e=_e.return}throw Error(p$3(160))}switch(nt.tag){case 5:var rt=nt.stateNode;nt.flags&32&&(ob(rt,""),nt.flags&=-33);var it=Vj(tt);Xj(tt,it,rt);break;case 3:case 4:var ot=nt.stateNode.containerInfo,st=Vj(tt);Wj(tt,st,ot);break;default:throw Error(p$3(161))}}catch(at){W$1(tt,tt.return,at)}tt.flags&=-3}_&4096&&(tt.flags&=-4097)}function ik(tt,_,_e){V$3=tt,jk(tt)}function jk(tt,_,_e){for(var nt=(tt.mode&1)!==0;V$3!==null;){var rt=V$3,it=rt.child;if(rt.tag===22&&nt){var ot=rt.memoizedState!==null||Kj;if(!ot){var st=rt.alternate,at=st!==null&&st.memoizedState!==null||U$2;st=Kj;var lt=U$2;if(Kj=ot,(U$2=at)&&!lt)for(V$3=rt;V$3!==null;)ot=V$3,at=ot.child,ot.tag===22&&ot.memoizedState!==null?kk(rt):at!==null?(at.return=ot,V$3=at):kk(rt);for(;it!==null;)V$3=it,jk(it),it=it.sibling;V$3=rt,Kj=st,U$2=lt}lk(tt)}else rt.subtreeFlags&8772&&it!==null?(it.return=rt,V$3=it):lk(tt)}}function lk(tt){for(;V$3!==null;){var _=V$3;if(_.flags&8772){var _e=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:U$2||Rj(5,_);break;case 1:var nt=_.stateNode;if(_.flags&4&&!U$2)if(_e===null)nt.componentDidMount();else{var rt=_.elementType===_.type?_e.memoizedProps:Lg(_.type,_e.memoizedProps);nt.componentDidUpdate(rt,_e.memoizedState,nt.__reactInternalSnapshotBeforeUpdate)}var it=_.updateQueue;it!==null&&ih(_,it,nt);break;case 3:var ot=_.updateQueue;if(ot!==null){if(_e=null,_.child!==null)switch(_.child.tag){case 5:_e=_.child.stateNode;break;case 1:_e=_.child.stateNode}ih(_,ot,_e)}break;case 5:var st=_.stateNode;if(_e===null&&_.flags&4){_e=st;var at=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":at.autoFocus&&_e.focus();break;case"img":at.src&&(_e.src=at.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var lt=_.alternate;if(lt!==null){var ct=lt.memoizedState;if(ct!==null){var ut=ct.dehydrated;ut!==null&&bd(ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3(163))}U$2||_.flags&512&&Sj(_)}catch(ht){W$1(_,_.return,ht)}}if(_===tt){V$3=null;break}if(_e=_.sibling,_e!==null){_e.return=_.return,V$3=_e;break}V$3=_.return}}function hk(tt){for(;V$3!==null;){var _=V$3;if(_===tt){V$3=null;break}var _e=_.sibling;if(_e!==null){_e.return=_.return,V$3=_e;break}V$3=_.return}}function kk(tt){for(;V$3!==null;){var _=V$3;try{switch(_.tag){case 0:case 11:case 15:var _e=_.return;try{Rj(4,_)}catch(at){W$1(_,_e,at)}break;case 1:var nt=_.stateNode;if(typeof nt.componentDidMount=="function"){var rt=_.return;try{nt.componentDidMount()}catch(at){W$1(_,rt,at)}}var it=_.return;try{Sj(_)}catch(at){W$1(_,it,at)}break;case 5:var ot=_.return;try{Sj(_)}catch(at){W$1(_,ot,at)}}}catch(at){W$1(_,_.return,at)}if(_===tt){V$3=null;break}var st=_.sibling;if(st!==null){st.return=_.return,V$3=st;break}V$3=_.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R$1=null,Y$2=null,Z=0,gj=0,fj=Uf(0),T$2=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$2(){return K&6?B$1():Bk!==-1?Bk:Bk=B$1()}function lh(tt){return tt.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(tt=C$1,tt!==0||(tt=window.event,tt=tt===void 0?16:jd(tt.type)),tt):1}function mh(tt,_,_e,nt){if(50<zk)throw zk=0,Ak=null,Error(p$3(185));Ac(tt,_e,nt),(!(K&2)||tt!==R$1)&&(tt===R$1&&(!(K&2)&&(rk|=_e),T$2===4&&Dk(tt,Z)),Ek(tt,nt),_e===1&&K===0&&!(_.mode&1)&&(Hj=B$1()+500,fg&&jg()))}function Ek(tt,_){var _e=tt.callbackNode;wc(tt,_);var nt=uc(tt,tt===R$1?Z:0);if(nt===0)_e!==null&&bc(_e),tt.callbackNode=null,tt.callbackPriority=0;else if(_=nt&-nt,tt.callbackPriority!==_){if(_e!=null&&bc(_e),_===1)tt.tag===0?ig(Fk.bind(null,tt)):hg(Fk.bind(null,tt)),Jf(function(){!(K&6)&&jg()}),_e=null;else{switch(Dc(nt)){case 1:_e=fc;break;case 4:_e=gc;break;case 16:_e=hc;break;case 536870912:_e=jc;break;default:_e=hc}_e=Gk(_e,Hk.bind(null,tt))}tt.callbackPriority=_,tt.callbackNode=_e}}function Hk(tt,_){if(Bk=-1,Ck=0,K&6)throw Error(p$3(327));var _e=tt.callbackNode;if(Ik()&&tt.callbackNode!==_e)return null;var nt=uc(tt,tt===R$1?Z:0);if(nt===0)return null;if(nt&30||nt&tt.expiredLanes||_)_=Jk(tt,nt);else{_=nt;var rt=K;K|=2;var it=Kk();(R$1!==tt||Z!==_)&&(vk=null,Hj=B$1()+500,Lk(tt,_));do try{Mk();break}catch(st){Nk(tt,st)}while(1);Qg(),nk.current=it,K=rt,Y$2!==null?_=0:(R$1=null,Z=0,_=T$2)}if(_!==0){if(_===2&&(rt=xc(tt),rt!==0&&(nt=rt,_=Ok(tt,rt))),_===1)throw _e=qk,Lk(tt,0),Dk(tt,nt),Ek(tt,B$1()),_e;if(_===6)Dk(tt,nt);else{if(rt=tt.current.alternate,!(nt&30)&&!Pk(rt)&&(_=Jk(tt,nt),_===2&&(it=xc(tt),it!==0&&(nt=it,_=Ok(tt,it))),_===1))throw _e=qk,Lk(tt,0),Dk(tt,nt),Ek(tt,B$1()),_e;switch(tt.finishedWork=rt,tt.finishedLanes=nt,_){case 0:case 1:throw Error(p$3(345));case 2:Qk(tt,uk,vk);break;case 3:if(Dk(tt,nt),(nt&130023424)===nt&&(_=gk+500-B$1(),10<_)){if(uc(tt,0)!==0)break;if(rt=tt.suspendedLanes,(rt&nt)!==nt){L$2(),tt.pingedLanes|=tt.suspendedLanes&rt;break}tt.timeoutHandle=Ff(Qk.bind(null,tt,uk,vk),_);break}Qk(tt,uk,vk);break;case 4:if(Dk(tt,nt),(nt&4194240)===nt)break;for(_=tt.eventTimes,rt=-1;0<nt;){var ot=31-oc(nt);it=1<<ot,ot=_[ot],ot>rt&&(rt=ot),nt&=~it}if(nt=rt,nt=B$1()-nt,nt=(120>nt?120:480>nt?480:1080>nt?1080:1920>nt?1920:3e3>nt?3e3:4320>nt?4320:1960*mk(nt/1960))-nt,10<nt){tt.timeoutHandle=Ff(Qk.bind(null,tt,uk,vk),nt);break}Qk(tt,uk,vk);break;case 5:Qk(tt,uk,vk);break;default:throw Error(p$3(329))}}}return Ek(tt,B$1()),tt.callbackNode===_e?Hk.bind(null,tt):null}function Ok(tt,_){var _e=tk;return tt.current.memoizedState.isDehydrated&&(Lk(tt,_).flags|=256),tt=Jk(tt,_),tt!==2&&(_=uk,uk=_e,_!==null&&Gj(_)),tt}function Gj(tt){uk===null?uk=tt:uk.push.apply(uk,tt)}function Pk(tt){for(var _=tt;;){if(_.flags&16384){var _e=_.updateQueue;if(_e!==null&&(_e=_e.stores,_e!==null))for(var nt=0;nt<_e.length;nt++){var rt=_e[nt],it=rt.getSnapshot;rt=rt.value;try{if(!He(it(),rt))return!1}catch{return!1}}}if(_e=_.child,_.subtreeFlags&16384&&_e!==null)_e.return=_,_=_e;else{if(_===tt)break;for(;_.sibling===null;){if(_.return===null||_.return===tt)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Dk(tt,_){for(_&=~sk,_&=~rk,tt.suspendedLanes|=_,tt.pingedLanes&=~_,tt=tt.expirationTimes;0<_;){var _e=31-oc(_),nt=1<<_e;tt[_e]=-1,_&=~nt}}function Fk(tt){if(K&6)throw Error(p$3(327));Ik();var _=uc(tt,0);if(!(_&1))return Ek(tt,B$1()),null;var _e=Jk(tt,_);if(tt.tag!==0&&_e===2){var nt=xc(tt);nt!==0&&(_=nt,_e=Ok(tt,nt))}if(_e===1)throw _e=qk,Lk(tt,0),Dk(tt,_),Ek(tt,B$1()),_e;if(_e===6)throw Error(p$3(345));return tt.finishedWork=tt.current.alternate,tt.finishedLanes=_,Qk(tt,uk,vk),Ek(tt,B$1()),null}function Rk(tt,_){var _e=K;K|=1;try{return tt(_)}finally{K=_e,K===0&&(Hj=B$1()+500,fg&&jg())}}function Sk(tt){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var _=K;K|=1;var _e=pk.transition,nt=C$1;try{if(pk.transition=null,C$1=1,tt)return tt()}finally{C$1=nt,pk.transition=_e,K=_,!(K&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(tt,_){tt.finishedWork=null,tt.finishedLanes=0;var _e=tt.timeoutHandle;if(_e!==-1&&(tt.timeoutHandle=-1,Gf(_e)),Y$2!==null)for(_e=Y$2.return;_e!==null;){var nt=_e;switch(wg(nt),nt.tag){case 1:nt=nt.type.childContextTypes,nt!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H$2),Oh();break;case 5:Lh(nt);break;case 4:Jh();break;case 13:E$1(M$2);break;case 19:E$1(M$2);break;case 10:Rg(nt.type._context);break;case 22:case 23:Ij()}_e=_e.return}if(R$1=tt,Y$2=tt=wh(tt.current,null),Z=gj=_,T$2=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(_=0;_<Wg.length;_++)if(_e=Wg[_],nt=_e.interleaved,nt!==null){_e.interleaved=null;var rt=nt.next,it=_e.pending;if(it!==null){var ot=it.next;it.next=rt,nt.next=ot}_e.pending=nt}Wg=null}return tt}function Nk(tt,_){do{var _e=Y$2;try{if(Qg(),Ph.current=ai,Sh){for(var nt=N$2.memoizedState;nt!==null;){var rt=nt.queue;rt!==null&&(rt.pending=null),nt=nt.next}Sh=!1}if(Rh=0,P$1=O$1=N$2=null,Th=!1,Uh=0,ok.current=null,_e===null||_e.return===null){T$2=1,qk=_,Y$2=null;break}e:{var it=tt,ot=_e.return,st=_e,at=_;if(_=Z,st.flags|=32768,at!==null&&typeof at=="object"&&typeof at.then=="function"){var lt=at,ct=st,ut=ct.tag;if(!(ct.mode&1)&&(ut===0||ut===11||ut===15)){var ht=ct.alternate;ht?(ct.updateQueue=ht.updateQueue,ct.memoizedState=ht.memoizedState,ct.lanes=ht.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var pt=Vi(ot);if(pt!==null){pt.flags&=-257,Wi(pt,ot,st,it,_),pt.mode&1&&Ti(it,lt,_),_=pt,at=lt;var gt=_.updateQueue;if(gt===null){var yt=new Set;yt.add(at),_.updateQueue=yt}else gt.add(at);break e}else{if(!(_&1)){Ti(it,lt,_),uj();break e}at=Error(p$3(426))}}else if(I$3&&st.mode&1){var vt=Vi(ot);if(vt!==null){!(vt.flags&65536)&&(vt.flags|=256),Wi(vt,ot,st,it,_),Jg(Ki(at,st));break e}}it=at=Ki(at,st),T$2!==4&&(T$2=2),tk===null?tk=[it]:tk.push(it),it=ot;do{switch(it.tag){case 3:it.flags|=65536,_&=-_,it.lanes|=_;var mt=Oi(it,at,_);fh(it,mt);break e;case 1:st=at;var _t=it.type,xt=it.stateNode;if(!(it.flags&128)&&(typeof _t.getDerivedStateFromError=="function"||xt!==null&&typeof xt.componentDidCatch=="function"&&(Si===null||!Si.has(xt)))){it.flags|=65536,_&=-_,it.lanes|=_;var St=Ri(it,st,_);fh(it,St);break e}}it=it.return}while(it!==null)}Tk(_e)}catch(Tt){_=Tt,Y$2===_e&&_e!==null&&(Y$2=_e=_e.return);continue}break}while(1)}function Kk(){var tt=nk.current;return nk.current=ai,tt===null?ai:tt}function uj(){(T$2===0||T$2===3||T$2===2)&&(T$2=4),R$1===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$1,Z)}function Jk(tt,_){var _e=K;K|=2;var nt=Kk();(R$1!==tt||Z!==_)&&(vk=null,Lk(tt,_));do try{Uk();break}catch(rt){Nk(tt,rt)}while(1);if(Qg(),K=_e,nk.current=nt,Y$2!==null)throw Error(p$3(261));return R$1=null,Z=0,T$2}function Uk(){for(;Y$2!==null;)Vk(Y$2)}function Mk(){for(;Y$2!==null&&!cc();)Vk(Y$2)}function Vk(tt){var _=Wk(tt.alternate,tt,gj);tt.memoizedProps=tt.pendingProps,_===null?Tk(tt):Y$2=_,ok.current=null}function Tk(tt){var _=tt;do{var _e=_.alternate;if(tt=_.return,_.flags&32768){if(_e=Jj(_e,_),_e!==null){_e.flags&=32767,Y$2=_e;return}if(tt!==null)tt.flags|=32768,tt.subtreeFlags=0,tt.deletions=null;else{T$2=6,Y$2=null;return}}else if(_e=Fj(_e,_,gj),_e!==null){Y$2=_e;return}if(_=_.sibling,_!==null){Y$2=_;return}Y$2=_=tt}while(_!==null);T$2===0&&(T$2=5)}function Qk(tt,_,_e){var nt=C$1,rt=pk.transition;try{pk.transition=null,C$1=1,Xk(tt,_,_e,nt)}finally{pk.transition=rt,C$1=nt}return null}function Xk(tt,_,_e,nt){do Ik();while(xk!==null);if(K&6)throw Error(p$3(327));_e=tt.finishedWork;var rt=tt.finishedLanes;if(_e===null)return null;if(tt.finishedWork=null,tt.finishedLanes=0,_e===tt.current)throw Error(p$3(177));tt.callbackNode=null,tt.callbackPriority=0;var it=_e.lanes|_e.childLanes;if(Bc(tt,it),tt===R$1&&(Y$2=R$1=null,Z=0),!(_e.subtreeFlags&2064)&&!(_e.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),it=(_e.flags&15990)!==0,_e.subtreeFlags&15990||it){it=pk.transition,pk.transition=null;var ot=C$1;C$1=1;var st=K;K|=4,ok.current=null,Pj(tt,_e),ek(_e,tt),Oe(Df),dd=!!Cf,Df=Cf=null,tt.current=_e,ik(_e),dc(),K=st,C$1=ot,pk.transition=it}else tt.current=_e;if(wk&&(wk=!1,xk=tt,yk=rt),it=tt.pendingLanes,it===0&&(Si=null),mc(_e.stateNode),Ek(tt,B$1()),_!==null)for(nt=tt.onRecoverableError,_e=0;_e<_.length;_e++)rt=_[_e],nt(rt.value,{componentStack:rt.stack,digest:rt.digest});if(Pi)throw Pi=!1,tt=Qi,Qi=null,tt;return yk&1&&tt.tag!==0&&Ik(),it=tt.pendingLanes,it&1?tt===Ak?zk++:(zk=0,Ak=tt):zk=0,jg(),null}function Ik(){if(xk!==null){var tt=Dc(yk),_=pk.transition,_e=C$1;try{if(pk.transition=null,C$1=16>tt?16:tt,xk===null)var nt=!1;else{if(tt=xk,xk=null,yk=0,K&6)throw Error(p$3(331));var rt=K;for(K|=4,V$3=tt.current;V$3!==null;){var it=V$3,ot=it.child;if(V$3.flags&16){var st=it.deletions;if(st!==null){for(var at=0;at<st.length;at++){var lt=st[at];for(V$3=lt;V$3!==null;){var ct=V$3;switch(ct.tag){case 0:case 11:case 15:Qj(8,ct,it)}var ut=ct.child;if(ut!==null)ut.return=ct,V$3=ut;else for(;V$3!==null;){ct=V$3;var ht=ct.sibling,pt=ct.return;if(Tj(ct),ct===lt){V$3=null;break}if(ht!==null){ht.return=pt,V$3=ht;break}V$3=pt}}}var gt=it.alternate;if(gt!==null){var yt=gt.child;if(yt!==null){gt.child=null;do{var vt=yt.sibling;yt.sibling=null,yt=vt}while(yt!==null)}}V$3=it}}if(it.subtreeFlags&2064&&ot!==null)ot.return=it,V$3=ot;else e:for(;V$3!==null;){if(it=V$3,it.flags&2048)switch(it.tag){case 0:case 11:case 15:Qj(9,it,it.return)}var mt=it.sibling;if(mt!==null){mt.return=it.return,V$3=mt;break e}V$3=it.return}}var _t=tt.current;for(V$3=_t;V$3!==null;){ot=V$3;var xt=ot.child;if(ot.subtreeFlags&2064&&xt!==null)xt.return=ot,V$3=xt;else e:for(ot=_t;V$3!==null;){if(st=V$3,st.flags&2048)try{switch(st.tag){case 0:case 11:case 15:Rj(9,st)}}catch(Tt){W$1(st,st.return,Tt)}if(st===ot){V$3=null;break e}var St=st.sibling;if(St!==null){St.return=st.return,V$3=St;break e}V$3=st.return}}if(K=rt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,tt)}catch{}nt=!0}return nt}finally{C$1=_e,pk.transition=_}}return!1}function Yk(tt,_,_e){_=Ki(_e,_),_=Oi(tt,_,1),tt=dh(tt,_,1),_=L$2(),tt!==null&&(Ac(tt,1,_),Ek(tt,_))}function W$1(tt,_,_e){if(tt.tag===3)Yk(tt,tt,_e);else for(;_!==null;){if(_.tag===3){Yk(_,tt,_e);break}else if(_.tag===1){var nt=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof nt.componentDidCatch=="function"&&(Si===null||!Si.has(nt))){tt=Ki(_e,tt),tt=Ri(_,tt,1),_=dh(_,tt,1),tt=L$2(),_!==null&&(Ac(_,1,tt),Ek(_,tt));break}}_=_.return}}function Ui(tt,_,_e){var nt=tt.pingCache;nt!==null&&nt.delete(_),_=L$2(),tt.pingedLanes|=tt.suspendedLanes&_e,R$1===tt&&(Z&_e)===_e&&(T$2===4||T$2===3&&(Z&130023424)===Z&&500>B$1()-gk?Lk(tt,0):sk|=_e),Ek(tt,_)}function Zk(tt,_){_===0&&(tt.mode&1?(_=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_=1);var _e=L$2();tt=Zg(tt,_),tt!==null&&(Ac(tt,_,_e),Ek(tt,_e))}function vj(tt){var _=tt.memoizedState,_e=0;_!==null&&(_e=_.retryLane),Zk(tt,_e)}function ck(tt,_){var _e=0;switch(tt.tag){case 13:var nt=tt.stateNode,rt=tt.memoizedState;rt!==null&&(_e=rt.retryLane);break;case 19:nt=tt.stateNode;break;default:throw Error(p$3(314))}nt!==null&&nt.delete(_),Zk(tt,_e)}var Wk;Wk=function(tt,_,_e){if(tt!==null)if(tt.memoizedProps!==_.pendingProps||Wf.current)Ug=!0;else{if(!(tt.lanes&_e)&&!(_.flags&128))return Ug=!1,zj(tt,_,_e);Ug=!!(tt.flags&131072)}else Ug=!1,I$3&&_.flags&1048576&&ug(_,ng,_.index);switch(_.lanes=0,_.tag){case 2:var nt=_.type;jj(tt,_),tt=_.pendingProps;var rt=Yf(_,H$2.current);Tg(_,_e),rt=Xh(null,_,nt,tt,rt,_e);var it=bi();return _.flags|=1,typeof rt=="object"&&rt!==null&&typeof rt.render=="function"&&rt.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Zf(nt)?(it=!0,cg(_)):it=!1,_.memoizedState=rt.state!==null&&rt.state!==void 0?rt.state:null,ah(_),rt.updater=nh,_.stateNode=rt,rt._reactInternals=_,rh(_,nt,tt,_e),_=kj(null,_,nt,!0,it,_e)):(_.tag=0,I$3&&it&&vg(_),Yi(null,_,rt,_e),_=_.child),_;case 16:nt=_.elementType;e:{switch(jj(tt,_),tt=_.pendingProps,rt=nt._init,nt=rt(nt._payload),_.type=nt,rt=_.tag=$k(nt),tt=Lg(nt,tt),rt){case 0:_=dj(null,_,nt,tt,_e);break e;case 1:_=ij(null,_,nt,tt,_e);break e;case 11:_=Zi(null,_,nt,tt,_e);break e;case 14:_=aj(null,_,nt,Lg(nt.type,tt),_e);break e}throw Error(p$3(306,nt,""))}return _;case 0:return nt=_.type,rt=_.pendingProps,rt=_.elementType===nt?rt:Lg(nt,rt),dj(tt,_,nt,rt,_e);case 1:return nt=_.type,rt=_.pendingProps,rt=_.elementType===nt?rt:Lg(nt,rt),ij(tt,_,nt,rt,_e);case 3:e:{if(lj(_),tt===null)throw Error(p$3(387));nt=_.pendingProps,it=_.memoizedState,rt=it.element,bh(tt,_),gh(_,nt,null,_e);var ot=_.memoizedState;if(nt=ot.element,it.isDehydrated)if(it={element:nt,isDehydrated:!1,cache:ot.cache,pendingSuspenseBoundaries:ot.pendingSuspenseBoundaries,transitions:ot.transitions},_.updateQueue.baseState=it,_.memoizedState=it,_.flags&256){rt=Ki(Error(p$3(423)),_),_=mj(tt,_,nt,_e,rt);break e}else if(nt!==rt){rt=Ki(Error(p$3(424)),_),_=mj(tt,_,nt,_e,rt);break e}else for(yg=Lf(_.stateNode.containerInfo.firstChild),xg=_,I$3=!0,zg=null,_e=Ch(_,null,nt,_e),_.child=_e;_e;)_e.flags=_e.flags&-3|4096,_e=_e.sibling;else{if(Ig(),nt===rt){_=$i(tt,_,_e);break e}Yi(tt,_,nt,_e)}_=_.child}return _;case 5:return Kh(_),tt===null&&Eg(_),nt=_.type,rt=_.pendingProps,it=tt!==null?tt.memoizedProps:null,ot=rt.children,Ef(nt,rt)?ot=null:it!==null&&Ef(nt,it)&&(_.flags|=32),hj(tt,_),Yi(tt,_,ot,_e),_.child;case 6:return tt===null&&Eg(_),null;case 13:return pj(tt,_,_e);case 4:return Ih(_,_.stateNode.containerInfo),nt=_.pendingProps,tt===null?_.child=Bh(_,null,nt,_e):Yi(tt,_,nt,_e),_.child;case 11:return nt=_.type,rt=_.pendingProps,rt=_.elementType===nt?rt:Lg(nt,rt),Zi(tt,_,nt,rt,_e);case 7:return Yi(tt,_,_.pendingProps,_e),_.child;case 8:return Yi(tt,_,_.pendingProps.children,_e),_.child;case 12:return Yi(tt,_,_.pendingProps.children,_e),_.child;case 10:e:{if(nt=_.type._context,rt=_.pendingProps,it=_.memoizedProps,ot=rt.value,G$1(Mg,nt._currentValue),nt._currentValue=ot,it!==null)if(He(it.value,ot)){if(it.children===rt.children&&!Wf.current){_=$i(tt,_,_e);break e}}else for(it=_.child,it!==null&&(it.return=_);it!==null;){var st=it.dependencies;if(st!==null){ot=it.child;for(var at=st.firstContext;at!==null;){if(at.context===nt){if(it.tag===1){at=ch(-1,_e&-_e),at.tag=2;var lt=it.updateQueue;if(lt!==null){lt=lt.shared;var ct=lt.pending;ct===null?at.next=at:(at.next=ct.next,ct.next=at),lt.pending=at}}it.lanes|=_e,at=it.alternate,at!==null&&(at.lanes|=_e),Sg(it.return,_e,_),st.lanes|=_e;break}at=at.next}}else if(it.tag===10)ot=it.type===_.type?null:it.child;else if(it.tag===18){if(ot=it.return,ot===null)throw Error(p$3(341));ot.lanes|=_e,st=ot.alternate,st!==null&&(st.lanes|=_e),Sg(ot,_e,_),ot=it.sibling}else ot=it.child;if(ot!==null)ot.return=it;else for(ot=it;ot!==null;){if(ot===_){ot=null;break}if(it=ot.sibling,it!==null){it.return=ot.return,ot=it;break}ot=ot.return}it=ot}Yi(tt,_,rt.children,_e),_=_.child}return _;case 9:return rt=_.type,nt=_.pendingProps.children,Tg(_,_e),rt=Vg(rt),nt=nt(rt),_.flags|=1,Yi(tt,_,nt,_e),_.child;case 14:return nt=_.type,rt=Lg(nt,_.pendingProps),rt=Lg(nt.type,rt),aj(tt,_,nt,rt,_e);case 15:return cj(tt,_,_.type,_.pendingProps,_e);case 17:return nt=_.type,rt=_.pendingProps,rt=_.elementType===nt?rt:Lg(nt,rt),jj(tt,_),_.tag=1,Zf(nt)?(tt=!0,cg(_)):tt=!1,Tg(_,_e),ph(_,nt,rt),rh(_,nt,rt,_e),kj(null,_,nt,!0,tt,_e);case 19:return yj(tt,_,_e);case 22:return ej(tt,_,_e)}throw Error(p$3(156,_.tag))};function Gk(tt,_){return ac(tt,_)}function al(tt,_,_e,nt){this.tag=tt,this.key=_e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=nt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(tt,_,_e,nt){return new al(tt,_,_e,nt)}function bj(tt){return tt=tt.prototype,!(!tt||!tt.isReactComponent)}function $k(tt){if(typeof tt=="function")return bj(tt)?1:0;if(tt!=null){if(tt=tt.$$typeof,tt===Da)return 11;if(tt===Ga)return 14}return 2}function wh(tt,_){var _e=tt.alternate;return _e===null?(_e=Bg(tt.tag,_,tt.key,tt.mode),_e.elementType=tt.elementType,_e.type=tt.type,_e.stateNode=tt.stateNode,_e.alternate=tt,tt.alternate=_e):(_e.pendingProps=_,_e.type=tt.type,_e.flags=0,_e.subtreeFlags=0,_e.deletions=null),_e.flags=tt.flags&14680064,_e.childLanes=tt.childLanes,_e.lanes=tt.lanes,_e.child=tt.child,_e.memoizedProps=tt.memoizedProps,_e.memoizedState=tt.memoizedState,_e.updateQueue=tt.updateQueue,_=tt.dependencies,_e.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},_e.sibling=tt.sibling,_e.index=tt.index,_e.ref=tt.ref,_e}function yh(tt,_,_e,nt,rt,it){var ot=2;if(nt=tt,typeof tt=="function")bj(tt)&&(ot=1);else if(typeof tt=="string")ot=5;else e:switch(tt){case ya:return Ah(_e.children,rt,it,_);case za:ot=8,rt|=8;break;case Aa:return tt=Bg(12,_e,_,rt|2),tt.elementType=Aa,tt.lanes=it,tt;case Ea:return tt=Bg(13,_e,_,rt),tt.elementType=Ea,tt.lanes=it,tt;case Fa:return tt=Bg(19,_e,_,rt),tt.elementType=Fa,tt.lanes=it,tt;case Ia:return qj(_e,rt,it,_);default:if(typeof tt=="object"&&tt!==null)switch(tt.$$typeof){case Ba:ot=10;break e;case Ca:ot=9;break e;case Da:ot=11;break e;case Ga:ot=14;break e;case Ha:ot=16,nt=null;break e}throw Error(p$3(130,tt==null?tt:typeof tt,""))}return _=Bg(ot,_e,_,rt),_.elementType=tt,_.type=nt,_.lanes=it,_}function Ah(tt,_,_e,nt){return tt=Bg(7,tt,nt,_),tt.lanes=_e,tt}function qj(tt,_,_e,nt){return tt=Bg(22,tt,nt,_),tt.elementType=Ia,tt.lanes=_e,tt.stateNode={isHidden:!1},tt}function xh(tt,_,_e){return tt=Bg(6,tt,null,_),tt.lanes=_e,tt}function zh(tt,_,_e){return _=Bg(4,tt.children!==null?tt.children:[],tt.key,_),_.lanes=_e,_.stateNode={containerInfo:tt.containerInfo,pendingChildren:null,implementation:tt.implementation},_}function bl(tt,_,_e,nt,rt){this.tag=_,this.containerInfo=tt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=nt,this.onRecoverableError=rt,this.mutableSourceEagerHydrationData=null}function cl(tt,_,_e,nt,rt,it,ot,st,at){return tt=new bl(tt,_,_e,st,at),_===1?(_=1,it===!0&&(_|=8)):_=0,it=Bg(3,null,null,_),tt.current=it,it.stateNode=tt,it.memoizedState={element:nt,isDehydrated:_e,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(it),tt}function dl(tt,_,_e){var nt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:nt==null?null:""+nt,children:tt,containerInfo:_,implementation:_e}}function el(tt){if(!tt)return Vf;tt=tt._reactInternals;e:{if(Vb(tt)!==tt||tt.tag!==1)throw Error(p$3(170));var _=tt;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Zf(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(p$3(171))}if(tt.tag===1){var _e=tt.type;if(Zf(_e))return bg(tt,_e,_)}return _}function fl$2(tt,_,_e,nt,rt,it,ot,st,at){return tt=cl(_e,nt,!0,tt,rt,it,ot,st,at),tt.context=el(null),_e=tt.current,nt=L$2(),rt=lh(_e),it=ch(nt,rt),it.callback=_??null,dh(_e,it,rt),tt.current.lanes=rt,Ac(tt,rt,nt),Ek(tt,nt),tt}function gl(tt,_,_e,nt){var rt=_.current,it=L$2(),ot=lh(rt);return _e=el(_e),_.context===null?_.context=_e:_.pendingContext=_e,_=ch(it,ot),_.payload={element:tt},nt=nt===void 0?null:nt,nt!==null&&(_.callback=nt),tt=dh(rt,_,ot),tt!==null&&(mh(tt,rt,ot,it),eh(tt,rt,ot)),ot}function hl(tt){if(tt=tt.current,!tt.child)return null;switch(tt.child.tag){case 5:return tt.child.stateNode;default:return tt.child.stateNode}}function il(tt,_){if(tt=tt.memoizedState,tt!==null&&tt.dehydrated!==null){var _e=tt.retryLane;tt.retryLane=_e!==0&&_e<_?_e:_}}function jl(tt,_){il(tt,_),(tt=tt.alternate)&&il(tt,_)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(tt){console.error(tt)};function ml(tt){this._internalRoot=tt}nl.prototype.render=ml.prototype.render=function(tt){var _=this._internalRoot;if(_===null)throw Error(p$3(409));gl(tt,_,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var tt=this._internalRoot;if(tt!==null){this._internalRoot=null;var _=tt.containerInfo;Sk(function(){gl(null,tt,null,null)}),_[uf]=null}};function nl(tt){this._internalRoot=tt}nl.prototype.unstable_scheduleHydration=function(tt){if(tt){var _=Hc();tt={blockedOn:null,target:tt,priority:_};for(var _e=0;_e<Qc.length&&_!==0&&_<Qc[_e].priority;_e++);Qc.splice(_e,0,tt),_e===0&&Vc(tt)}};function ol(tt){return!(!tt||tt.nodeType!==1&&tt.nodeType!==9&&tt.nodeType!==11)}function pl(tt){return!(!tt||tt.nodeType!==1&&tt.nodeType!==9&&tt.nodeType!==11&&(tt.nodeType!==8||tt.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(tt,_,_e,nt,rt){if(rt){if(typeof nt=="function"){var it=nt;nt=function(){var lt=hl(ot);it.call(lt)}}var ot=fl$2(_,nt,tt,0,null,!1,!1,"",ql);return tt._reactRootContainer=ot,tt[uf]=ot.current,sf(tt.nodeType===8?tt.parentNode:tt),Sk(),ot}for(;rt=tt.lastChild;)tt.removeChild(rt);if(typeof nt=="function"){var st=nt;nt=function(){var lt=hl(at);st.call(lt)}}var at=cl(tt,0,!1,null,null,!1,!1,"",ql);return tt._reactRootContainer=at,tt[uf]=at.current,sf(tt.nodeType===8?tt.parentNode:tt),Sk(function(){gl(_,at,_e,nt)}),at}function sl(tt,_,_e,nt,rt){var it=_e._reactRootContainer;if(it){var ot=it;if(typeof rt=="function"){var st=rt;rt=function(){var at=hl(ot);st.call(at)}}gl(_,ot,tt,rt)}else ot=rl(_e,_,tt,rt,nt);return hl(ot)}Ec=function(tt){switch(tt.tag){case 3:var _=tt.stateNode;if(_.current.memoizedState.isDehydrated){var _e=tc(_.pendingLanes);_e!==0&&(Cc(_,_e|1),Ek(_,B$1()),!(K&6)&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var nt=Zg(tt,1);if(nt!==null){var rt=L$2();mh(nt,tt,1,rt)}}),jl(tt,1)}};Fc=function(tt){if(tt.tag===13){var _=Zg(tt,134217728);if(_!==null){var _e=L$2();mh(_,tt,134217728,_e)}jl(tt,134217728)}};Gc=function(tt){if(tt.tag===13){var _=lh(tt),_e=Zg(tt,_);if(_e!==null){var nt=L$2();mh(_e,tt,_,nt)}jl(tt,_)}};Hc=function(){return C$1};Ic=function(tt,_){var _e=C$1;try{return C$1=tt,_()}finally{C$1=_e}};yb=function(tt,_,_e){switch(_){case"input":if(bb(tt,_e),_=_e.name,_e.type==="radio"&&_!=null){for(_e=tt;_e.parentNode;)_e=_e.parentNode;for(_e=_e.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<_e.length;_++){var nt=_e[_];if(nt!==tt&&nt.form===tt.form){var rt=Db(nt);if(!rt)throw Error(p$3(90));Wa(nt),bb(nt,rt)}}}break;case"textarea":ib(tt,_e);break;case"select":_=_e.value,_!=null&&fb(tt,!!_e.multiple,_,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(tt){return tt=Zb(tt),tt===null?null:tt.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(tt,_){var _e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(_))throw Error(p$3(200));return dl(tt,_,null,_e)};reactDom_production_min.createRoot=function(tt,_){if(!ol(tt))throw Error(p$3(299));var _e=!1,nt="",rt=ll;return _!=null&&(_.unstable_strictMode===!0&&(_e=!0),_.identifierPrefix!==void 0&&(nt=_.identifierPrefix),_.onRecoverableError!==void 0&&(rt=_.onRecoverableError)),_=cl(tt,1,!1,null,null,_e,!1,nt,rt),tt[uf]=_.current,sf(tt.nodeType===8?tt.parentNode:tt),new ml(_)};reactDom_production_min.findDOMNode=function(tt){if(tt==null)return null;if(tt.nodeType===1)return tt;var _=tt._reactInternals;if(_===void 0)throw typeof tt.render=="function"?Error(p$3(188)):(tt=Object.keys(tt).join(","),Error(p$3(268,tt)));return tt=Zb(_),tt=tt===null?null:tt.stateNode,tt};reactDom_production_min.flushSync=function(tt){return Sk(tt)};reactDom_production_min.hydrate=function(tt,_,_e){if(!pl(_))throw Error(p$3(200));return sl(null,tt,_,!0,_e)};reactDom_production_min.hydrateRoot=function(tt,_,_e){if(!ol(tt))throw Error(p$3(405));var nt=_e!=null&&_e.hydratedSources||null,rt=!1,it="",ot=ll;if(_e!=null&&(_e.unstable_strictMode===!0&&(rt=!0),_e.identifierPrefix!==void 0&&(it=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(ot=_e.onRecoverableError)),_=fl$2(_,null,tt,1,_e??null,rt,!1,it,ot),tt[uf]=_.current,sf(tt),nt)for(tt=0;tt<nt.length;tt++)_e=nt[tt],rt=_e._getVersion,rt=rt(_e._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[_e,rt]:_.mutableSourceEagerHydrationData.push(_e,rt);return new nl(_)};reactDom_production_min.render=function(tt,_,_e){if(!pl(_))throw Error(p$3(200));return sl(null,tt,_,!1,_e)};reactDom_production_min.unmountComponentAtNode=function(tt){if(!pl(tt))throw Error(p$3(40));return tt._reactRootContainer?(Sk(function(){sl(null,null,tt,!1,function(){tt._reactRootContainer=null,tt[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(tt,_,_e,nt){if(!pl(_e))throw Error(p$3(200));if(tt==null||tt._reactInternals===void 0)throw Error(p$3(38));return sl(tt,_,_e,!1,nt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";(function(tt){function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(_e){console.error(_e)}}_(),tt.exports=reactDom_production_min})(reactDom);const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot$1,m$3=reactDomExports;createRoot$1=client.createRoot=m$3.createRoot,client.hydrateRoot=m$3.hydrateRoot;function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(tt){for(var _=1;_<arguments.length;_++){var _e=arguments[_];for(var nt in _e)Object.prototype.hasOwnProperty.call(_e,nt)&&(tt[nt]=_e[nt])}return tt},_extends$3.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="153",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,TwoPassDoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",_SRGBAFormat=1035,WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;let EventDispatcher$1=class{addEventListener(_,_e){this._listeners===void 0&&(this._listeners={});const nt=this._listeners;nt[_]===void 0&&(nt[_]=[]),nt[_].indexOf(_e)===-1&&nt[_].push(_e)}hasEventListener(_,_e){if(this._listeners===void 0)return!1;const nt=this._listeners;return nt[_]!==void 0&&nt[_].indexOf(_e)!==-1}removeEventListener(_,_e){if(this._listeners===void 0)return;const rt=this._listeners[_];if(rt!==void 0){const it=rt.indexOf(_e);it!==-1&&rt.splice(it,1)}}dispatchEvent(_){if(this._listeners===void 0)return;const nt=this._listeners[_.type];if(nt!==void 0){_.target=this;const rt=nt.slice(0);for(let it=0,ot=rt.length;it<ot;it++)rt[it].call(this,_);_.target=null}}};const _lut$1=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD$1=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID$1(){const tt=Math.random()*4294967295|0,_=Math.random()*4294967295|0,_e=Math.random()*4294967295|0,nt=Math.random()*4294967295|0;return(_lut$1[tt&255]+_lut$1[tt>>8&255]+_lut$1[tt>>16&255]+_lut$1[tt>>24&255]+"-"+_lut$1[_&255]+_lut$1[_>>8&255]+"-"+_lut$1[_>>16&15|64]+_lut$1[_>>24&255]+"-"+_lut$1[_e&63|128]+_lut$1[_e>>8&255]+"-"+_lut$1[_e>>16&255]+_lut$1[_e>>24&255]+_lut$1[nt&255]+_lut$1[nt>>8&255]+_lut$1[nt>>16&255]+_lut$1[nt>>24&255]).toLowerCase()}function clamp$4(tt,_,_e){return Math.max(_,Math.min(_e,tt))}function euclideanModulo(tt,_){return(tt%_+_)%_}function mapLinear(tt,_,_e,nt,rt){return nt+(tt-_)*(rt-nt)/(_e-_)}function inverseLerp(tt,_,_e){return tt!==_?(_e-tt)/(_-tt):0}function lerp(tt,_,_e){return(1-_e)*tt+_e*_}function damp(tt,_,_e,nt){return lerp(tt,_,1-Math.exp(-_e*nt))}function pingpong(tt,_=1){return _-Math.abs(euclideanModulo(tt,_*2)-_)}function smoothstep(tt,_,_e){return tt<=_?0:tt>=_e?1:(tt=(tt-_)/(_e-_),tt*tt*(3-2*tt))}function smootherstep(tt,_,_e){return tt<=_?0:tt>=_e?1:(tt=(tt-_)/(_e-_),tt*tt*tt*(tt*(tt*6-15)+10))}function randInt(tt,_){return tt+Math.floor(Math.random()*(_-tt+1))}function randFloat(tt,_){return tt+Math.random()*(_-tt)}function randFloatSpread(tt){return tt*(.5-Math.random())}function seededRandom(tt){tt!==void 0&&(_seed=tt);let _=_seed+=1831565813;return _=Math.imul(_^_>>>15,_|1),_^=_+Math.imul(_^_>>>7,_|61),((_^_>>>14)>>>0)/4294967296}function degToRad(tt){return tt*DEG2RAD$1}function radToDeg(tt){return tt*RAD2DEG}function isPowerOfTwo(tt){return(tt&tt-1)===0&&tt!==0}function ceilPowerOfTwo(tt){return Math.pow(2,Math.ceil(Math.log(tt)/Math.LN2))}function floorPowerOfTwo(tt){return Math.pow(2,Math.floor(Math.log(tt)/Math.LN2))}function setQuaternionFromProperEuler(tt,_,_e,nt,rt){const it=Math.cos,ot=Math.sin,st=it(_e/2),at=ot(_e/2),lt=it((_+nt)/2),ct=ot((_+nt)/2),ut=it((_-nt)/2),ht=ot((_-nt)/2),pt=it((nt-_)/2),gt=ot((nt-_)/2);switch(rt){case"XYX":tt.set(st*ct,at*ut,at*ht,st*lt);break;case"YZY":tt.set(at*ht,st*ct,at*ut,st*lt);break;case"ZXZ":tt.set(at*ut,at*ht,st*ct,st*lt);break;case"XZX":tt.set(st*ct,at*gt,at*pt,st*lt);break;case"YXY":tt.set(at*pt,st*ct,at*gt,st*lt);break;case"ZYZ":tt.set(at*gt,at*pt,st*ct,st*lt);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+rt)}}function denormalize(tt,_){switch(_.constructor){case Float32Array:return tt;case Uint32Array:return tt/4294967295;case Uint16Array:return tt/65535;case Uint8Array:return tt/255;case Int32Array:return Math.max(tt/2147483647,-1);case Int16Array:return Math.max(tt/32767,-1);case Int8Array:return Math.max(tt/127,-1);default:throw new Error("Invalid component type.")}}function normalize$5(tt,_){switch(_.constructor){case Float32Array:return tt;case Uint32Array:return Math.round(tt*4294967295);case Uint16Array:return Math.round(tt*65535);case Uint8Array:return Math.round(tt*255);case Int32Array:return Math.round(tt*2147483647);case Int16Array:return Math.round(tt*32767);case Int8Array:return Math.round(tt*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD:DEG2RAD$1,RAD2DEG,generateUUID:generateUUID$1,clamp:clamp$4,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize:normalize$5,denormalize};class Vector2{constructor(_=0,_e=0){Vector2.prototype.isVector2=!0,this.x=_,this.y=_e}get width(){return this.x}set width(_){this.x=_}get height(){return this.y}set height(_){this.y=_}set(_,_e){return this.x=_,this.y=_e,this}setScalar(_){return this.x=_,this.y=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setComponent(_,_e){switch(_){case 0:this.x=_e;break;case 1:this.y=_e;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y)}copy(_){return this.x=_.x,this.y=_.y,this}add(_){return this.x+=_.x,this.y+=_.y,this}addScalar(_){return this.x+=_,this.y+=_,this}addVectors(_,_e){return this.x=_.x+_e.x,this.y=_.y+_e.y,this}addScaledVector(_,_e){return this.x+=_.x*_e,this.y+=_.y*_e,this}sub(_){return this.x-=_.x,this.y-=_.y,this}subScalar(_){return this.x-=_,this.y-=_,this}subVectors(_,_e){return this.x=_.x-_e.x,this.y=_.y-_e.y,this}multiply(_){return this.x*=_.x,this.y*=_.y,this}multiplyScalar(_){return this.x*=_,this.y*=_,this}divide(_){return this.x/=_.x,this.y/=_.y,this}divideScalar(_){return this.multiplyScalar(1/_)}applyMatrix3(_){const _e=this.x,nt=this.y,rt=_.elements;return this.x=rt[0]*_e+rt[3]*nt+rt[6],this.y=rt[1]*_e+rt[4]*nt+rt[7],this}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this}clamp(_,_e){return this.x=Math.max(_.x,Math.min(_e.x,this.x)),this.y=Math.max(_.y,Math.min(_e.y,this.y)),this}clampScalar(_,_e){return this.x=Math.max(_,Math.min(_e,this.x)),this.y=Math.max(_,Math.min(_e,this.y)),this}clampLength(_,_e){const nt=this.length();return this.divideScalar(nt||1).multiplyScalar(Math.max(_,Math.min(_e,nt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(_){return this.x*_.x+this.y*_.y}cross(_){return this.x*_.y-this.y*_.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(_){const _e=Math.sqrt(this.lengthSq()*_.lengthSq());if(_e===0)return Math.PI/2;const nt=this.dot(_)/_e;return Math.acos(clamp$4(nt,-1,1))}distanceTo(_){return Math.sqrt(this.distanceToSquared(_))}distanceToSquared(_){const _e=this.x-_.x,nt=this.y-_.y;return _e*_e+nt*nt}manhattanDistanceTo(_){return Math.abs(this.x-_.x)+Math.abs(this.y-_.y)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,_e){return this.x+=(_.x-this.x)*_e,this.y+=(_.y-this.y)*_e,this}lerpVectors(_,_e,nt){return this.x=_.x+(_e.x-_.x)*nt,this.y=_.y+(_e.y-_.y)*nt,this}equals(_){return _.x===this.x&&_.y===this.y}fromArray(_,_e=0){return this.x=_[_e],this.y=_[_e+1],this}toArray(_=[],_e=0){return _[_e]=this.x,_[_e+1]=this.y,_}fromBufferAttribute(_,_e){return this.x=_.getX(_e),this.y=_.getY(_e),this}rotateAround(_,_e){const nt=Math.cos(_e),rt=Math.sin(_e),it=this.x-_.x,ot=this.y-_.y;return this.x=it*nt-ot*rt+_.x,this.y=it*rt+ot*nt+_.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(_,_e,nt,rt,it,ot,st,at,lt){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],_!==void 0&&this.set(_,_e,nt,rt,it,ot,st,at,lt)}set(_,_e,nt,rt,it,ot,st,at,lt){const ct=this.elements;return ct[0]=_,ct[1]=rt,ct[2]=st,ct[3]=_e,ct[4]=it,ct[5]=at,ct[6]=nt,ct[7]=ot,ct[8]=lt,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(_){const _e=this.elements,nt=_.elements;return _e[0]=nt[0],_e[1]=nt[1],_e[2]=nt[2],_e[3]=nt[3],_e[4]=nt[4],_e[5]=nt[5],_e[6]=nt[6],_e[7]=nt[7],_e[8]=nt[8],this}extractBasis(_,_e,nt){return _.setFromMatrix3Column(this,0),_e.setFromMatrix3Column(this,1),nt.setFromMatrix3Column(this,2),this}setFromMatrix4(_){const _e=_.elements;return this.set(_e[0],_e[4],_e[8],_e[1],_e[5],_e[9],_e[2],_e[6],_e[10]),this}multiply(_){return this.multiplyMatrices(this,_)}premultiply(_){return this.multiplyMatrices(_,this)}multiplyMatrices(_,_e){const nt=_.elements,rt=_e.elements,it=this.elements,ot=nt[0],st=nt[3],at=nt[6],lt=nt[1],ct=nt[4],ut=nt[7],ht=nt[2],pt=nt[5],gt=nt[8],yt=rt[0],vt=rt[3],mt=rt[6],_t=rt[1],xt=rt[4],St=rt[7],Tt=rt[2],Mt=rt[5],bt=rt[8];return it[0]=ot*yt+st*_t+at*Tt,it[3]=ot*vt+st*xt+at*Mt,it[6]=ot*mt+st*St+at*bt,it[1]=lt*yt+ct*_t+ut*Tt,it[4]=lt*vt+ct*xt+ut*Mt,it[7]=lt*mt+ct*St+ut*bt,it[2]=ht*yt+pt*_t+gt*Tt,it[5]=ht*vt+pt*xt+gt*Mt,it[8]=ht*mt+pt*St+gt*bt,this}multiplyScalar(_){const _e=this.elements;return _e[0]*=_,_e[3]*=_,_e[6]*=_,_e[1]*=_,_e[4]*=_,_e[7]*=_,_e[2]*=_,_e[5]*=_,_e[8]*=_,this}determinant(){const _=this.elements,_e=_[0],nt=_[1],rt=_[2],it=_[3],ot=_[4],st=_[5],at=_[6],lt=_[7],ct=_[8];return _e*ot*ct-_e*st*lt-nt*it*ct+nt*st*at+rt*it*lt-rt*ot*at}invert(){const _=this.elements,_e=_[0],nt=_[1],rt=_[2],it=_[3],ot=_[4],st=_[5],at=_[6],lt=_[7],ct=_[8],ut=ct*ot-st*lt,ht=st*at-ct*it,pt=lt*it-ot*at,gt=_e*ut+nt*ht+rt*pt;if(gt===0)return this.set(0,0,0,0,0,0,0,0,0);const yt=1/gt;return _[0]=ut*yt,_[1]=(rt*lt-ct*nt)*yt,_[2]=(st*nt-rt*ot)*yt,_[3]=ht*yt,_[4]=(ct*_e-rt*at)*yt,_[5]=(rt*it-st*_e)*yt,_[6]=pt*yt,_[7]=(nt*at-lt*_e)*yt,_[8]=(ot*_e-nt*it)*yt,this}transpose(){let _;const _e=this.elements;return _=_e[1],_e[1]=_e[3],_e[3]=_,_=_e[2],_e[2]=_e[6],_e[6]=_,_=_e[5],_e[5]=_e[7],_e[7]=_,this}getNormalMatrix(_){return this.setFromMatrix4(_).invert().transpose()}transposeIntoArray(_){const _e=this.elements;return _[0]=_e[0],_[1]=_e[3],_[2]=_e[6],_[3]=_e[1],_[4]=_e[4],_[5]=_e[7],_[6]=_e[2],_[7]=_e[5],_[8]=_e[8],this}setUvTransform(_,_e,nt,rt,it,ot,st){const at=Math.cos(it),lt=Math.sin(it);return this.set(nt*at,nt*lt,-nt*(at*ot+lt*st)+ot+_,-rt*lt,rt*at,-rt*(-lt*ot+at*st)+st+_e,0,0,1),this}scale(_,_e){return this.premultiply(_m3.makeScale(_,_e)),this}rotate(_){return this.premultiply(_m3.makeRotation(-_)),this}translate(_,_e){return this.premultiply(_m3.makeTranslation(_,_e)),this}makeTranslation(_,_e){return _.isVector2?this.set(1,0,_.x,0,1,_.y,0,0,1):this.set(1,0,_,0,1,_e,0,0,1),this}makeRotation(_){const _e=Math.cos(_),nt=Math.sin(_);return this.set(_e,-nt,0,nt,_e,0,0,0,1),this}makeScale(_,_e){return this.set(_,0,0,0,_e,0,0,0,1),this}equals(_){const _e=this.elements,nt=_.elements;for(let rt=0;rt<9;rt++)if(_e[rt]!==nt[rt])return!1;return!0}fromArray(_,_e=0){for(let nt=0;nt<9;nt++)this.elements[nt]=_[nt+_e];return this}toArray(_=[],_e=0){const nt=this.elements;return _[_e]=nt[0],_[_e+1]=nt[1],_[_e+2]=nt[2],_[_e+3]=nt[3],_[_e+4]=nt[4],_[_e+5]=nt[5],_[_e+6]=nt[6],_[_e+7]=nt[7],_[_e+8]=nt[8],_}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(tt){for(let _=tt.length-1;_>=0;--_)if(tt[_]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(tt,_){return new TYPED_ARRAYS[tt](_)}function createElementNS(tt){return document.createElementNS("http://www.w3.org/1999/xhtml",tt)}const _cache={};function warnOnce(tt){tt in _cache||(_cache[tt]=!0,console.warn(tt))}function SRGBToLinear(tt){return tt<.04045?tt*.0773993808:Math.pow(tt*.9478672986+.0521327014,2.4)}function LinearToSRGB(tt){return tt<.0031308?tt*12.92:1.055*Math.pow(tt,.41666)-.055}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=new Matrix3().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=new Matrix3().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function DisplayP3ToLinearSRGB(tt){return tt.convertSRGBToLinear().applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB)}function LinearSRGBToDisplayP3(tt){return tt.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3).convertLinearToSRGB()}const TO_LINEAR={[LinearSRGBColorSpace]:tt=>tt,[SRGBColorSpace]:tt=>tt.convertSRGBToLinear(),[DisplayP3ColorSpace]:DisplayP3ToLinearSRGB},FROM_LINEAR={[LinearSRGBColorSpace]:tt=>tt,[SRGBColorSpace]:tt=>tt.convertLinearToSRGB(),[DisplayP3ColorSpace]:LinearSRGBToDisplayP3},ColorManagement={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(tt){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!tt},get workingColorSpace(){return LinearSRGBColorSpace},set workingColorSpace(tt){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(tt,_,_e){if(this.enabled===!1||_===_e||!_||!_e)return tt;const nt=TO_LINEAR[_],rt=FROM_LINEAR[_e];if(nt===void 0||rt===void 0)throw new Error(`Unsupported color space conversion, "${_}" to "${_e}".`);return rt(nt(tt))},fromWorkingColorSpace:function(tt,_){return this.convert(tt,this.workingColorSpace,_)},toWorkingColorSpace:function(tt,_){return this.convert(tt,_,this.workingColorSpace)}};let _canvas;class ImageUtils{static getDataURL(_){if(/^data:/i.test(_.src)||typeof HTMLCanvasElement>"u")return _.src;let _e;if(_ instanceof HTMLCanvasElement)_e=_;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=_.width,_canvas.height=_.height;const nt=_canvas.getContext("2d");_ instanceof ImageData?nt.putImageData(_,0,0):nt.drawImage(_,0,0,_.width,_.height),_e=_canvas}return _e.width>2048||_e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",_),_e.toDataURL("image/jpeg",.6)):_e.toDataURL("image/png")}static sRGBToLinear(_){if(typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_ instanceof ImageBitmap){const _e=createElementNS("canvas");_e.width=_.width,_e.height=_.height;const nt=_e.getContext("2d");nt.drawImage(_,0,0,_.width,_.height);const rt=nt.getImageData(0,0,_.width,_.height),it=rt.data;for(let ot=0;ot<it.length;ot++)it[ot]=SRGBToLinear(it[ot]/255)*255;return nt.putImageData(rt,0,0),_e}else if(_.data){const _e=_.data.slice(0);for(let nt=0;nt<_e.length;nt++)_e instanceof Uint8Array||_e instanceof Uint8ClampedArray?_e[nt]=Math.floor(SRGBToLinear(_e[nt]/255)*255):_e[nt]=SRGBToLinear(_e[nt]);return{data:_e,width:_.width,height:_.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),_}}let sourceId=0;class Source{constructor(_=null){this.isSource=!0,Object.defineProperty(this,"id",{value:sourceId++}),this.uuid=generateUUID$1(),this.data=_,this.version=0}set needsUpdate(_){_===!0&&this.version++}toJSON(_){const _e=_===void 0||typeof _=="string";if(!_e&&_.images[this.uuid]!==void 0)return _.images[this.uuid];const nt={uuid:this.uuid,url:""},rt=this.data;if(rt!==null){let it;if(Array.isArray(rt)){it=[];for(let ot=0,st=rt.length;ot<st;ot++)rt[ot].isDataTexture?it.push(serializeImage(rt[ot].image)):it.push(serializeImage(rt[ot]))}else it=serializeImage(rt);nt.url=it}return _e||(_.images[this.uuid]=nt),nt}}function serializeImage(tt){return typeof HTMLImageElement<"u"&&tt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&tt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&tt instanceof ImageBitmap?ImageUtils.getDataURL(tt):tt.data?{data:Array.from(tt.data),width:tt.width,height:tt.height,type:tt.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let textureId=0;class Texture extends EventDispatcher$1{constructor(_=Texture.DEFAULT_IMAGE,_e=Texture.DEFAULT_MAPPING,nt=ClampToEdgeWrapping,rt=ClampToEdgeWrapping,it=LinearFilter,ot=LinearMipmapLinearFilter,st=RGBAFormat,at=UnsignedByteType,lt=Texture.DEFAULT_ANISOTROPY,ct=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:textureId++}),this.uuid=generateUUID$1(),this.name="",this.source=new Source(_),this.mipmaps=[],this.mapping=_e,this.channel=0,this.wrapS=nt,this.wrapT=rt,this.magFilter=it,this.minFilter=ot,this.anisotropy=lt,this.format=st,this.internalFormat=null,this.type=at,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof ct=="string"?this.colorSpace=ct:(warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=ct===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(_=null){this.source.data=_}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(_){return this.name=_.name,this.source=_.source,this.mipmaps=_.mipmaps.slice(0),this.mapping=_.mapping,this.channel=_.channel,this.wrapS=_.wrapS,this.wrapT=_.wrapT,this.magFilter=_.magFilter,this.minFilter=_.minFilter,this.anisotropy=_.anisotropy,this.format=_.format,this.internalFormat=_.internalFormat,this.type=_.type,this.offset.copy(_.offset),this.repeat.copy(_.repeat),this.center.copy(_.center),this.rotation=_.rotation,this.matrixAutoUpdate=_.matrixAutoUpdate,this.matrix.copy(_.matrix),this.generateMipmaps=_.generateMipmaps,this.premultiplyAlpha=_.premultiplyAlpha,this.flipY=_.flipY,this.unpackAlignment=_.unpackAlignment,this.colorSpace=_.colorSpace,this.userData=JSON.parse(JSON.stringify(_.userData)),this.needsUpdate=!0,this}toJSON(_){const _e=_===void 0||typeof _=="string";if(!_e&&_.textures[this.uuid]!==void 0)return _.textures[this.uuid];const nt={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(_).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(nt.userData=this.userData),_e||(_.textures[this.uuid]=nt),nt}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(_){if(this.mapping!==UVMapping)return _;if(_.applyMatrix3(this.matrix),_.x<0||_.x>1)switch(this.wrapS){case RepeatWrapping:_.x=_.x-Math.floor(_.x);break;case ClampToEdgeWrapping:_.x=_.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_.x)%2)===1?_.x=Math.ceil(_.x)-_.x:_.x=_.x-Math.floor(_.x);break}if(_.y<0||_.y>1)switch(this.wrapT){case RepeatWrapping:_.y=_.y-Math.floor(_.y);break;case ClampToEdgeWrapping:_.y=_.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_.y)%2)===1?_.y=Math.ceil(_.y)-_.y:_.y=_.y-Math.floor(_.y);break}return this.flipY&&(_.y=1-_.y),_}set needsUpdate(_){_===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set encoding(_){warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=_===sRGBEncoding?SRGBColorSpace:NoColorSpace}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(_=0,_e=0,nt=0,rt=1){Vector4.prototype.isVector4=!0,this.x=_,this.y=_e,this.z=nt,this.w=rt}get width(){return this.z}set width(_){this.z=_}get height(){return this.w}set height(_){this.w=_}set(_,_e,nt,rt){return this.x=_,this.y=_e,this.z=nt,this.w=rt,this}setScalar(_){return this.x=_,this.y=_,this.z=_,this.w=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setZ(_){return this.z=_,this}setW(_){return this.w=_,this}setComponent(_,_e){switch(_){case 0:this.x=_e;break;case 1:this.y=_e;break;case 2:this.z=_e;break;case 3:this.w=_e;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this.w=_.w!==void 0?_.w:1,this}add(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this.w+=_.w,this}addScalar(_){return this.x+=_,this.y+=_,this.z+=_,this.w+=_,this}addVectors(_,_e){return this.x=_.x+_e.x,this.y=_.y+_e.y,this.z=_.z+_e.z,this.w=_.w+_e.w,this}addScaledVector(_,_e){return this.x+=_.x*_e,this.y+=_.y*_e,this.z+=_.z*_e,this.w+=_.w*_e,this}sub(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this.w-=_.w,this}subScalar(_){return this.x-=_,this.y-=_,this.z-=_,this.w-=_,this}subVectors(_,_e){return this.x=_.x-_e.x,this.y=_.y-_e.y,this.z=_.z-_e.z,this.w=_.w-_e.w,this}multiply(_){return this.x*=_.x,this.y*=_.y,this.z*=_.z,this.w*=_.w,this}multiplyScalar(_){return this.x*=_,this.y*=_,this.z*=_,this.w*=_,this}applyMatrix4(_){const _e=this.x,nt=this.y,rt=this.z,it=this.w,ot=_.elements;return this.x=ot[0]*_e+ot[4]*nt+ot[8]*rt+ot[12]*it,this.y=ot[1]*_e+ot[5]*nt+ot[9]*rt+ot[13]*it,this.z=ot[2]*_e+ot[6]*nt+ot[10]*rt+ot[14]*it,this.w=ot[3]*_e+ot[7]*nt+ot[11]*rt+ot[15]*it,this}divideScalar(_){return this.multiplyScalar(1/_)}setAxisAngleFromQuaternion(_){this.w=2*Math.acos(_.w);const _e=Math.sqrt(1-_.w*_.w);return _e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=_.x/_e,this.y=_.y/_e,this.z=_.z/_e),this}setAxisAngleFromRotationMatrix(_){let _e,nt,rt,it;const at=_.elements,lt=at[0],ct=at[4],ut=at[8],ht=at[1],pt=at[5],gt=at[9],yt=at[2],vt=at[6],mt=at[10];if(Math.abs(ct-ht)<.01&&Math.abs(ut-yt)<.01&&Math.abs(gt-vt)<.01){if(Math.abs(ct+ht)<.1&&Math.abs(ut+yt)<.1&&Math.abs(gt+vt)<.1&&Math.abs(lt+pt+mt-3)<.1)return this.set(1,0,0,0),this;_e=Math.PI;const xt=(lt+1)/2,St=(pt+1)/2,Tt=(mt+1)/2,Mt=(ct+ht)/4,bt=(ut+yt)/4,Pt=(gt+vt)/4;return xt>St&&xt>Tt?xt<.01?(nt=0,rt=.707106781,it=.707106781):(nt=Math.sqrt(xt),rt=Mt/nt,it=bt/nt):St>Tt?St<.01?(nt=.707106781,rt=0,it=.707106781):(rt=Math.sqrt(St),nt=Mt/rt,it=Pt/rt):Tt<.01?(nt=.707106781,rt=.707106781,it=0):(it=Math.sqrt(Tt),nt=bt/it,rt=Pt/it),this.set(nt,rt,it,_e),this}let _t=Math.sqrt((vt-gt)*(vt-gt)+(ut-yt)*(ut-yt)+(ht-ct)*(ht-ct));return Math.abs(_t)<.001&&(_t=1),this.x=(vt-gt)/_t,this.y=(ut-yt)/_t,this.z=(ht-ct)/_t,this.w=Math.acos((lt+pt+mt-1)/2),this}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this.z=Math.min(this.z,_.z),this.w=Math.min(this.w,_.w),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this.z=Math.max(this.z,_.z),this.w=Math.max(this.w,_.w),this}clamp(_,_e){return this.x=Math.max(_.x,Math.min(_e.x,this.x)),this.y=Math.max(_.y,Math.min(_e.y,this.y)),this.z=Math.max(_.z,Math.min(_e.z,this.z)),this.w=Math.max(_.w,Math.min(_e.w,this.w)),this}clampScalar(_,_e){return this.x=Math.max(_,Math.min(_e,this.x)),this.y=Math.max(_,Math.min(_e,this.y)),this.z=Math.max(_,Math.min(_e,this.z)),this.w=Math.max(_,Math.min(_e,this.w)),this}clampLength(_,_e){const nt=this.length();return this.divideScalar(nt||1).multiplyScalar(Math.max(_,Math.min(_e,nt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z+this.w*_.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,_e){return this.x+=(_.x-this.x)*_e,this.y+=(_.y-this.y)*_e,this.z+=(_.z-this.z)*_e,this.w+=(_.w-this.w)*_e,this}lerpVectors(_,_e,nt){return this.x=_.x+(_e.x-_.x)*nt,this.y=_.y+(_e.y-_.y)*nt,this.z=_.z+(_e.z-_.z)*nt,this.w=_.w+(_e.w-_.w)*nt,this}equals(_){return _.x===this.x&&_.y===this.y&&_.z===this.z&&_.w===this.w}fromArray(_,_e=0){return this.x=_[_e],this.y=_[_e+1],this.z=_[_e+2],this.w=_[_e+3],this}toArray(_=[],_e=0){return _[_e]=this.x,_[_e+1]=this.y,_[_e+2]=this.z,_[_e+3]=this.w,_}fromBufferAttribute(_,_e){return this.x=_.getX(_e),this.y=_.getY(_e),this.z=_.getZ(_e),this.w=_.getW(_e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class WebGLRenderTarget extends EventDispatcher$1{constructor(_=1,_e=1,nt={}){super(),this.isWebGLRenderTarget=!0,this.width=_,this.height=_e,this.depth=1,this.scissor=new Vector4(0,0,_,_e),this.scissorTest=!1,this.viewport=new Vector4(0,0,_,_e);const rt={width:_,height:_e,depth:1};nt.encoding!==void 0&&(warnOnce("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),nt.colorSpace=nt.encoding===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.texture=new Texture(rt,nt.mapping,nt.wrapS,nt.wrapT,nt.magFilter,nt.minFilter,nt.format,nt.type,nt.anisotropy,nt.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=nt.generateMipmaps!==void 0?nt.generateMipmaps:!1,this.texture.internalFormat=nt.internalFormat!==void 0?nt.internalFormat:null,this.texture.minFilter=nt.minFilter!==void 0?nt.minFilter:LinearFilter,this.depthBuffer=nt.depthBuffer!==void 0?nt.depthBuffer:!0,this.stencilBuffer=nt.stencilBuffer!==void 0?nt.stencilBuffer:!1,this.depthTexture=nt.depthTexture!==void 0?nt.depthTexture:null,this.samples=nt.samples!==void 0?nt.samples:0}setSize(_,_e,nt=1){(this.width!==_||this.height!==_e||this.depth!==nt)&&(this.width=_,this.height=_e,this.depth=nt,this.texture.image.width=_,this.texture.image.height=_e,this.texture.image.depth=nt,this.dispose()),this.viewport.set(0,0,_,_e),this.scissor.set(0,0,_,_e)}clone(){return new this.constructor().copy(this)}copy(_){this.width=_.width,this.height=_.height,this.depth=_.depth,this.scissor.copy(_.scissor),this.scissorTest=_.scissorTest,this.viewport.copy(_.viewport),this.texture=_.texture.clone(),this.texture.isRenderTargetTexture=!0;const _e=Object.assign({},_.texture.image);return this.texture.source=new Source(_e),this.depthBuffer=_.depthBuffer,this.stencilBuffer=_.stencilBuffer,_.depthTexture!==null&&(this.depthTexture=_.depthTexture.clone()),this.samples=_.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class DataArrayTexture extends Texture{constructor(_=null,_e=1,nt=1,rt=1){super(null),this.isDataArrayTexture=!0,this.image={data:_,width:_e,height:nt,depth:rt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(_=1,_e=1,nt=1){super(_,_e),this.isWebGLArrayRenderTarget=!0,this.depth=nt,this.texture=new DataArrayTexture(null,_,_e,nt),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(_=null,_e=1,nt=1,rt=1){super(null),this.isData3DTexture=!0,this.image={data:_,width:_e,height:nt,depth:rt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(_=1,_e=1,nt=1){super(_,_e),this.isWebGL3DRenderTarget=!0,this.depth=nt,this.texture=new Data3DTexture(null,_,_e,nt),this.texture.isRenderTargetTexture=!0}}class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(_=1,_e=1,nt=1,rt={}){super(_,_e,rt),this.isWebGLMultipleRenderTargets=!0;const it=this.texture;this.texture=[];for(let ot=0;ot<nt;ot++)this.texture[ot]=it.clone(),this.texture[ot].isRenderTargetTexture=!0}setSize(_,_e,nt=1){if(this.width!==_||this.height!==_e||this.depth!==nt){this.width=_,this.height=_e,this.depth=nt;for(let rt=0,it=this.texture.length;rt<it;rt++)this.texture[rt].image.width=_,this.texture[rt].image.height=_e,this.texture[rt].image.depth=nt;this.dispose()}return this.viewport.set(0,0,_,_e),this.scissor.set(0,0,_,_e),this}copy(_){this.dispose(),this.width=_.width,this.height=_.height,this.depth=_.depth,this.scissor.copy(_.scissor),this.scissorTest=_.scissorTest,this.viewport.copy(_.viewport),this.depthBuffer=_.depthBuffer,this.stencilBuffer=_.stencilBuffer,_.depthTexture!==null&&(this.depthTexture=_.depthTexture.clone()),this.texture.length=0;for(let _e=0,nt=_.texture.length;_e<nt;_e++)this.texture[_e]=_.texture[_e].clone(),this.texture[_e].isRenderTargetTexture=!0;return this}}class Quaternion{constructor(_=0,_e=0,nt=0,rt=1){this.isQuaternion=!0,this._x=_,this._y=_e,this._z=nt,this._w=rt}static slerpFlat(_,_e,nt,rt,it,ot,st){let at=nt[rt+0],lt=nt[rt+1],ct=nt[rt+2],ut=nt[rt+3];const ht=it[ot+0],pt=it[ot+1],gt=it[ot+2],yt=it[ot+3];if(st===0){_[_e+0]=at,_[_e+1]=lt,_[_e+2]=ct,_[_e+3]=ut;return}if(st===1){_[_e+0]=ht,_[_e+1]=pt,_[_e+2]=gt,_[_e+3]=yt;return}if(ut!==yt||at!==ht||lt!==pt||ct!==gt){let vt=1-st;const mt=at*ht+lt*pt+ct*gt+ut*yt,_t=mt>=0?1:-1,xt=1-mt*mt;if(xt>Number.EPSILON){const Tt=Math.sqrt(xt),Mt=Math.atan2(Tt,mt*_t);vt=Math.sin(vt*Mt)/Tt,st=Math.sin(st*Mt)/Tt}const St=st*_t;if(at=at*vt+ht*St,lt=lt*vt+pt*St,ct=ct*vt+gt*St,ut=ut*vt+yt*St,vt===1-st){const Tt=1/Math.sqrt(at*at+lt*lt+ct*ct+ut*ut);at*=Tt,lt*=Tt,ct*=Tt,ut*=Tt}}_[_e]=at,_[_e+1]=lt,_[_e+2]=ct,_[_e+3]=ut}static multiplyQuaternionsFlat(_,_e,nt,rt,it,ot){const st=nt[rt],at=nt[rt+1],lt=nt[rt+2],ct=nt[rt+3],ut=it[ot],ht=it[ot+1],pt=it[ot+2],gt=it[ot+3];return _[_e]=st*gt+ct*ut+at*pt-lt*ht,_[_e+1]=at*gt+ct*ht+lt*ut-st*pt,_[_e+2]=lt*gt+ct*pt+st*ht-at*ut,_[_e+3]=ct*gt-st*ut-at*ht-lt*pt,_}get x(){return this._x}set x(_){this._x=_,this._onChangeCallback()}get y(){return this._y}set y(_){this._y=_,this._onChangeCallback()}get z(){return this._z}set z(_){this._z=_,this._onChangeCallback()}get w(){return this._w}set w(_){this._w=_,this._onChangeCallback()}set(_,_e,nt,rt){return this._x=_,this._y=_e,this._z=nt,this._w=rt,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(_){return this._x=_.x,this._y=_.y,this._z=_.z,this._w=_.w,this._onChangeCallback(),this}setFromEuler(_,_e){const nt=_._x,rt=_._y,it=_._z,ot=_._order,st=Math.cos,at=Math.sin,lt=st(nt/2),ct=st(rt/2),ut=st(it/2),ht=at(nt/2),pt=at(rt/2),gt=at(it/2);switch(ot){case"XYZ":this._x=ht*ct*ut+lt*pt*gt,this._y=lt*pt*ut-ht*ct*gt,this._z=lt*ct*gt+ht*pt*ut,this._w=lt*ct*ut-ht*pt*gt;break;case"YXZ":this._x=ht*ct*ut+lt*pt*gt,this._y=lt*pt*ut-ht*ct*gt,this._z=lt*ct*gt-ht*pt*ut,this._w=lt*ct*ut+ht*pt*gt;break;case"ZXY":this._x=ht*ct*ut-lt*pt*gt,this._y=lt*pt*ut+ht*ct*gt,this._z=lt*ct*gt+ht*pt*ut,this._w=lt*ct*ut-ht*pt*gt;break;case"ZYX":this._x=ht*ct*ut-lt*pt*gt,this._y=lt*pt*ut+ht*ct*gt,this._z=lt*ct*gt-ht*pt*ut,this._w=lt*ct*ut+ht*pt*gt;break;case"YZX":this._x=ht*ct*ut+lt*pt*gt,this._y=lt*pt*ut+ht*ct*gt,this._z=lt*ct*gt-ht*pt*ut,this._w=lt*ct*ut-ht*pt*gt;break;case"XZY":this._x=ht*ct*ut-lt*pt*gt,this._y=lt*pt*ut-ht*ct*gt,this._z=lt*ct*gt+ht*pt*ut,this._w=lt*ct*ut+ht*pt*gt;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+ot)}return _e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(_,_e){const nt=_e/2,rt=Math.sin(nt);return this._x=_.x*rt,this._y=_.y*rt,this._z=_.z*rt,this._w=Math.cos(nt),this._onChangeCallback(),this}setFromRotationMatrix(_){const _e=_.elements,nt=_e[0],rt=_e[4],it=_e[8],ot=_e[1],st=_e[5],at=_e[9],lt=_e[2],ct=_e[6],ut=_e[10],ht=nt+st+ut;if(ht>0){const pt=.5/Math.sqrt(ht+1);this._w=.25/pt,this._x=(ct-at)*pt,this._y=(it-lt)*pt,this._z=(ot-rt)*pt}else if(nt>st&&nt>ut){const pt=2*Math.sqrt(1+nt-st-ut);this._w=(ct-at)/pt,this._x=.25*pt,this._y=(rt+ot)/pt,this._z=(it+lt)/pt}else if(st>ut){const pt=2*Math.sqrt(1+st-nt-ut);this._w=(it-lt)/pt,this._x=(rt+ot)/pt,this._y=.25*pt,this._z=(at+ct)/pt}else{const pt=2*Math.sqrt(1+ut-nt-st);this._w=(ot-rt)/pt,this._x=(it+lt)/pt,this._y=(at+ct)/pt,this._z=.25*pt}return this._onChangeCallback(),this}setFromUnitVectors(_,_e){let nt=_.dot(_e)+1;return nt<Number.EPSILON?(nt=0,Math.abs(_.x)>Math.abs(_.z)?(this._x=-_.y,this._y=_.x,this._z=0,this._w=nt):(this._x=0,this._y=-_.z,this._z=_.y,this._w=nt)):(this._x=_.y*_e.z-_.z*_e.y,this._y=_.z*_e.x-_.x*_e.z,this._z=_.x*_e.y-_.y*_e.x,this._w=nt),this.normalize()}angleTo(_){return 2*Math.acos(Math.abs(clamp$4(this.dot(_),-1,1)))}rotateTowards(_,_e){const nt=this.angleTo(_);if(nt===0)return this;const rt=Math.min(1,_e/nt);return this.slerp(_,rt),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(_){return this._x*_._x+this._y*_._y+this._z*_._z+this._w*_._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let _=this.length();return _===0?(this._x=0,this._y=0,this._z=0,this._w=1):(_=1/_,this._x=this._x*_,this._y=this._y*_,this._z=this._z*_,this._w=this._w*_),this._onChangeCallback(),this}multiply(_){return this.multiplyQuaternions(this,_)}premultiply(_){return this.multiplyQuaternions(_,this)}multiplyQuaternions(_,_e){const nt=_._x,rt=_._y,it=_._z,ot=_._w,st=_e._x,at=_e._y,lt=_e._z,ct=_e._w;return this._x=nt*ct+ot*st+rt*lt-it*at,this._y=rt*ct+ot*at+it*st-nt*lt,this._z=it*ct+ot*lt+nt*at-rt*st,this._w=ot*ct-nt*st-rt*at-it*lt,this._onChangeCallback(),this}slerp(_,_e){if(_e===0)return this;if(_e===1)return this.copy(_);const nt=this._x,rt=this._y,it=this._z,ot=this._w;let st=ot*_._w+nt*_._x+rt*_._y+it*_._z;if(st<0?(this._w=-_._w,this._x=-_._x,this._y=-_._y,this._z=-_._z,st=-st):this.copy(_),st>=1)return this._w=ot,this._x=nt,this._y=rt,this._z=it,this;const at=1-st*st;if(at<=Number.EPSILON){const pt=1-_e;return this._w=pt*ot+_e*this._w,this._x=pt*nt+_e*this._x,this._y=pt*rt+_e*this._y,this._z=pt*it+_e*this._z,this.normalize(),this._onChangeCallback(),this}const lt=Math.sqrt(at),ct=Math.atan2(lt,st),ut=Math.sin((1-_e)*ct)/lt,ht=Math.sin(_e*ct)/lt;return this._w=ot*ut+this._w*ht,this._x=nt*ut+this._x*ht,this._y=rt*ut+this._y*ht,this._z=it*ut+this._z*ht,this._onChangeCallback(),this}slerpQuaternions(_,_e,nt){return this.copy(_).slerp(_e,nt)}random(){const _=Math.random(),_e=Math.sqrt(1-_),nt=Math.sqrt(_),rt=2*Math.PI*Math.random(),it=2*Math.PI*Math.random();return this.set(_e*Math.cos(rt),nt*Math.sin(it),nt*Math.cos(it),_e*Math.sin(rt))}equals(_){return _._x===this._x&&_._y===this._y&&_._z===this._z&&_._w===this._w}fromArray(_,_e=0){return this._x=_[_e],this._y=_[_e+1],this._z=_[_e+2],this._w=_[_e+3],this._onChangeCallback(),this}toArray(_=[],_e=0){return _[_e]=this._x,_[_e+1]=this._y,_[_e+2]=this._z,_[_e+3]=this._w,_}fromBufferAttribute(_,_e){return this._x=_.getX(_e),this._y=_.getY(_e),this._z=_.getZ(_e),this._w=_.getW(_e),this}toJSON(){return this.toArray()}_onChange(_){return this._onChangeCallback=_,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(_=0,_e=0,nt=0){Vector3.prototype.isVector3=!0,this.x=_,this.y=_e,this.z=nt}set(_,_e,nt){return nt===void 0&&(nt=this.z),this.x=_,this.y=_e,this.z=nt,this}setScalar(_){return this.x=_,this.y=_,this.z=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setZ(_){return this.z=_,this}setComponent(_,_e){switch(_){case 0:this.x=_e;break;case 1:this.y=_e;break;case 2:this.z=_e;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this}add(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this}addScalar(_){return this.x+=_,this.y+=_,this.z+=_,this}addVectors(_,_e){return this.x=_.x+_e.x,this.y=_.y+_e.y,this.z=_.z+_e.z,this}addScaledVector(_,_e){return this.x+=_.x*_e,this.y+=_.y*_e,this.z+=_.z*_e,this}sub(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this}subScalar(_){return this.x-=_,this.y-=_,this.z-=_,this}subVectors(_,_e){return this.x=_.x-_e.x,this.y=_.y-_e.y,this.z=_.z-_e.z,this}multiply(_){return this.x*=_.x,this.y*=_.y,this.z*=_.z,this}multiplyScalar(_){return this.x*=_,this.y*=_,this.z*=_,this}multiplyVectors(_,_e){return this.x=_.x*_e.x,this.y=_.y*_e.y,this.z=_.z*_e.z,this}applyEuler(_){return this.applyQuaternion(_quaternion$4.setFromEuler(_))}applyAxisAngle(_,_e){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(_,_e))}applyMatrix3(_){const _e=this.x,nt=this.y,rt=this.z,it=_.elements;return this.x=it[0]*_e+it[3]*nt+it[6]*rt,this.y=it[1]*_e+it[4]*nt+it[7]*rt,this.z=it[2]*_e+it[5]*nt+it[8]*rt,this}applyNormalMatrix(_){return this.applyMatrix3(_).normalize()}applyMatrix4(_){const _e=this.x,nt=this.y,rt=this.z,it=_.elements,ot=1/(it[3]*_e+it[7]*nt+it[11]*rt+it[15]);return this.x=(it[0]*_e+it[4]*nt+it[8]*rt+it[12])*ot,this.y=(it[1]*_e+it[5]*nt+it[9]*rt+it[13])*ot,this.z=(it[2]*_e+it[6]*nt+it[10]*rt+it[14])*ot,this}applyQuaternion(_){const _e=this.x,nt=this.y,rt=this.z,it=_.x,ot=_.y,st=_.z,at=_.w,lt=at*_e+ot*rt-st*nt,ct=at*nt+st*_e-it*rt,ut=at*rt+it*nt-ot*_e,ht=-it*_e-ot*nt-st*rt;return this.x=lt*at+ht*-it+ct*-st-ut*-ot,this.y=ct*at+ht*-ot+ut*-it-lt*-st,this.z=ut*at+ht*-st+lt*-ot-ct*-it,this}project(_){return this.applyMatrix4(_.matrixWorldInverse).applyMatrix4(_.projectionMatrix)}unproject(_){return this.applyMatrix4(_.projectionMatrixInverse).applyMatrix4(_.matrixWorld)}transformDirection(_){const _e=this.x,nt=this.y,rt=this.z,it=_.elements;return this.x=it[0]*_e+it[4]*nt+it[8]*rt,this.y=it[1]*_e+it[5]*nt+it[9]*rt,this.z=it[2]*_e+it[6]*nt+it[10]*rt,this.normalize()}divide(_){return this.x/=_.x,this.y/=_.y,this.z/=_.z,this}divideScalar(_){return this.multiplyScalar(1/_)}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this.z=Math.min(this.z,_.z),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this.z=Math.max(this.z,_.z),this}clamp(_,_e){return this.x=Math.max(_.x,Math.min(_e.x,this.x)),this.y=Math.max(_.y,Math.min(_e.y,this.y)),this.z=Math.max(_.z,Math.min(_e.z,this.z)),this}clampScalar(_,_e){return this.x=Math.max(_,Math.min(_e,this.x)),this.y=Math.max(_,Math.min(_e,this.y)),this.z=Math.max(_,Math.min(_e,this.z)),this}clampLength(_,_e){const nt=this.length();return this.divideScalar(nt||1).multiplyScalar(Math.max(_,Math.min(_e,nt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,_e){return this.x+=(_.x-this.x)*_e,this.y+=(_.y-this.y)*_e,this.z+=(_.z-this.z)*_e,this}lerpVectors(_,_e,nt){return this.x=_.x+(_e.x-_.x)*nt,this.y=_.y+(_e.y-_.y)*nt,this.z=_.z+(_e.z-_.z)*nt,this}cross(_){return this.crossVectors(this,_)}crossVectors(_,_e){const nt=_.x,rt=_.y,it=_.z,ot=_e.x,st=_e.y,at=_e.z;return this.x=rt*at-it*st,this.y=it*ot-nt*at,this.z=nt*st-rt*ot,this}projectOnVector(_){const _e=_.lengthSq();if(_e===0)return this.set(0,0,0);const nt=_.dot(this)/_e;return this.copy(_).multiplyScalar(nt)}projectOnPlane(_){return _vector$b.copy(this).projectOnVector(_),this.sub(_vector$b)}reflect(_){return this.sub(_vector$b.copy(_).multiplyScalar(2*this.dot(_)))}angleTo(_){const _e=Math.sqrt(this.lengthSq()*_.lengthSq());if(_e===0)return Math.PI/2;const nt=this.dot(_)/_e;return Math.acos(clamp$4(nt,-1,1))}distanceTo(_){return Math.sqrt(this.distanceToSquared(_))}distanceToSquared(_){const _e=this.x-_.x,nt=this.y-_.y,rt=this.z-_.z;return _e*_e+nt*nt+rt*rt}manhattanDistanceTo(_){return Math.abs(this.x-_.x)+Math.abs(this.y-_.y)+Math.abs(this.z-_.z)}setFromSpherical(_){return this.setFromSphericalCoords(_.radius,_.phi,_.theta)}setFromSphericalCoords(_,_e,nt){const rt=Math.sin(_e)*_;return this.x=rt*Math.sin(nt),this.y=Math.cos(_e)*_,this.z=rt*Math.cos(nt),this}setFromCylindrical(_){return this.setFromCylindricalCoords(_.radius,_.theta,_.y)}setFromCylindricalCoords(_,_e,nt){return this.x=_*Math.sin(_e),this.y=nt,this.z=_*Math.cos(_e),this}setFromMatrixPosition(_){const _e=_.elements;return this.x=_e[12],this.y=_e[13],this.z=_e[14],this}setFromMatrixScale(_){const _e=this.setFromMatrixColumn(_,0).length(),nt=this.setFromMatrixColumn(_,1).length(),rt=this.setFromMatrixColumn(_,2).length();return this.x=_e,this.y=nt,this.z=rt,this}setFromMatrixColumn(_,_e){return this.fromArray(_.elements,_e*4)}setFromMatrix3Column(_,_e){return this.fromArray(_.elements,_e*3)}setFromEuler(_){return this.x=_._x,this.y=_._y,this.z=_._z,this}setFromColor(_){return this.x=_.r,this.y=_.g,this.z=_.b,this}equals(_){return _.x===this.x&&_.y===this.y&&_.z===this.z}fromArray(_,_e=0){return this.x=_[_e],this.y=_[_e+1],this.z=_[_e+2],this}toArray(_=[],_e=0){return _[_e]=this.x,_[_e+1]=this.y,_[_e+2]=this.z,_}fromBufferAttribute(_,_e){return this.x=_.getX(_e),this.y=_.getY(_e),this.z=_.getZ(_e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const _=(Math.random()-.5)*2,_e=Math.random()*Math.PI*2,nt=Math.sqrt(1-_**2);return this.x=nt*Math.cos(_e),this.y=nt*Math.sin(_e),this.z=_,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$b=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(_=new Vector3(1/0,1/0,1/0),_e=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=_,this.max=_e}set(_,_e){return this.min.copy(_),this.max.copy(_e),this}setFromArray(_){this.makeEmpty();for(let _e=0,nt=_.length;_e<nt;_e+=3)this.expandByPoint(_vector$a.fromArray(_,_e));return this}setFromBufferAttribute(_){this.makeEmpty();for(let _e=0,nt=_.count;_e<nt;_e++)this.expandByPoint(_vector$a.fromBufferAttribute(_,_e));return this}setFromPoints(_){this.makeEmpty();for(let _e=0,nt=_.length;_e<nt;_e++)this.expandByPoint(_[_e]);return this}setFromCenterAndSize(_,_e){const nt=_vector$a.copy(_e).multiplyScalar(.5);return this.min.copy(_).sub(nt),this.max.copy(_).add(nt),this}setFromObject(_,_e=!1){return this.makeEmpty(),this.expandByObject(_,_e)}clone(){return new this.constructor().copy(this)}copy(_){return this.min.copy(_.min),this.max.copy(_.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(_){return this.isEmpty()?_.set(0,0,0):_.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(_){return this.isEmpty()?_.set(0,0,0):_.subVectors(this.max,this.min)}expandByPoint(_){return this.min.min(_),this.max.max(_),this}expandByVector(_){return this.min.sub(_),this.max.add(_),this}expandByScalar(_){return this.min.addScalar(-_),this.max.addScalar(_),this}expandByObject(_,_e=!1){if(_.updateWorldMatrix(!1,!1),_.boundingBox!==void 0)_.boundingBox===null&&_.computeBoundingBox(),_box$3.copy(_.boundingBox),_box$3.applyMatrix4(_.matrixWorld),this.union(_box$3);else{const rt=_.geometry;if(rt!==void 0)if(_e&&rt.attributes!==void 0&&rt.attributes.position!==void 0){const it=rt.attributes.position;for(let ot=0,st=it.count;ot<st;ot++)_vector$a.fromBufferAttribute(it,ot).applyMatrix4(_.matrixWorld),this.expandByPoint(_vector$a)}else rt.boundingBox===null&&rt.computeBoundingBox(),_box$3.copy(rt.boundingBox),_box$3.applyMatrix4(_.matrixWorld),this.union(_box$3)}const nt=_.children;for(let rt=0,it=nt.length;rt<it;rt++)this.expandByObject(nt[rt],_e);return this}containsPoint(_){return!(_.x<this.min.x||_.x>this.max.x||_.y<this.min.y||_.y>this.max.y||_.z<this.min.z||_.z>this.max.z)}containsBox(_){return this.min.x<=_.min.x&&_.max.x<=this.max.x&&this.min.y<=_.min.y&&_.max.y<=this.max.y&&this.min.z<=_.min.z&&_.max.z<=this.max.z}getParameter(_,_e){return _e.set((_.x-this.min.x)/(this.max.x-this.min.x),(_.y-this.min.y)/(this.max.y-this.min.y),(_.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(_){return!(_.max.x<this.min.x||_.min.x>this.max.x||_.max.y<this.min.y||_.min.y>this.max.y||_.max.z<this.min.z||_.min.z>this.max.z)}intersectsSphere(_){return this.clampPoint(_.center,_vector$a),_vector$a.distanceToSquared(_.center)<=_.radius*_.radius}intersectsPlane(_){let _e,nt;return _.normal.x>0?(_e=_.normal.x*this.min.x,nt=_.normal.x*this.max.x):(_e=_.normal.x*this.max.x,nt=_.normal.x*this.min.x),_.normal.y>0?(_e+=_.normal.y*this.min.y,nt+=_.normal.y*this.max.y):(_e+=_.normal.y*this.max.y,nt+=_.normal.y*this.min.y),_.normal.z>0?(_e+=_.normal.z*this.min.z,nt+=_.normal.z*this.max.z):(_e+=_.normal.z*this.max.z,nt+=_.normal.z*this.min.z),_e<=-_.constant&&nt>=-_.constant}intersectsTriangle(_){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(_.a,_center),_v1$7.subVectors(_.b,_center),_v2$4.subVectors(_.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let _e=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(_e,_v0$2,_v1$7,_v2$4,_extents)||(_e=[1,0,0,0,1,0,0,0,1],!satForAxes(_e,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),_e=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(_e,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(_,_e){return _e.copy(_).clamp(this.min,this.max)}distanceToPoint(_){return this.clampPoint(_,_vector$a).distanceTo(_)}getBoundingSphere(_){return this.isEmpty()?_.makeEmpty():(this.getCenter(_.center),_.radius=this.getSize(_vector$a).length()*.5),_}intersect(_){return this.min.max(_.min),this.max.min(_.max),this.isEmpty()&&this.makeEmpty(),this}union(_){return this.min.min(_.min),this.max.max(_.max),this}applyMatrix4(_){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(_),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(_),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(_),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(_),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(_),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(_),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(_),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(_),this.setFromPoints(_points),this)}translate(_){return this.min.add(_),this.max.add(_),this}equals(_){return _.min.equals(this.min)&&_.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$a=new Vector3,_box$3=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(tt,_,_e,nt,rt){for(let it=0,ot=tt.length-3;it<=ot;it+=3){_testAxis.fromArray(tt,it);const st=rt.x*Math.abs(_testAxis.x)+rt.y*Math.abs(_testAxis.y)+rt.z*Math.abs(_testAxis.z),at=_.dot(_testAxis),lt=_e.dot(_testAxis),ct=nt.dot(_testAxis);if(Math.max(-Math.max(at,lt,ct),Math.min(at,lt,ct))>st)return!1}return!0}const _box$2=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(_=new Vector3,_e=-1){this.center=_,this.radius=_e}set(_,_e){return this.center.copy(_),this.radius=_e,this}setFromPoints(_,_e){const nt=this.center;_e!==void 0?nt.copy(_e):_box$2.setFromPoints(_).getCenter(nt);let rt=0;for(let it=0,ot=_.length;it<ot;it++)rt=Math.max(rt,nt.distanceToSquared(_[it]));return this.radius=Math.sqrt(rt),this}copy(_){return this.center.copy(_.center),this.radius=_.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(_){return _.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(_){return _.distanceTo(this.center)-this.radius}intersectsSphere(_){const _e=this.radius+_.radius;return _.center.distanceToSquared(this.center)<=_e*_e}intersectsBox(_){return _.intersectsSphere(this)}intersectsPlane(_){return Math.abs(_.distanceToPoint(this.center))<=this.radius}clampPoint(_,_e){const nt=this.center.distanceToSquared(_);return _e.copy(_),nt>this.radius*this.radius&&(_e.sub(this.center).normalize(),_e.multiplyScalar(this.radius).add(this.center)),_e}getBoundingBox(_){return this.isEmpty()?(_.makeEmpty(),_):(_.set(this.center,this.center),_.expandByScalar(this.radius),_)}applyMatrix4(_){return this.center.applyMatrix4(_),this.radius=this.radius*_.getMaxScaleOnAxis(),this}translate(_){return this.center.add(_),this}expandByPoint(_){if(this.isEmpty())return this.center.copy(_),this.radius=0,this;_v1$6.subVectors(_,this.center);const _e=_v1$6.lengthSq();if(_e>this.radius*this.radius){const nt=Math.sqrt(_e),rt=(nt-this.radius)*.5;this.center.addScaledVector(_v1$6,rt/nt),this.radius+=rt}return this}union(_){return _.isEmpty()?this:this.isEmpty()?(this.copy(_),this):(this.center.equals(_.center)===!0?this.radius=Math.max(this.radius,_.radius):(_v2$3.subVectors(_.center,this.center).setLength(_.radius),this.expandByPoint(_v1$6.copy(_.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(_.center).sub(_v2$3))),this)}equals(_){return _.center.equals(this.center)&&_.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$9=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(_=new Vector3,_e=new Vector3(0,0,-1)){this.origin=_,this.direction=_e}set(_,_e){return this.origin.copy(_),this.direction.copy(_e),this}copy(_){return this.origin.copy(_.origin),this.direction.copy(_.direction),this}at(_,_e){return _e.copy(this.origin).addScaledVector(this.direction,_)}lookAt(_){return this.direction.copy(_).sub(this.origin).normalize(),this}recast(_){return this.origin.copy(this.at(_,_vector$9)),this}closestPointToPoint(_,_e){_e.subVectors(_,this.origin);const nt=_e.dot(this.direction);return nt<0?_e.copy(this.origin):_e.copy(this.origin).addScaledVector(this.direction,nt)}distanceToPoint(_){return Math.sqrt(this.distanceSqToPoint(_))}distanceSqToPoint(_){const _e=_vector$9.subVectors(_,this.origin).dot(this.direction);return _e<0?this.origin.distanceToSquared(_):(_vector$9.copy(this.origin).addScaledVector(this.direction,_e),_vector$9.distanceToSquared(_))}distanceSqToSegment(_,_e,nt,rt){_segCenter.copy(_).add(_e).multiplyScalar(.5),_segDir.copy(_e).sub(_).normalize(),_diff.copy(this.origin).sub(_segCenter);const it=_.distanceTo(_e)*.5,ot=-this.direction.dot(_segDir),st=_diff.dot(this.direction),at=-_diff.dot(_segDir),lt=_diff.lengthSq(),ct=Math.abs(1-ot*ot);let ut,ht,pt,gt;if(ct>0)if(ut=ot*at-st,ht=ot*st-at,gt=it*ct,ut>=0)if(ht>=-gt)if(ht<=gt){const yt=1/ct;ut*=yt,ht*=yt,pt=ut*(ut+ot*ht+2*st)+ht*(ot*ut+ht+2*at)+lt}else ht=it,ut=Math.max(0,-(ot*ht+st)),pt=-ut*ut+ht*(ht+2*at)+lt;else ht=-it,ut=Math.max(0,-(ot*ht+st)),pt=-ut*ut+ht*(ht+2*at)+lt;else ht<=-gt?(ut=Math.max(0,-(-ot*it+st)),ht=ut>0?-it:Math.min(Math.max(-it,-at),it),pt=-ut*ut+ht*(ht+2*at)+lt):ht<=gt?(ut=0,ht=Math.min(Math.max(-it,-at),it),pt=ht*(ht+2*at)+lt):(ut=Math.max(0,-(ot*it+st)),ht=ut>0?it:Math.min(Math.max(-it,-at),it),pt=-ut*ut+ht*(ht+2*at)+lt);else ht=ot>0?-it:it,ut=Math.max(0,-(ot*ht+st)),pt=-ut*ut+ht*(ht+2*at)+lt;return nt&&nt.copy(this.origin).addScaledVector(this.direction,ut),rt&&rt.copy(_segCenter).addScaledVector(_segDir,ht),pt}intersectSphere(_,_e){_vector$9.subVectors(_.center,this.origin);const nt=_vector$9.dot(this.direction),rt=_vector$9.dot(_vector$9)-nt*nt,it=_.radius*_.radius;if(rt>it)return null;const ot=Math.sqrt(it-rt),st=nt-ot,at=nt+ot;return at<0?null:st<0?this.at(at,_e):this.at(st,_e)}intersectsSphere(_){return this.distanceSqToPoint(_.center)<=_.radius*_.radius}distanceToPlane(_){const _e=_.normal.dot(this.direction);if(_e===0)return _.distanceToPoint(this.origin)===0?0:null;const nt=-(this.origin.dot(_.normal)+_.constant)/_e;return nt>=0?nt:null}intersectPlane(_,_e){const nt=this.distanceToPlane(_);return nt===null?null:this.at(nt,_e)}intersectsPlane(_){const _e=_.distanceToPoint(this.origin);return _e===0||_.normal.dot(this.direction)*_e<0}intersectBox(_,_e){let nt,rt,it,ot,st,at;const lt=1/this.direction.x,ct=1/this.direction.y,ut=1/this.direction.z,ht=this.origin;return lt>=0?(nt=(_.min.x-ht.x)*lt,rt=(_.max.x-ht.x)*lt):(nt=(_.max.x-ht.x)*lt,rt=(_.min.x-ht.x)*lt),ct>=0?(it=(_.min.y-ht.y)*ct,ot=(_.max.y-ht.y)*ct):(it=(_.max.y-ht.y)*ct,ot=(_.min.y-ht.y)*ct),nt>ot||it>rt||((it>nt||isNaN(nt))&&(nt=it),(ot<rt||isNaN(rt))&&(rt=ot),ut>=0?(st=(_.min.z-ht.z)*ut,at=(_.max.z-ht.z)*ut):(st=(_.max.z-ht.z)*ut,at=(_.min.z-ht.z)*ut),nt>at||st>rt)||((st>nt||nt!==nt)&&(nt=st),(at<rt||rt!==rt)&&(rt=at),rt<0)?null:this.at(nt>=0?nt:rt,_e)}intersectsBox(_){return this.intersectBox(_,_vector$9)!==null}intersectTriangle(_,_e,nt,rt,it){_edge1.subVectors(_e,_),_edge2.subVectors(nt,_),_normal$1.crossVectors(_edge1,_edge2);let ot=this.direction.dot(_normal$1),st;if(ot>0){if(rt)return null;st=1}else if(ot<0)st=-1,ot=-ot;else return null;_diff.subVectors(this.origin,_);const at=st*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(at<0)return null;const lt=st*this.direction.dot(_edge1.cross(_diff));if(lt<0||at+lt>ot)return null;const ct=-st*_diff.dot(_normal$1);return ct<0?null:this.at(ct/ot,it)}applyMatrix4(_){return this.origin.applyMatrix4(_),this.direction.transformDirection(_),this}equals(_){return _.origin.equals(this.origin)&&_.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(_,_e,nt,rt,it,ot,st,at,lt,ct,ut,ht,pt,gt,yt,vt){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],_!==void 0&&this.set(_,_e,nt,rt,it,ot,st,at,lt,ct,ut,ht,pt,gt,yt,vt)}set(_,_e,nt,rt,it,ot,st,at,lt,ct,ut,ht,pt,gt,yt,vt){const mt=this.elements;return mt[0]=_,mt[4]=_e,mt[8]=nt,mt[12]=rt,mt[1]=it,mt[5]=ot,mt[9]=st,mt[13]=at,mt[2]=lt,mt[6]=ct,mt[10]=ut,mt[14]=ht,mt[3]=pt,mt[7]=gt,mt[11]=yt,mt[15]=vt,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(_){const _e=this.elements,nt=_.elements;return _e[0]=nt[0],_e[1]=nt[1],_e[2]=nt[2],_e[3]=nt[3],_e[4]=nt[4],_e[5]=nt[5],_e[6]=nt[6],_e[7]=nt[7],_e[8]=nt[8],_e[9]=nt[9],_e[10]=nt[10],_e[11]=nt[11],_e[12]=nt[12],_e[13]=nt[13],_e[14]=nt[14],_e[15]=nt[15],this}copyPosition(_){const _e=this.elements,nt=_.elements;return _e[12]=nt[12],_e[13]=nt[13],_e[14]=nt[14],this}setFromMatrix3(_){const _e=_.elements;return this.set(_e[0],_e[3],_e[6],0,_e[1],_e[4],_e[7],0,_e[2],_e[5],_e[8],0,0,0,0,1),this}extractBasis(_,_e,nt){return _.setFromMatrixColumn(this,0),_e.setFromMatrixColumn(this,1),nt.setFromMatrixColumn(this,2),this}makeBasis(_,_e,nt){return this.set(_.x,_e.x,nt.x,0,_.y,_e.y,nt.y,0,_.z,_e.z,nt.z,0,0,0,0,1),this}extractRotation(_){const _e=this.elements,nt=_.elements,rt=1/_v1$5.setFromMatrixColumn(_,0).length(),it=1/_v1$5.setFromMatrixColumn(_,1).length(),ot=1/_v1$5.setFromMatrixColumn(_,2).length();return _e[0]=nt[0]*rt,_e[1]=nt[1]*rt,_e[2]=nt[2]*rt,_e[3]=0,_e[4]=nt[4]*it,_e[5]=nt[5]*it,_e[6]=nt[6]*it,_e[7]=0,_e[8]=nt[8]*ot,_e[9]=nt[9]*ot,_e[10]=nt[10]*ot,_e[11]=0,_e[12]=0,_e[13]=0,_e[14]=0,_e[15]=1,this}makeRotationFromEuler(_){const _e=this.elements,nt=_.x,rt=_.y,it=_.z,ot=Math.cos(nt),st=Math.sin(nt),at=Math.cos(rt),lt=Math.sin(rt),ct=Math.cos(it),ut=Math.sin(it);if(_.order==="XYZ"){const ht=ot*ct,pt=ot*ut,gt=st*ct,yt=st*ut;_e[0]=at*ct,_e[4]=-at*ut,_e[8]=lt,_e[1]=pt+gt*lt,_e[5]=ht-yt*lt,_e[9]=-st*at,_e[2]=yt-ht*lt,_e[6]=gt+pt*lt,_e[10]=ot*at}else if(_.order==="YXZ"){const ht=at*ct,pt=at*ut,gt=lt*ct,yt=lt*ut;_e[0]=ht+yt*st,_e[4]=gt*st-pt,_e[8]=ot*lt,_e[1]=ot*ut,_e[5]=ot*ct,_e[9]=-st,_e[2]=pt*st-gt,_e[6]=yt+ht*st,_e[10]=ot*at}else if(_.order==="ZXY"){const ht=at*ct,pt=at*ut,gt=lt*ct,yt=lt*ut;_e[0]=ht-yt*st,_e[4]=-ot*ut,_e[8]=gt+pt*st,_e[1]=pt+gt*st,_e[5]=ot*ct,_e[9]=yt-ht*st,_e[2]=-ot*lt,_e[6]=st,_e[10]=ot*at}else if(_.order==="ZYX"){const ht=ot*ct,pt=ot*ut,gt=st*ct,yt=st*ut;_e[0]=at*ct,_e[4]=gt*lt-pt,_e[8]=ht*lt+yt,_e[1]=at*ut,_e[5]=yt*lt+ht,_e[9]=pt*lt-gt,_e[2]=-lt,_e[6]=st*at,_e[10]=ot*at}else if(_.order==="YZX"){const ht=ot*at,pt=ot*lt,gt=st*at,yt=st*lt;_e[0]=at*ct,_e[4]=yt-ht*ut,_e[8]=gt*ut+pt,_e[1]=ut,_e[5]=ot*ct,_e[9]=-st*ct,_e[2]=-lt*ct,_e[6]=pt*ut+gt,_e[10]=ht-yt*ut}else if(_.order==="XZY"){const ht=ot*at,pt=ot*lt,gt=st*at,yt=st*lt;_e[0]=at*ct,_e[4]=-ut,_e[8]=lt*ct,_e[1]=ht*ut+yt,_e[5]=ot*ct,_e[9]=pt*ut-gt,_e[2]=gt*ut-pt,_e[6]=st*ct,_e[10]=yt*ut+ht}return _e[3]=0,_e[7]=0,_e[11]=0,_e[12]=0,_e[13]=0,_e[14]=0,_e[15]=1,this}makeRotationFromQuaternion(_){return this.compose(_zero,_,_one)}lookAt(_,_e,nt){const rt=this.elements;return _z.subVectors(_,_e),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(nt,_z),_x.lengthSq()===0&&(Math.abs(nt.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(nt,_z)),_x.normalize(),_y.crossVectors(_z,_x),rt[0]=_x.x,rt[4]=_y.x,rt[8]=_z.x,rt[1]=_x.y,rt[5]=_y.y,rt[9]=_z.y,rt[2]=_x.z,rt[6]=_y.z,rt[10]=_z.z,this}multiply(_){return this.multiplyMatrices(this,_)}premultiply(_){return this.multiplyMatrices(_,this)}multiplyMatrices(_,_e){const nt=_.elements,rt=_e.elements,it=this.elements,ot=nt[0],st=nt[4],at=nt[8],lt=nt[12],ct=nt[1],ut=nt[5],ht=nt[9],pt=nt[13],gt=nt[2],yt=nt[6],vt=nt[10],mt=nt[14],_t=nt[3],xt=nt[7],St=nt[11],Tt=nt[15],Mt=rt[0],bt=rt[4],Pt=rt[8],wt=rt[12],Bt=rt[1],Ot=rt[5],Ut=rt[9],Nt=rt[13],zt=rt[2],jt=rt[6],Yt=rt[10],qt=rt[14],Gt=rt[3],Xt=rt[7],Vt=rt[11],Wt=rt[15];return it[0]=ot*Mt+st*Bt+at*zt+lt*Gt,it[4]=ot*bt+st*Ot+at*jt+lt*Xt,it[8]=ot*Pt+st*Ut+at*Yt+lt*Vt,it[12]=ot*wt+st*Nt+at*qt+lt*Wt,it[1]=ct*Mt+ut*Bt+ht*zt+pt*Gt,it[5]=ct*bt+ut*Ot+ht*jt+pt*Xt,it[9]=ct*Pt+ut*Ut+ht*Yt+pt*Vt,it[13]=ct*wt+ut*Nt+ht*qt+pt*Wt,it[2]=gt*Mt+yt*Bt+vt*zt+mt*Gt,it[6]=gt*bt+yt*Ot+vt*jt+mt*Xt,it[10]=gt*Pt+yt*Ut+vt*Yt+mt*Vt,it[14]=gt*wt+yt*Nt+vt*qt+mt*Wt,it[3]=_t*Mt+xt*Bt+St*zt+Tt*Gt,it[7]=_t*bt+xt*Ot+St*jt+Tt*Xt,it[11]=_t*Pt+xt*Ut+St*Yt+Tt*Vt,it[15]=_t*wt+xt*Nt+St*qt+Tt*Wt,this}multiplyScalar(_){const _e=this.elements;return _e[0]*=_,_e[4]*=_,_e[8]*=_,_e[12]*=_,_e[1]*=_,_e[5]*=_,_e[9]*=_,_e[13]*=_,_e[2]*=_,_e[6]*=_,_e[10]*=_,_e[14]*=_,_e[3]*=_,_e[7]*=_,_e[11]*=_,_e[15]*=_,this}determinant(){const _=this.elements,_e=_[0],nt=_[4],rt=_[8],it=_[12],ot=_[1],st=_[5],at=_[9],lt=_[13],ct=_[2],ut=_[6],ht=_[10],pt=_[14],gt=_[3],yt=_[7],vt=_[11],mt=_[15];return gt*(+it*at*ut-rt*lt*ut-it*st*ht+nt*lt*ht+rt*st*pt-nt*at*pt)+yt*(+_e*at*pt-_e*lt*ht+it*ot*ht-rt*ot*pt+rt*lt*ct-it*at*ct)+vt*(+_e*lt*ut-_e*st*pt-it*ot*ut+nt*ot*pt+it*st*ct-nt*lt*ct)+mt*(-rt*st*ct-_e*at*ut+_e*st*ht+rt*ot*ut-nt*ot*ht+nt*at*ct)}transpose(){const _=this.elements;let _e;return _e=_[1],_[1]=_[4],_[4]=_e,_e=_[2],_[2]=_[8],_[8]=_e,_e=_[6],_[6]=_[9],_[9]=_e,_e=_[3],_[3]=_[12],_[12]=_e,_e=_[7],_[7]=_[13],_[13]=_e,_e=_[11],_[11]=_[14],_[14]=_e,this}setPosition(_,_e,nt){const rt=this.elements;return _.isVector3?(rt[12]=_.x,rt[13]=_.y,rt[14]=_.z):(rt[12]=_,rt[13]=_e,rt[14]=nt),this}invert(){const _=this.elements,_e=_[0],nt=_[1],rt=_[2],it=_[3],ot=_[4],st=_[5],at=_[6],lt=_[7],ct=_[8],ut=_[9],ht=_[10],pt=_[11],gt=_[12],yt=_[13],vt=_[14],mt=_[15],_t=ut*vt*lt-yt*ht*lt+yt*at*pt-st*vt*pt-ut*at*mt+st*ht*mt,xt=gt*ht*lt-ct*vt*lt-gt*at*pt+ot*vt*pt+ct*at*mt-ot*ht*mt,St=ct*yt*lt-gt*ut*lt+gt*st*pt-ot*yt*pt-ct*st*mt+ot*ut*mt,Tt=gt*ut*at-ct*yt*at-gt*st*ht+ot*yt*ht+ct*st*vt-ot*ut*vt,Mt=_e*_t+nt*xt+rt*St+it*Tt;if(Mt===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const bt=1/Mt;return _[0]=_t*bt,_[1]=(yt*ht*it-ut*vt*it-yt*rt*pt+nt*vt*pt+ut*rt*mt-nt*ht*mt)*bt,_[2]=(st*vt*it-yt*at*it+yt*rt*lt-nt*vt*lt-st*rt*mt+nt*at*mt)*bt,_[3]=(ut*at*it-st*ht*it-ut*rt*lt+nt*ht*lt+st*rt*pt-nt*at*pt)*bt,_[4]=xt*bt,_[5]=(ct*vt*it-gt*ht*it+gt*rt*pt-_e*vt*pt-ct*rt*mt+_e*ht*mt)*bt,_[6]=(gt*at*it-ot*vt*it-gt*rt*lt+_e*vt*lt+ot*rt*mt-_e*at*mt)*bt,_[7]=(ot*ht*it-ct*at*it+ct*rt*lt-_e*ht*lt-ot*rt*pt+_e*at*pt)*bt,_[8]=St*bt,_[9]=(gt*ut*it-ct*yt*it-gt*nt*pt+_e*yt*pt+ct*nt*mt-_e*ut*mt)*bt,_[10]=(ot*yt*it-gt*st*it+gt*nt*lt-_e*yt*lt-ot*nt*mt+_e*st*mt)*bt,_[11]=(ct*st*it-ot*ut*it-ct*nt*lt+_e*ut*lt+ot*nt*pt-_e*st*pt)*bt,_[12]=Tt*bt,_[13]=(ct*yt*rt-gt*ut*rt+gt*nt*ht-_e*yt*ht-ct*nt*vt+_e*ut*vt)*bt,_[14]=(gt*st*rt-ot*yt*rt-gt*nt*at+_e*yt*at+ot*nt*vt-_e*st*vt)*bt,_[15]=(ot*ut*rt-ct*st*rt+ct*nt*at-_e*ut*at-ot*nt*ht+_e*st*ht)*bt,this}scale(_){const _e=this.elements,nt=_.x,rt=_.y,it=_.z;return _e[0]*=nt,_e[4]*=rt,_e[8]*=it,_e[1]*=nt,_e[5]*=rt,_e[9]*=it,_e[2]*=nt,_e[6]*=rt,_e[10]*=it,_e[3]*=nt,_e[7]*=rt,_e[11]*=it,this}getMaxScaleOnAxis(){const _=this.elements,_e=_[0]*_[0]+_[1]*_[1]+_[2]*_[2],nt=_[4]*_[4]+_[5]*_[5]+_[6]*_[6],rt=_[8]*_[8]+_[9]*_[9]+_[10]*_[10];return Math.sqrt(Math.max(_e,nt,rt))}makeTranslation(_,_e,nt){return _.isVector3?this.set(1,0,0,_.x,0,1,0,_.y,0,0,1,_.z,0,0,0,1):this.set(1,0,0,_,0,1,0,_e,0,0,1,nt,0,0,0,1),this}makeRotationX(_){const _e=Math.cos(_),nt=Math.sin(_);return this.set(1,0,0,0,0,_e,-nt,0,0,nt,_e,0,0,0,0,1),this}makeRotationY(_){const _e=Math.cos(_),nt=Math.sin(_);return this.set(_e,0,nt,0,0,1,0,0,-nt,0,_e,0,0,0,0,1),this}makeRotationZ(_){const _e=Math.cos(_),nt=Math.sin(_);return this.set(_e,-nt,0,0,nt,_e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(_,_e){const nt=Math.cos(_e),rt=Math.sin(_e),it=1-nt,ot=_.x,st=_.y,at=_.z,lt=it*ot,ct=it*st;return this.set(lt*ot+nt,lt*st-rt*at,lt*at+rt*st,0,lt*st+rt*at,ct*st+nt,ct*at-rt*ot,0,lt*at-rt*st,ct*at+rt*ot,it*at*at+nt,0,0,0,0,1),this}makeScale(_,_e,nt){return this.set(_,0,0,0,0,_e,0,0,0,0,nt,0,0,0,0,1),this}makeShear(_,_e,nt,rt,it,ot){return this.set(1,nt,it,0,_,1,ot,0,_e,rt,1,0,0,0,0,1),this}compose(_,_e,nt){const rt=this.elements,it=_e._x,ot=_e._y,st=_e._z,at=_e._w,lt=it+it,ct=ot+ot,ut=st+st,ht=it*lt,pt=it*ct,gt=it*ut,yt=ot*ct,vt=ot*ut,mt=st*ut,_t=at*lt,xt=at*ct,St=at*ut,Tt=nt.x,Mt=nt.y,bt=nt.z;return rt[0]=(1-(yt+mt))*Tt,rt[1]=(pt+St)*Tt,rt[2]=(gt-xt)*Tt,rt[3]=0,rt[4]=(pt-St)*Mt,rt[5]=(1-(ht+mt))*Mt,rt[6]=(vt+_t)*Mt,rt[7]=0,rt[8]=(gt+xt)*bt,rt[9]=(vt-_t)*bt,rt[10]=(1-(ht+yt))*bt,rt[11]=0,rt[12]=_.x,rt[13]=_.y,rt[14]=_.z,rt[15]=1,this}decompose(_,_e,nt){const rt=this.elements;let it=_v1$5.set(rt[0],rt[1],rt[2]).length();const ot=_v1$5.set(rt[4],rt[5],rt[6]).length(),st=_v1$5.set(rt[8],rt[9],rt[10]).length();this.determinant()<0&&(it=-it),_.x=rt[12],_.y=rt[13],_.z=rt[14],_m1$2.copy(this);const lt=1/it,ct=1/ot,ut=1/st;return _m1$2.elements[0]*=lt,_m1$2.elements[1]*=lt,_m1$2.elements[2]*=lt,_m1$2.elements[4]*=ct,_m1$2.elements[5]*=ct,_m1$2.elements[6]*=ct,_m1$2.elements[8]*=ut,_m1$2.elements[9]*=ut,_m1$2.elements[10]*=ut,_e.setFromRotationMatrix(_m1$2),nt.x=it,nt.y=ot,nt.z=st,this}makePerspective(_,_e,nt,rt,it,ot,st=WebGLCoordinateSystem){const at=this.elements,lt=2*it/(_e-_),ct=2*it/(nt-rt),ut=(_e+_)/(_e-_),ht=(nt+rt)/(nt-rt);let pt,gt;if(st===WebGLCoordinateSystem)pt=-(ot+it)/(ot-it),gt=-2*ot*it/(ot-it);else if(st===WebGPUCoordinateSystem)pt=-ot/(ot-it),gt=-ot*it/(ot-it);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+st);return at[0]=lt,at[4]=0,at[8]=ut,at[12]=0,at[1]=0,at[5]=ct,at[9]=ht,at[13]=0,at[2]=0,at[6]=0,at[10]=pt,at[14]=gt,at[3]=0,at[7]=0,at[11]=-1,at[15]=0,this}makeOrthographic(_,_e,nt,rt,it,ot,st=WebGLCoordinateSystem){const at=this.elements,lt=1/(_e-_),ct=1/(nt-rt),ut=1/(ot-it),ht=(_e+_)*lt,pt=(nt+rt)*ct;let gt,yt;if(st===WebGLCoordinateSystem)gt=(ot+it)*ut,yt=-2*ut;else if(st===WebGPUCoordinateSystem)gt=it*ut,yt=-1*ut;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+st);return at[0]=2*lt,at[4]=0,at[8]=0,at[12]=-ht,at[1]=0,at[5]=2*ct,at[9]=0,at[13]=-pt,at[2]=0,at[6]=0,at[10]=yt,at[14]=-gt,at[3]=0,at[7]=0,at[11]=0,at[15]=1,this}equals(_){const _e=this.elements,nt=_.elements;for(let rt=0;rt<16;rt++)if(_e[rt]!==nt[rt])return!1;return!0}fromArray(_,_e=0){for(let nt=0;nt<16;nt++)this.elements[nt]=_[nt+_e];return this}toArray(_=[],_e=0){const nt=this.elements;return _[_e]=nt[0],_[_e+1]=nt[1],_[_e+2]=nt[2],_[_e+3]=nt[3],_[_e+4]=nt[4],_[_e+5]=nt[5],_[_e+6]=nt[6],_[_e+7]=nt[7],_[_e+8]=nt[8],_[_e+9]=nt[9],_[_e+10]=nt[10],_[_e+11]=nt[11],_[_e+12]=nt[12],_[_e+13]=nt[13],_[_e+14]=nt[14],_[_e+15]=nt[15],_}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(_=0,_e=0,nt=0,rt=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=_,this._y=_e,this._z=nt,this._order=rt}get x(){return this._x}set x(_){this._x=_,this._onChangeCallback()}get y(){return this._y}set y(_){this._y=_,this._onChangeCallback()}get z(){return this._z}set z(_){this._z=_,this._onChangeCallback()}get order(){return this._order}set order(_){this._order=_,this._onChangeCallback()}set(_,_e,nt,rt=this._order){return this._x=_,this._y=_e,this._z=nt,this._order=rt,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(_){return this._x=_._x,this._y=_._y,this._z=_._z,this._order=_._order,this._onChangeCallback(),this}setFromRotationMatrix(_,_e=this._order,nt=!0){const rt=_.elements,it=rt[0],ot=rt[4],st=rt[8],at=rt[1],lt=rt[5],ct=rt[9],ut=rt[2],ht=rt[6],pt=rt[10];switch(_e){case"XYZ":this._y=Math.asin(clamp$4(st,-1,1)),Math.abs(st)<.9999999?(this._x=Math.atan2(-ct,pt),this._z=Math.atan2(-ot,it)):(this._x=Math.atan2(ht,lt),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$4(ct,-1,1)),Math.abs(ct)<.9999999?(this._y=Math.atan2(st,pt),this._z=Math.atan2(at,lt)):(this._y=Math.atan2(-ut,it),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$4(ht,-1,1)),Math.abs(ht)<.9999999?(this._y=Math.atan2(-ut,pt),this._z=Math.atan2(-ot,lt)):(this._y=0,this._z=Math.atan2(at,it));break;case"ZYX":this._y=Math.asin(-clamp$4(ut,-1,1)),Math.abs(ut)<.9999999?(this._x=Math.atan2(ht,pt),this._z=Math.atan2(at,it)):(this._x=0,this._z=Math.atan2(-ot,lt));break;case"YZX":this._z=Math.asin(clamp$4(at,-1,1)),Math.abs(at)<.9999999?(this._x=Math.atan2(-ct,lt),this._y=Math.atan2(-ut,it)):(this._x=0,this._y=Math.atan2(st,pt));break;case"XZY":this._z=Math.asin(-clamp$4(ot,-1,1)),Math.abs(ot)<.9999999?(this._x=Math.atan2(ht,lt),this._y=Math.atan2(st,it)):(this._x=Math.atan2(-ct,pt),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+_e)}return this._order=_e,nt===!0&&this._onChangeCallback(),this}setFromQuaternion(_,_e,nt){return _matrix.makeRotationFromQuaternion(_),this.setFromRotationMatrix(_matrix,_e,nt)}setFromVector3(_,_e=this._order){return this.set(_.x,_.y,_.z,_e)}reorder(_){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,_)}equals(_){return _._x===this._x&&_._y===this._y&&_._z===this._z&&_._order===this._order}fromArray(_){return this._x=_[0],this._y=_[1],this._z=_[2],_[3]!==void 0&&(this._order=_[3]),this._onChangeCallback(),this}toArray(_=[],_e=0){return _[_e]=this._x,_[_e+1]=this._y,_[_e+2]=this._z,_[_e+3]=this._order,_}_onChange(_){return this._onChangeCallback=_,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(_){this.mask=(1<<_|0)>>>0}enable(_){this.mask|=1<<_|0}enableAll(){this.mask=-1}toggle(_){this.mask^=1<<_|0}disable(_){this.mask&=~(1<<_|0)}disableAll(){this.mask=0}test(_){return(this.mask&_.mask)!==0}isEnabled(_){return(this.mask&(1<<_|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher$1{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID$1(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const _=new Vector3,_e=new Euler,nt=new Quaternion,rt=new Vector3(1,1,1);function it(){nt.setFromEuler(_e,!1)}function ot(){_e.setFromQuaternion(nt,void 0,!1)}_e._onChange(it),nt._onChange(ot),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:_},rotation:{configurable:!0,enumerable:!0,value:_e},quaternion:{configurable:!0,enumerable:!0,value:nt},scale:{configurable:!0,enumerable:!0,value:rt},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(_){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(_),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(_){return this.quaternion.premultiply(_),this}setRotationFromAxisAngle(_,_e){this.quaternion.setFromAxisAngle(_,_e)}setRotationFromEuler(_){this.quaternion.setFromEuler(_,!0)}setRotationFromMatrix(_){this.quaternion.setFromRotationMatrix(_)}setRotationFromQuaternion(_){this.quaternion.copy(_)}rotateOnAxis(_,_e){return _q1.setFromAxisAngle(_,_e),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(_,_e){return _q1.setFromAxisAngle(_,_e),this.quaternion.premultiply(_q1),this}rotateX(_){return this.rotateOnAxis(_xAxis,_)}rotateY(_){return this.rotateOnAxis(_yAxis,_)}rotateZ(_){return this.rotateOnAxis(_zAxis,_)}translateOnAxis(_,_e){return _v1$4.copy(_).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(_e)),this}translateX(_){return this.translateOnAxis(_xAxis,_)}translateY(_){return this.translateOnAxis(_yAxis,_)}translateZ(_){return this.translateOnAxis(_zAxis,_)}localToWorld(_){return this.updateWorldMatrix(!0,!1),_.applyMatrix4(this.matrixWorld)}worldToLocal(_){return this.updateWorldMatrix(!0,!1),_.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(_,_e,nt){_.isVector3?_target.copy(_):_target.set(_,_e,nt);const rt=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),rt&&(_m1$1.extractRotation(rt.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(_){if(arguments.length>1){for(let _e=0;_e<arguments.length;_e++)this.add(arguments[_e]);return this}return _===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",_),this):(_&&_.isObject3D?(_.parent!==null&&_.parent.remove(_),_.parent=this,this.children.push(_),_.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",_),this)}remove(_){if(arguments.length>1){for(let nt=0;nt<arguments.length;nt++)this.remove(arguments[nt]);return this}const _e=this.children.indexOf(_);return _e!==-1&&(_.parent=null,this.children.splice(_e,1),_.dispatchEvent(_removedEvent)),this}removeFromParent(){const _=this.parent;return _!==null&&_.remove(this),this}clear(){for(let _=0;_<this.children.length;_++){const _e=this.children[_];_e.parent=null,_e.dispatchEvent(_removedEvent)}return this.children.length=0,this}attach(_){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),_.parent!==null&&(_.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(_.parent.matrixWorld)),_.applyMatrix4(_m1$1),this.add(_),_.updateWorldMatrix(!1,!0),this}getObjectById(_){return this.getObjectByProperty("id",_)}getObjectByName(_){return this.getObjectByProperty("name",_)}getObjectByProperty(_,_e){if(this[_]===_e)return this;for(let nt=0,rt=this.children.length;nt<rt;nt++){const ot=this.children[nt].getObjectByProperty(_,_e);if(ot!==void 0)return ot}}getObjectsByProperty(_,_e){let nt=[];this[_]===_e&&nt.push(this);for(let rt=0,it=this.children.length;rt<it;rt++){const ot=this.children[rt].getObjectsByProperty(_,_e);ot.length>0&&(nt=nt.concat(ot))}return nt}getWorldPosition(_){return this.updateWorldMatrix(!0,!1),_.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(_){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_,_scale$2),_}getWorldScale(_){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,_),_}getWorldDirection(_){this.updateWorldMatrix(!0,!1);const _e=this.matrixWorld.elements;return _.set(_e[8],_e[9],_e[10]).normalize()}raycast(){}traverse(_){_(this);const _e=this.children;for(let nt=0,rt=_e.length;nt<rt;nt++)_e[nt].traverse(_)}traverseVisible(_){if(this.visible===!1)return;_(this);const _e=this.children;for(let nt=0,rt=_e.length;nt<rt;nt++)_e[nt].traverseVisible(_)}traverseAncestors(_){const _e=this.parent;_e!==null&&(_(_e),_e.traverseAncestors(_))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(_){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||_)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,_=!0);const _e=this.children;for(let nt=0,rt=_e.length;nt<rt;nt++){const it=_e[nt];(it.matrixWorldAutoUpdate===!0||_===!0)&&it.updateMatrixWorld(_)}}updateWorldMatrix(_,_e){const nt=this.parent;if(_===!0&&nt!==null&&nt.matrixWorldAutoUpdate===!0&&nt.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),_e===!0){const rt=this.children;for(let it=0,ot=rt.length;it<ot;it++){const st=rt[it];st.matrixWorldAutoUpdate===!0&&st.updateWorldMatrix(!1,!0)}}}toJSON(_){const _e=_===void 0||typeof _=="string",nt={};_e&&(_={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},nt.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const rt={};rt.uuid=this.uuid,rt.type=this.type,this.name!==""&&(rt.name=this.name),this.castShadow===!0&&(rt.castShadow=!0),this.receiveShadow===!0&&(rt.receiveShadow=!0),this.visible===!1&&(rt.visible=!1),this.frustumCulled===!1&&(rt.frustumCulled=!1),this.renderOrder!==0&&(rt.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(rt.userData=this.userData),rt.layers=this.layers.mask,rt.matrix=this.matrix.toArray(),rt.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(rt.matrixAutoUpdate=!1),this.isInstancedMesh&&(rt.type="InstancedMesh",rt.count=this.count,rt.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(rt.instanceColor=this.instanceColor.toJSON()));function it(st,at){return st[at.uuid]===void 0&&(st[at.uuid]=at.toJSON(_)),at.uuid}if(this.isScene)this.background&&(this.background.isColor?rt.background=this.background.toJSON():this.background.isTexture&&(rt.background=this.background.toJSON(_).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(rt.environment=this.environment.toJSON(_).uuid);else if(this.isMesh||this.isLine||this.isPoints){rt.geometry=it(_.geometries,this.geometry);const st=this.geometry.parameters;if(st!==void 0&&st.shapes!==void 0){const at=st.shapes;if(Array.isArray(at))for(let lt=0,ct=at.length;lt<ct;lt++){const ut=at[lt];it(_.shapes,ut)}else it(_.shapes,at)}}if(this.isSkinnedMesh&&(rt.bindMode=this.bindMode,rt.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(it(_.skeletons,this.skeleton),rt.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const st=[];for(let at=0,lt=this.material.length;at<lt;at++)st.push(it(_.materials,this.material[at]));rt.material=st}else rt.material=it(_.materials,this.material);if(this.children.length>0){rt.children=[];for(let st=0;st<this.children.length;st++)rt.children.push(this.children[st].toJSON(_).object)}if(this.animations.length>0){rt.animations=[];for(let st=0;st<this.animations.length;st++){const at=this.animations[st];rt.animations.push(it(_.animations,at))}}if(_e){const st=ot(_.geometries),at=ot(_.materials),lt=ot(_.textures),ct=ot(_.images),ut=ot(_.shapes),ht=ot(_.skeletons),pt=ot(_.animations),gt=ot(_.nodes);st.length>0&&(nt.geometries=st),at.length>0&&(nt.materials=at),lt.length>0&&(nt.textures=lt),ct.length>0&&(nt.images=ct),ut.length>0&&(nt.shapes=ut),ht.length>0&&(nt.skeletons=ht),pt.length>0&&(nt.animations=pt),gt.length>0&&(nt.nodes=gt)}return nt.object=rt,nt;function ot(st){const at=[];for(const lt in st){const ct=st[lt];delete ct.metadata,at.push(ct)}return at}}clone(_){return new this.constructor().copy(this,_)}copy(_,_e=!0){if(this.name=_.name,this.up.copy(_.up),this.position.copy(_.position),this.rotation.order=_.rotation.order,this.quaternion.copy(_.quaternion),this.scale.copy(_.scale),this.matrix.copy(_.matrix),this.matrixWorld.copy(_.matrixWorld),this.matrixAutoUpdate=_.matrixAutoUpdate,this.matrixWorldNeedsUpdate=_.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=_.matrixWorldAutoUpdate,this.layers.mask=_.layers.mask,this.visible=_.visible,this.castShadow=_.castShadow,this.receiveShadow=_.receiveShadow,this.frustumCulled=_.frustumCulled,this.renderOrder=_.renderOrder,this.animations=_.animations,this.userData=JSON.parse(JSON.stringify(_.userData)),_e===!0)for(let nt=0;nt<_.children.length;nt++){const rt=_.children[nt];this.add(rt.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;let warnedGetUV=!1;class Triangle{constructor(_=new Vector3,_e=new Vector3,nt=new Vector3){this.a=_,this.b=_e,this.c=nt}static getNormal(_,_e,nt,rt){rt.subVectors(nt,_e),_v0$1.subVectors(_,_e),rt.cross(_v0$1);const it=rt.lengthSq();return it>0?rt.multiplyScalar(1/Math.sqrt(it)):rt.set(0,0,0)}static getBarycoord(_,_e,nt,rt,it){_v0$1.subVectors(rt,_e),_v1$3.subVectors(nt,_e),_v2$2.subVectors(_,_e);const ot=_v0$1.dot(_v0$1),st=_v0$1.dot(_v1$3),at=_v0$1.dot(_v2$2),lt=_v1$3.dot(_v1$3),ct=_v1$3.dot(_v2$2),ut=ot*lt-st*st;if(ut===0)return it.set(-2,-1,-1);const ht=1/ut,pt=(lt*at-st*ct)*ht,gt=(ot*ct-st*at)*ht;return it.set(1-pt-gt,gt,pt)}static containsPoint(_,_e,nt,rt){return this.getBarycoord(_,_e,nt,rt,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV(_,_e,nt,rt,it,ot,st,at){return warnedGetUV===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),warnedGetUV=!0),this.getInterpolation(_,_e,nt,rt,it,ot,st,at)}static getInterpolation(_,_e,nt,rt,it,ot,st,at){return this.getBarycoord(_,_e,nt,rt,_v3$1),at.setScalar(0),at.addScaledVector(it,_v3$1.x),at.addScaledVector(ot,_v3$1.y),at.addScaledVector(st,_v3$1.z),at}static isFrontFacing(_,_e,nt,rt){return _v0$1.subVectors(nt,_e),_v1$3.subVectors(_,_e),_v0$1.cross(_v1$3).dot(rt)<0}set(_,_e,nt){return this.a.copy(_),this.b.copy(_e),this.c.copy(nt),this}setFromPointsAndIndices(_,_e,nt,rt){return this.a.copy(_[_e]),this.b.copy(_[nt]),this.c.copy(_[rt]),this}setFromAttributeAndIndices(_,_e,nt,rt){return this.a.fromBufferAttribute(_,_e),this.b.fromBufferAttribute(_,nt),this.c.fromBufferAttribute(_,rt),this}clone(){return new this.constructor().copy(this)}copy(_){return this.a.copy(_.a),this.b.copy(_.b),this.c.copy(_.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(_){return _.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(_){return Triangle.getNormal(this.a,this.b,this.c,_)}getPlane(_){return _.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(_,_e){return Triangle.getBarycoord(_,this.a,this.b,this.c,_e)}getUV(_,_e,nt,rt,it){return warnedGetUV===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),warnedGetUV=!0),Triangle.getInterpolation(_,this.a,this.b,this.c,_e,nt,rt,it)}getInterpolation(_,_e,nt,rt,it){return Triangle.getInterpolation(_,this.a,this.b,this.c,_e,nt,rt,it)}containsPoint(_){return Triangle.containsPoint(_,this.a,this.b,this.c)}isFrontFacing(_){return Triangle.isFrontFacing(this.a,this.b,this.c,_)}intersectsBox(_){return _.intersectsTriangle(this)}closestPointToPoint(_,_e){const nt=this.a,rt=this.b,it=this.c;let ot,st;_vab.subVectors(rt,nt),_vac.subVectors(it,nt),_vap.subVectors(_,nt);const at=_vab.dot(_vap),lt=_vac.dot(_vap);if(at<=0&&lt<=0)return _e.copy(nt);_vbp.subVectors(_,rt);const ct=_vab.dot(_vbp),ut=_vac.dot(_vbp);if(ct>=0&&ut<=ct)return _e.copy(rt);const ht=at*ut-ct*lt;if(ht<=0&&at>=0&&ct<=0)return ot=at/(at-ct),_e.copy(nt).addScaledVector(_vab,ot);_vcp.subVectors(_,it);const pt=_vab.dot(_vcp),gt=_vac.dot(_vcp);if(gt>=0&&pt<=gt)return _e.copy(it);const yt=pt*lt-at*gt;if(yt<=0&&lt>=0&&gt<=0)return st=lt/(lt-gt),_e.copy(nt).addScaledVector(_vac,st);const vt=ct*gt-pt*ut;if(vt<=0&&ut-ct>=0&&pt-gt>=0)return _vbc.subVectors(it,rt),st=(ut-ct)/(ut-ct+(pt-gt)),_e.copy(rt).addScaledVector(_vbc,st);const mt=1/(vt+yt+ht);return ot=yt*mt,st=ht*mt,_e.copy(nt).addScaledVector(_vab,ot).addScaledVector(_vac,st)}equals(_){return _.a.equals(this.a)&&_.b.equals(this.b)&&_.c.equals(this.c)}}let materialId=0;class Material extends EventDispatcher$1{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:materialId++}),this.uuid=generateUUID$1(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(_){this._alphaTest>0!=_>0&&this.version++,this._alphaTest=_}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(_){if(_!==void 0)for(const _e in _){const nt=_[_e];if(nt===void 0){console.warn(`THREE.Material: parameter '${_e}' has value of undefined.`);continue}const rt=this[_e];if(rt===void 0){console.warn(`THREE.Material: '${_e}' is not a property of THREE.${this.type}.`);continue}rt&&rt.isColor?rt.set(nt):rt&&rt.isVector3&&nt&&nt.isVector3?rt.copy(nt):this[_e]=nt}}toJSON(_){const _e=_===void 0||typeof _=="string";_e&&(_={textures:{},images:{}});const nt={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};nt.uuid=this.uuid,nt.type=this.type,this.name!==""&&(nt.name=this.name),this.color&&this.color.isColor&&(nt.color=this.color.getHex()),this.roughness!==void 0&&(nt.roughness=this.roughness),this.metalness!==void 0&&(nt.metalness=this.metalness),this.sheen!==void 0&&(nt.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(nt.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(nt.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(nt.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(nt.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(nt.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(nt.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(nt.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(nt.shininess=this.shininess),this.clearcoat!==void 0&&(nt.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(nt.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(nt.clearcoatMap=this.clearcoatMap.toJSON(_).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(nt.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(_).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(nt.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(_).uuid,nt.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(nt.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(nt.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(nt.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(nt.iridescenceMap=this.iridescenceMap.toJSON(_).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(nt.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(_).uuid),this.anisotropy!==void 0&&(nt.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(nt.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(nt.anisotropyMap=this.anisotropyMap.toJSON(_).uuid),this.map&&this.map.isTexture&&(nt.map=this.map.toJSON(_).uuid),this.matcap&&this.matcap.isTexture&&(nt.matcap=this.matcap.toJSON(_).uuid),this.alphaMap&&this.alphaMap.isTexture&&(nt.alphaMap=this.alphaMap.toJSON(_).uuid),this.lightMap&&this.lightMap.isTexture&&(nt.lightMap=this.lightMap.toJSON(_).uuid,nt.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(nt.aoMap=this.aoMap.toJSON(_).uuid,nt.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(nt.bumpMap=this.bumpMap.toJSON(_).uuid,nt.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(nt.normalMap=this.normalMap.toJSON(_).uuid,nt.normalMapType=this.normalMapType,nt.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(nt.displacementMap=this.displacementMap.toJSON(_).uuid,nt.displacementScale=this.displacementScale,nt.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(nt.roughnessMap=this.roughnessMap.toJSON(_).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(nt.metalnessMap=this.metalnessMap.toJSON(_).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(nt.emissiveMap=this.emissiveMap.toJSON(_).uuid),this.specularMap&&this.specularMap.isTexture&&(nt.specularMap=this.specularMap.toJSON(_).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(nt.specularIntensityMap=this.specularIntensityMap.toJSON(_).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(nt.specularColorMap=this.specularColorMap.toJSON(_).uuid),this.envMap&&this.envMap.isTexture&&(nt.envMap=this.envMap.toJSON(_).uuid,this.combine!==void 0&&(nt.combine=this.combine)),this.envMapIntensity!==void 0&&(nt.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(nt.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(nt.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(nt.gradientMap=this.gradientMap.toJSON(_).uuid),this.transmission!==void 0&&(nt.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(nt.transmissionMap=this.transmissionMap.toJSON(_).uuid),this.thickness!==void 0&&(nt.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(nt.thicknessMap=this.thicknessMap.toJSON(_).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(nt.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(nt.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(nt.size=this.size),this.shadowSide!==null&&(nt.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(nt.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(nt.blending=this.blending),this.side!==FrontSide&&(nt.side=this.side),this.vertexColors&&(nt.vertexColors=!0),this.opacity<1&&(nt.opacity=this.opacity),this.transparent===!0&&(nt.transparent=this.transparent),nt.depthFunc=this.depthFunc,nt.depthTest=this.depthTest,nt.depthWrite=this.depthWrite,nt.colorWrite=this.colorWrite,nt.stencilWrite=this.stencilWrite,nt.stencilWriteMask=this.stencilWriteMask,nt.stencilFunc=this.stencilFunc,nt.stencilRef=this.stencilRef,nt.stencilFuncMask=this.stencilFuncMask,nt.stencilFail=this.stencilFail,nt.stencilZFail=this.stencilZFail,nt.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(nt.rotation=this.rotation),this.polygonOffset===!0&&(nt.polygonOffset=!0),this.polygonOffsetFactor!==0&&(nt.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(nt.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(nt.linewidth=this.linewidth),this.dashSize!==void 0&&(nt.dashSize=this.dashSize),this.gapSize!==void 0&&(nt.gapSize=this.gapSize),this.scale!==void 0&&(nt.scale=this.scale),this.dithering===!0&&(nt.dithering=!0),this.alphaTest>0&&(nt.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(nt.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(nt.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(nt.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(nt.wireframe=this.wireframe),this.wireframeLinewidth>1&&(nt.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(nt.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(nt.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(nt.flatShading=this.flatShading),this.visible===!1&&(nt.visible=!1),this.toneMapped===!1&&(nt.toneMapped=!1),this.fog===!1&&(nt.fog=!1),Object.keys(this.userData).length>0&&(nt.userData=this.userData);function rt(it){const ot=[];for(const st in it){const at=it[st];delete at.metadata,ot.push(at)}return ot}if(_e){const it=rt(_.textures),ot=rt(_.images);it.length>0&&(nt.textures=it),ot.length>0&&(nt.images=ot)}return nt}clone(){return new this.constructor().copy(this)}copy(_){this.name=_.name,this.blending=_.blending,this.side=_.side,this.vertexColors=_.vertexColors,this.opacity=_.opacity,this.transparent=_.transparent,this.blendSrc=_.blendSrc,this.blendDst=_.blendDst,this.blendEquation=_.blendEquation,this.blendSrcAlpha=_.blendSrcAlpha,this.blendDstAlpha=_.blendDstAlpha,this.blendEquationAlpha=_.blendEquationAlpha,this.depthFunc=_.depthFunc,this.depthTest=_.depthTest,this.depthWrite=_.depthWrite,this.stencilWriteMask=_.stencilWriteMask,this.stencilFunc=_.stencilFunc,this.stencilRef=_.stencilRef,this.stencilFuncMask=_.stencilFuncMask,this.stencilFail=_.stencilFail,this.stencilZFail=_.stencilZFail,this.stencilZPass=_.stencilZPass,this.stencilWrite=_.stencilWrite;const _e=_.clippingPlanes;let nt=null;if(_e!==null){const rt=_e.length;nt=new Array(rt);for(let it=0;it!==rt;++it)nt[it]=_e[it].clone()}return this.clippingPlanes=nt,this.clipIntersection=_.clipIntersection,this.clipShadows=_.clipShadows,this.shadowSide=_.shadowSide,this.colorWrite=_.colorWrite,this.precision=_.precision,this.polygonOffset=_.polygonOffset,this.polygonOffsetFactor=_.polygonOffsetFactor,this.polygonOffsetUnits=_.polygonOffsetUnits,this.dithering=_.dithering,this.alphaTest=_.alphaTest,this.alphaToCoverage=_.alphaToCoverage,this.premultipliedAlpha=_.premultipliedAlpha,this.forceSinglePass=_.forceSinglePass,this.visible=_.visible,this.toneMapped=_.toneMapped,this.userData=JSON.parse(JSON.stringify(_.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(_){_===!0&&this.version++}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(tt,_,_e){return _e<0&&(_e+=1),_e>1&&(_e-=1),_e<1/6?tt+(_-tt)*6*_e:_e<1/2?_:_e<2/3?tt+(_-tt)*6*(2/3-_e):tt}let Color$1=class{constructor(_,_e,nt){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(_,_e,nt)}set(_,_e,nt){if(_e===void 0&&nt===void 0){const rt=_;rt&&rt.isColor?this.copy(rt):typeof rt=="number"?this.setHex(rt):typeof rt=="string"&&this.setStyle(rt)}else this.setRGB(_,_e,nt);return this}setScalar(_){return this.r=_,this.g=_,this.b=_,this}setHex(_,_e=SRGBColorSpace){return _=Math.floor(_),this.r=(_>>16&255)/255,this.g=(_>>8&255)/255,this.b=(_&255)/255,ColorManagement.toWorkingColorSpace(this,_e),this}setRGB(_,_e,nt,rt=ColorManagement.workingColorSpace){return this.r=_,this.g=_e,this.b=nt,ColorManagement.toWorkingColorSpace(this,rt),this}setHSL(_,_e,nt,rt=ColorManagement.workingColorSpace){if(_=euclideanModulo(_,1),_e=clamp$4(_e,0,1),nt=clamp$4(nt,0,1),_e===0)this.r=this.g=this.b=nt;else{const it=nt<=.5?nt*(1+_e):nt+_e-nt*_e,ot=2*nt-it;this.r=hue2rgb(ot,it,_+1/3),this.g=hue2rgb(ot,it,_),this.b=hue2rgb(ot,it,_-1/3)}return ColorManagement.toWorkingColorSpace(this,rt),this}setStyle(_,_e=SRGBColorSpace){function nt(it){it!==void 0&&parseFloat(it)<1&&console.warn("THREE.Color: Alpha component of "+_+" will be ignored.")}let rt;if(rt=/^(\w+)\(([^\)]*)\)/.exec(_)){let it;const ot=rt[1],st=rt[2];switch(ot){case"rgb":case"rgba":if(it=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(st))return nt(it[4]),this.setRGB(Math.min(255,parseInt(it[1],10))/255,Math.min(255,parseInt(it[2],10))/255,Math.min(255,parseInt(it[3],10))/255,_e);if(it=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(st))return nt(it[4]),this.setRGB(Math.min(100,parseInt(it[1],10))/100,Math.min(100,parseInt(it[2],10))/100,Math.min(100,parseInt(it[3],10))/100,_e);break;case"hsl":case"hsla":if(it=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(st))return nt(it[4]),this.setHSL(parseFloat(it[1])/360,parseFloat(it[2])/100,parseFloat(it[3])/100,_e);break;default:console.warn("THREE.Color: Unknown color model "+_)}}else if(rt=/^\#([A-Fa-f\d]+)$/.exec(_)){const it=rt[1],ot=it.length;if(ot===3)return this.setRGB(parseInt(it.charAt(0),16)/15,parseInt(it.charAt(1),16)/15,parseInt(it.charAt(2),16)/15,_e);if(ot===6)return this.setHex(parseInt(it,16),_e);console.warn("THREE.Color: Invalid hex color "+_)}else if(_&&_.length>0)return this.setColorName(_,_e);return this}setColorName(_,_e=SRGBColorSpace){const nt=_colorKeywords[_.toLowerCase()];return nt!==void 0?this.setHex(nt,_e):console.warn("THREE.Color: Unknown color "+_),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(_){return this.r=_.r,this.g=_.g,this.b=_.b,this}copySRGBToLinear(_){return this.r=SRGBToLinear(_.r),this.g=SRGBToLinear(_.g),this.b=SRGBToLinear(_.b),this}copyLinearToSRGB(_){return this.r=LinearToSRGB(_.r),this.g=LinearToSRGB(_.g),this.b=LinearToSRGB(_.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(_=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),_),Math.round(clamp$4(_color.r*255,0,255))*65536+Math.round(clamp$4(_color.g*255,0,255))*256+Math.round(clamp$4(_color.b*255,0,255))}getHexString(_=SRGBColorSpace){return("000000"+this.getHex(_).toString(16)).slice(-6)}getHSL(_,_e=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),_e);const nt=_color.r,rt=_color.g,it=_color.b,ot=Math.max(nt,rt,it),st=Math.min(nt,rt,it);let at,lt;const ct=(st+ot)/2;if(st===ot)at=0,lt=0;else{const ut=ot-st;switch(lt=ct<=.5?ut/(ot+st):ut/(2-ot-st),ot){case nt:at=(rt-it)/ut+(rt<it?6:0);break;case rt:at=(it-nt)/ut+2;break;case it:at=(nt-rt)/ut+4;break}at/=6}return _.h=at,_.s=lt,_.l=ct,_}getRGB(_,_e=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),_e),_.r=_color.r,_.g=_color.g,_.b=_color.b,_}getStyle(_=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),_);const _e=_color.r,nt=_color.g,rt=_color.b;return _!==SRGBColorSpace?`color(${_} ${_e.toFixed(3)} ${nt.toFixed(3)} ${rt.toFixed(3)})`:`rgb(${Math.round(_e*255)},${Math.round(nt*255)},${Math.round(rt*255)})`}offsetHSL(_,_e,nt){return this.getHSL(_hslA),_hslA.h+=_,_hslA.s+=_e,_hslA.l+=nt,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(_){return this.r+=_.r,this.g+=_.g,this.b+=_.b,this}addColors(_,_e){return this.r=_.r+_e.r,this.g=_.g+_e.g,this.b=_.b+_e.b,this}addScalar(_){return this.r+=_,this.g+=_,this.b+=_,this}sub(_){return this.r=Math.max(0,this.r-_.r),this.g=Math.max(0,this.g-_.g),this.b=Math.max(0,this.b-_.b),this}multiply(_){return this.r*=_.r,this.g*=_.g,this.b*=_.b,this}multiplyScalar(_){return this.r*=_,this.g*=_,this.b*=_,this}lerp(_,_e){return this.r+=(_.r-this.r)*_e,this.g+=(_.g-this.g)*_e,this.b+=(_.b-this.b)*_e,this}lerpColors(_,_e,nt){return this.r=_.r+(_e.r-_.r)*nt,this.g=_.g+(_e.g-_.g)*nt,this.b=_.b+(_e.b-_.b)*nt,this}lerpHSL(_,_e){this.getHSL(_hslA),_.getHSL(_hslB);const nt=lerp(_hslA.h,_hslB.h,_e),rt=lerp(_hslA.s,_hslB.s,_e),it=lerp(_hslA.l,_hslB.l,_e);return this.setHSL(nt,rt,it),this}setFromVector3(_){return this.r=_.x,this.g=_.y,this.b=_.z,this}applyMatrix3(_){const _e=this.r,nt=this.g,rt=this.b,it=_.elements;return this.r=it[0]*_e+it[3]*nt+it[6]*rt,this.g=it[1]*_e+it[4]*nt+it[7]*rt,this.b=it[2]*_e+it[5]*nt+it[8]*rt,this}equals(_){return _.r===this.r&&_.g===this.g&&_.b===this.b}fromArray(_,_e=0){return this.r=_[_e],this.g=_[_e+1],this.b=_[_e+2],this}toArray(_=[],_e=0){return _[_e]=this.r,_[_e+1]=this.g,_[_e+2]=this.b,_}fromBufferAttribute(_,_e){return this.r=_.getX(_e),this.g=_.getY(_e),this.b=_.getZ(_e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const _color=new Color$1;Color$1.NAMES=_colorKeywords;class MeshBasicMaterial extends Material{constructor(_){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.fog=_.fog,this}}const _tables=_generateTables();function _generateTables(){const tt=new ArrayBuffer(4),_=new Float32Array(tt),_e=new Uint32Array(tt),nt=new Uint32Array(512),rt=new Uint32Array(512);for(let at=0;at<256;++at){const lt=at-127;lt<-27?(nt[at]=0,nt[at|256]=32768,rt[at]=24,rt[at|256]=24):lt<-14?(nt[at]=1024>>-lt-14,nt[at|256]=1024>>-lt-14|32768,rt[at]=-lt-1,rt[at|256]=-lt-1):lt<=15?(nt[at]=lt+15<<10,nt[at|256]=lt+15<<10|32768,rt[at]=13,rt[at|256]=13):lt<128?(nt[at]=31744,nt[at|256]=64512,rt[at]=24,rt[at|256]=24):(nt[at]=31744,nt[at|256]=64512,rt[at]=13,rt[at|256]=13)}const it=new Uint32Array(2048),ot=new Uint32Array(64),st=new Uint32Array(64);for(let at=1;at<1024;++at){let lt=at<<13,ct=0;for(;!(lt&8388608);)lt<<=1,ct-=8388608;lt&=-8388609,ct+=947912704,it[at]=lt|ct}for(let at=1024;at<2048;++at)it[at]=939524096+(at-1024<<13);for(let at=1;at<31;++at)ot[at]=at<<23;ot[31]=1199570944,ot[32]=2147483648;for(let at=33;at<63;++at)ot[at]=2147483648+(at-32<<23);ot[63]=3347054592;for(let at=1;at<64;++at)at!==32&&(st[at]=1024);return{floatView:_,uint32View:_e,baseTable:nt,shiftTable:rt,mantissaTable:it,exponentTable:ot,offsetTable:st}}function toHalfFloat(tt){Math.abs(tt)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),tt=clamp$4(tt,-65504,65504),_tables.floatView[0]=tt;const _=_tables.uint32View[0],_e=_>>23&511;return _tables.baseTable[_e]+((_&8388607)>>_tables.shiftTable[_e])}function fromHalfFloat(tt){const _=tt>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[_]+(tt&1023)]+_tables.exponentTable[_],_tables.floatView[0]}const DataUtils={toHalfFloat,fromHalfFloat},_vector$8=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(_,_e,nt=!1){if(Array.isArray(_))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=_,this.itemSize=_e,this.count=_!==void 0?_.length/_e:0,this.normalized=nt,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(_){_===!0&&this.version++}setUsage(_){return this.usage=_,this}copy(_){return this.name=_.name,this.array=new _.array.constructor(_.array),this.itemSize=_.itemSize,this.count=_.count,this.normalized=_.normalized,this.usage=_.usage,this.gpuType=_.gpuType,this}copyAt(_,_e,nt){_*=this.itemSize,nt*=_e.itemSize;for(let rt=0,it=this.itemSize;rt<it;rt++)this.array[_+rt]=_e.array[nt+rt];return this}copyArray(_){return this.array.set(_),this}applyMatrix3(_){if(this.itemSize===2)for(let _e=0,nt=this.count;_e<nt;_e++)_vector2$1.fromBufferAttribute(this,_e),_vector2$1.applyMatrix3(_),this.setXY(_e,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let _e=0,nt=this.count;_e<nt;_e++)_vector$8.fromBufferAttribute(this,_e),_vector$8.applyMatrix3(_),this.setXYZ(_e,_vector$8.x,_vector$8.y,_vector$8.z);return this}applyMatrix4(_){for(let _e=0,nt=this.count;_e<nt;_e++)_vector$8.fromBufferAttribute(this,_e),_vector$8.applyMatrix4(_),this.setXYZ(_e,_vector$8.x,_vector$8.y,_vector$8.z);return this}applyNormalMatrix(_){for(let _e=0,nt=this.count;_e<nt;_e++)_vector$8.fromBufferAttribute(this,_e),_vector$8.applyNormalMatrix(_),this.setXYZ(_e,_vector$8.x,_vector$8.y,_vector$8.z);return this}transformDirection(_){for(let _e=0,nt=this.count;_e<nt;_e++)_vector$8.fromBufferAttribute(this,_e),_vector$8.transformDirection(_),this.setXYZ(_e,_vector$8.x,_vector$8.y,_vector$8.z);return this}set(_,_e=0){return this.array.set(_,_e),this}getX(_){let _e=this.array[_*this.itemSize];return this.normalized&&(_e=denormalize(_e,this.array)),_e}setX(_,_e){return this.normalized&&(_e=normalize$5(_e,this.array)),this.array[_*this.itemSize]=_e,this}getY(_){let _e=this.array[_*this.itemSize+1];return this.normalized&&(_e=denormalize(_e,this.array)),_e}setY(_,_e){return this.normalized&&(_e=normalize$5(_e,this.array)),this.array[_*this.itemSize+1]=_e,this}getZ(_){let _e=this.array[_*this.itemSize+2];return this.normalized&&(_e=denormalize(_e,this.array)),_e}setZ(_,_e){return this.normalized&&(_e=normalize$5(_e,this.array)),this.array[_*this.itemSize+2]=_e,this}getW(_){let _e=this.array[_*this.itemSize+3];return this.normalized&&(_e=denormalize(_e,this.array)),_e}setW(_,_e){return this.normalized&&(_e=normalize$5(_e,this.array)),this.array[_*this.itemSize+3]=_e,this}setXY(_,_e,nt){return _*=this.itemSize,this.normalized&&(_e=normalize$5(_e,this.array),nt=normalize$5(nt,this.array)),this.array[_+0]=_e,this.array[_+1]=nt,this}setXYZ(_,_e,nt,rt){return _*=this.itemSize,this.normalized&&(_e=normalize$5(_e,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array)),this.array[_+0]=_e,this.array[_+1]=nt,this.array[_+2]=rt,this}setXYZW(_,_e,nt,rt,it){return _*=this.itemSize,this.normalized&&(_e=normalize$5(_e,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array),it=normalize$5(it,this.array)),this.array[_+0]=_e,this.array[_+1]=nt,this.array[_+2]=rt,this.array[_+3]=it,this}onUpload(_){return this.onUploadCallback=_,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const _={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(_.name=this.name),this.usage!==StaticDrawUsage&&(_.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(_.updateRange=this.updateRange),_}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Int8BufferAttribute extends BufferAttribute{constructor(_,_e,nt){super(new Int8Array(_),_e,nt)}}class Uint8BufferAttribute extends BufferAttribute{constructor(_,_e,nt){super(new Uint8Array(_),_e,nt)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(_,_e,nt){super(new Uint8ClampedArray(_),_e,nt)}}class Int16BufferAttribute extends BufferAttribute{constructor(_,_e,nt){super(new Int16Array(_),_e,nt)}}class Uint16BufferAttribute extends BufferAttribute{constructor(_,_e,nt){super(new Uint16Array(_),_e,nt)}}class Int32BufferAttribute extends BufferAttribute{constructor(_,_e,nt){super(new Int32Array(_),_e,nt)}}class Uint32BufferAttribute extends BufferAttribute{constructor(_,_e,nt){super(new Uint32Array(_),_e,nt)}}class Float16BufferAttribute extends BufferAttribute{constructor(_,_e,nt){super(new Uint16Array(_),_e,nt),this.isFloat16BufferAttribute=!0}getX(_){let _e=fromHalfFloat(this.array[_*this.itemSize]);return this.normalized&&(_e=denormalize(_e,this.array)),_e}setX(_,_e){return this.normalized&&(_e=normalize$5(_e,this.array)),this.array[_*this.itemSize]=toHalfFloat(_e),this}getY(_){let _e=fromHalfFloat(this.array[_*this.itemSize+1]);return this.normalized&&(_e=denormalize(_e,this.array)),_e}setY(_,_e){return this.normalized&&(_e=normalize$5(_e,this.array)),this.array[_*this.itemSize+1]=toHalfFloat(_e),this}getZ(_){let _e=fromHalfFloat(this.array[_*this.itemSize+2]);return this.normalized&&(_e=denormalize(_e,this.array)),_e}setZ(_,_e){return this.normalized&&(_e=normalize$5(_e,this.array)),this.array[_*this.itemSize+2]=toHalfFloat(_e),this}getW(_){let _e=fromHalfFloat(this.array[_*this.itemSize+3]);return this.normalized&&(_e=denormalize(_e,this.array)),_e}setW(_,_e){return this.normalized&&(_e=normalize$5(_e,this.array)),this.array[_*this.itemSize+3]=toHalfFloat(_e),this}setXY(_,_e,nt){return _*=this.itemSize,this.normalized&&(_e=normalize$5(_e,this.array),nt=normalize$5(nt,this.array)),this.array[_+0]=toHalfFloat(_e),this.array[_+1]=toHalfFloat(nt),this}setXYZ(_,_e,nt,rt){return _*=this.itemSize,this.normalized&&(_e=normalize$5(_e,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array)),this.array[_+0]=toHalfFloat(_e),this.array[_+1]=toHalfFloat(nt),this.array[_+2]=toHalfFloat(rt),this}setXYZW(_,_e,nt,rt,it){return _*=this.itemSize,this.normalized&&(_e=normalize$5(_e,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array),it=normalize$5(it,this.array)),this.array[_+0]=toHalfFloat(_e),this.array[_+1]=toHalfFloat(nt),this.array[_+2]=toHalfFloat(rt),this.array[_+3]=toHalfFloat(it),this}}class Float32BufferAttribute extends BufferAttribute{constructor(_,_e,nt){super(new Float32Array(_),_e,nt)}}class Float64BufferAttribute extends BufferAttribute{constructor(_,_e,nt){super(new Float64Array(_),_e,nt)}}let _id$1=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$1=new Box3,_boxMorphTargets=new Box3,_vector$7=new Vector3;class BufferGeometry extends EventDispatcher$1{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID$1(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(_){return Array.isArray(_)?this.index=new(arrayNeedsUint32(_)?Uint32BufferAttribute:Uint16BufferAttribute)(_,1):this.index=_,this}getAttribute(_){return this.attributes[_]}setAttribute(_,_e){return this.attributes[_]=_e,this}deleteAttribute(_){return delete this.attributes[_],this}hasAttribute(_){return this.attributes[_]!==void 0}addGroup(_,_e,nt=0){this.groups.push({start:_,count:_e,materialIndex:nt})}clearGroups(){this.groups=[]}setDrawRange(_,_e){this.drawRange.start=_,this.drawRange.count=_e}applyMatrix4(_){const _e=this.attributes.position;_e!==void 0&&(_e.applyMatrix4(_),_e.needsUpdate=!0);const nt=this.attributes.normal;if(nt!==void 0){const it=new Matrix3().getNormalMatrix(_);nt.applyNormalMatrix(it),nt.needsUpdate=!0}const rt=this.attributes.tangent;return rt!==void 0&&(rt.transformDirection(_),rt.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(_){return _m1.makeRotationFromQuaternion(_),this.applyMatrix4(_m1),this}rotateX(_){return _m1.makeRotationX(_),this.applyMatrix4(_m1),this}rotateY(_){return _m1.makeRotationY(_),this.applyMatrix4(_m1),this}rotateZ(_){return _m1.makeRotationZ(_),this.applyMatrix4(_m1),this}translate(_,_e,nt){return _m1.makeTranslation(_,_e,nt),this.applyMatrix4(_m1),this}scale(_,_e,nt){return _m1.makeScale(_,_e,nt),this.applyMatrix4(_m1),this}lookAt(_){return _obj.lookAt(_),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(_){const _e=[];for(let nt=0,rt=_.length;nt<rt;nt++){const it=_[nt];_e.push(it.x,it.y,it.z||0)}return this.setAttribute("position",new Float32BufferAttribute(_e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const _=this.attributes.position,_e=this.morphAttributes.position;if(_&&_.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(_!==void 0){if(this.boundingBox.setFromBufferAttribute(_),_e)for(let nt=0,rt=_e.length;nt<rt;nt++){const it=_e[nt];_box$1.setFromBufferAttribute(it),this.morphTargetsRelative?(_vector$7.addVectors(this.boundingBox.min,_box$1.min),this.boundingBox.expandByPoint(_vector$7),_vector$7.addVectors(this.boundingBox.max,_box$1.max),this.boundingBox.expandByPoint(_vector$7)):(this.boundingBox.expandByPoint(_box$1.min),this.boundingBox.expandByPoint(_box$1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const _=this.attributes.position,_e=this.morphAttributes.position;if(_&&_.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(_){const nt=this.boundingSphere.center;if(_box$1.setFromBufferAttribute(_),_e)for(let it=0,ot=_e.length;it<ot;it++){const st=_e[it];_boxMorphTargets.setFromBufferAttribute(st),this.morphTargetsRelative?(_vector$7.addVectors(_box$1.min,_boxMorphTargets.min),_box$1.expandByPoint(_vector$7),_vector$7.addVectors(_box$1.max,_boxMorphTargets.max),_box$1.expandByPoint(_vector$7)):(_box$1.expandByPoint(_boxMorphTargets.min),_box$1.expandByPoint(_boxMorphTargets.max))}_box$1.getCenter(nt);let rt=0;for(let it=0,ot=_.count;it<ot;it++)_vector$7.fromBufferAttribute(_,it),rt=Math.max(rt,nt.distanceToSquared(_vector$7));if(_e)for(let it=0,ot=_e.length;it<ot;it++){const st=_e[it],at=this.morphTargetsRelative;for(let lt=0,ct=st.count;lt<ct;lt++)_vector$7.fromBufferAttribute(st,lt),at&&(_offset.fromBufferAttribute(_,lt),_vector$7.add(_offset)),rt=Math.max(rt,nt.distanceToSquared(_vector$7))}this.boundingSphere.radius=Math.sqrt(rt),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const _=this.index,_e=this.attributes;if(_===null||_e.position===void 0||_e.normal===void 0||_e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const nt=_.array,rt=_e.position.array,it=_e.normal.array,ot=_e.uv.array,st=rt.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*st),4));const at=this.getAttribute("tangent").array,lt=[],ct=[];for(let Bt=0;Bt<st;Bt++)lt[Bt]=new Vector3,ct[Bt]=new Vector3;const ut=new Vector3,ht=new Vector3,pt=new Vector3,gt=new Vector2,yt=new Vector2,vt=new Vector2,mt=new Vector3,_t=new Vector3;function xt(Bt,Ot,Ut){ut.fromArray(rt,Bt*3),ht.fromArray(rt,Ot*3),pt.fromArray(rt,Ut*3),gt.fromArray(ot,Bt*2),yt.fromArray(ot,Ot*2),vt.fromArray(ot,Ut*2),ht.sub(ut),pt.sub(ut),yt.sub(gt),vt.sub(gt);const Nt=1/(yt.x*vt.y-vt.x*yt.y);isFinite(Nt)&&(mt.copy(ht).multiplyScalar(vt.y).addScaledVector(pt,-yt.y).multiplyScalar(Nt),_t.copy(pt).multiplyScalar(yt.x).addScaledVector(ht,-vt.x).multiplyScalar(Nt),lt[Bt].add(mt),lt[Ot].add(mt),lt[Ut].add(mt),ct[Bt].add(_t),ct[Ot].add(_t),ct[Ut].add(_t))}let St=this.groups;St.length===0&&(St=[{start:0,count:nt.length}]);for(let Bt=0,Ot=St.length;Bt<Ot;++Bt){const Ut=St[Bt],Nt=Ut.start,zt=Ut.count;for(let jt=Nt,Yt=Nt+zt;jt<Yt;jt+=3)xt(nt[jt+0],nt[jt+1],nt[jt+2])}const Tt=new Vector3,Mt=new Vector3,bt=new Vector3,Pt=new Vector3;function wt(Bt){bt.fromArray(it,Bt*3),Pt.copy(bt);const Ot=lt[Bt];Tt.copy(Ot),Tt.sub(bt.multiplyScalar(bt.dot(Ot))).normalize(),Mt.crossVectors(Pt,Ot);const Nt=Mt.dot(ct[Bt])<0?-1:1;at[Bt*4]=Tt.x,at[Bt*4+1]=Tt.y,at[Bt*4+2]=Tt.z,at[Bt*4+3]=Nt}for(let Bt=0,Ot=St.length;Bt<Ot;++Bt){const Ut=St[Bt],Nt=Ut.start,zt=Ut.count;for(let jt=Nt,Yt=Nt+zt;jt<Yt;jt+=3)wt(nt[jt+0]),wt(nt[jt+1]),wt(nt[jt+2])}}computeVertexNormals(){const _=this.index,_e=this.getAttribute("position");if(_e!==void 0){let nt=this.getAttribute("normal");if(nt===void 0)nt=new BufferAttribute(new Float32Array(_e.count*3),3),this.setAttribute("normal",nt);else for(let ht=0,pt=nt.count;ht<pt;ht++)nt.setXYZ(ht,0,0,0);const rt=new Vector3,it=new Vector3,ot=new Vector3,st=new Vector3,at=new Vector3,lt=new Vector3,ct=new Vector3,ut=new Vector3;if(_)for(let ht=0,pt=_.count;ht<pt;ht+=3){const gt=_.getX(ht+0),yt=_.getX(ht+1),vt=_.getX(ht+2);rt.fromBufferAttribute(_e,gt),it.fromBufferAttribute(_e,yt),ot.fromBufferAttribute(_e,vt),ct.subVectors(ot,it),ut.subVectors(rt,it),ct.cross(ut),st.fromBufferAttribute(nt,gt),at.fromBufferAttribute(nt,yt),lt.fromBufferAttribute(nt,vt),st.add(ct),at.add(ct),lt.add(ct),nt.setXYZ(gt,st.x,st.y,st.z),nt.setXYZ(yt,at.x,at.y,at.z),nt.setXYZ(vt,lt.x,lt.y,lt.z)}else for(let ht=0,pt=_e.count;ht<pt;ht+=3)rt.fromBufferAttribute(_e,ht+0),it.fromBufferAttribute(_e,ht+1),ot.fromBufferAttribute(_e,ht+2),ct.subVectors(ot,it),ut.subVectors(rt,it),ct.cross(ut),nt.setXYZ(ht+0,ct.x,ct.y,ct.z),nt.setXYZ(ht+1,ct.x,ct.y,ct.z),nt.setXYZ(ht+2,ct.x,ct.y,ct.z);this.normalizeNormals(),nt.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const _=this.attributes.normal;for(let _e=0,nt=_.count;_e<nt;_e++)_vector$7.fromBufferAttribute(_,_e),_vector$7.normalize(),_.setXYZ(_e,_vector$7.x,_vector$7.y,_vector$7.z)}toNonIndexed(){function _(st,at){const lt=st.array,ct=st.itemSize,ut=st.normalized,ht=new lt.constructor(at.length*ct);let pt=0,gt=0;for(let yt=0,vt=at.length;yt<vt;yt++){st.isInterleavedBufferAttribute?pt=at[yt]*st.data.stride+st.offset:pt=at[yt]*ct;for(let mt=0;mt<ct;mt++)ht[gt++]=lt[pt++]}return new BufferAttribute(ht,ct,ut)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const _e=new BufferGeometry,nt=this.index.array,rt=this.attributes;for(const st in rt){const at=rt[st],lt=_(at,nt);_e.setAttribute(st,lt)}const it=this.morphAttributes;for(const st in it){const at=[],lt=it[st];for(let ct=0,ut=lt.length;ct<ut;ct++){const ht=lt[ct],pt=_(ht,nt);at.push(pt)}_e.morphAttributes[st]=at}_e.morphTargetsRelative=this.morphTargetsRelative;const ot=this.groups;for(let st=0,at=ot.length;st<at;st++){const lt=ot[st];_e.addGroup(lt.start,lt.count,lt.materialIndex)}return _e}toJSON(){const _={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(_.uuid=this.uuid,_.type=this.type,this.name!==""&&(_.name=this.name),Object.keys(this.userData).length>0&&(_.userData=this.userData),this.parameters!==void 0){const at=this.parameters;for(const lt in at)at[lt]!==void 0&&(_[lt]=at[lt]);return _}_.data={attributes:{}};const _e=this.index;_e!==null&&(_.data.index={type:_e.array.constructor.name,array:Array.prototype.slice.call(_e.array)});const nt=this.attributes;for(const at in nt){const lt=nt[at];_.data.attributes[at]=lt.toJSON(_.data)}const rt={};let it=!1;for(const at in this.morphAttributes){const lt=this.morphAttributes[at],ct=[];for(let ut=0,ht=lt.length;ut<ht;ut++){const pt=lt[ut];ct.push(pt.toJSON(_.data))}ct.length>0&&(rt[at]=ct,it=!0)}it&&(_.data.morphAttributes=rt,_.data.morphTargetsRelative=this.morphTargetsRelative);const ot=this.groups;ot.length>0&&(_.data.groups=JSON.parse(JSON.stringify(ot)));const st=this.boundingSphere;return st!==null&&(_.data.boundingSphere={center:st.center.toArray(),radius:st.radius}),_}clone(){return new this.constructor().copy(this)}copy(_){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const _e={};this.name=_.name;const nt=_.index;nt!==null&&this.setIndex(nt.clone(_e));const rt=_.attributes;for(const lt in rt){const ct=rt[lt];this.setAttribute(lt,ct.clone(_e))}const it=_.morphAttributes;for(const lt in it){const ct=[],ut=it[lt];for(let ht=0,pt=ut.length;ht<pt;ht++)ct.push(ut[ht].clone(_e));this.morphAttributes[lt]=ct}this.morphTargetsRelative=_.morphTargetsRelative;const ot=_.groups;for(let lt=0,ct=ot.length;lt<ct;lt++){const ut=ot[lt];this.addGroup(ut.start,ut.count,ut.materialIndex)}const st=_.boundingBox;st!==null&&(this.boundingBox=st.clone());const at=_.boundingSphere;return at!==null&&(this.boundingSphere=at.clone()),this.drawRange.start=_.drawRange.start,this.drawRange.count=_.drawRange.count,this.userData=_.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$5=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_normalA=new Vector3,_normalB=new Vector3,_normalC=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(_=new BufferGeometry,_e=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=_,this.material=_e,this.updateMorphTargets()}copy(_,_e){return super.copy(_,_e),_.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=_.morphTargetInfluences.slice()),_.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},_.morphTargetDictionary)),this.material=_.material,this.geometry=_.geometry,this}updateMorphTargets(){const _e=this.geometry.morphAttributes,nt=Object.keys(_e);if(nt.length>0){const rt=_e[nt[0]];if(rt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let it=0,ot=rt.length;it<ot;it++){const st=rt[it].name||String(it);this.morphTargetInfluences.push(0),this.morphTargetDictionary[st]=it}}}}getVertexPosition(_,_e){const nt=this.geometry,rt=nt.attributes.position,it=nt.morphAttributes.position,ot=nt.morphTargetsRelative;_e.fromBufferAttribute(rt,_);const st=this.morphTargetInfluences;if(it&&st){_morphA.set(0,0,0);for(let at=0,lt=it.length;at<lt;at++){const ct=st[at],ut=it[at];ct!==0&&(_tempA.fromBufferAttribute(ut,_),ot?_morphA.addScaledVector(_tempA,ct):_morphA.addScaledVector(_tempA.sub(_e),ct))}_e.add(_morphA)}return _e}raycast(_,_e){const nt=this.geometry,rt=this.material,it=this.matrixWorld;rt!==void 0&&(nt.boundingSphere===null&&nt.computeBoundingSphere(),_sphere$5.copy(nt.boundingSphere),_sphere$5.applyMatrix4(it),_ray$3.copy(_.ray).recast(_.near),!(_sphere$5.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$5,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(_.far-_.near)**2))&&(_inverseMatrix$3.copy(it).invert(),_ray$3.copy(_.ray).applyMatrix4(_inverseMatrix$3),!(nt.boundingBox!==null&&_ray$3.intersectsBox(nt.boundingBox)===!1)&&this._computeIntersections(_,_e,_ray$3)))}_computeIntersections(_,_e,nt){let rt;const it=this.geometry,ot=this.material,st=it.index,at=it.attributes.position,lt=it.attributes.uv,ct=it.attributes.uv1,ut=it.attributes.normal,ht=it.groups,pt=it.drawRange;if(st!==null)if(Array.isArray(ot))for(let gt=0,yt=ht.length;gt<yt;gt++){const vt=ht[gt],mt=ot[vt.materialIndex],_t=Math.max(vt.start,pt.start),xt=Math.min(st.count,Math.min(vt.start+vt.count,pt.start+pt.count));for(let St=_t,Tt=xt;St<Tt;St+=3){const Mt=st.getX(St),bt=st.getX(St+1),Pt=st.getX(St+2);rt=checkGeometryIntersection(this,mt,_,nt,lt,ct,ut,Mt,bt,Pt),rt&&(rt.faceIndex=Math.floor(St/3),rt.face.materialIndex=vt.materialIndex,_e.push(rt))}}else{const gt=Math.max(0,pt.start),yt=Math.min(st.count,pt.start+pt.count);for(let vt=gt,mt=yt;vt<mt;vt+=3){const _t=st.getX(vt),xt=st.getX(vt+1),St=st.getX(vt+2);rt=checkGeometryIntersection(this,ot,_,nt,lt,ct,ut,_t,xt,St),rt&&(rt.faceIndex=Math.floor(vt/3),_e.push(rt))}}else if(at!==void 0)if(Array.isArray(ot))for(let gt=0,yt=ht.length;gt<yt;gt++){const vt=ht[gt],mt=ot[vt.materialIndex],_t=Math.max(vt.start,pt.start),xt=Math.min(at.count,Math.min(vt.start+vt.count,pt.start+pt.count));for(let St=_t,Tt=xt;St<Tt;St+=3){const Mt=St,bt=St+1,Pt=St+2;rt=checkGeometryIntersection(this,mt,_,nt,lt,ct,ut,Mt,bt,Pt),rt&&(rt.faceIndex=Math.floor(St/3),rt.face.materialIndex=vt.materialIndex,_e.push(rt))}}else{const gt=Math.max(0,pt.start),yt=Math.min(at.count,pt.start+pt.count);for(let vt=gt,mt=yt;vt<mt;vt+=3){const _t=vt,xt=vt+1,St=vt+2;rt=checkGeometryIntersection(this,ot,_,nt,lt,ct,ut,_t,xt,St),rt&&(rt.faceIndex=Math.floor(vt/3),_e.push(rt))}}}}function checkIntersection(tt,_,_e,nt,rt,it,ot,st){let at;if(_.side===BackSide?at=nt.intersectTriangle(ot,it,rt,!0,st):at=nt.intersectTriangle(rt,it,ot,_.side===FrontSide,st),at===null)return null;_intersectionPointWorld.copy(st),_intersectionPointWorld.applyMatrix4(tt.matrixWorld);const lt=_e.ray.origin.distanceTo(_intersectionPointWorld);return lt<_e.near||lt>_e.far?null:{distance:lt,point:_intersectionPointWorld.clone(),object:tt}}function checkGeometryIntersection(tt,_,_e,nt,rt,it,ot,st,at,lt){tt.getVertexPosition(st,_vA$1),tt.getVertexPosition(at,_vB$1),tt.getVertexPosition(lt,_vC$1);const ct=checkIntersection(tt,_,_e,nt,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(ct){rt&&(_uvA$1.fromBufferAttribute(rt,st),_uvB$1.fromBufferAttribute(rt,at),_uvC$1.fromBufferAttribute(rt,lt),ct.uv=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),it&&(_uvA$1.fromBufferAttribute(it,st),_uvB$1.fromBufferAttribute(it,at),_uvC$1.fromBufferAttribute(it,lt),ct.uv1=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),ct.uv2=ct.uv1),ot&&(_normalA.fromBufferAttribute(ot,st),_normalB.fromBufferAttribute(ot,at),_normalC.fromBufferAttribute(ot,lt),ct.normal=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_normalA,_normalB,_normalC,new Vector3),ct.normal.dot(nt.direction)>0&&ct.normal.multiplyScalar(-1));const ut={a:st,b:at,c:lt,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,ut.normal),ct.face=ut}return ct}class BoxGeometry extends BufferGeometry{constructor(_=1,_e=1,nt=1,rt=1,it=1,ot=1){super(),this.type="BoxGeometry",this.parameters={width:_,height:_e,depth:nt,widthSegments:rt,heightSegments:it,depthSegments:ot};const st=this;rt=Math.floor(rt),it=Math.floor(it),ot=Math.floor(ot);const at=[],lt=[],ct=[],ut=[];let ht=0,pt=0;gt("z","y","x",-1,-1,nt,_e,_,ot,it,0),gt("z","y","x",1,-1,nt,_e,-_,ot,it,1),gt("x","z","y",1,1,_,nt,_e,rt,ot,2),gt("x","z","y",1,-1,_,nt,-_e,rt,ot,3),gt("x","y","z",1,-1,_,_e,nt,rt,it,4),gt("x","y","z",-1,-1,_,_e,-nt,rt,it,5),this.setIndex(at),this.setAttribute("position",new Float32BufferAttribute(lt,3)),this.setAttribute("normal",new Float32BufferAttribute(ct,3)),this.setAttribute("uv",new Float32BufferAttribute(ut,2));function gt(yt,vt,mt,_t,xt,St,Tt,Mt,bt,Pt,wt){const Bt=St/bt,Ot=Tt/Pt,Ut=St/2,Nt=Tt/2,zt=Mt/2,jt=bt+1,Yt=Pt+1;let qt=0,Gt=0;const Xt=new Vector3;for(let Vt=0;Vt<Yt;Vt++){const Wt=Vt*Ot-Nt;for(let $t=0;$t<jt;$t++){const nn=$t*Bt-Ut;Xt[yt]=nn*_t,Xt[vt]=Wt*xt,Xt[mt]=zt,lt.push(Xt.x,Xt.y,Xt.z),Xt[yt]=0,Xt[vt]=0,Xt[mt]=Mt>0?1:-1,ct.push(Xt.x,Xt.y,Xt.z),ut.push($t/bt),ut.push(1-Vt/Pt),qt+=1}}for(let Vt=0;Vt<Pt;Vt++)for(let Wt=0;Wt<bt;Wt++){const $t=ht+Wt+jt*Vt,nn=ht+Wt+jt*(Vt+1),en=ht+(Wt+1)+jt*(Vt+1),sn=ht+(Wt+1)+jt*Vt;at.push($t,nn,sn),at.push(nn,en,sn),Gt+=6}st.addGroup(pt,Gt,wt),pt+=Gt,ht+=qt}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new BoxGeometry(_.width,_.height,_.depth,_.widthSegments,_.heightSegments,_.depthSegments)}}function cloneUniforms(tt){const _={};for(const _e in tt){_[_e]={};for(const nt in tt[_e]){const rt=tt[_e][nt];rt&&(rt.isColor||rt.isMatrix3||rt.isMatrix4||rt.isVector2||rt.isVector3||rt.isVector4||rt.isTexture||rt.isQuaternion)?rt.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),_[_e][nt]=null):_[_e][nt]=rt.clone():Array.isArray(rt)?_[_e][nt]=rt.slice():_[_e][nt]=rt}}return _}function mergeUniforms(tt){const _={};for(let _e=0;_e<tt.length;_e++){const nt=cloneUniforms(tt[_e]);for(const rt in nt)_[rt]=nt[rt]}return _}function cloneUniformsGroups(tt){const _=[];for(let _e=0;_e<tt.length;_e++)_.push(tt[_e].clone());return _}function getUnlitUniformColorSpace(tt){return tt.getRenderTarget()===null?tt.outputColorSpace:LinearSRGBColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(_){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,_!==void 0&&this.setValues(_)}copy(_){return super.copy(_),this.fragmentShader=_.fragmentShader,this.vertexShader=_.vertexShader,this.uniforms=cloneUniforms(_.uniforms),this.uniformsGroups=cloneUniformsGroups(_.uniformsGroups),this.defines=Object.assign({},_.defines),this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.fog=_.fog,this.lights=_.lights,this.clipping=_.clipping,this.extensions=Object.assign({},_.extensions),this.glslVersion=_.glslVersion,this}toJSON(_){const _e=super.toJSON(_);_e.glslVersion=this.glslVersion,_e.uniforms={};for(const rt in this.uniforms){const ot=this.uniforms[rt].value;ot&&ot.isTexture?_e.uniforms[rt]={type:"t",value:ot.toJSON(_).uuid}:ot&&ot.isColor?_e.uniforms[rt]={type:"c",value:ot.getHex()}:ot&&ot.isVector2?_e.uniforms[rt]={type:"v2",value:ot.toArray()}:ot&&ot.isVector3?_e.uniforms[rt]={type:"v3",value:ot.toArray()}:ot&&ot.isVector4?_e.uniforms[rt]={type:"v4",value:ot.toArray()}:ot&&ot.isMatrix3?_e.uniforms[rt]={type:"m3",value:ot.toArray()}:ot&&ot.isMatrix4?_e.uniforms[rt]={type:"m4",value:ot.toArray()}:_e.uniforms[rt]={value:ot}}Object.keys(this.defines).length>0&&(_e.defines=this.defines),_e.vertexShader=this.vertexShader,_e.fragmentShader=this.fragmentShader,_e.lights=this.lights,_e.clipping=this.clipping;const nt={};for(const rt in this.extensions)this.extensions[rt]===!0&&(nt[rt]=!0);return Object.keys(nt).length>0&&(_e.extensions=nt),_e}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(_,_e){return super.copy(_,_e),this.matrixWorldInverse.copy(_.matrixWorldInverse),this.projectionMatrix.copy(_.projectionMatrix),this.projectionMatrixInverse.copy(_.projectionMatrixInverse),this.coordinateSystem=_.coordinateSystem,this}getWorldDirection(_){this.updateWorldMatrix(!0,!1);const _e=this.matrixWorld.elements;return _.set(-_e[8],-_e[9],-_e[10]).normalize()}updateMatrixWorld(_){super.updateMatrixWorld(_),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(_,_e){super.updateWorldMatrix(_,_e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class PerspectiveCamera extends Camera{constructor(_=50,_e=1,nt=.1,rt=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=_,this.zoom=1,this.near=nt,this.far=rt,this.focus=10,this.aspect=_e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(_,_e){return super.copy(_,_e),this.fov=_.fov,this.zoom=_.zoom,this.near=_.near,this.far=_.far,this.focus=_.focus,this.aspect=_.aspect,this.view=_.view===null?null:Object.assign({},_.view),this.filmGauge=_.filmGauge,this.filmOffset=_.filmOffset,this}setFocalLength(_){const _e=.5*this.getFilmHeight()/_;this.fov=RAD2DEG*2*Math.atan(_e),this.updateProjectionMatrix()}getFocalLength(){const _=Math.tan(DEG2RAD$1*.5*this.fov);return .5*this.getFilmHeight()/_}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD$1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(_,_e,nt,rt,it,ot){this.aspect=_/_e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_,this.view.fullHeight=_e,this.view.offsetX=nt,this.view.offsetY=rt,this.view.width=it,this.view.height=ot,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const _=this.near;let _e=_*Math.tan(DEG2RAD$1*.5*this.fov)/this.zoom,nt=2*_e,rt=this.aspect*nt,it=-.5*rt;const ot=this.view;if(this.view!==null&&this.view.enabled){const at=ot.fullWidth,lt=ot.fullHeight;it+=ot.offsetX*rt/at,_e-=ot.offsetY*nt/lt,rt*=ot.width/at,nt*=ot.height/lt}const st=this.filmOffset;st!==0&&(it+=_*st/this.getFilmWidth()),this.projectionMatrix.makePerspective(it,it+rt,_e,_e-nt,_,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(_){const _e=super.toJSON(_);return _e.object.fov=this.fov,_e.object.zoom=this.zoom,_e.object.near=this.near,_e.object.far=this.far,_e.object.focus=this.focus,_e.object.aspect=this.aspect,this.view!==null&&(_e.object.view=Object.assign({},this.view)),_e.object.filmGauge=this.filmGauge,_e.object.filmOffset=this.filmOffset,_e}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(_,_e,nt){super(),this.type="CubeCamera",this.renderTarget=nt,this.coordinateSystem=null;const rt=new PerspectiveCamera(fov,aspect,_,_e);rt.layers=this.layers,this.add(rt);const it=new PerspectiveCamera(fov,aspect,_,_e);it.layers=this.layers,this.add(it);const ot=new PerspectiveCamera(fov,aspect,_,_e);ot.layers=this.layers,this.add(ot);const st=new PerspectiveCamera(fov,aspect,_,_e);st.layers=this.layers,this.add(st);const at=new PerspectiveCamera(fov,aspect,_,_e);at.layers=this.layers,this.add(at);const lt=new PerspectiveCamera(fov,aspect,_,_e);lt.layers=this.layers,this.add(lt)}updateCoordinateSystem(){const _=this.coordinateSystem,_e=this.children.concat(),[nt,rt,it,ot,st,at]=_e;for(const lt of _e)this.remove(lt);if(_===WebGLCoordinateSystem)nt.up.set(0,1,0),nt.lookAt(1,0,0),rt.up.set(0,1,0),rt.lookAt(-1,0,0),it.up.set(0,0,-1),it.lookAt(0,1,0),ot.up.set(0,0,1),ot.lookAt(0,-1,0),st.up.set(0,1,0),st.lookAt(0,0,1),at.up.set(0,1,0),at.lookAt(0,0,-1);else if(_===WebGPUCoordinateSystem)nt.up.set(0,-1,0),nt.lookAt(-1,0,0),rt.up.set(0,-1,0),rt.lookAt(1,0,0),it.up.set(0,0,1),it.lookAt(0,1,0),ot.up.set(0,0,-1),ot.lookAt(0,-1,0),st.up.set(0,-1,0),st.lookAt(0,0,1),at.up.set(0,-1,0),at.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+_);for(const lt of _e)this.add(lt),lt.updateMatrixWorld()}update(_,_e){this.parent===null&&this.updateMatrixWorld();const nt=this.renderTarget;this.coordinateSystem!==_.coordinateSystem&&(this.coordinateSystem=_.coordinateSystem,this.updateCoordinateSystem());const[rt,it,ot,st,at,lt]=this.children,ct=_.getRenderTarget(),ut=_.toneMapping,ht=_.xr.enabled;_.toneMapping=NoToneMapping,_.xr.enabled=!1;const pt=nt.texture.generateMipmaps;nt.texture.generateMipmaps=!1,_.setRenderTarget(nt,0),_.render(_e,rt),_.setRenderTarget(nt,1),_.render(_e,it),_.setRenderTarget(nt,2),_.render(_e,ot),_.setRenderTarget(nt,3),_.render(_e,st),_.setRenderTarget(nt,4),_.render(_e,at),nt.texture.generateMipmaps=pt,_.setRenderTarget(nt,5),_.render(_e,lt),_.setRenderTarget(ct),_.toneMapping=ut,_.xr.enabled=ht,nt.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(_,_e,nt,rt,it,ot,st,at,lt,ct){_=_!==void 0?_:[],_e=_e!==void 0?_e:CubeReflectionMapping,super(_,_e,nt,rt,it,ot,st,at,lt,ct),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(_){this.image=_}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(_=1,_e={}){super(_,_,_e),this.isWebGLCubeRenderTarget=!0;const nt={width:_,height:_,depth:1},rt=[nt,nt,nt,nt,nt,nt];_e.encoding!==void 0&&(warnOnce("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),_e.colorSpace=_e.encoding===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.texture=new CubeTexture(rt,_e.mapping,_e.wrapS,_e.wrapT,_e.magFilter,_e.minFilter,_e.format,_e.type,_e.anisotropy,_e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=_e.generateMipmaps!==void 0?_e.generateMipmaps:!1,this.texture.minFilter=_e.minFilter!==void 0?_e.minFilter:LinearFilter}fromEquirectangularTexture(_,_e){this.texture.type=_e.type,this.texture.colorSpace=_e.colorSpace,this.texture.generateMipmaps=_e.generateMipmaps,this.texture.minFilter=_e.minFilter,this.texture.magFilter=_e.magFilter;const nt={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},rt=new BoxGeometry(5,5,5),it=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(nt.uniforms),vertexShader:nt.vertexShader,fragmentShader:nt.fragmentShader,side:BackSide,blending:NoBlending});it.uniforms.tEquirect.value=_e;const ot=new Mesh(rt,it),st=_e.minFilter;return _e.minFilter===LinearMipmapLinearFilter&&(_e.minFilter=LinearFilter),new CubeCamera(1,10,this).update(_,ot),_e.minFilter=st,ot.geometry.dispose(),ot.material.dispose(),this}clear(_,_e,nt,rt){const it=_.getRenderTarget();for(let ot=0;ot<6;ot++)_.setRenderTarget(this,ot),_.clear(_e,nt,rt);_.setRenderTarget(it)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(_=new Vector3(1,0,0),_e=0){this.isPlane=!0,this.normal=_,this.constant=_e}set(_,_e){return this.normal.copy(_),this.constant=_e,this}setComponents(_,_e,nt,rt){return this.normal.set(_,_e,nt),this.constant=rt,this}setFromNormalAndCoplanarPoint(_,_e){return this.normal.copy(_),this.constant=-_e.dot(this.normal),this}setFromCoplanarPoints(_,_e,nt){const rt=_vector1.subVectors(nt,_e).cross(_vector2.subVectors(_,_e)).normalize();return this.setFromNormalAndCoplanarPoint(rt,_),this}copy(_){return this.normal.copy(_.normal),this.constant=_.constant,this}normalize(){const _=1/this.normal.length();return this.normal.multiplyScalar(_),this.constant*=_,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(_){return this.normal.dot(_)+this.constant}distanceToSphere(_){return this.distanceToPoint(_.center)-_.radius}projectPoint(_,_e){return _e.copy(_).addScaledVector(this.normal,-this.distanceToPoint(_))}intersectLine(_,_e){const nt=_.delta(_vector1),rt=this.normal.dot(nt);if(rt===0)return this.distanceToPoint(_.start)===0?_e.copy(_.start):null;const it=-(_.start.dot(this.normal)+this.constant)/rt;return it<0||it>1?null:_e.copy(_.start).addScaledVector(nt,it)}intersectsLine(_){const _e=this.distanceToPoint(_.start),nt=this.distanceToPoint(_.end);return _e<0&&nt>0||nt<0&&_e>0}intersectsBox(_){return _.intersectsPlane(this)}intersectsSphere(_){return _.intersectsPlane(this)}coplanarPoint(_){return _.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(_,_e){const nt=_e||_normalMatrix.getNormalMatrix(_),rt=this.coplanarPoint(_vector1).applyMatrix4(_),it=this.normal.applyMatrix3(nt).normalize();return this.constant=-rt.dot(it),this}translate(_){return this.constant-=_.dot(this.normal),this}equals(_){return _.normal.equals(this.normal)&&_.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$4=new Sphere,_vector$6=new Vector3;class Frustum{constructor(_=new Plane,_e=new Plane,nt=new Plane,rt=new Plane,it=new Plane,ot=new Plane){this.planes=[_,_e,nt,rt,it,ot]}set(_,_e,nt,rt,it,ot){const st=this.planes;return st[0].copy(_),st[1].copy(_e),st[2].copy(nt),st[3].copy(rt),st[4].copy(it),st[5].copy(ot),this}copy(_){const _e=this.planes;for(let nt=0;nt<6;nt++)_e[nt].copy(_.planes[nt]);return this}setFromProjectionMatrix(_,_e=WebGLCoordinateSystem){const nt=this.planes,rt=_.elements,it=rt[0],ot=rt[1],st=rt[2],at=rt[3],lt=rt[4],ct=rt[5],ut=rt[6],ht=rt[7],pt=rt[8],gt=rt[9],yt=rt[10],vt=rt[11],mt=rt[12],_t=rt[13],xt=rt[14],St=rt[15];if(nt[0].setComponents(at-it,ht-lt,vt-pt,St-mt).normalize(),nt[1].setComponents(at+it,ht+lt,vt+pt,St+mt).normalize(),nt[2].setComponents(at+ot,ht+ct,vt+gt,St+_t).normalize(),nt[3].setComponents(at-ot,ht-ct,vt-gt,St-_t).normalize(),nt[4].setComponents(at-st,ht-ut,vt-yt,St-xt).normalize(),_e===WebGLCoordinateSystem)nt[5].setComponents(at+st,ht+ut,vt+yt,St+xt).normalize();else if(_e===WebGPUCoordinateSystem)nt[5].setComponents(st,ut,yt,xt).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+_e);return this}intersectsObject(_){if(_.boundingSphere!==void 0)_.boundingSphere===null&&_.computeBoundingSphere(),_sphere$4.copy(_.boundingSphere).applyMatrix4(_.matrixWorld);else{const _e=_.geometry;_e.boundingSphere===null&&_e.computeBoundingSphere(),_sphere$4.copy(_e.boundingSphere).applyMatrix4(_.matrixWorld)}return this.intersectsSphere(_sphere$4)}intersectsSprite(_){return _sphere$4.center.set(0,0,0),_sphere$4.radius=.7071067811865476,_sphere$4.applyMatrix4(_.matrixWorld),this.intersectsSphere(_sphere$4)}intersectsSphere(_){const _e=this.planes,nt=_.center,rt=-_.radius;for(let it=0;it<6;it++)if(_e[it].distanceToPoint(nt)<rt)return!1;return!0}intersectsBox(_){const _e=this.planes;for(let nt=0;nt<6;nt++){const rt=_e[nt];if(_vector$6.x=rt.normal.x>0?_.max.x:_.min.x,_vector$6.y=rt.normal.y>0?_.max.y:_.min.y,_vector$6.z=rt.normal.z>0?_.max.z:_.min.z,rt.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(_){const _e=this.planes;for(let nt=0;nt<6;nt++)if(_e[nt].distanceToPoint(_)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let tt=null,_=!1,_e=null,nt=null;function rt(it,ot){_e(it,ot),nt=tt.requestAnimationFrame(rt)}return{start:function(){_!==!0&&_e!==null&&(nt=tt.requestAnimationFrame(rt),_=!0)},stop:function(){tt.cancelAnimationFrame(nt),_=!1},setAnimationLoop:function(it){_e=it},setContext:function(it){tt=it}}}function WebGLAttributes(tt,_){const _e=_.isWebGL2,nt=new WeakMap;function rt(lt,ct){const ut=lt.array,ht=lt.usage,pt=tt.createBuffer();tt.bindBuffer(ct,pt),tt.bufferData(ct,ut,ht),lt.onUploadCallback();let gt;if(ut instanceof Float32Array)gt=tt.FLOAT;else if(ut instanceof Uint16Array)if(lt.isFloat16BufferAttribute)if(_e)gt=tt.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else gt=tt.UNSIGNED_SHORT;else if(ut instanceof Int16Array)gt=tt.SHORT;else if(ut instanceof Uint32Array)gt=tt.UNSIGNED_INT;else if(ut instanceof Int32Array)gt=tt.INT;else if(ut instanceof Int8Array)gt=tt.BYTE;else if(ut instanceof Uint8Array)gt=tt.UNSIGNED_BYTE;else if(ut instanceof Uint8ClampedArray)gt=tt.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+ut);return{buffer:pt,type:gt,bytesPerElement:ut.BYTES_PER_ELEMENT,version:lt.version}}function it(lt,ct,ut){const ht=ct.array,pt=ct.updateRange;tt.bindBuffer(ut,lt),pt.count===-1?tt.bufferSubData(ut,0,ht):(_e?tt.bufferSubData(ut,pt.offset*ht.BYTES_PER_ELEMENT,ht,pt.offset,pt.count):tt.bufferSubData(ut,pt.offset*ht.BYTES_PER_ELEMENT,ht.subarray(pt.offset,pt.offset+pt.count)),pt.count=-1),ct.onUploadCallback()}function ot(lt){return lt.isInterleavedBufferAttribute&&(lt=lt.data),nt.get(lt)}function st(lt){lt.isInterleavedBufferAttribute&&(lt=lt.data);const ct=nt.get(lt);ct&&(tt.deleteBuffer(ct.buffer),nt.delete(lt))}function at(lt,ct){if(lt.isGLBufferAttribute){const ht=nt.get(lt);(!ht||ht.version<lt.version)&&nt.set(lt,{buffer:lt.buffer,type:lt.type,bytesPerElement:lt.elementSize,version:lt.version});return}lt.isInterleavedBufferAttribute&&(lt=lt.data);const ut=nt.get(lt);ut===void 0?nt.set(lt,rt(lt,ct)):ut.version<lt.version&&(it(ut.buffer,lt,ct),ut.version=lt.version)}return{get:ot,remove:st,update:at}}class PlaneGeometry extends BufferGeometry{constructor(_=1,_e=1,nt=1,rt=1){super(),this.type="PlaneGeometry",this.parameters={width:_,height:_e,widthSegments:nt,heightSegments:rt};const it=_/2,ot=_e/2,st=Math.floor(nt),at=Math.floor(rt),lt=st+1,ct=at+1,ut=_/st,ht=_e/at,pt=[],gt=[],yt=[],vt=[];for(let mt=0;mt<ct;mt++){const _t=mt*ht-ot;for(let xt=0;xt<lt;xt++){const St=xt*ut-it;gt.push(St,-_t,0),yt.push(0,0,1),vt.push(xt/st),vt.push(1-mt/at)}}for(let mt=0;mt<at;mt++)for(let _t=0;_t<st;_t++){const xt=_t+lt*mt,St=_t+lt*(mt+1),Tt=_t+1+lt*(mt+1),Mt=_t+1+lt*mt;pt.push(xt,St,Mt),pt.push(St,Tt,Mt)}this.setIndex(pt),this.setAttribute("position",new Float32BufferAttribute(gt,3)),this.setAttribute("normal",new Float32BufferAttribute(yt,3)),this.setAttribute("uv",new Float32BufferAttribute(vt,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new PlaneGeometry(_.width,_.height,_.widthSegments,_.heightSegments)}}var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,output_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,output_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color$1(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},specular:{value:new Color$1(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color$1(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color$1(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color$1(0)},specularColor:{value:new Color$1(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(tt,_,_e,nt,rt,it,ot){const st=new Color$1(0);let at=it===!0?0:1,lt,ct,ut=null,ht=0,pt=null;function gt(vt,mt){let _t=!1,xt=mt.isScene===!0?mt.background:null;switch(xt&&xt.isTexture&&(xt=(mt.backgroundBlurriness>0?_e:_).get(xt)),xt===null?yt(st,at):xt&&xt.isColor&&(yt(xt,1),_t=!0),tt.xr.getEnvironmentBlendMode()){case"opaque":_t=!0;break;case"additive":nt.buffers.color.setClear(0,0,0,1,ot),_t=!0;break;case"alpha-blend":nt.buffers.color.setClear(0,0,0,0,ot),_t=!0;break}(tt.autoClear||_t)&&tt.clear(tt.autoClearColor,tt.autoClearDepth,tt.autoClearStencil),xt&&(xt.isCubeTexture||xt.mapping===CubeUVReflectionMapping)?(ct===void 0&&(ct=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),ct.geometry.deleteAttribute("normal"),ct.geometry.deleteAttribute("uv"),ct.onBeforeRender=function(Mt,bt,Pt){this.matrixWorld.copyPosition(Pt.matrixWorld)},Object.defineProperty(ct.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),rt.update(ct)),ct.material.uniforms.envMap.value=xt,ct.material.uniforms.flipEnvMap.value=xt.isCubeTexture&&xt.isRenderTargetTexture===!1?-1:1,ct.material.uniforms.backgroundBlurriness.value=mt.backgroundBlurriness,ct.material.uniforms.backgroundIntensity.value=mt.backgroundIntensity,ct.material.toneMapped=xt.colorSpace!==SRGBColorSpace,(ut!==xt||ht!==xt.version||pt!==tt.toneMapping)&&(ct.material.needsUpdate=!0,ut=xt,ht=xt.version,pt=tt.toneMapping),ct.layers.enableAll(),vt.unshift(ct,ct.geometry,ct.material,0,0,null)):xt&&xt.isTexture&&(lt===void 0&&(lt=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),lt.geometry.deleteAttribute("normal"),Object.defineProperty(lt.material,"map",{get:function(){return this.uniforms.t2D.value}}),rt.update(lt)),lt.material.uniforms.t2D.value=xt,lt.material.uniforms.backgroundIntensity.value=mt.backgroundIntensity,lt.material.toneMapped=xt.colorSpace!==SRGBColorSpace,xt.matrixAutoUpdate===!0&&xt.updateMatrix(),lt.material.uniforms.uvTransform.value.copy(xt.matrix),(ut!==xt||ht!==xt.version||pt!==tt.toneMapping)&&(lt.material.needsUpdate=!0,ut=xt,ht=xt.version,pt=tt.toneMapping),lt.layers.enableAll(),vt.unshift(lt,lt.geometry,lt.material,0,0,null))}function yt(vt,mt){vt.getRGB(_rgb,getUnlitUniformColorSpace(tt)),nt.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,mt,ot)}return{getClearColor:function(){return st},setClearColor:function(vt,mt=1){st.set(vt),at=mt,yt(st,at)},getClearAlpha:function(){return at},setClearAlpha:function(vt){at=vt,yt(st,at)},render:gt}}function WebGLBindingStates(tt,_,_e,nt){const rt=tt.getParameter(tt.MAX_VERTEX_ATTRIBS),it=nt.isWebGL2?null:_.get("OES_vertex_array_object"),ot=nt.isWebGL2||it!==null,st={},at=vt(null);let lt=at,ct=!1;function ut(zt,jt,Yt,qt,Gt){let Xt=!1;if(ot){const Vt=yt(qt,Yt,jt);lt!==Vt&&(lt=Vt,pt(lt.object)),Xt=mt(zt,qt,Yt,Gt),Xt&&_t(zt,qt,Yt,Gt)}else{const Vt=jt.wireframe===!0;(lt.geometry!==qt.id||lt.program!==Yt.id||lt.wireframe!==Vt)&&(lt.geometry=qt.id,lt.program=Yt.id,lt.wireframe=Vt,Xt=!0)}Gt!==null&&_e.update(Gt,tt.ELEMENT_ARRAY_BUFFER),(Xt||ct)&&(ct=!1,Pt(zt,jt,Yt,qt),Gt!==null&&tt.bindBuffer(tt.ELEMENT_ARRAY_BUFFER,_e.get(Gt).buffer))}function ht(){return nt.isWebGL2?tt.createVertexArray():it.createVertexArrayOES()}function pt(zt){return nt.isWebGL2?tt.bindVertexArray(zt):it.bindVertexArrayOES(zt)}function gt(zt){return nt.isWebGL2?tt.deleteVertexArray(zt):it.deleteVertexArrayOES(zt)}function yt(zt,jt,Yt){const qt=Yt.wireframe===!0;let Gt=st[zt.id];Gt===void 0&&(Gt={},st[zt.id]=Gt);let Xt=Gt[jt.id];Xt===void 0&&(Xt={},Gt[jt.id]=Xt);let Vt=Xt[qt];return Vt===void 0&&(Vt=vt(ht()),Xt[qt]=Vt),Vt}function vt(zt){const jt=[],Yt=[],qt=[];for(let Gt=0;Gt<rt;Gt++)jt[Gt]=0,Yt[Gt]=0,qt[Gt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:jt,enabledAttributes:Yt,attributeDivisors:qt,object:zt,attributes:{},index:null}}function mt(zt,jt,Yt,qt){const Gt=lt.attributes,Xt=jt.attributes;let Vt=0;const Wt=Yt.getAttributes();for(const $t in Wt)if(Wt[$t].location>=0){const en=Gt[$t];let sn=Xt[$t];if(sn===void 0&&($t==="instanceMatrix"&&zt.instanceMatrix&&(sn=zt.instanceMatrix),$t==="instanceColor"&&zt.instanceColor&&(sn=zt.instanceColor)),en===void 0||en.attribute!==sn||sn&&en.data!==sn.data)return!0;Vt++}return lt.attributesNum!==Vt||lt.index!==qt}function _t(zt,jt,Yt,qt){const Gt={},Xt=jt.attributes;let Vt=0;const Wt=Yt.getAttributes();for(const $t in Wt)if(Wt[$t].location>=0){let en=Xt[$t];en===void 0&&($t==="instanceMatrix"&&zt.instanceMatrix&&(en=zt.instanceMatrix),$t==="instanceColor"&&zt.instanceColor&&(en=zt.instanceColor));const sn={};sn.attribute=en,en&&en.data&&(sn.data=en.data),Gt[$t]=sn,Vt++}lt.attributes=Gt,lt.attributesNum=Vt,lt.index=qt}function xt(){const zt=lt.newAttributes;for(let jt=0,Yt=zt.length;jt<Yt;jt++)zt[jt]=0}function St(zt){Tt(zt,0)}function Tt(zt,jt){const Yt=lt.newAttributes,qt=lt.enabledAttributes,Gt=lt.attributeDivisors;Yt[zt]=1,qt[zt]===0&&(tt.enableVertexAttribArray(zt),qt[zt]=1),Gt[zt]!==jt&&((nt.isWebGL2?tt:_.get("ANGLE_instanced_arrays"))[nt.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](zt,jt),Gt[zt]=jt)}function Mt(){const zt=lt.newAttributes,jt=lt.enabledAttributes;for(let Yt=0,qt=jt.length;Yt<qt;Yt++)jt[Yt]!==zt[Yt]&&(tt.disableVertexAttribArray(Yt),jt[Yt]=0)}function bt(zt,jt,Yt,qt,Gt,Xt,Vt){Vt===!0?tt.vertexAttribIPointer(zt,jt,Yt,Gt,Xt):tt.vertexAttribPointer(zt,jt,Yt,qt,Gt,Xt)}function Pt(zt,jt,Yt,qt){if(nt.isWebGL2===!1&&(zt.isInstancedMesh||qt.isInstancedBufferGeometry)&&_.get("ANGLE_instanced_arrays")===null)return;xt();const Gt=qt.attributes,Xt=Yt.getAttributes(),Vt=jt.defaultAttributeValues;for(const Wt in Xt){const $t=Xt[Wt];if($t.location>=0){let nn=Gt[Wt];if(nn===void 0&&(Wt==="instanceMatrix"&&zt.instanceMatrix&&(nn=zt.instanceMatrix),Wt==="instanceColor"&&zt.instanceColor&&(nn=zt.instanceColor)),nn!==void 0){const en=nn.normalized,sn=nn.itemSize,rn=_e.get(nn);if(rn===void 0)continue;const an=rn.buffer,dn=rn.type,Bn=rn.bytesPerElement,Nn=nt.isWebGL2===!0&&(dn===tt.INT||dn===tt.UNSIGNED_INT||nn.gpuType===IntType);if(nn.isInterleavedBufferAttribute){const gn=nn.data,Ht=gn.stride,xn=nn.offset;if(gn.isInstancedInterleavedBuffer){for(let hn=0;hn<$t.locationSize;hn++)Tt($t.location+hn,gn.meshPerAttribute);zt.isInstancedMesh!==!0&&qt._maxInstanceCount===void 0&&(qt._maxInstanceCount=gn.meshPerAttribute*gn.count)}else for(let hn=0;hn<$t.locationSize;hn++)St($t.location+hn);tt.bindBuffer(tt.ARRAY_BUFFER,an);for(let hn=0;hn<$t.locationSize;hn++)bt($t.location+hn,sn/$t.locationSize,dn,en,Ht*Bn,(xn+sn/$t.locationSize*hn)*Bn,Nn)}else{if(nn.isInstancedBufferAttribute){for(let gn=0;gn<$t.locationSize;gn++)Tt($t.location+gn,nn.meshPerAttribute);zt.isInstancedMesh!==!0&&qt._maxInstanceCount===void 0&&(qt._maxInstanceCount=nn.meshPerAttribute*nn.count)}else for(let gn=0;gn<$t.locationSize;gn++)St($t.location+gn);tt.bindBuffer(tt.ARRAY_BUFFER,an);for(let gn=0;gn<$t.locationSize;gn++)bt($t.location+gn,sn/$t.locationSize,dn,en,sn*Bn,sn/$t.locationSize*gn*Bn,Nn)}}else if(Vt!==void 0){const en=Vt[Wt];if(en!==void 0)switch(en.length){case 2:tt.vertexAttrib2fv($t.location,en);break;case 3:tt.vertexAttrib3fv($t.location,en);break;case 4:tt.vertexAttrib4fv($t.location,en);break;default:tt.vertexAttrib1fv($t.location,en)}}}}Mt()}function wt(){Ut();for(const zt in st){const jt=st[zt];for(const Yt in jt){const qt=jt[Yt];for(const Gt in qt)gt(qt[Gt].object),delete qt[Gt];delete jt[Yt]}delete st[zt]}}function Bt(zt){if(st[zt.id]===void 0)return;const jt=st[zt.id];for(const Yt in jt){const qt=jt[Yt];for(const Gt in qt)gt(qt[Gt].object),delete qt[Gt];delete jt[Yt]}delete st[zt.id]}function Ot(zt){for(const jt in st){const Yt=st[jt];if(Yt[zt.id]===void 0)continue;const qt=Yt[zt.id];for(const Gt in qt)gt(qt[Gt].object),delete qt[Gt];delete Yt[zt.id]}}function Ut(){Nt(),ct=!0,lt!==at&&(lt=at,pt(lt.object))}function Nt(){at.geometry=null,at.program=null,at.wireframe=!1}return{setup:ut,reset:Ut,resetDefaultState:Nt,dispose:wt,releaseStatesOfGeometry:Bt,releaseStatesOfProgram:Ot,initAttributes:xt,enableAttribute:St,disableUnusedAttributes:Mt}}function WebGLBufferRenderer(tt,_,_e,nt){const rt=nt.isWebGL2;let it;function ot(lt){it=lt}function st(lt,ct){tt.drawArrays(it,lt,ct),_e.update(ct,it,1)}function at(lt,ct,ut){if(ut===0)return;let ht,pt;if(rt)ht=tt,pt="drawArraysInstanced";else if(ht=_.get("ANGLE_instanced_arrays"),pt="drawArraysInstancedANGLE",ht===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ht[pt](it,lt,ct,ut),_e.update(ct,it,ut)}this.setMode=ot,this.render=st,this.renderInstances=at}function WebGLCapabilities(tt,_,_e){let nt;function rt(){if(nt!==void 0)return nt;if(_.has("EXT_texture_filter_anisotropic")===!0){const bt=_.get("EXT_texture_filter_anisotropic");nt=tt.getParameter(bt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else nt=0;return nt}function it(bt){if(bt==="highp"){if(tt.getShaderPrecisionFormat(tt.VERTEX_SHADER,tt.HIGH_FLOAT).precision>0&&tt.getShaderPrecisionFormat(tt.FRAGMENT_SHADER,tt.HIGH_FLOAT).precision>0)return"highp";bt="mediump"}return bt==="mediump"&&tt.getShaderPrecisionFormat(tt.VERTEX_SHADER,tt.MEDIUM_FLOAT).precision>0&&tt.getShaderPrecisionFormat(tt.FRAGMENT_SHADER,tt.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const ot=typeof WebGL2RenderingContext<"u"&&tt.constructor.name==="WebGL2RenderingContext";let st=_e.precision!==void 0?_e.precision:"highp";const at=it(st);at!==st&&(console.warn("THREE.WebGLRenderer:",st,"not supported, using",at,"instead."),st=at);const lt=ot||_.has("WEBGL_draw_buffers"),ct=_e.logarithmicDepthBuffer===!0,ut=tt.getParameter(tt.MAX_TEXTURE_IMAGE_UNITS),ht=tt.getParameter(tt.MAX_VERTEX_TEXTURE_IMAGE_UNITS),pt=tt.getParameter(tt.MAX_TEXTURE_SIZE),gt=tt.getParameter(tt.MAX_CUBE_MAP_TEXTURE_SIZE),yt=tt.getParameter(tt.MAX_VERTEX_ATTRIBS),vt=tt.getParameter(tt.MAX_VERTEX_UNIFORM_VECTORS),mt=tt.getParameter(tt.MAX_VARYING_VECTORS),_t=tt.getParameter(tt.MAX_FRAGMENT_UNIFORM_VECTORS),xt=ht>0,St=ot||_.has("OES_texture_float"),Tt=xt&&St,Mt=ot?tt.getParameter(tt.MAX_SAMPLES):0;return{isWebGL2:ot,drawBuffers:lt,getMaxAnisotropy:rt,getMaxPrecision:it,precision:st,logarithmicDepthBuffer:ct,maxTextures:ut,maxVertexTextures:ht,maxTextureSize:pt,maxCubemapSize:gt,maxAttributes:yt,maxVertexUniforms:vt,maxVaryings:mt,maxFragmentUniforms:_t,vertexTextures:xt,floatFragmentTextures:St,floatVertexTextures:Tt,maxSamples:Mt}}function WebGLClipping(tt){const _=this;let _e=null,nt=0,rt=!1,it=!1;const ot=new Plane,st=new Matrix3,at={value:null,needsUpdate:!1};this.uniform=at,this.numPlanes=0,this.numIntersection=0,this.init=function(ut,ht){const pt=ut.length!==0||ht||nt!==0||rt;return rt=ht,nt=ut.length,pt},this.beginShadows=function(){it=!0,ct(null)},this.endShadows=function(){it=!1},this.setGlobalState=function(ut,ht){_e=ct(ut,ht,0)},this.setState=function(ut,ht,pt){const gt=ut.clippingPlanes,yt=ut.clipIntersection,vt=ut.clipShadows,mt=tt.get(ut);if(!rt||gt===null||gt.length===0||it&&!vt)it?ct(null):lt();else{const _t=it?0:nt,xt=_t*4;let St=mt.clippingState||null;at.value=St,St=ct(gt,ht,xt,pt);for(let Tt=0;Tt!==xt;++Tt)St[Tt]=_e[Tt];mt.clippingState=St,this.numIntersection=yt?this.numPlanes:0,this.numPlanes+=_t}};function lt(){at.value!==_e&&(at.value=_e,at.needsUpdate=nt>0),_.numPlanes=nt,_.numIntersection=0}function ct(ut,ht,pt,gt){const yt=ut!==null?ut.length:0;let vt=null;if(yt!==0){if(vt=at.value,gt!==!0||vt===null){const mt=pt+yt*4,_t=ht.matrixWorldInverse;st.getNormalMatrix(_t),(vt===null||vt.length<mt)&&(vt=new Float32Array(mt));for(let xt=0,St=pt;xt!==yt;++xt,St+=4)ot.copy(ut[xt]).applyMatrix4(_t,st),ot.normal.toArray(vt,St),vt[St+3]=ot.constant}at.value=vt,at.needsUpdate=!0}return _.numPlanes=yt,_.numIntersection=0,vt}}function WebGLCubeMaps(tt){let _=new WeakMap;function _e(ot,st){return st===EquirectangularReflectionMapping?ot.mapping=CubeReflectionMapping:st===EquirectangularRefractionMapping&&(ot.mapping=CubeRefractionMapping),ot}function nt(ot){if(ot&&ot.isTexture&&ot.isRenderTargetTexture===!1){const st=ot.mapping;if(st===EquirectangularReflectionMapping||st===EquirectangularRefractionMapping)if(_.has(ot)){const at=_.get(ot).texture;return _e(at,ot.mapping)}else{const at=ot.image;if(at&&at.height>0){const lt=new WebGLCubeRenderTarget(at.height/2);return lt.fromEquirectangularTexture(tt,ot),_.set(ot,lt),ot.addEventListener("dispose",rt),_e(lt.texture,ot.mapping)}else return null}}return ot}function rt(ot){const st=ot.target;st.removeEventListener("dispose",rt);const at=_.get(st);at!==void 0&&(_.delete(st),at.dispose())}function it(){_=new WeakMap}return{get:nt,dispose:it}}class OrthographicCamera extends Camera{constructor(_=-1,_e=1,nt=1,rt=-1,it=.1,ot=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=_,this.right=_e,this.top=nt,this.bottom=rt,this.near=it,this.far=ot,this.updateProjectionMatrix()}copy(_,_e){return super.copy(_,_e),this.left=_.left,this.right=_.right,this.top=_.top,this.bottom=_.bottom,this.near=_.near,this.far=_.far,this.zoom=_.zoom,this.view=_.view===null?null:Object.assign({},_.view),this}setViewOffset(_,_e,nt,rt,it,ot){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_,this.view.fullHeight=_e,this.view.offsetX=nt,this.view.offsetY=rt,this.view.width=it,this.view.height=ot,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const _=(this.right-this.left)/(2*this.zoom),_e=(this.top-this.bottom)/(2*this.zoom),nt=(this.right+this.left)/2,rt=(this.top+this.bottom)/2;let it=nt-_,ot=nt+_,st=rt+_e,at=rt-_e;if(this.view!==null&&this.view.enabled){const lt=(this.right-this.left)/this.view.fullWidth/this.zoom,ct=(this.top-this.bottom)/this.view.fullHeight/this.zoom;it+=lt*this.view.offsetX,ot=it+lt*this.view.width,st-=ct*this.view.offsetY,at=st-ct*this.view.height}this.projectionMatrix.makeOrthographic(it,ot,st,at,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(_){const _e=super.toJSON(_);return _e.object.zoom=this.zoom,_e.object.left=this.left,_e.object.right=this.right,_e.object.top=this.top,_e.object.bottom=this.bottom,_e.object.near=this.near,_e.object.far=this.far,this.view!==null&&(_e.object.view=Object.assign({},this.view)),_e}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color$1;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(_){this._renderer=_,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(_,_e=0,nt=.1,rt=100){_oldTarget=this._renderer.getRenderTarget(),this._setSize(256);const it=this._allocateTargets();return it.depthBuffer=!0,this._sceneToCubeUV(_,nt,rt,it),_e>0&&this._blur(it,0,0,_e),this._applyPMREM(it),this._cleanup(it),it}fromEquirectangular(_,_e=null){return this._fromTexture(_,_e)}fromCubemap(_,_e=null){return this._fromTexture(_,_e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(_){this._lodMax=Math.floor(Math.log2(_)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let _=0;_<this._lodPlanes.length;_++)this._lodPlanes[_].dispose()}_cleanup(_){this._renderer.setRenderTarget(_oldTarget),_.scissorTest=!1,_setViewport(_,0,0,_.width,_.height)}_fromTexture(_,_e){_.mapping===CubeReflectionMapping||_.mapping===CubeRefractionMapping?this._setSize(_.image.length===0?16:_.image[0].width||_.image[0].image.width):this._setSize(_.image.width/4),_oldTarget=this._renderer.getRenderTarget();const nt=_e||this._allocateTargets();return this._textureToCubeUV(_,nt),this._applyPMREM(nt),this._cleanup(nt),nt}_allocateTargets(){const _=3*Math.max(this._cubeSize,112),_e=4*this._cubeSize,nt={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},rt=_createRenderTarget(_,_e,nt);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==_||this._pingPongRenderTarget.height!==_e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(_,_e,nt);const{_lodMax:it}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(it)),this._blurMaterial=_getBlurShader(it,_,_e)}return rt}_compileMaterial(_){const _e=new Mesh(this._lodPlanes[0],_);this._renderer.compile(_e,_flatCamera)}_sceneToCubeUV(_,_e,nt,rt){const st=new PerspectiveCamera(90,1,_e,nt),at=[1,-1,1,1,1,1],lt=[1,1,1,-1,-1,-1],ct=this._renderer,ut=ct.autoClear,ht=ct.toneMapping;ct.getClearColor(_clearColor),ct.toneMapping=NoToneMapping,ct.autoClear=!1;const pt=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),gt=new Mesh(new BoxGeometry,pt);let yt=!1;const vt=_.background;vt?vt.isColor&&(pt.color.copy(vt),_.background=null,yt=!0):(pt.color.copy(_clearColor),yt=!0);for(let mt=0;mt<6;mt++){const _t=mt%3;_t===0?(st.up.set(0,at[mt],0),st.lookAt(lt[mt],0,0)):_t===1?(st.up.set(0,0,at[mt]),st.lookAt(0,lt[mt],0)):(st.up.set(0,at[mt],0),st.lookAt(0,0,lt[mt]));const xt=this._cubeSize;_setViewport(rt,_t*xt,mt>2?xt:0,xt,xt),ct.setRenderTarget(rt),yt&&ct.render(gt,st),ct.render(_,st)}gt.geometry.dispose(),gt.material.dispose(),ct.toneMapping=ht,ct.autoClear=ut,_.background=vt}_textureToCubeUV(_,_e){const nt=this._renderer,rt=_.mapping===CubeReflectionMapping||_.mapping===CubeRefractionMapping;rt?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=_.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const it=rt?this._cubemapMaterial:this._equirectMaterial,ot=new Mesh(this._lodPlanes[0],it),st=it.uniforms;st.envMap.value=_;const at=this._cubeSize;_setViewport(_e,0,0,3*at,2*at),nt.setRenderTarget(_e),nt.render(ot,_flatCamera)}_applyPMREM(_){const _e=this._renderer,nt=_e.autoClear;_e.autoClear=!1;for(let rt=1;rt<this._lodPlanes.length;rt++){const it=Math.sqrt(this._sigmas[rt]*this._sigmas[rt]-this._sigmas[rt-1]*this._sigmas[rt-1]),ot=_axisDirections[(rt-1)%_axisDirections.length];this._blur(_,rt-1,rt,it,ot)}_e.autoClear=nt}_blur(_,_e,nt,rt,it){const ot=this._pingPongRenderTarget;this._halfBlur(_,ot,_e,nt,rt,"latitudinal",it),this._halfBlur(ot,_,nt,nt,rt,"longitudinal",it)}_halfBlur(_,_e,nt,rt,it,ot,st){const at=this._renderer,lt=this._blurMaterial;ot!=="latitudinal"&&ot!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const ct=3,ut=new Mesh(this._lodPlanes[rt],lt),ht=lt.uniforms,pt=this._sizeLods[nt]-1,gt=isFinite(it)?Math.PI/(2*pt):2*Math.PI/(2*MAX_SAMPLES-1),yt=it/gt,vt=isFinite(it)?1+Math.floor(ct*yt):MAX_SAMPLES;vt>MAX_SAMPLES&&console.warn(`sigmaRadians, ${it}, is too large and will clip, as it requested ${vt} samples when the maximum is set to ${MAX_SAMPLES}`);const mt=[];let _t=0;for(let bt=0;bt<MAX_SAMPLES;++bt){const Pt=bt/yt,wt=Math.exp(-Pt*Pt/2);mt.push(wt),bt===0?_t+=wt:bt<vt&&(_t+=2*wt)}for(let bt=0;bt<mt.length;bt++)mt[bt]=mt[bt]/_t;ht.envMap.value=_.texture,ht.samples.value=vt,ht.weights.value=mt,ht.latitudinal.value=ot==="latitudinal",st&&(ht.poleAxis.value=st);const{_lodMax:xt}=this;ht.dTheta.value=gt,ht.mipInt.value=xt-nt;const St=this._sizeLods[rt],Tt=3*St*(rt>xt-LOD_MIN?rt-xt+LOD_MIN:0),Mt=4*(this._cubeSize-St);_setViewport(_e,Tt,Mt,3*St,2*St),at.setRenderTarget(_e),at.render(ut,_flatCamera)}}function _createPlanes(tt){const _=[],_e=[],nt=[];let rt=tt;const it=tt-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let ot=0;ot<it;ot++){const st=Math.pow(2,rt);_e.push(st);let at=1/st;ot>tt-LOD_MIN?at=EXTRA_LOD_SIGMA[ot-tt+LOD_MIN-1]:ot===0&&(at=0),nt.push(at);const lt=1/(st-2),ct=-lt,ut=1+lt,ht=[ct,ct,ut,ct,ut,ut,ct,ct,ut,ut,ct,ut],pt=6,gt=6,yt=3,vt=2,mt=1,_t=new Float32Array(yt*gt*pt),xt=new Float32Array(vt*gt*pt),St=new Float32Array(mt*gt*pt);for(let Mt=0;Mt<pt;Mt++){const bt=Mt%3*2/3-1,Pt=Mt>2?0:-1,wt=[bt,Pt,0,bt+2/3,Pt,0,bt+2/3,Pt+1,0,bt,Pt,0,bt+2/3,Pt+1,0,bt,Pt+1,0];_t.set(wt,yt*gt*Mt),xt.set(ht,vt*gt*Mt);const Bt=[Mt,Mt,Mt,Mt,Mt,Mt];St.set(Bt,mt*gt*Mt)}const Tt=new BufferGeometry;Tt.setAttribute("position",new BufferAttribute(_t,yt)),Tt.setAttribute("uv",new BufferAttribute(xt,vt)),Tt.setAttribute("faceIndex",new BufferAttribute(St,mt)),_.push(Tt),rt>LOD_MIN&&rt--}return{lodPlanes:_,sizeLods:_e,sigmas:nt}}function _createRenderTarget(tt,_,_e){const nt=new WebGLRenderTarget(tt,_,_e);return nt.texture.mapping=CubeUVReflectionMapping,nt.texture.name="PMREM.cubeUv",nt.scissorTest=!0,nt}function _setViewport(tt,_,_e,nt,rt){tt.viewport.set(_,_e,nt,rt),tt.scissor.set(_,_e,nt,rt)}function _getBlurShader(tt,_,_e){const nt=new Float32Array(MAX_SAMPLES),rt=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/_,CUBEUV_TEXEL_HEIGHT:1/_e,CUBEUV_MAX_MIP:`${tt}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:nt},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:rt}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(tt){let _=new WeakMap,_e=null;function nt(st){if(st&&st.isTexture){const at=st.mapping,lt=at===EquirectangularReflectionMapping||at===EquirectangularRefractionMapping,ct=at===CubeReflectionMapping||at===CubeRefractionMapping;if(lt||ct)if(st.isRenderTargetTexture&&st.needsPMREMUpdate===!0){st.needsPMREMUpdate=!1;let ut=_.get(st);return _e===null&&(_e=new PMREMGenerator(tt)),ut=lt?_e.fromEquirectangular(st,ut):_e.fromCubemap(st,ut),_.set(st,ut),ut.texture}else{if(_.has(st))return _.get(st).texture;{const ut=st.image;if(lt&&ut&&ut.height>0||ct&&ut&&rt(ut)){_e===null&&(_e=new PMREMGenerator(tt));const ht=lt?_e.fromEquirectangular(st):_e.fromCubemap(st);return _.set(st,ht),st.addEventListener("dispose",it),ht.texture}else return null}}}return st}function rt(st){let at=0;const lt=6;for(let ct=0;ct<lt;ct++)st[ct]!==void 0&&at++;return at===lt}function it(st){const at=st.target;at.removeEventListener("dispose",it);const lt=_.get(at);lt!==void 0&&(_.delete(at),lt.dispose())}function ot(){_=new WeakMap,_e!==null&&(_e.dispose(),_e=null)}return{get:nt,dispose:ot}}function WebGLExtensions(tt){const _={};function _e(nt){if(_[nt]!==void 0)return _[nt];let rt;switch(nt){case"WEBGL_depth_texture":rt=tt.getExtension("WEBGL_depth_texture")||tt.getExtension("MOZ_WEBGL_depth_texture")||tt.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":rt=tt.getExtension("EXT_texture_filter_anisotropic")||tt.getExtension("MOZ_EXT_texture_filter_anisotropic")||tt.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":rt=tt.getExtension("WEBGL_compressed_texture_s3tc")||tt.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||tt.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":rt=tt.getExtension("WEBGL_compressed_texture_pvrtc")||tt.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:rt=tt.getExtension(nt)}return _[nt]=rt,rt}return{has:function(nt){return _e(nt)!==null},init:function(nt){nt.isWebGL2?_e("EXT_color_buffer_float"):(_e("WEBGL_depth_texture"),_e("OES_texture_float"),_e("OES_texture_half_float"),_e("OES_texture_half_float_linear"),_e("OES_standard_derivatives"),_e("OES_element_index_uint"),_e("OES_vertex_array_object"),_e("ANGLE_instanced_arrays")),_e("OES_texture_float_linear"),_e("EXT_color_buffer_half_float"),_e("WEBGL_multisampled_render_to_texture")},get:function(nt){const rt=_e(nt);return rt===null&&console.warn("THREE.WebGLRenderer: "+nt+" extension not supported."),rt}}}function WebGLGeometries(tt,_,_e,nt){const rt={},it=new WeakMap;function ot(ut){const ht=ut.target;ht.index!==null&&_.remove(ht.index);for(const gt in ht.attributes)_.remove(ht.attributes[gt]);for(const gt in ht.morphAttributes){const yt=ht.morphAttributes[gt];for(let vt=0,mt=yt.length;vt<mt;vt++)_.remove(yt[vt])}ht.removeEventListener("dispose",ot),delete rt[ht.id];const pt=it.get(ht);pt&&(_.remove(pt),it.delete(ht)),nt.releaseStatesOfGeometry(ht),ht.isInstancedBufferGeometry===!0&&delete ht._maxInstanceCount,_e.memory.geometries--}function st(ut,ht){return rt[ht.id]===!0||(ht.addEventListener("dispose",ot),rt[ht.id]=!0,_e.memory.geometries++),ht}function at(ut){const ht=ut.attributes;for(const gt in ht)_.update(ht[gt],tt.ARRAY_BUFFER);const pt=ut.morphAttributes;for(const gt in pt){const yt=pt[gt];for(let vt=0,mt=yt.length;vt<mt;vt++)_.update(yt[vt],tt.ARRAY_BUFFER)}}function lt(ut){const ht=[],pt=ut.index,gt=ut.attributes.position;let yt=0;if(pt!==null){const _t=pt.array;yt=pt.version;for(let xt=0,St=_t.length;xt<St;xt+=3){const Tt=_t[xt+0],Mt=_t[xt+1],bt=_t[xt+2];ht.push(Tt,Mt,Mt,bt,bt,Tt)}}else{const _t=gt.array;yt=gt.version;for(let xt=0,St=_t.length/3-1;xt<St;xt+=3){const Tt=xt+0,Mt=xt+1,bt=xt+2;ht.push(Tt,Mt,Mt,bt,bt,Tt)}}const vt=new(arrayNeedsUint32(ht)?Uint32BufferAttribute:Uint16BufferAttribute)(ht,1);vt.version=yt;const mt=it.get(ut);mt&&_.remove(mt),it.set(ut,vt)}function ct(ut){const ht=it.get(ut);if(ht){const pt=ut.index;pt!==null&&ht.version<pt.version&&lt(ut)}else lt(ut);return it.get(ut)}return{get:st,update:at,getWireframeAttribute:ct}}function WebGLIndexedBufferRenderer(tt,_,_e,nt){const rt=nt.isWebGL2;let it;function ot(ht){it=ht}let st,at;function lt(ht){st=ht.type,at=ht.bytesPerElement}function ct(ht,pt){tt.drawElements(it,pt,st,ht*at),_e.update(pt,it,1)}function ut(ht,pt,gt){if(gt===0)return;let yt,vt;if(rt)yt=tt,vt="drawElementsInstanced";else if(yt=_.get("ANGLE_instanced_arrays"),vt="drawElementsInstancedANGLE",yt===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}yt[vt](it,pt,st,ht*at,gt),_e.update(pt,it,gt)}this.setMode=ot,this.setIndex=lt,this.render=ct,this.renderInstances=ut}function WebGLInfo(tt){const _={geometries:0,textures:0},_e={frame:0,calls:0,triangles:0,points:0,lines:0};function nt(it,ot,st){switch(_e.calls++,ot){case tt.TRIANGLES:_e.triangles+=st*(it/3);break;case tt.LINES:_e.lines+=st*(it/2);break;case tt.LINE_STRIP:_e.lines+=st*(it-1);break;case tt.LINE_LOOP:_e.lines+=st*it;break;case tt.POINTS:_e.points+=st*it;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",ot);break}}function rt(){_e.calls=0,_e.triangles=0,_e.points=0,_e.lines=0}return{memory:_,render:_e,programs:null,autoReset:!0,reset:rt,update:nt}}function numericalSort(tt,_){return tt[0]-_[0]}function absNumericalSort(tt,_){return Math.abs(_[1])-Math.abs(tt[1])}function WebGLMorphtargets(tt,_,_e){const nt={},rt=new Float32Array(8),it=new WeakMap,ot=new Vector4,st=[];for(let lt=0;lt<8;lt++)st[lt]=[lt,0];function at(lt,ct,ut){const ht=lt.morphTargetInfluences;if(_.isWebGL2===!0){const gt=ct.morphAttributes.position||ct.morphAttributes.normal||ct.morphAttributes.color,yt=gt!==void 0?gt.length:0;let vt=it.get(ct);if(vt===void 0||vt.count!==yt){let jt=function(){Nt.dispose(),it.delete(ct),ct.removeEventListener("dispose",jt)};var pt=jt;vt!==void 0&&vt.texture.dispose();const xt=ct.morphAttributes.position!==void 0,St=ct.morphAttributes.normal!==void 0,Tt=ct.morphAttributes.color!==void 0,Mt=ct.morphAttributes.position||[],bt=ct.morphAttributes.normal||[],Pt=ct.morphAttributes.color||[];let wt=0;xt===!0&&(wt=1),St===!0&&(wt=2),Tt===!0&&(wt=3);let Bt=ct.attributes.position.count*wt,Ot=1;Bt>_.maxTextureSize&&(Ot=Math.ceil(Bt/_.maxTextureSize),Bt=_.maxTextureSize);const Ut=new Float32Array(Bt*Ot*4*yt),Nt=new DataArrayTexture(Ut,Bt,Ot,yt);Nt.type=FloatType,Nt.needsUpdate=!0;const zt=wt*4;for(let Yt=0;Yt<yt;Yt++){const qt=Mt[Yt],Gt=bt[Yt],Xt=Pt[Yt],Vt=Bt*Ot*4*Yt;for(let Wt=0;Wt<qt.count;Wt++){const $t=Wt*zt;xt===!0&&(ot.fromBufferAttribute(qt,Wt),Ut[Vt+$t+0]=ot.x,Ut[Vt+$t+1]=ot.y,Ut[Vt+$t+2]=ot.z,Ut[Vt+$t+3]=0),St===!0&&(ot.fromBufferAttribute(Gt,Wt),Ut[Vt+$t+4]=ot.x,Ut[Vt+$t+5]=ot.y,Ut[Vt+$t+6]=ot.z,Ut[Vt+$t+7]=0),Tt===!0&&(ot.fromBufferAttribute(Xt,Wt),Ut[Vt+$t+8]=ot.x,Ut[Vt+$t+9]=ot.y,Ut[Vt+$t+10]=ot.z,Ut[Vt+$t+11]=Xt.itemSize===4?ot.w:1)}}vt={count:yt,texture:Nt,size:new Vector2(Bt,Ot)},it.set(ct,vt),ct.addEventListener("dispose",jt)}let mt=0;for(let xt=0;xt<ht.length;xt++)mt+=ht[xt];const _t=ct.morphTargetsRelative?1:1-mt;ut.getUniforms().setValue(tt,"morphTargetBaseInfluence",_t),ut.getUniforms().setValue(tt,"morphTargetInfluences",ht),ut.getUniforms().setValue(tt,"morphTargetsTexture",vt.texture,_e),ut.getUniforms().setValue(tt,"morphTargetsTextureSize",vt.size)}else{const gt=ht===void 0?0:ht.length;let yt=nt[ct.id];if(yt===void 0||yt.length!==gt){yt=[];for(let St=0;St<gt;St++)yt[St]=[St,0];nt[ct.id]=yt}for(let St=0;St<gt;St++){const Tt=yt[St];Tt[0]=St,Tt[1]=ht[St]}yt.sort(absNumericalSort);for(let St=0;St<8;St++)St<gt&&yt[St][1]?(st[St][0]=yt[St][0],st[St][1]=yt[St][1]):(st[St][0]=Number.MAX_SAFE_INTEGER,st[St][1]=0);st.sort(numericalSort);const vt=ct.morphAttributes.position,mt=ct.morphAttributes.normal;let _t=0;for(let St=0;St<8;St++){const Tt=st[St],Mt=Tt[0],bt=Tt[1];Mt!==Number.MAX_SAFE_INTEGER&&bt?(vt&&ct.getAttribute("morphTarget"+St)!==vt[Mt]&&ct.setAttribute("morphTarget"+St,vt[Mt]),mt&&ct.getAttribute("morphNormal"+St)!==mt[Mt]&&ct.setAttribute("morphNormal"+St,mt[Mt]),rt[St]=bt,_t+=bt):(vt&&ct.hasAttribute("morphTarget"+St)===!0&&ct.deleteAttribute("morphTarget"+St),mt&&ct.hasAttribute("morphNormal"+St)===!0&&ct.deleteAttribute("morphNormal"+St),rt[St]=0)}const xt=ct.morphTargetsRelative?1:1-_t;ut.getUniforms().setValue(tt,"morphTargetBaseInfluence",xt),ut.getUniforms().setValue(tt,"morphTargetInfluences",rt)}}return{update:at}}function WebGLObjects(tt,_,_e,nt){let rt=new WeakMap;function it(at){const lt=nt.render.frame,ct=at.geometry,ut=_.get(at,ct);return rt.get(ut)!==lt&&(_.update(ut),rt.set(ut,lt)),at.isInstancedMesh&&(at.hasEventListener("dispose",st)===!1&&at.addEventListener("dispose",st),_e.update(at.instanceMatrix,tt.ARRAY_BUFFER),at.instanceColor!==null&&_e.update(at.instanceColor,tt.ARRAY_BUFFER)),ut}function ot(){rt=new WeakMap}function st(at){const lt=at.target;lt.removeEventListener("dispose",st),_e.remove(lt.instanceMatrix),lt.instanceColor!==null&&_e.remove(lt.instanceColor)}return{update:it,dispose:ot}}const emptyTexture=new Texture,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten$1(tt,_,_e){const nt=tt[0];if(nt<=0||nt>0)return tt;const rt=_*_e;let it=arrayCacheF32[rt];if(it===void 0&&(it=new Float32Array(rt),arrayCacheF32[rt]=it),_!==0){nt.toArray(it,0);for(let ot=1,st=0;ot!==_;++ot)st+=_e,tt[ot].toArray(it,st)}return it}function arraysEqual(tt,_){if(tt.length!==_.length)return!1;for(let _e=0,nt=tt.length;_e<nt;_e++)if(tt[_e]!==_[_e])return!1;return!0}function copyArray(tt,_){for(let _e=0,nt=_.length;_e<nt;_e++)tt[_e]=_[_e]}function allocTexUnits(tt,_){let _e=arrayCacheI32[_];_e===void 0&&(_e=new Int32Array(_),arrayCacheI32[_]=_e);for(let nt=0;nt!==_;++nt)_e[nt]=tt.allocateTextureUnit();return _e}function setValueV1f(tt,_){const _e=this.cache;_e[0]!==_&&(tt.uniform1f(this.addr,_),_e[0]=_)}function setValueV2f(tt,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y)&&(tt.uniform2f(this.addr,_.x,_.y),_e[0]=_.x,_e[1]=_.y);else{if(arraysEqual(_e,_))return;tt.uniform2fv(this.addr,_),copyArray(_e,_)}}function setValueV3f(tt,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y||_e[2]!==_.z)&&(tt.uniform3f(this.addr,_.x,_.y,_.z),_e[0]=_.x,_e[1]=_.y,_e[2]=_.z);else if(_.r!==void 0)(_e[0]!==_.r||_e[1]!==_.g||_e[2]!==_.b)&&(tt.uniform3f(this.addr,_.r,_.g,_.b),_e[0]=_.r,_e[1]=_.g,_e[2]=_.b);else{if(arraysEqual(_e,_))return;tt.uniform3fv(this.addr,_),copyArray(_e,_)}}function setValueV4f(tt,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y||_e[2]!==_.z||_e[3]!==_.w)&&(tt.uniform4f(this.addr,_.x,_.y,_.z,_.w),_e[0]=_.x,_e[1]=_.y,_e[2]=_.z,_e[3]=_.w);else{if(arraysEqual(_e,_))return;tt.uniform4fv(this.addr,_),copyArray(_e,_)}}function setValueM2(tt,_){const _e=this.cache,nt=_.elements;if(nt===void 0){if(arraysEqual(_e,_))return;tt.uniformMatrix2fv(this.addr,!1,_),copyArray(_e,_)}else{if(arraysEqual(_e,nt))return;mat2array.set(nt),tt.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(_e,nt)}}function setValueM3(tt,_){const _e=this.cache,nt=_.elements;if(nt===void 0){if(arraysEqual(_e,_))return;tt.uniformMatrix3fv(this.addr,!1,_),copyArray(_e,_)}else{if(arraysEqual(_e,nt))return;mat3array.set(nt),tt.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(_e,nt)}}function setValueM4(tt,_){const _e=this.cache,nt=_.elements;if(nt===void 0){if(arraysEqual(_e,_))return;tt.uniformMatrix4fv(this.addr,!1,_),copyArray(_e,_)}else{if(arraysEqual(_e,nt))return;mat4array.set(nt),tt.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(_e,nt)}}function setValueV1i(tt,_){const _e=this.cache;_e[0]!==_&&(tt.uniform1i(this.addr,_),_e[0]=_)}function setValueV2i(tt,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y)&&(tt.uniform2i(this.addr,_.x,_.y),_e[0]=_.x,_e[1]=_.y);else{if(arraysEqual(_e,_))return;tt.uniform2iv(this.addr,_),copyArray(_e,_)}}function setValueV3i(tt,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y||_e[2]!==_.z)&&(tt.uniform3i(this.addr,_.x,_.y,_.z),_e[0]=_.x,_e[1]=_.y,_e[2]=_.z);else{if(arraysEqual(_e,_))return;tt.uniform3iv(this.addr,_),copyArray(_e,_)}}function setValueV4i(tt,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y||_e[2]!==_.z||_e[3]!==_.w)&&(tt.uniform4i(this.addr,_.x,_.y,_.z,_.w),_e[0]=_.x,_e[1]=_.y,_e[2]=_.z,_e[3]=_.w);else{if(arraysEqual(_e,_))return;tt.uniform4iv(this.addr,_),copyArray(_e,_)}}function setValueV1ui(tt,_){const _e=this.cache;_e[0]!==_&&(tt.uniform1ui(this.addr,_),_e[0]=_)}function setValueV2ui(tt,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y)&&(tt.uniform2ui(this.addr,_.x,_.y),_e[0]=_.x,_e[1]=_.y);else{if(arraysEqual(_e,_))return;tt.uniform2uiv(this.addr,_),copyArray(_e,_)}}function setValueV3ui(tt,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y||_e[2]!==_.z)&&(tt.uniform3ui(this.addr,_.x,_.y,_.z),_e[0]=_.x,_e[1]=_.y,_e[2]=_.z);else{if(arraysEqual(_e,_))return;tt.uniform3uiv(this.addr,_),copyArray(_e,_)}}function setValueV4ui(tt,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y||_e[2]!==_.z||_e[3]!==_.w)&&(tt.uniform4ui(this.addr,_.x,_.y,_.z,_.w),_e[0]=_.x,_e[1]=_.y,_e[2]=_.z,_e[3]=_.w);else{if(arraysEqual(_e,_))return;tt.uniform4uiv(this.addr,_),copyArray(_e,_)}}function setValueT1(tt,_,_e){const nt=this.cache,rt=_e.allocateTextureUnit();nt[0]!==rt&&(tt.uniform1i(this.addr,rt),nt[0]=rt),_e.setTexture2D(_||emptyTexture,rt)}function setValueT3D1(tt,_,_e){const nt=this.cache,rt=_e.allocateTextureUnit();nt[0]!==rt&&(tt.uniform1i(this.addr,rt),nt[0]=rt),_e.setTexture3D(_||empty3dTexture,rt)}function setValueT6(tt,_,_e){const nt=this.cache,rt=_e.allocateTextureUnit();nt[0]!==rt&&(tt.uniform1i(this.addr,rt),nt[0]=rt),_e.setTextureCube(_||emptyCubeTexture,rt)}function setValueT2DArray1(tt,_,_e){const nt=this.cache,rt=_e.allocateTextureUnit();nt[0]!==rt&&(tt.uniform1i(this.addr,rt),nt[0]=rt),_e.setTexture2DArray(_||emptyArrayTexture,rt)}function getSingularSetter(tt){switch(tt){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(tt,_){tt.uniform1fv(this.addr,_)}function setValueV2fArray(tt,_){const _e=flatten$1(_,this.size,2);tt.uniform2fv(this.addr,_e)}function setValueV3fArray(tt,_){const _e=flatten$1(_,this.size,3);tt.uniform3fv(this.addr,_e)}function setValueV4fArray(tt,_){const _e=flatten$1(_,this.size,4);tt.uniform4fv(this.addr,_e)}function setValueM2Array(tt,_){const _e=flatten$1(_,this.size,4);tt.uniformMatrix2fv(this.addr,!1,_e)}function setValueM3Array(tt,_){const _e=flatten$1(_,this.size,9);tt.uniformMatrix3fv(this.addr,!1,_e)}function setValueM4Array(tt,_){const _e=flatten$1(_,this.size,16);tt.uniformMatrix4fv(this.addr,!1,_e)}function setValueV1iArray(tt,_){tt.uniform1iv(this.addr,_)}function setValueV2iArray(tt,_){tt.uniform2iv(this.addr,_)}function setValueV3iArray(tt,_){tt.uniform3iv(this.addr,_)}function setValueV4iArray(tt,_){tt.uniform4iv(this.addr,_)}function setValueV1uiArray(tt,_){tt.uniform1uiv(this.addr,_)}function setValueV2uiArray(tt,_){tt.uniform2uiv(this.addr,_)}function setValueV3uiArray(tt,_){tt.uniform3uiv(this.addr,_)}function setValueV4uiArray(tt,_){tt.uniform4uiv(this.addr,_)}function setValueT1Array(tt,_,_e){const nt=this.cache,rt=_.length,it=allocTexUnits(_e,rt);arraysEqual(nt,it)||(tt.uniform1iv(this.addr,it),copyArray(nt,it));for(let ot=0;ot!==rt;++ot)_e.setTexture2D(_[ot]||emptyTexture,it[ot])}function setValueT3DArray(tt,_,_e){const nt=this.cache,rt=_.length,it=allocTexUnits(_e,rt);arraysEqual(nt,it)||(tt.uniform1iv(this.addr,it),copyArray(nt,it));for(let ot=0;ot!==rt;++ot)_e.setTexture3D(_[ot]||empty3dTexture,it[ot])}function setValueT6Array(tt,_,_e){const nt=this.cache,rt=_.length,it=allocTexUnits(_e,rt);arraysEqual(nt,it)||(tt.uniform1iv(this.addr,it),copyArray(nt,it));for(let ot=0;ot!==rt;++ot)_e.setTextureCube(_[ot]||emptyCubeTexture,it[ot])}function setValueT2DArrayArray(tt,_,_e){const nt=this.cache,rt=_.length,it=allocTexUnits(_e,rt);arraysEqual(nt,it)||(tt.uniform1iv(this.addr,it),copyArray(nt,it));for(let ot=0;ot!==rt;++ot)_e.setTexture2DArray(_[ot]||emptyArrayTexture,it[ot])}function getPureArraySetter(tt){switch(tt){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(_,_e,nt){this.id=_,this.addr=nt,this.cache=[],this.setValue=getSingularSetter(_e.type)}}class PureArrayUniform{constructor(_,_e,nt){this.id=_,this.addr=nt,this.cache=[],this.size=_e.size,this.setValue=getPureArraySetter(_e.type)}}class StructuredUniform{constructor(_){this.id=_,this.seq=[],this.map={}}setValue(_,_e,nt){const rt=this.seq;for(let it=0,ot=rt.length;it!==ot;++it){const st=rt[it];st.setValue(_,_e[st.id],nt)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(tt,_){tt.seq.push(_),tt.map[_.id]=_}function parseUniform(tt,_,_e){const nt=tt.name,rt=nt.length;for(RePathPart.lastIndex=0;;){const it=RePathPart.exec(nt),ot=RePathPart.lastIndex;let st=it[1];const at=it[2]==="]",lt=it[3];if(at&&(st=st|0),lt===void 0||lt==="["&&ot+2===rt){addUniform(_e,lt===void 0?new SingleUniform(st,tt,_):new PureArrayUniform(st,tt,_));break}else{let ut=_e.map[st];ut===void 0&&(ut=new StructuredUniform(st),addUniform(_e,ut)),_e=ut}}}class WebGLUniforms{constructor(_,_e){this.seq=[],this.map={};const nt=_.getProgramParameter(_e,_.ACTIVE_UNIFORMS);for(let rt=0;rt<nt;++rt){const it=_.getActiveUniform(_e,rt),ot=_.getUniformLocation(_e,it.name);parseUniform(it,ot,this)}}setValue(_,_e,nt,rt){const it=this.map[_e];it!==void 0&&it.setValue(_,nt,rt)}setOptional(_,_e,nt){const rt=_e[nt];rt!==void 0&&this.setValue(_,nt,rt)}static upload(_,_e,nt,rt){for(let it=0,ot=_e.length;it!==ot;++it){const st=_e[it],at=nt[st.id];at.needsUpdate!==!1&&st.setValue(_,at.value,rt)}}static seqWithValue(_,_e){const nt=[];for(let rt=0,it=_.length;rt!==it;++rt){const ot=_[rt];ot.id in _e&&nt.push(ot)}return nt}}function WebGLShader(tt,_,_e){const nt=tt.createShader(_);return tt.shaderSource(nt,_e),tt.compileShader(nt),nt}let programIdCount=0;function handleSource(tt,_){const _e=tt.split(`
`),nt=[],rt=Math.max(_-6,0),it=Math.min(_+6,_e.length);for(let ot=rt;ot<it;ot++){const st=ot+1;nt.push(`${st===_?">":" "} ${st}: ${_e[ot]}`)}return nt.join(`
`)}function getEncodingComponents(tt){switch(tt){case LinearSRGBColorSpace:return["Linear","( value )"];case SRGBColorSpace:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",tt),["Linear","( value )"]}}function getShaderErrors(tt,_,_e){const nt=tt.getShaderParameter(_,tt.COMPILE_STATUS),rt=tt.getShaderInfoLog(_).trim();if(nt&&rt==="")return"";const it=/ERROR: 0:(\d+)/.exec(rt);if(it){const ot=parseInt(it[1]);return _e.toUpperCase()+`

`+rt+`

`+handleSource(tt.getShaderSource(_),ot)}else return rt}function getTexelEncodingFunction(tt,_){const _e=getEncodingComponents(_);return"vec4 "+tt+"( vec4 value ) { return LinearTo"+_e[0]+_e[1]+"; }"}function getToneMappingFunction(tt,_){let _e;switch(_){case LinearToneMapping:_e="Linear";break;case ReinhardToneMapping:_e="Reinhard";break;case CineonToneMapping:_e="OptimizedCineon";break;case ACESFilmicToneMapping:_e="ACESFilmic";break;case CustomToneMapping:_e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",_),_e="Linear"}return"vec3 "+tt+"( vec3 color ) { return "+_e+"ToneMapping( color ); }"}function generateExtensions(tt){return[tt.extensionDerivatives||tt.envMapCubeUVHeight||tt.bumpMap||tt.normalMapTangentSpace||tt.clearcoatNormalMap||tt.flatShading||tt.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(tt.extensionFragDepth||tt.logarithmicDepthBuffer)&&tt.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",tt.extensionDrawBuffers&&tt.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(tt.extensionShaderTextureLOD||tt.envMap||tt.transmission)&&tt.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateDefines(tt){const _=[];for(const _e in tt){const nt=tt[_e];nt!==!1&&_.push("#define "+_e+" "+nt)}return _.join(`
`)}function fetchAttributeLocations(tt,_){const _e={},nt=tt.getProgramParameter(_,tt.ACTIVE_ATTRIBUTES);for(let rt=0;rt<nt;rt++){const it=tt.getActiveAttrib(_,rt),ot=it.name;let st=1;it.type===tt.FLOAT_MAT2&&(st=2),it.type===tt.FLOAT_MAT3&&(st=3),it.type===tt.FLOAT_MAT4&&(st=4),_e[ot]={type:it.type,location:tt.getAttribLocation(_,ot),locationSize:st}}return _e}function filterEmptyLine(tt){return tt!==""}function replaceLightNums(tt,_){const _e=_.numSpotLightShadows+_.numSpotLightMaps-_.numSpotLightShadowsWithMaps;return tt.replace(/NUM_DIR_LIGHTS/g,_.numDirLights).replace(/NUM_SPOT_LIGHTS/g,_.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,_.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,_e).replace(/NUM_RECT_AREA_LIGHTS/g,_.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,_.numPointLights).replace(/NUM_HEMI_LIGHTS/g,_.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,_.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,_.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,_.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,_.numPointLightShadows)}function replaceClippingPlaneNums(tt,_){return tt.replace(/NUM_CLIPPING_PLANES/g,_.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,_.numClippingPlanes-_.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(tt){return tt.replace(includePattern,includeReplacer)}function includeReplacer(tt,_){const _e=ShaderChunk[_];if(_e===void 0)throw new Error("Can not resolve #include <"+_+">");return resolveIncludes(_e)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(tt){return tt.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(tt,_,_e,nt){let rt="";for(let it=parseInt(_);it<parseInt(_e);it++)rt+=nt.replace(/\[\s*i\s*\]/g,"[ "+it+" ]").replace(/UNROLLED_LOOP_INDEX/g,it);return rt}function generatePrecision(tt){let _="precision "+tt.precision+` float;
precision `+tt.precision+" int;";return tt.precision==="highp"?_+=`
#define HIGH_PRECISION`:tt.precision==="mediump"?_+=`
#define MEDIUM_PRECISION`:tt.precision==="lowp"&&(_+=`
#define LOW_PRECISION`),_}function generateShadowMapTypeDefine(tt){let _="SHADOWMAP_TYPE_BASIC";return tt.shadowMapType===PCFShadowMap?_="SHADOWMAP_TYPE_PCF":tt.shadowMapType===PCFSoftShadowMap?_="SHADOWMAP_TYPE_PCF_SOFT":tt.shadowMapType===VSMShadowMap&&(_="SHADOWMAP_TYPE_VSM"),_}function generateEnvMapTypeDefine(tt){let _="ENVMAP_TYPE_CUBE";if(tt.envMap)switch(tt.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:_="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:_="ENVMAP_TYPE_CUBE_UV";break}return _}function generateEnvMapModeDefine(tt){let _="ENVMAP_MODE_REFLECTION";if(tt.envMap)switch(tt.envMapMode){case CubeRefractionMapping:_="ENVMAP_MODE_REFRACTION";break}return _}function generateEnvMapBlendingDefine(tt){let _="ENVMAP_BLENDING_NONE";if(tt.envMap)switch(tt.combine){case MultiplyOperation:_="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:_="ENVMAP_BLENDING_MIX";break;case AddOperation:_="ENVMAP_BLENDING_ADD";break}return _}function generateCubeUVSize(tt){const _=tt.envMapCubeUVHeight;if(_===null)return null;const _e=Math.log2(_)-2,nt=1/_;return{texelWidth:1/(3*Math.max(Math.pow(2,_e),7*16)),texelHeight:nt,maxMip:_e}}function WebGLProgram(tt,_,_e,nt){const rt=tt.getContext(),it=_e.defines;let ot=_e.vertexShader,st=_e.fragmentShader;const at=generateShadowMapTypeDefine(_e),lt=generateEnvMapTypeDefine(_e),ct=generateEnvMapModeDefine(_e),ut=generateEnvMapBlendingDefine(_e),ht=generateCubeUVSize(_e),pt=_e.isWebGL2?"":generateExtensions(_e),gt=generateDefines(it),yt=rt.createProgram();let vt,mt,_t=_e.glslVersion?"#version "+_e.glslVersion+`
`:"";_e.isRawShaderMaterial?(vt=["#define SHADER_TYPE "+_e.shaderType,"#define SHADER_NAME "+_e.shaderName,gt].filter(filterEmptyLine).join(`
`),vt.length>0&&(vt+=`
`),mt=[pt,"#define SHADER_TYPE "+_e.shaderType,"#define SHADER_NAME "+_e.shaderName,gt].filter(filterEmptyLine).join(`
`),mt.length>0&&(mt+=`
`)):(vt=[generatePrecision(_e),"#define SHADER_TYPE "+_e.shaderType,"#define SHADER_NAME "+_e.shaderName,gt,_e.instancing?"#define USE_INSTANCING":"",_e.instancingColor?"#define USE_INSTANCING_COLOR":"",_e.useFog&&_e.fog?"#define USE_FOG":"",_e.useFog&&_e.fogExp2?"#define FOG_EXP2":"",_e.map?"#define USE_MAP":"",_e.envMap?"#define USE_ENVMAP":"",_e.envMap?"#define "+ct:"",_e.lightMap?"#define USE_LIGHTMAP":"",_e.aoMap?"#define USE_AOMAP":"",_e.bumpMap?"#define USE_BUMPMAP":"",_e.normalMap?"#define USE_NORMALMAP":"",_e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",_e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",_e.displacementMap?"#define USE_DISPLACEMENTMAP":"",_e.emissiveMap?"#define USE_EMISSIVEMAP":"",_e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",_e.clearcoatMap?"#define USE_CLEARCOATMAP":"",_e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",_e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",_e.specularMap?"#define USE_SPECULARMAP":"",_e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",_e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",_e.roughnessMap?"#define USE_ROUGHNESSMAP":"",_e.metalnessMap?"#define USE_METALNESSMAP":"",_e.alphaMap?"#define USE_ALPHAMAP":"",_e.transmission?"#define USE_TRANSMISSION":"",_e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",_e.thicknessMap?"#define USE_THICKNESSMAP":"",_e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",_e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",_e.mapUv?"#define MAP_UV "+_e.mapUv:"",_e.alphaMapUv?"#define ALPHAMAP_UV "+_e.alphaMapUv:"",_e.lightMapUv?"#define LIGHTMAP_UV "+_e.lightMapUv:"",_e.aoMapUv?"#define AOMAP_UV "+_e.aoMapUv:"",_e.emissiveMapUv?"#define EMISSIVEMAP_UV "+_e.emissiveMapUv:"",_e.bumpMapUv?"#define BUMPMAP_UV "+_e.bumpMapUv:"",_e.normalMapUv?"#define NORMALMAP_UV "+_e.normalMapUv:"",_e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+_e.displacementMapUv:"",_e.metalnessMapUv?"#define METALNESSMAP_UV "+_e.metalnessMapUv:"",_e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+_e.roughnessMapUv:"",_e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+_e.anisotropyMapUv:"",_e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+_e.clearcoatMapUv:"",_e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+_e.clearcoatNormalMapUv:"",_e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+_e.clearcoatRoughnessMapUv:"",_e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+_e.iridescenceMapUv:"",_e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+_e.iridescenceThicknessMapUv:"",_e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+_e.sheenColorMapUv:"",_e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+_e.sheenRoughnessMapUv:"",_e.specularMapUv?"#define SPECULARMAP_UV "+_e.specularMapUv:"",_e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+_e.specularColorMapUv:"",_e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+_e.specularIntensityMapUv:"",_e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+_e.transmissionMapUv:"",_e.thicknessMapUv?"#define THICKNESSMAP_UV "+_e.thicknessMapUv:"",_e.vertexTangents?"#define USE_TANGENT":"",_e.vertexColors?"#define USE_COLOR":"",_e.vertexAlphas?"#define USE_COLOR_ALPHA":"",_e.vertexUv1s?"#define USE_UV1":"",_e.vertexUv2s?"#define USE_UV2":"",_e.vertexUv3s?"#define USE_UV3":"",_e.pointsUvs?"#define USE_POINTS_UV":"",_e.flatShading?"#define FLAT_SHADED":"",_e.skinning?"#define USE_SKINNING":"",_e.morphTargets?"#define USE_MORPHTARGETS":"",_e.morphNormals&&_e.flatShading===!1?"#define USE_MORPHNORMALS":"",_e.morphColors&&_e.isWebGL2?"#define USE_MORPHCOLORS":"",_e.morphTargetsCount>0&&_e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",_e.morphTargetsCount>0&&_e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+_e.morphTextureStride:"",_e.morphTargetsCount>0&&_e.isWebGL2?"#define MORPHTARGETS_COUNT "+_e.morphTargetsCount:"",_e.doubleSided?"#define DOUBLE_SIDED":"",_e.flipSided?"#define FLIP_SIDED":"",_e.shadowMapEnabled?"#define USE_SHADOWMAP":"",_e.shadowMapEnabled?"#define "+at:"",_e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",_e.useLegacyLights?"#define LEGACY_LIGHTS":"",_e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",_e.logarithmicDepthBuffer&&_e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),mt=[pt,generatePrecision(_e),"#define SHADER_TYPE "+_e.shaderType,"#define SHADER_NAME "+_e.shaderName,gt,_e.useFog&&_e.fog?"#define USE_FOG":"",_e.useFog&&_e.fogExp2?"#define FOG_EXP2":"",_e.map?"#define USE_MAP":"",_e.matcap?"#define USE_MATCAP":"",_e.envMap?"#define USE_ENVMAP":"",_e.envMap?"#define "+lt:"",_e.envMap?"#define "+ct:"",_e.envMap?"#define "+ut:"",ht?"#define CUBEUV_TEXEL_WIDTH "+ht.texelWidth:"",ht?"#define CUBEUV_TEXEL_HEIGHT "+ht.texelHeight:"",ht?"#define CUBEUV_MAX_MIP "+ht.maxMip+".0":"",_e.lightMap?"#define USE_LIGHTMAP":"",_e.aoMap?"#define USE_AOMAP":"",_e.bumpMap?"#define USE_BUMPMAP":"",_e.normalMap?"#define USE_NORMALMAP":"",_e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",_e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",_e.emissiveMap?"#define USE_EMISSIVEMAP":"",_e.anisotropy?"#define USE_ANISOTROPY":"",_e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",_e.clearcoat?"#define USE_CLEARCOAT":"",_e.clearcoatMap?"#define USE_CLEARCOATMAP":"",_e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_e.iridescence?"#define USE_IRIDESCENCE":"",_e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",_e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",_e.specularMap?"#define USE_SPECULARMAP":"",_e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",_e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",_e.roughnessMap?"#define USE_ROUGHNESSMAP":"",_e.metalnessMap?"#define USE_METALNESSMAP":"",_e.alphaMap?"#define USE_ALPHAMAP":"",_e.alphaTest?"#define USE_ALPHATEST":"",_e.sheen?"#define USE_SHEEN":"",_e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",_e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",_e.transmission?"#define USE_TRANSMISSION":"",_e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",_e.thicknessMap?"#define USE_THICKNESSMAP":"",_e.vertexTangents?"#define USE_TANGENT":"",_e.vertexColors||_e.instancingColor?"#define USE_COLOR":"",_e.vertexAlphas?"#define USE_COLOR_ALPHA":"",_e.vertexUv1s?"#define USE_UV1":"",_e.vertexUv2s?"#define USE_UV2":"",_e.vertexUv3s?"#define USE_UV3":"",_e.pointsUvs?"#define USE_POINTS_UV":"",_e.gradientMap?"#define USE_GRADIENTMAP":"",_e.flatShading?"#define FLAT_SHADED":"",_e.doubleSided?"#define DOUBLE_SIDED":"",_e.flipSided?"#define FLIP_SIDED":"",_e.shadowMapEnabled?"#define USE_SHADOWMAP":"",_e.shadowMapEnabled?"#define "+at:"",_e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",_e.useLegacyLights?"#define LEGACY_LIGHTS":"",_e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",_e.logarithmicDepthBuffer&&_e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",_e.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",_e.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",_e.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",_e.toneMapping):"",_e.dithering?"#define DITHERING":"",_e.opaque?"#define OPAQUE":"",ShaderChunk.encodings_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",_e.outputColorSpace),_e.useDepthPacking?"#define DEPTH_PACKING "+_e.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),ot=resolveIncludes(ot),ot=replaceLightNums(ot,_e),ot=replaceClippingPlaneNums(ot,_e),st=resolveIncludes(st),st=replaceLightNums(st,_e),st=replaceClippingPlaneNums(st,_e),ot=unrollLoops(ot),st=unrollLoops(st),_e.isWebGL2&&_e.isRawShaderMaterial!==!0&&(_t=`#version 300 es
`,vt=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+vt,mt=["#define varying in",_e.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",_e.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+mt);const xt=_t+vt+ot,St=_t+mt+st,Tt=WebGLShader(rt,rt.VERTEX_SHADER,xt),Mt=WebGLShader(rt,rt.FRAGMENT_SHADER,St);if(rt.attachShader(yt,Tt),rt.attachShader(yt,Mt),_e.index0AttributeName!==void 0?rt.bindAttribLocation(yt,0,_e.index0AttributeName):_e.morphTargets===!0&&rt.bindAttribLocation(yt,0,"position"),rt.linkProgram(yt),tt.debug.checkShaderErrors){const wt=rt.getProgramInfoLog(yt).trim(),Bt=rt.getShaderInfoLog(Tt).trim(),Ot=rt.getShaderInfoLog(Mt).trim();let Ut=!0,Nt=!0;if(rt.getProgramParameter(yt,rt.LINK_STATUS)===!1)if(Ut=!1,typeof tt.debug.onShaderError=="function")tt.debug.onShaderError(rt,yt,Tt,Mt);else{const zt=getShaderErrors(rt,Tt,"vertex"),jt=getShaderErrors(rt,Mt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+rt.getError()+" - VALIDATE_STATUS "+rt.getProgramParameter(yt,rt.VALIDATE_STATUS)+`

Program Info Log: `+wt+`
`+zt+`
`+jt)}else wt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",wt):(Bt===""||Ot==="")&&(Nt=!1);Nt&&(this.diagnostics={runnable:Ut,programLog:wt,vertexShader:{log:Bt,prefix:vt},fragmentShader:{log:Ot,prefix:mt}})}rt.deleteShader(Tt),rt.deleteShader(Mt);let bt;this.getUniforms=function(){return bt===void 0&&(bt=new WebGLUniforms(rt,yt)),bt};let Pt;return this.getAttributes=function(){return Pt===void 0&&(Pt=fetchAttributeLocations(rt,yt)),Pt},this.destroy=function(){nt.releaseStatesOfProgram(this),rt.deleteProgram(yt),this.program=void 0},this.type=_e.shaderType,this.name=_e.shaderName,this.id=programIdCount++,this.cacheKey=_,this.usedTimes=1,this.program=yt,this.vertexShader=Tt,this.fragmentShader=Mt,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(_){const _e=_.vertexShader,nt=_.fragmentShader,rt=this._getShaderStage(_e),it=this._getShaderStage(nt),ot=this._getShaderCacheForMaterial(_);return ot.has(rt)===!1&&(ot.add(rt),rt.usedTimes++),ot.has(it)===!1&&(ot.add(it),it.usedTimes++),this}remove(_){const _e=this.materialCache.get(_);for(const nt of _e)nt.usedTimes--,nt.usedTimes===0&&this.shaderCache.delete(nt.code);return this.materialCache.delete(_),this}getVertexShaderID(_){return this._getShaderStage(_.vertexShader).id}getFragmentShaderID(_){return this._getShaderStage(_.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(_){const _e=this.materialCache;let nt=_e.get(_);return nt===void 0&&(nt=new Set,_e.set(_,nt)),nt}_getShaderStage(_){const _e=this.shaderCache;let nt=_e.get(_);return nt===void 0&&(nt=new WebGLShaderStage(_),_e.set(_,nt)),nt}}class WebGLShaderStage{constructor(_){this.id=_id++,this.code=_,this.usedTimes=0}}function WebGLPrograms(tt,_,_e,nt,rt,it,ot){const st=new Layers,at=new WebGLShaderCache,lt=[],ct=rt.isWebGL2,ut=rt.logarithmicDepthBuffer,ht=rt.vertexTextures;let pt=rt.precision;const gt={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function yt(wt){return wt===0?"uv":`uv${wt}`}function vt(wt,Bt,Ot,Ut,Nt){const zt=Ut.fog,jt=Nt.geometry,Yt=wt.isMeshStandardMaterial?Ut.environment:null,qt=(wt.isMeshStandardMaterial?_e:_).get(wt.envMap||Yt),Gt=qt&&qt.mapping===CubeUVReflectionMapping?qt.image.height:null,Xt=gt[wt.type];wt.precision!==null&&(pt=rt.getMaxPrecision(wt.precision),pt!==wt.precision&&console.warn("THREE.WebGLProgram.getParameters:",wt.precision,"not supported, using",pt,"instead."));const Vt=jt.morphAttributes.position||jt.morphAttributes.normal||jt.morphAttributes.color,Wt=Vt!==void 0?Vt.length:0;let $t=0;jt.morphAttributes.position!==void 0&&($t=1),jt.morphAttributes.normal!==void 0&&($t=2),jt.morphAttributes.color!==void 0&&($t=3);let nn,en,sn,rn;if(Xt){const Ar=ShaderLib[Xt];nn=Ar.vertexShader,en=Ar.fragmentShader}else nn=wt.vertexShader,en=wt.fragmentShader,at.update(wt),sn=at.getVertexShaderID(wt),rn=at.getFragmentShaderID(wt);const an=tt.getRenderTarget(),dn=Nt.isInstancedMesh===!0,Bn=!!wt.map,Nn=!!wt.matcap,gn=!!qt,Ht=!!wt.aoMap,xn=!!wt.lightMap,hn=!!wt.bumpMap,vn=!!wt.normalMap,pn=!!wt.displacementMap,Hn=!!wt.emissiveMap,yn=!!wt.metalnessMap,Ln=!!wt.roughnessMap,On=wt.anisotropy>0,Sn=wt.clearcoat>0,jn=wt.iridescence>0,Ft=wt.sheen>0,Dt=wt.transmission>0,on=On&&!!wt.anisotropyMap,bn=Sn&&!!wt.clearcoatMap,Mn=Sn&&!!wt.clearcoatNormalMap,wn=Sn&&!!wt.clearcoatRoughnessMap,$n=jn&&!!wt.iridescenceMap,Gn=jn&&!!wt.iridescenceThicknessMap,En=Ft&&!!wt.sheenColorMap,zn=Ft&&!!wt.sheenRoughnessMap,Vn=!!wt.specularMap,Un=!!wt.specularColorMap,Fn=!!wt.specularIntensityMap,kn=Dt&&!!wt.transmissionMap,Yn=Dt&&!!wt.thicknessMap,nr=!!wt.gradientMap,tn=!!wt.alphaMap,fn=wt.alphaTest>0,mn=!!wt.extensions,Wn=!!jt.attributes.uv1,Zn=!!jt.attributes.uv2,mr=!!jt.attributes.uv3;return{isWebGL2:ct,shaderID:Xt,shaderType:wt.type,shaderName:wt.name,vertexShader:nn,fragmentShader:en,defines:wt.defines,customVertexShaderID:sn,customFragmentShaderID:rn,isRawShaderMaterial:wt.isRawShaderMaterial===!0,glslVersion:wt.glslVersion,precision:pt,instancing:dn,instancingColor:dn&&Nt.instanceColor!==null,supportsVertexTextures:ht,outputColorSpace:an===null?tt.outputColorSpace:an.isXRRenderTarget===!0?an.texture.colorSpace:LinearSRGBColorSpace,map:Bn,matcap:Nn,envMap:gn,envMapMode:gn&&qt.mapping,envMapCubeUVHeight:Gt,aoMap:Ht,lightMap:xn,bumpMap:hn,normalMap:vn,displacementMap:ht&&pn,emissiveMap:Hn,normalMapObjectSpace:vn&&wt.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:vn&&wt.normalMapType===TangentSpaceNormalMap,metalnessMap:yn,roughnessMap:Ln,anisotropy:On,anisotropyMap:on,clearcoat:Sn,clearcoatMap:bn,clearcoatNormalMap:Mn,clearcoatRoughnessMap:wn,iridescence:jn,iridescenceMap:$n,iridescenceThicknessMap:Gn,sheen:Ft,sheenColorMap:En,sheenRoughnessMap:zn,specularMap:Vn,specularColorMap:Un,specularIntensityMap:Fn,transmission:Dt,transmissionMap:kn,thicknessMap:Yn,gradientMap:nr,opaque:wt.transparent===!1&&wt.blending===NormalBlending,alphaMap:tn,alphaTest:fn,combine:wt.combine,mapUv:Bn&&yt(wt.map.channel),aoMapUv:Ht&&yt(wt.aoMap.channel),lightMapUv:xn&&yt(wt.lightMap.channel),bumpMapUv:hn&&yt(wt.bumpMap.channel),normalMapUv:vn&&yt(wt.normalMap.channel),displacementMapUv:pn&&yt(wt.displacementMap.channel),emissiveMapUv:Hn&&yt(wt.emissiveMap.channel),metalnessMapUv:yn&&yt(wt.metalnessMap.channel),roughnessMapUv:Ln&&yt(wt.roughnessMap.channel),anisotropyMapUv:on&&yt(wt.anisotropyMap.channel),clearcoatMapUv:bn&&yt(wt.clearcoatMap.channel),clearcoatNormalMapUv:Mn&&yt(wt.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:wn&&yt(wt.clearcoatRoughnessMap.channel),iridescenceMapUv:$n&&yt(wt.iridescenceMap.channel),iridescenceThicknessMapUv:Gn&&yt(wt.iridescenceThicknessMap.channel),sheenColorMapUv:En&&yt(wt.sheenColorMap.channel),sheenRoughnessMapUv:zn&&yt(wt.sheenRoughnessMap.channel),specularMapUv:Vn&&yt(wt.specularMap.channel),specularColorMapUv:Un&&yt(wt.specularColorMap.channel),specularIntensityMapUv:Fn&&yt(wt.specularIntensityMap.channel),transmissionMapUv:kn&&yt(wt.transmissionMap.channel),thicknessMapUv:Yn&&yt(wt.thicknessMap.channel),alphaMapUv:tn&&yt(wt.alphaMap.channel),vertexTangents:!!jt.attributes.tangent&&(vn||On),vertexColors:wt.vertexColors,vertexAlphas:wt.vertexColors===!0&&!!jt.attributes.color&&jt.attributes.color.itemSize===4,vertexUv1s:Wn,vertexUv2s:Zn,vertexUv3s:mr,pointsUvs:Nt.isPoints===!0&&!!jt.attributes.uv&&(Bn||tn),fog:!!zt,useFog:wt.fog===!0,fogExp2:zt&&zt.isFogExp2,flatShading:wt.flatShading===!0,sizeAttenuation:wt.sizeAttenuation===!0,logarithmicDepthBuffer:ut,skinning:Nt.isSkinnedMesh===!0,morphTargets:jt.morphAttributes.position!==void 0,morphNormals:jt.morphAttributes.normal!==void 0,morphColors:jt.morphAttributes.color!==void 0,morphTargetsCount:Wt,morphTextureStride:$t,numDirLights:Bt.directional.length,numPointLights:Bt.point.length,numSpotLights:Bt.spot.length,numSpotLightMaps:Bt.spotLightMap.length,numRectAreaLights:Bt.rectArea.length,numHemiLights:Bt.hemi.length,numDirLightShadows:Bt.directionalShadowMap.length,numPointLightShadows:Bt.pointShadowMap.length,numSpotLightShadows:Bt.spotShadowMap.length,numSpotLightShadowsWithMaps:Bt.numSpotLightShadowsWithMaps,numClippingPlanes:ot.numPlanes,numClipIntersection:ot.numIntersection,dithering:wt.dithering,shadowMapEnabled:tt.shadowMap.enabled&&Ot.length>0,shadowMapType:tt.shadowMap.type,toneMapping:wt.toneMapped?tt.toneMapping:NoToneMapping,useLegacyLights:tt.useLegacyLights,premultipliedAlpha:wt.premultipliedAlpha,doubleSided:wt.side===DoubleSide,flipSided:wt.side===BackSide,useDepthPacking:wt.depthPacking>=0,depthPacking:wt.depthPacking||0,index0AttributeName:wt.index0AttributeName,extensionDerivatives:mn&&wt.extensions.derivatives===!0,extensionFragDepth:mn&&wt.extensions.fragDepth===!0,extensionDrawBuffers:mn&&wt.extensions.drawBuffers===!0,extensionShaderTextureLOD:mn&&wt.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:ct||nt.has("EXT_frag_depth"),rendererExtensionDrawBuffers:ct||nt.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:ct||nt.has("EXT_shader_texture_lod"),customProgramCacheKey:wt.customProgramCacheKey()}}function mt(wt){const Bt=[];if(wt.shaderID?Bt.push(wt.shaderID):(Bt.push(wt.customVertexShaderID),Bt.push(wt.customFragmentShaderID)),wt.defines!==void 0)for(const Ot in wt.defines)Bt.push(Ot),Bt.push(wt.defines[Ot]);return wt.isRawShaderMaterial===!1&&(_t(Bt,wt),xt(Bt,wt),Bt.push(tt.outputColorSpace)),Bt.push(wt.customProgramCacheKey),Bt.join()}function _t(wt,Bt){wt.push(Bt.precision),wt.push(Bt.outputColorSpace),wt.push(Bt.envMapMode),wt.push(Bt.envMapCubeUVHeight),wt.push(Bt.mapUv),wt.push(Bt.alphaMapUv),wt.push(Bt.lightMapUv),wt.push(Bt.aoMapUv),wt.push(Bt.bumpMapUv),wt.push(Bt.normalMapUv),wt.push(Bt.displacementMapUv),wt.push(Bt.emissiveMapUv),wt.push(Bt.metalnessMapUv),wt.push(Bt.roughnessMapUv),wt.push(Bt.anisotropyMapUv),wt.push(Bt.clearcoatMapUv),wt.push(Bt.clearcoatNormalMapUv),wt.push(Bt.clearcoatRoughnessMapUv),wt.push(Bt.iridescenceMapUv),wt.push(Bt.iridescenceThicknessMapUv),wt.push(Bt.sheenColorMapUv),wt.push(Bt.sheenRoughnessMapUv),wt.push(Bt.specularMapUv),wt.push(Bt.specularColorMapUv),wt.push(Bt.specularIntensityMapUv),wt.push(Bt.transmissionMapUv),wt.push(Bt.thicknessMapUv),wt.push(Bt.combine),wt.push(Bt.fogExp2),wt.push(Bt.sizeAttenuation),wt.push(Bt.morphTargetsCount),wt.push(Bt.morphAttributeCount),wt.push(Bt.numDirLights),wt.push(Bt.numPointLights),wt.push(Bt.numSpotLights),wt.push(Bt.numSpotLightMaps),wt.push(Bt.numHemiLights),wt.push(Bt.numRectAreaLights),wt.push(Bt.numDirLightShadows),wt.push(Bt.numPointLightShadows),wt.push(Bt.numSpotLightShadows),wt.push(Bt.numSpotLightShadowsWithMaps),wt.push(Bt.shadowMapType),wt.push(Bt.toneMapping),wt.push(Bt.numClippingPlanes),wt.push(Bt.numClipIntersection),wt.push(Bt.depthPacking)}function xt(wt,Bt){st.disableAll(),Bt.isWebGL2&&st.enable(0),Bt.supportsVertexTextures&&st.enable(1),Bt.instancing&&st.enable(2),Bt.instancingColor&&st.enable(3),Bt.matcap&&st.enable(4),Bt.envMap&&st.enable(5),Bt.normalMapObjectSpace&&st.enable(6),Bt.normalMapTangentSpace&&st.enable(7),Bt.clearcoat&&st.enable(8),Bt.iridescence&&st.enable(9),Bt.alphaTest&&st.enable(10),Bt.vertexColors&&st.enable(11),Bt.vertexAlphas&&st.enable(12),Bt.vertexUv1s&&st.enable(13),Bt.vertexUv2s&&st.enable(14),Bt.vertexUv3s&&st.enable(15),Bt.vertexTangents&&st.enable(16),Bt.anisotropy&&st.enable(17),wt.push(st.mask),st.disableAll(),Bt.fog&&st.enable(0),Bt.useFog&&st.enable(1),Bt.flatShading&&st.enable(2),Bt.logarithmicDepthBuffer&&st.enable(3),Bt.skinning&&st.enable(4),Bt.morphTargets&&st.enable(5),Bt.morphNormals&&st.enable(6),Bt.morphColors&&st.enable(7),Bt.premultipliedAlpha&&st.enable(8),Bt.shadowMapEnabled&&st.enable(9),Bt.useLegacyLights&&st.enable(10),Bt.doubleSided&&st.enable(11),Bt.flipSided&&st.enable(12),Bt.useDepthPacking&&st.enable(13),Bt.dithering&&st.enable(14),Bt.transmission&&st.enable(15),Bt.sheen&&st.enable(16),Bt.opaque&&st.enable(17),Bt.pointsUvs&&st.enable(18),wt.push(st.mask)}function St(wt){const Bt=gt[wt.type];let Ot;if(Bt){const Ut=ShaderLib[Bt];Ot=UniformsUtils.clone(Ut.uniforms)}else Ot=wt.uniforms;return Ot}function Tt(wt,Bt){let Ot;for(let Ut=0,Nt=lt.length;Ut<Nt;Ut++){const zt=lt[Ut];if(zt.cacheKey===Bt){Ot=zt,++Ot.usedTimes;break}}return Ot===void 0&&(Ot=new WebGLProgram(tt,Bt,wt,it),lt.push(Ot)),Ot}function Mt(wt){if(--wt.usedTimes===0){const Bt=lt.indexOf(wt);lt[Bt]=lt[lt.length-1],lt.pop(),wt.destroy()}}function bt(wt){at.remove(wt)}function Pt(){at.dispose()}return{getParameters:vt,getProgramCacheKey:mt,getUniforms:St,acquireProgram:Tt,releaseProgram:Mt,releaseShaderCache:bt,programs:lt,dispose:Pt}}function WebGLProperties(){let tt=new WeakMap;function _(it){let ot=tt.get(it);return ot===void 0&&(ot={},tt.set(it,ot)),ot}function _e(it){tt.delete(it)}function nt(it,ot,st){tt.get(it)[ot]=st}function rt(){tt=new WeakMap}return{get:_,remove:_e,update:nt,dispose:rt}}function painterSortStable(tt,_){return tt.groupOrder!==_.groupOrder?tt.groupOrder-_.groupOrder:tt.renderOrder!==_.renderOrder?tt.renderOrder-_.renderOrder:tt.material.id!==_.material.id?tt.material.id-_.material.id:tt.z!==_.z?tt.z-_.z:tt.id-_.id}function reversePainterSortStable(tt,_){return tt.groupOrder!==_.groupOrder?tt.groupOrder-_.groupOrder:tt.renderOrder!==_.renderOrder?tt.renderOrder-_.renderOrder:tt.z!==_.z?_.z-tt.z:tt.id-_.id}function WebGLRenderList(){const tt=[];let _=0;const _e=[],nt=[],rt=[];function it(){_=0,_e.length=0,nt.length=0,rt.length=0}function ot(ut,ht,pt,gt,yt,vt){let mt=tt[_];return mt===void 0?(mt={id:ut.id,object:ut,geometry:ht,material:pt,groupOrder:gt,renderOrder:ut.renderOrder,z:yt,group:vt},tt[_]=mt):(mt.id=ut.id,mt.object=ut,mt.geometry=ht,mt.material=pt,mt.groupOrder=gt,mt.renderOrder=ut.renderOrder,mt.z=yt,mt.group=vt),_++,mt}function st(ut,ht,pt,gt,yt,vt){const mt=ot(ut,ht,pt,gt,yt,vt);pt.transmission>0?nt.push(mt):pt.transparent===!0?rt.push(mt):_e.push(mt)}function at(ut,ht,pt,gt,yt,vt){const mt=ot(ut,ht,pt,gt,yt,vt);pt.transmission>0?nt.unshift(mt):pt.transparent===!0?rt.unshift(mt):_e.unshift(mt)}function lt(ut,ht){_e.length>1&&_e.sort(ut||painterSortStable),nt.length>1&&nt.sort(ht||reversePainterSortStable),rt.length>1&&rt.sort(ht||reversePainterSortStable)}function ct(){for(let ut=_,ht=tt.length;ut<ht;ut++){const pt=tt[ut];if(pt.id===null)break;pt.id=null,pt.object=null,pt.geometry=null,pt.material=null,pt.group=null}}return{opaque:_e,transmissive:nt,transparent:rt,init:it,push:st,unshift:at,finish:ct,sort:lt}}function WebGLRenderLists(){let tt=new WeakMap;function _(nt,rt){const it=tt.get(nt);let ot;return it===void 0?(ot=new WebGLRenderList,tt.set(nt,[ot])):rt>=it.length?(ot=new WebGLRenderList,it.push(ot)):ot=it[rt],ot}function _e(){tt=new WeakMap}return{get:_,dispose:_e}}function UniformsCache(){const tt={};return{get:function(_){if(tt[_.id]!==void 0)return tt[_.id];let _e;switch(_.type){case"DirectionalLight":_e={direction:new Vector3,color:new Color$1};break;case"SpotLight":_e={position:new Vector3,direction:new Vector3,color:new Color$1,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":_e={position:new Vector3,color:new Color$1,distance:0,decay:0};break;case"HemisphereLight":_e={direction:new Vector3,skyColor:new Color$1,groundColor:new Color$1};break;case"RectAreaLight":_e={color:new Color$1,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return tt[_.id]=_e,_e}}}function ShadowUniformsCache(){const tt={};return{get:function(_){if(tt[_.id]!==void 0)return tt[_.id];let _e;switch(_.type){case"DirectionalLight":_e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":_e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":_e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return tt[_.id]=_e,_e}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(tt,_){return(_.castShadow?2:0)-(tt.castShadow?2:0)+(_.map?1:0)-(tt.map?1:0)}function WebGLLights(tt,_){const _e=new UniformsCache,nt=ShadowUniformsCache(),rt={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let ct=0;ct<9;ct++)rt.probe.push(new Vector3);const it=new Vector3,ot=new Matrix4,st=new Matrix4;function at(ct,ut){let ht=0,pt=0,gt=0;for(let Ot=0;Ot<9;Ot++)rt.probe[Ot].set(0,0,0);let yt=0,vt=0,mt=0,_t=0,xt=0,St=0,Tt=0,Mt=0,bt=0,Pt=0;ct.sort(shadowCastingAndTexturingLightsFirst);const wt=ut===!0?Math.PI:1;for(let Ot=0,Ut=ct.length;Ot<Ut;Ot++){const Nt=ct[Ot],zt=Nt.color,jt=Nt.intensity,Yt=Nt.distance,qt=Nt.shadow&&Nt.shadow.map?Nt.shadow.map.texture:null;if(Nt.isAmbientLight)ht+=zt.r*jt*wt,pt+=zt.g*jt*wt,gt+=zt.b*jt*wt;else if(Nt.isLightProbe)for(let Gt=0;Gt<9;Gt++)rt.probe[Gt].addScaledVector(Nt.sh.coefficients[Gt],jt);else if(Nt.isDirectionalLight){const Gt=_e.get(Nt);if(Gt.color.copy(Nt.color).multiplyScalar(Nt.intensity*wt),Nt.castShadow){const Xt=Nt.shadow,Vt=nt.get(Nt);Vt.shadowBias=Xt.bias,Vt.shadowNormalBias=Xt.normalBias,Vt.shadowRadius=Xt.radius,Vt.shadowMapSize=Xt.mapSize,rt.directionalShadow[yt]=Vt,rt.directionalShadowMap[yt]=qt,rt.directionalShadowMatrix[yt]=Nt.shadow.matrix,St++}rt.directional[yt]=Gt,yt++}else if(Nt.isSpotLight){const Gt=_e.get(Nt);Gt.position.setFromMatrixPosition(Nt.matrixWorld),Gt.color.copy(zt).multiplyScalar(jt*wt),Gt.distance=Yt,Gt.coneCos=Math.cos(Nt.angle),Gt.penumbraCos=Math.cos(Nt.angle*(1-Nt.penumbra)),Gt.decay=Nt.decay,rt.spot[mt]=Gt;const Xt=Nt.shadow;if(Nt.map&&(rt.spotLightMap[bt]=Nt.map,bt++,Xt.updateMatrices(Nt),Nt.castShadow&&Pt++),rt.spotLightMatrix[mt]=Xt.matrix,Nt.castShadow){const Vt=nt.get(Nt);Vt.shadowBias=Xt.bias,Vt.shadowNormalBias=Xt.normalBias,Vt.shadowRadius=Xt.radius,Vt.shadowMapSize=Xt.mapSize,rt.spotShadow[mt]=Vt,rt.spotShadowMap[mt]=qt,Mt++}mt++}else if(Nt.isRectAreaLight){const Gt=_e.get(Nt);Gt.color.copy(zt).multiplyScalar(jt),Gt.halfWidth.set(Nt.width*.5,0,0),Gt.halfHeight.set(0,Nt.height*.5,0),rt.rectArea[_t]=Gt,_t++}else if(Nt.isPointLight){const Gt=_e.get(Nt);if(Gt.color.copy(Nt.color).multiplyScalar(Nt.intensity*wt),Gt.distance=Nt.distance,Gt.decay=Nt.decay,Nt.castShadow){const Xt=Nt.shadow,Vt=nt.get(Nt);Vt.shadowBias=Xt.bias,Vt.shadowNormalBias=Xt.normalBias,Vt.shadowRadius=Xt.radius,Vt.shadowMapSize=Xt.mapSize,Vt.shadowCameraNear=Xt.camera.near,Vt.shadowCameraFar=Xt.camera.far,rt.pointShadow[vt]=Vt,rt.pointShadowMap[vt]=qt,rt.pointShadowMatrix[vt]=Nt.shadow.matrix,Tt++}rt.point[vt]=Gt,vt++}else if(Nt.isHemisphereLight){const Gt=_e.get(Nt);Gt.skyColor.copy(Nt.color).multiplyScalar(jt*wt),Gt.groundColor.copy(Nt.groundColor).multiplyScalar(jt*wt),rt.hemi[xt]=Gt,xt++}}_t>0&&(_.isWebGL2||tt.has("OES_texture_float_linear")===!0?(rt.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,rt.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):tt.has("OES_texture_half_float_linear")===!0?(rt.rectAreaLTC1=UniformsLib.LTC_HALF_1,rt.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),rt.ambient[0]=ht,rt.ambient[1]=pt,rt.ambient[2]=gt;const Bt=rt.hash;(Bt.directionalLength!==yt||Bt.pointLength!==vt||Bt.spotLength!==mt||Bt.rectAreaLength!==_t||Bt.hemiLength!==xt||Bt.numDirectionalShadows!==St||Bt.numPointShadows!==Tt||Bt.numSpotShadows!==Mt||Bt.numSpotMaps!==bt)&&(rt.directional.length=yt,rt.spot.length=mt,rt.rectArea.length=_t,rt.point.length=vt,rt.hemi.length=xt,rt.directionalShadow.length=St,rt.directionalShadowMap.length=St,rt.pointShadow.length=Tt,rt.pointShadowMap.length=Tt,rt.spotShadow.length=Mt,rt.spotShadowMap.length=Mt,rt.directionalShadowMatrix.length=St,rt.pointShadowMatrix.length=Tt,rt.spotLightMatrix.length=Mt+bt-Pt,rt.spotLightMap.length=bt,rt.numSpotLightShadowsWithMaps=Pt,Bt.directionalLength=yt,Bt.pointLength=vt,Bt.spotLength=mt,Bt.rectAreaLength=_t,Bt.hemiLength=xt,Bt.numDirectionalShadows=St,Bt.numPointShadows=Tt,Bt.numSpotShadows=Mt,Bt.numSpotMaps=bt,rt.version=nextVersion++)}function lt(ct,ut){let ht=0,pt=0,gt=0,yt=0,vt=0;const mt=ut.matrixWorldInverse;for(let _t=0,xt=ct.length;_t<xt;_t++){const St=ct[_t];if(St.isDirectionalLight){const Tt=rt.directional[ht];Tt.direction.setFromMatrixPosition(St.matrixWorld),it.setFromMatrixPosition(St.target.matrixWorld),Tt.direction.sub(it),Tt.direction.transformDirection(mt),ht++}else if(St.isSpotLight){const Tt=rt.spot[gt];Tt.position.setFromMatrixPosition(St.matrixWorld),Tt.position.applyMatrix4(mt),Tt.direction.setFromMatrixPosition(St.matrixWorld),it.setFromMatrixPosition(St.target.matrixWorld),Tt.direction.sub(it),Tt.direction.transformDirection(mt),gt++}else if(St.isRectAreaLight){const Tt=rt.rectArea[yt];Tt.position.setFromMatrixPosition(St.matrixWorld),Tt.position.applyMatrix4(mt),st.identity(),ot.copy(St.matrixWorld),ot.premultiply(mt),st.extractRotation(ot),Tt.halfWidth.set(St.width*.5,0,0),Tt.halfHeight.set(0,St.height*.5,0),Tt.halfWidth.applyMatrix4(st),Tt.halfHeight.applyMatrix4(st),yt++}else if(St.isPointLight){const Tt=rt.point[pt];Tt.position.setFromMatrixPosition(St.matrixWorld),Tt.position.applyMatrix4(mt),pt++}else if(St.isHemisphereLight){const Tt=rt.hemi[vt];Tt.direction.setFromMatrixPosition(St.matrixWorld),Tt.direction.transformDirection(mt),vt++}}}return{setup:at,setupView:lt,state:rt}}function WebGLRenderState(tt,_){const _e=new WebGLLights(tt,_),nt=[],rt=[];function it(){nt.length=0,rt.length=0}function ot(ut){nt.push(ut)}function st(ut){rt.push(ut)}function at(ut){_e.setup(nt,ut)}function lt(ut){_e.setupView(nt,ut)}return{init:it,state:{lightsArray:nt,shadowsArray:rt,lights:_e},setupLights:at,setupLightsView:lt,pushLight:ot,pushShadow:st}}function WebGLRenderStates(tt,_){let _e=new WeakMap;function nt(it,ot=0){const st=_e.get(it);let at;return st===void 0?(at=new WebGLRenderState(tt,_),_e.set(it,[at])):ot>=st.length?(at=new WebGLRenderState(tt,_),st.push(at)):at=st[ot],at}function rt(){_e=new WeakMap}return{get:nt,dispose:rt}}class MeshDepthMaterial extends Material{constructor(_){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(_)}copy(_){return super.copy(_),this.depthPacking=_.depthPacking,this.map=_.map,this.alphaMap=_.alphaMap,this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(_){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(_)}copy(_){return super.copy(_),this.map=_.map,this.alphaMap=_.alphaMap,this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(tt,_,_e){let nt=new Frustum;const rt=new Vector2,it=new Vector2,ot=new Vector4,st=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),at=new MeshDistanceMaterial,lt={},ct=_e.maxTextureSize,ut={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},ht=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),pt=ht.clone();pt.defines.HORIZONTAL_PASS=1;const gt=new BufferGeometry;gt.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const yt=new Mesh(gt,ht),vt=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let mt=this.type;this.render=function(Tt,Mt,bt){if(vt.enabled===!1||vt.autoUpdate===!1&&vt.needsUpdate===!1||Tt.length===0)return;const Pt=tt.getRenderTarget(),wt=tt.getActiveCubeFace(),Bt=tt.getActiveMipmapLevel(),Ot=tt.state;Ot.setBlending(NoBlending),Ot.buffers.color.setClear(1,1,1,1),Ot.buffers.depth.setTest(!0),Ot.setScissorTest(!1);const Ut=mt!==VSMShadowMap&&this.type===VSMShadowMap,Nt=mt===VSMShadowMap&&this.type!==VSMShadowMap;for(let zt=0,jt=Tt.length;zt<jt;zt++){const Yt=Tt[zt],qt=Yt.shadow;if(qt===void 0){console.warn("THREE.WebGLShadowMap:",Yt,"has no shadow.");continue}if(qt.autoUpdate===!1&&qt.needsUpdate===!1)continue;rt.copy(qt.mapSize);const Gt=qt.getFrameExtents();if(rt.multiply(Gt),it.copy(qt.mapSize),(rt.x>ct||rt.y>ct)&&(rt.x>ct&&(it.x=Math.floor(ct/Gt.x),rt.x=it.x*Gt.x,qt.mapSize.x=it.x),rt.y>ct&&(it.y=Math.floor(ct/Gt.y),rt.y=it.y*Gt.y,qt.mapSize.y=it.y)),qt.map===null||Ut===!0||Nt===!0){const Vt=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};qt.map!==null&&qt.map.dispose(),qt.map=new WebGLRenderTarget(rt.x,rt.y,Vt),qt.map.texture.name=Yt.name+".shadowMap",qt.camera.updateProjectionMatrix()}tt.setRenderTarget(qt.map),tt.clear();const Xt=qt.getViewportCount();for(let Vt=0;Vt<Xt;Vt++){const Wt=qt.getViewport(Vt);ot.set(it.x*Wt.x,it.y*Wt.y,it.x*Wt.z,it.y*Wt.w),Ot.viewport(ot),qt.updateMatrices(Yt,Vt),nt=qt.getFrustum(),St(Mt,bt,qt.camera,Yt,this.type)}qt.isPointLightShadow!==!0&&this.type===VSMShadowMap&&_t(qt,bt),qt.needsUpdate=!1}mt=this.type,vt.needsUpdate=!1,tt.setRenderTarget(Pt,wt,Bt)};function _t(Tt,Mt){const bt=_.update(yt);ht.defines.VSM_SAMPLES!==Tt.blurSamples&&(ht.defines.VSM_SAMPLES=Tt.blurSamples,pt.defines.VSM_SAMPLES=Tt.blurSamples,ht.needsUpdate=!0,pt.needsUpdate=!0),Tt.mapPass===null&&(Tt.mapPass=new WebGLRenderTarget(rt.x,rt.y)),ht.uniforms.shadow_pass.value=Tt.map.texture,ht.uniforms.resolution.value=Tt.mapSize,ht.uniforms.radius.value=Tt.radius,tt.setRenderTarget(Tt.mapPass),tt.clear(),tt.renderBufferDirect(Mt,null,bt,ht,yt,null),pt.uniforms.shadow_pass.value=Tt.mapPass.texture,pt.uniforms.resolution.value=Tt.mapSize,pt.uniforms.radius.value=Tt.radius,tt.setRenderTarget(Tt.map),tt.clear(),tt.renderBufferDirect(Mt,null,bt,pt,yt,null)}function xt(Tt,Mt,bt,Pt){let wt=null;const Bt=bt.isPointLight===!0?Tt.customDistanceMaterial:Tt.customDepthMaterial;if(Bt!==void 0)wt=Bt;else if(wt=bt.isPointLight===!0?at:st,tt.localClippingEnabled&&Mt.clipShadows===!0&&Array.isArray(Mt.clippingPlanes)&&Mt.clippingPlanes.length!==0||Mt.displacementMap&&Mt.displacementScale!==0||Mt.alphaMap&&Mt.alphaTest>0||Mt.map&&Mt.alphaTest>0){const Ot=wt.uuid,Ut=Mt.uuid;let Nt=lt[Ot];Nt===void 0&&(Nt={},lt[Ot]=Nt);let zt=Nt[Ut];zt===void 0&&(zt=wt.clone(),Nt[Ut]=zt),wt=zt}if(wt.visible=Mt.visible,wt.wireframe=Mt.wireframe,Pt===VSMShadowMap?wt.side=Mt.shadowSide!==null?Mt.shadowSide:Mt.side:wt.side=Mt.shadowSide!==null?Mt.shadowSide:ut[Mt.side],wt.alphaMap=Mt.alphaMap,wt.alphaTest=Mt.alphaTest,wt.map=Mt.map,wt.clipShadows=Mt.clipShadows,wt.clippingPlanes=Mt.clippingPlanes,wt.clipIntersection=Mt.clipIntersection,wt.displacementMap=Mt.displacementMap,wt.displacementScale=Mt.displacementScale,wt.displacementBias=Mt.displacementBias,wt.wireframeLinewidth=Mt.wireframeLinewidth,wt.linewidth=Mt.linewidth,bt.isPointLight===!0&&wt.isMeshDistanceMaterial===!0){const Ot=tt.properties.get(wt);Ot.light=bt}return wt}function St(Tt,Mt,bt,Pt,wt){if(Tt.visible===!1)return;if(Tt.layers.test(Mt.layers)&&(Tt.isMesh||Tt.isLine||Tt.isPoints)&&(Tt.castShadow||Tt.receiveShadow&&wt===VSMShadowMap)&&(!Tt.frustumCulled||nt.intersectsObject(Tt))){Tt.modelViewMatrix.multiplyMatrices(bt.matrixWorldInverse,Tt.matrixWorld);const Ut=_.update(Tt),Nt=Tt.material;if(Array.isArray(Nt)){const zt=Ut.groups;for(let jt=0,Yt=zt.length;jt<Yt;jt++){const qt=zt[jt],Gt=Nt[qt.materialIndex];if(Gt&&Gt.visible){const Xt=xt(Tt,Gt,Pt,wt);tt.renderBufferDirect(bt,null,Ut,Xt,Tt,qt)}}}else if(Nt.visible){const zt=xt(Tt,Nt,Pt,wt);tt.renderBufferDirect(bt,null,Ut,zt,Tt,null)}}const Ot=Tt.children;for(let Ut=0,Nt=Ot.length;Ut<Nt;Ut++)St(Ot[Ut],Mt,bt,Pt,wt)}}function WebGLState(tt,_,_e){const nt=_e.isWebGL2;function rt(){let tn=!1;const fn=new Vector4;let mn=null;const Wn=new Vector4(0,0,0,0);return{setMask:function(Zn){mn!==Zn&&!tn&&(tt.colorMask(Zn,Zn,Zn,Zn),mn=Zn)},setLocked:function(Zn){tn=Zn},setClear:function(Zn,mr,xr,Ar,Br){Br===!0&&(Zn*=Ar,mr*=Ar,xr*=Ar),fn.set(Zn,mr,xr,Ar),Wn.equals(fn)===!1&&(tt.clearColor(Zn,mr,xr,Ar),Wn.copy(fn))},reset:function(){tn=!1,mn=null,Wn.set(-1,0,0,0)}}}function it(){let tn=!1,fn=null,mn=null,Wn=null;return{setTest:function(Zn){Zn?an(tt.DEPTH_TEST):dn(tt.DEPTH_TEST)},setMask:function(Zn){fn!==Zn&&!tn&&(tt.depthMask(Zn),fn=Zn)},setFunc:function(Zn){if(mn!==Zn){switch(Zn){case NeverDepth:tt.depthFunc(tt.NEVER);break;case AlwaysDepth:tt.depthFunc(tt.ALWAYS);break;case LessDepth:tt.depthFunc(tt.LESS);break;case LessEqualDepth:tt.depthFunc(tt.LEQUAL);break;case EqualDepth:tt.depthFunc(tt.EQUAL);break;case GreaterEqualDepth:tt.depthFunc(tt.GEQUAL);break;case GreaterDepth:tt.depthFunc(tt.GREATER);break;case NotEqualDepth:tt.depthFunc(tt.NOTEQUAL);break;default:tt.depthFunc(tt.LEQUAL)}mn=Zn}},setLocked:function(Zn){tn=Zn},setClear:function(Zn){Wn!==Zn&&(tt.clearDepth(Zn),Wn=Zn)},reset:function(){tn=!1,fn=null,mn=null,Wn=null}}}function ot(){let tn=!1,fn=null,mn=null,Wn=null,Zn=null,mr=null,xr=null,Ar=null,Br=null;return{setTest:function(Dr){tn||(Dr?an(tt.STENCIL_TEST):dn(tt.STENCIL_TEST))},setMask:function(Dr){fn!==Dr&&!tn&&(tt.stencilMask(Dr),fn=Dr)},setFunc:function(Dr,Mr,_r){(mn!==Dr||Wn!==Mr||Zn!==_r)&&(tt.stencilFunc(Dr,Mr,_r),mn=Dr,Wn=Mr,Zn=_r)},setOp:function(Dr,Mr,_r){(mr!==Dr||xr!==Mr||Ar!==_r)&&(tt.stencilOp(Dr,Mr,_r),mr=Dr,xr=Mr,Ar=_r)},setLocked:function(Dr){tn=Dr},setClear:function(Dr){Br!==Dr&&(tt.clearStencil(Dr),Br=Dr)},reset:function(){tn=!1,fn=null,mn=null,Wn=null,Zn=null,mr=null,xr=null,Ar=null,Br=null}}}const st=new rt,at=new it,lt=new ot,ct=new WeakMap,ut=new WeakMap;let ht={},pt={},gt=new WeakMap,yt=[],vt=null,mt=!1,_t=null,xt=null,St=null,Tt=null,Mt=null,bt=null,Pt=null,wt=!1,Bt=null,Ot=null,Ut=null,Nt=null,zt=null;const jt=tt.getParameter(tt.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Yt=!1,qt=0;const Gt=tt.getParameter(tt.VERSION);Gt.indexOf("WebGL")!==-1?(qt=parseFloat(/^WebGL (\d)/.exec(Gt)[1]),Yt=qt>=1):Gt.indexOf("OpenGL ES")!==-1&&(qt=parseFloat(/^OpenGL ES (\d)/.exec(Gt)[1]),Yt=qt>=2);let Xt=null,Vt={};const Wt=tt.getParameter(tt.SCISSOR_BOX),$t=tt.getParameter(tt.VIEWPORT),nn=new Vector4().fromArray(Wt),en=new Vector4().fromArray($t);function sn(tn,fn,mn,Wn){const Zn=new Uint8Array(4),mr=tt.createTexture();tt.bindTexture(tn,mr),tt.texParameteri(tn,tt.TEXTURE_MIN_FILTER,tt.NEAREST),tt.texParameteri(tn,tt.TEXTURE_MAG_FILTER,tt.NEAREST);for(let xr=0;xr<mn;xr++)nt&&(tn===tt.TEXTURE_3D||tn===tt.TEXTURE_2D_ARRAY)?tt.texImage3D(fn,0,tt.RGBA,1,1,Wn,0,tt.RGBA,tt.UNSIGNED_BYTE,Zn):tt.texImage2D(fn+xr,0,tt.RGBA,1,1,0,tt.RGBA,tt.UNSIGNED_BYTE,Zn);return mr}const rn={};rn[tt.TEXTURE_2D]=sn(tt.TEXTURE_2D,tt.TEXTURE_2D,1),rn[tt.TEXTURE_CUBE_MAP]=sn(tt.TEXTURE_CUBE_MAP,tt.TEXTURE_CUBE_MAP_POSITIVE_X,6),nt&&(rn[tt.TEXTURE_2D_ARRAY]=sn(tt.TEXTURE_2D_ARRAY,tt.TEXTURE_2D_ARRAY,1,1),rn[tt.TEXTURE_3D]=sn(tt.TEXTURE_3D,tt.TEXTURE_3D,1,1)),st.setClear(0,0,0,1),at.setClear(1),lt.setClear(0),an(tt.DEPTH_TEST),at.setFunc(LessEqualDepth),pn(!1),Hn(CullFaceBack),an(tt.CULL_FACE),hn(NoBlending);function an(tn){ht[tn]!==!0&&(tt.enable(tn),ht[tn]=!0)}function dn(tn){ht[tn]!==!1&&(tt.disable(tn),ht[tn]=!1)}function Bn(tn,fn){return pt[tn]!==fn?(tt.bindFramebuffer(tn,fn),pt[tn]=fn,nt&&(tn===tt.DRAW_FRAMEBUFFER&&(pt[tt.FRAMEBUFFER]=fn),tn===tt.FRAMEBUFFER&&(pt[tt.DRAW_FRAMEBUFFER]=fn)),!0):!1}function Nn(tn,fn){let mn=yt,Wn=!1;if(tn)if(mn=gt.get(fn),mn===void 0&&(mn=[],gt.set(fn,mn)),tn.isWebGLMultipleRenderTargets){const Zn=tn.texture;if(mn.length!==Zn.length||mn[0]!==tt.COLOR_ATTACHMENT0){for(let mr=0,xr=Zn.length;mr<xr;mr++)mn[mr]=tt.COLOR_ATTACHMENT0+mr;mn.length=Zn.length,Wn=!0}}else mn[0]!==tt.COLOR_ATTACHMENT0&&(mn[0]=tt.COLOR_ATTACHMENT0,Wn=!0);else mn[0]!==tt.BACK&&(mn[0]=tt.BACK,Wn=!0);Wn&&(_e.isWebGL2?tt.drawBuffers(mn):_.get("WEBGL_draw_buffers").drawBuffersWEBGL(mn))}function gn(tn){return vt!==tn?(tt.useProgram(tn),vt=tn,!0):!1}const Ht={[AddEquation]:tt.FUNC_ADD,[SubtractEquation]:tt.FUNC_SUBTRACT,[ReverseSubtractEquation]:tt.FUNC_REVERSE_SUBTRACT};if(nt)Ht[MinEquation]=tt.MIN,Ht[MaxEquation]=tt.MAX;else{const tn=_.get("EXT_blend_minmax");tn!==null&&(Ht[MinEquation]=tn.MIN_EXT,Ht[MaxEquation]=tn.MAX_EXT)}const xn={[ZeroFactor]:tt.ZERO,[OneFactor]:tt.ONE,[SrcColorFactor]:tt.SRC_COLOR,[SrcAlphaFactor]:tt.SRC_ALPHA,[SrcAlphaSaturateFactor]:tt.SRC_ALPHA_SATURATE,[DstColorFactor]:tt.DST_COLOR,[DstAlphaFactor]:tt.DST_ALPHA,[OneMinusSrcColorFactor]:tt.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:tt.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:tt.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:tt.ONE_MINUS_DST_ALPHA};function hn(tn,fn,mn,Wn,Zn,mr,xr,Ar){if(tn===NoBlending){mt===!0&&(dn(tt.BLEND),mt=!1);return}if(mt===!1&&(an(tt.BLEND),mt=!0),tn!==CustomBlending){if(tn!==_t||Ar!==wt){if((xt!==AddEquation||Mt!==AddEquation)&&(tt.blendEquation(tt.FUNC_ADD),xt=AddEquation,Mt=AddEquation),Ar)switch(tn){case NormalBlending:tt.blendFuncSeparate(tt.ONE,tt.ONE_MINUS_SRC_ALPHA,tt.ONE,tt.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:tt.blendFunc(tt.ONE,tt.ONE);break;case SubtractiveBlending:tt.blendFuncSeparate(tt.ZERO,tt.ONE_MINUS_SRC_COLOR,tt.ZERO,tt.ONE);break;case MultiplyBlending:tt.blendFuncSeparate(tt.ZERO,tt.SRC_COLOR,tt.ZERO,tt.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",tn);break}else switch(tn){case NormalBlending:tt.blendFuncSeparate(tt.SRC_ALPHA,tt.ONE_MINUS_SRC_ALPHA,tt.ONE,tt.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:tt.blendFunc(tt.SRC_ALPHA,tt.ONE);break;case SubtractiveBlending:tt.blendFuncSeparate(tt.ZERO,tt.ONE_MINUS_SRC_COLOR,tt.ZERO,tt.ONE);break;case MultiplyBlending:tt.blendFunc(tt.ZERO,tt.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",tn);break}St=null,Tt=null,bt=null,Pt=null,_t=tn,wt=Ar}return}Zn=Zn||fn,mr=mr||mn,xr=xr||Wn,(fn!==xt||Zn!==Mt)&&(tt.blendEquationSeparate(Ht[fn],Ht[Zn]),xt=fn,Mt=Zn),(mn!==St||Wn!==Tt||mr!==bt||xr!==Pt)&&(tt.blendFuncSeparate(xn[mn],xn[Wn],xn[mr],xn[xr]),St=mn,Tt=Wn,bt=mr,Pt=xr),_t=tn,wt=!1}function vn(tn,fn){tn.side===DoubleSide?dn(tt.CULL_FACE):an(tt.CULL_FACE);let mn=tn.side===BackSide;fn&&(mn=!mn),pn(mn),tn.blending===NormalBlending&&tn.transparent===!1?hn(NoBlending):hn(tn.blending,tn.blendEquation,tn.blendSrc,tn.blendDst,tn.blendEquationAlpha,tn.blendSrcAlpha,tn.blendDstAlpha,tn.premultipliedAlpha),at.setFunc(tn.depthFunc),at.setTest(tn.depthTest),at.setMask(tn.depthWrite),st.setMask(tn.colorWrite);const Wn=tn.stencilWrite;lt.setTest(Wn),Wn&&(lt.setMask(tn.stencilWriteMask),lt.setFunc(tn.stencilFunc,tn.stencilRef,tn.stencilFuncMask),lt.setOp(tn.stencilFail,tn.stencilZFail,tn.stencilZPass)),Ln(tn.polygonOffset,tn.polygonOffsetFactor,tn.polygonOffsetUnits),tn.alphaToCoverage===!0?an(tt.SAMPLE_ALPHA_TO_COVERAGE):dn(tt.SAMPLE_ALPHA_TO_COVERAGE)}function pn(tn){Bt!==tn&&(tn?tt.frontFace(tt.CW):tt.frontFace(tt.CCW),Bt=tn)}function Hn(tn){tn!==CullFaceNone?(an(tt.CULL_FACE),tn!==Ot&&(tn===CullFaceBack?tt.cullFace(tt.BACK):tn===CullFaceFront?tt.cullFace(tt.FRONT):tt.cullFace(tt.FRONT_AND_BACK))):dn(tt.CULL_FACE),Ot=tn}function yn(tn){tn!==Ut&&(Yt&&tt.lineWidth(tn),Ut=tn)}function Ln(tn,fn,mn){tn?(an(tt.POLYGON_OFFSET_FILL),(Nt!==fn||zt!==mn)&&(tt.polygonOffset(fn,mn),Nt=fn,zt=mn)):dn(tt.POLYGON_OFFSET_FILL)}function On(tn){tn?an(tt.SCISSOR_TEST):dn(tt.SCISSOR_TEST)}function Sn(tn){tn===void 0&&(tn=tt.TEXTURE0+jt-1),Xt!==tn&&(tt.activeTexture(tn),Xt=tn)}function jn(tn,fn,mn){mn===void 0&&(Xt===null?mn=tt.TEXTURE0+jt-1:mn=Xt);let Wn=Vt[mn];Wn===void 0&&(Wn={type:void 0,texture:void 0},Vt[mn]=Wn),(Wn.type!==tn||Wn.texture!==fn)&&(Xt!==mn&&(tt.activeTexture(mn),Xt=mn),tt.bindTexture(tn,fn||rn[tn]),Wn.type=tn,Wn.texture=fn)}function Ft(){const tn=Vt[Xt];tn!==void 0&&tn.type!==void 0&&(tt.bindTexture(tn.type,null),tn.type=void 0,tn.texture=void 0)}function Dt(){try{tt.compressedTexImage2D.apply(tt,arguments)}catch(tn){console.error("THREE.WebGLState:",tn)}}function on(){try{tt.compressedTexImage3D.apply(tt,arguments)}catch(tn){console.error("THREE.WebGLState:",tn)}}function bn(){try{tt.texSubImage2D.apply(tt,arguments)}catch(tn){console.error("THREE.WebGLState:",tn)}}function Mn(){try{tt.texSubImage3D.apply(tt,arguments)}catch(tn){console.error("THREE.WebGLState:",tn)}}function wn(){try{tt.compressedTexSubImage2D.apply(tt,arguments)}catch(tn){console.error("THREE.WebGLState:",tn)}}function $n(){try{tt.compressedTexSubImage3D.apply(tt,arguments)}catch(tn){console.error("THREE.WebGLState:",tn)}}function Gn(){try{tt.texStorage2D.apply(tt,arguments)}catch(tn){console.error("THREE.WebGLState:",tn)}}function En(){try{tt.texStorage3D.apply(tt,arguments)}catch(tn){console.error("THREE.WebGLState:",tn)}}function zn(){try{tt.texImage2D.apply(tt,arguments)}catch(tn){console.error("THREE.WebGLState:",tn)}}function Vn(){try{tt.texImage3D.apply(tt,arguments)}catch(tn){console.error("THREE.WebGLState:",tn)}}function Un(tn){nn.equals(tn)===!1&&(tt.scissor(tn.x,tn.y,tn.z,tn.w),nn.copy(tn))}function Fn(tn){en.equals(tn)===!1&&(tt.viewport(tn.x,tn.y,tn.z,tn.w),en.copy(tn))}function kn(tn,fn){let mn=ut.get(fn);mn===void 0&&(mn=new WeakMap,ut.set(fn,mn));let Wn=mn.get(tn);Wn===void 0&&(Wn=tt.getUniformBlockIndex(fn,tn.name),mn.set(tn,Wn))}function Yn(tn,fn){const Wn=ut.get(fn).get(tn);ct.get(fn)!==Wn&&(tt.uniformBlockBinding(fn,Wn,tn.__bindingPointIndex),ct.set(fn,Wn))}function nr(){tt.disable(tt.BLEND),tt.disable(tt.CULL_FACE),tt.disable(tt.DEPTH_TEST),tt.disable(tt.POLYGON_OFFSET_FILL),tt.disable(tt.SCISSOR_TEST),tt.disable(tt.STENCIL_TEST),tt.disable(tt.SAMPLE_ALPHA_TO_COVERAGE),tt.blendEquation(tt.FUNC_ADD),tt.blendFunc(tt.ONE,tt.ZERO),tt.blendFuncSeparate(tt.ONE,tt.ZERO,tt.ONE,tt.ZERO),tt.colorMask(!0,!0,!0,!0),tt.clearColor(0,0,0,0),tt.depthMask(!0),tt.depthFunc(tt.LESS),tt.clearDepth(1),tt.stencilMask(4294967295),tt.stencilFunc(tt.ALWAYS,0,4294967295),tt.stencilOp(tt.KEEP,tt.KEEP,tt.KEEP),tt.clearStencil(0),tt.cullFace(tt.BACK),tt.frontFace(tt.CCW),tt.polygonOffset(0,0),tt.activeTexture(tt.TEXTURE0),tt.bindFramebuffer(tt.FRAMEBUFFER,null),nt===!0&&(tt.bindFramebuffer(tt.DRAW_FRAMEBUFFER,null),tt.bindFramebuffer(tt.READ_FRAMEBUFFER,null)),tt.useProgram(null),tt.lineWidth(1),tt.scissor(0,0,tt.canvas.width,tt.canvas.height),tt.viewport(0,0,tt.canvas.width,tt.canvas.height),ht={},Xt=null,Vt={},pt={},gt=new WeakMap,yt=[],vt=null,mt=!1,_t=null,xt=null,St=null,Tt=null,Mt=null,bt=null,Pt=null,wt=!1,Bt=null,Ot=null,Ut=null,Nt=null,zt=null,nn.set(0,0,tt.canvas.width,tt.canvas.height),en.set(0,0,tt.canvas.width,tt.canvas.height),st.reset(),at.reset(),lt.reset()}return{buffers:{color:st,depth:at,stencil:lt},enable:an,disable:dn,bindFramebuffer:Bn,drawBuffers:Nn,useProgram:gn,setBlending:hn,setMaterial:vn,setFlipSided:pn,setCullFace:Hn,setLineWidth:yn,setPolygonOffset:Ln,setScissorTest:On,activeTexture:Sn,bindTexture:jn,unbindTexture:Ft,compressedTexImage2D:Dt,compressedTexImage3D:on,texImage2D:zn,texImage3D:Vn,updateUBOMapping:kn,uniformBlockBinding:Yn,texStorage2D:Gn,texStorage3D:En,texSubImage2D:bn,texSubImage3D:Mn,compressedTexSubImage2D:wn,compressedTexSubImage3D:$n,scissor:Un,viewport:Fn,reset:nr}}function WebGLTextures(tt,_,_e,nt,rt,it,ot){const st=rt.isWebGL2,at=rt.maxTextures,lt=rt.maxCubemapSize,ct=rt.maxTextureSize,ut=rt.maxSamples,ht=_.has("WEBGL_multisampled_render_to_texture")?_.get("WEBGL_multisampled_render_to_texture"):null,pt=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),gt=new WeakMap;let yt;const vt=new WeakMap;let mt=!1;try{mt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _t(Ft,Dt){return mt?new OffscreenCanvas(Ft,Dt):createElementNS("canvas")}function xt(Ft,Dt,on,bn){let Mn=1;if((Ft.width>bn||Ft.height>bn)&&(Mn=bn/Math.max(Ft.width,Ft.height)),Mn<1||Dt===!0)if(typeof HTMLImageElement<"u"&&Ft instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ft instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ft instanceof ImageBitmap){const wn=Dt?floorPowerOfTwo:Math.floor,$n=wn(Mn*Ft.width),Gn=wn(Mn*Ft.height);yt===void 0&&(yt=_t($n,Gn));const En=on?_t($n,Gn):yt;return En.width=$n,En.height=Gn,En.getContext("2d").drawImage(Ft,0,0,$n,Gn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ft.width+"x"+Ft.height+") to ("+$n+"x"+Gn+")."),En}else return"data"in Ft&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ft.width+"x"+Ft.height+")."),Ft;return Ft}function St(Ft){return isPowerOfTwo(Ft.width)&&isPowerOfTwo(Ft.height)}function Tt(Ft){return st?!1:Ft.wrapS!==ClampToEdgeWrapping||Ft.wrapT!==ClampToEdgeWrapping||Ft.minFilter!==NearestFilter&&Ft.minFilter!==LinearFilter}function Mt(Ft,Dt){return Ft.generateMipmaps&&Dt&&Ft.minFilter!==NearestFilter&&Ft.minFilter!==LinearFilter}function bt(Ft){tt.generateMipmap(Ft)}function Pt(Ft,Dt,on,bn,Mn=!1){if(st===!1)return Dt;if(Ft!==null){if(tt[Ft]!==void 0)return tt[Ft];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ft+"'")}let wn=Dt;return Dt===tt.RED&&(on===tt.FLOAT&&(wn=tt.R32F),on===tt.HALF_FLOAT&&(wn=tt.R16F),on===tt.UNSIGNED_BYTE&&(wn=tt.R8)),Dt===tt.RG&&(on===tt.FLOAT&&(wn=tt.RG32F),on===tt.HALF_FLOAT&&(wn=tt.RG16F),on===tt.UNSIGNED_BYTE&&(wn=tt.RG8)),Dt===tt.RGBA&&(on===tt.FLOAT&&(wn=tt.RGBA32F),on===tt.HALF_FLOAT&&(wn=tt.RGBA16F),on===tt.UNSIGNED_BYTE&&(wn=bn===SRGBColorSpace&&Mn===!1?tt.SRGB8_ALPHA8:tt.RGBA8),on===tt.UNSIGNED_SHORT_4_4_4_4&&(wn=tt.RGBA4),on===tt.UNSIGNED_SHORT_5_5_5_1&&(wn=tt.RGB5_A1)),(wn===tt.R16F||wn===tt.R32F||wn===tt.RG16F||wn===tt.RG32F||wn===tt.RGBA16F||wn===tt.RGBA32F)&&_.get("EXT_color_buffer_float"),wn}function wt(Ft,Dt,on){return Mt(Ft,on)===!0||Ft.isFramebufferTexture&&Ft.minFilter!==NearestFilter&&Ft.minFilter!==LinearFilter?Math.log2(Math.max(Dt.width,Dt.height))+1:Ft.mipmaps!==void 0&&Ft.mipmaps.length>0?Ft.mipmaps.length:Ft.isCompressedTexture&&Array.isArray(Ft.image)?Dt.mipmaps.length:1}function Bt(Ft){return Ft===NearestFilter||Ft===NearestMipmapNearestFilter||Ft===NearestMipmapLinearFilter?tt.NEAREST:tt.LINEAR}function Ot(Ft){const Dt=Ft.target;Dt.removeEventListener("dispose",Ot),Nt(Dt),Dt.isVideoTexture&&gt.delete(Dt)}function Ut(Ft){const Dt=Ft.target;Dt.removeEventListener("dispose",Ut),jt(Dt)}function Nt(Ft){const Dt=nt.get(Ft);if(Dt.__webglInit===void 0)return;const on=Ft.source,bn=vt.get(on);if(bn){const Mn=bn[Dt.__cacheKey];Mn.usedTimes--,Mn.usedTimes===0&&zt(Ft),Object.keys(bn).length===0&&vt.delete(on)}nt.remove(Ft)}function zt(Ft){const Dt=nt.get(Ft);tt.deleteTexture(Dt.__webglTexture);const on=Ft.source,bn=vt.get(on);delete bn[Dt.__cacheKey],ot.memory.textures--}function jt(Ft){const Dt=Ft.texture,on=nt.get(Ft),bn=nt.get(Dt);if(bn.__webglTexture!==void 0&&(tt.deleteTexture(bn.__webglTexture),ot.memory.textures--),Ft.depthTexture&&Ft.depthTexture.dispose(),Ft.isWebGLCubeRenderTarget)for(let Mn=0;Mn<6;Mn++)tt.deleteFramebuffer(on.__webglFramebuffer[Mn]),on.__webglDepthbuffer&&tt.deleteRenderbuffer(on.__webglDepthbuffer[Mn]);else{if(tt.deleteFramebuffer(on.__webglFramebuffer),on.__webglDepthbuffer&&tt.deleteRenderbuffer(on.__webglDepthbuffer),on.__webglMultisampledFramebuffer&&tt.deleteFramebuffer(on.__webglMultisampledFramebuffer),on.__webglColorRenderbuffer)for(let Mn=0;Mn<on.__webglColorRenderbuffer.length;Mn++)on.__webglColorRenderbuffer[Mn]&&tt.deleteRenderbuffer(on.__webglColorRenderbuffer[Mn]);on.__webglDepthRenderbuffer&&tt.deleteRenderbuffer(on.__webglDepthRenderbuffer)}if(Ft.isWebGLMultipleRenderTargets)for(let Mn=0,wn=Dt.length;Mn<wn;Mn++){const $n=nt.get(Dt[Mn]);$n.__webglTexture&&(tt.deleteTexture($n.__webglTexture),ot.memory.textures--),nt.remove(Dt[Mn])}nt.remove(Dt),nt.remove(Ft)}let Yt=0;function qt(){Yt=0}function Gt(){const Ft=Yt;return Ft>=at&&console.warn("THREE.WebGLTextures: Trying to use "+Ft+" texture units while this GPU supports only "+at),Yt+=1,Ft}function Xt(Ft){const Dt=[];return Dt.push(Ft.wrapS),Dt.push(Ft.wrapT),Dt.push(Ft.wrapR||0),Dt.push(Ft.magFilter),Dt.push(Ft.minFilter),Dt.push(Ft.anisotropy),Dt.push(Ft.internalFormat),Dt.push(Ft.format),Dt.push(Ft.type),Dt.push(Ft.generateMipmaps),Dt.push(Ft.premultiplyAlpha),Dt.push(Ft.flipY),Dt.push(Ft.unpackAlignment),Dt.push(Ft.colorSpace),Dt.join()}function Vt(Ft,Dt){const on=nt.get(Ft);if(Ft.isVideoTexture&&Sn(Ft),Ft.isRenderTargetTexture===!1&&Ft.version>0&&on.__version!==Ft.version){const bn=Ft.image;if(bn===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(bn.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Bn(on,Ft,Dt);return}}_e.bindTexture(tt.TEXTURE_2D,on.__webglTexture,tt.TEXTURE0+Dt)}function Wt(Ft,Dt){const on=nt.get(Ft);if(Ft.version>0&&on.__version!==Ft.version){Bn(on,Ft,Dt);return}_e.bindTexture(tt.TEXTURE_2D_ARRAY,on.__webglTexture,tt.TEXTURE0+Dt)}function $t(Ft,Dt){const on=nt.get(Ft);if(Ft.version>0&&on.__version!==Ft.version){Bn(on,Ft,Dt);return}_e.bindTexture(tt.TEXTURE_3D,on.__webglTexture,tt.TEXTURE0+Dt)}function nn(Ft,Dt){const on=nt.get(Ft);if(Ft.version>0&&on.__version!==Ft.version){Nn(on,Ft,Dt);return}_e.bindTexture(tt.TEXTURE_CUBE_MAP,on.__webglTexture,tt.TEXTURE0+Dt)}const en={[RepeatWrapping]:tt.REPEAT,[ClampToEdgeWrapping]:tt.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:tt.MIRRORED_REPEAT},sn={[NearestFilter]:tt.NEAREST,[NearestMipmapNearestFilter]:tt.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:tt.NEAREST_MIPMAP_LINEAR,[LinearFilter]:tt.LINEAR,[LinearMipmapNearestFilter]:tt.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:tt.LINEAR_MIPMAP_LINEAR},rn={[NeverCompare]:tt.NEVER,[AlwaysCompare]:tt.ALWAYS,[LessCompare]:tt.LESS,[LessEqualCompare]:tt.LEQUAL,[EqualCompare]:tt.EQUAL,[GreaterEqualCompare]:tt.GEQUAL,[GreaterCompare]:tt.GREATER,[NotEqualCompare]:tt.NOTEQUAL};function an(Ft,Dt,on){if(on?(tt.texParameteri(Ft,tt.TEXTURE_WRAP_S,en[Dt.wrapS]),tt.texParameteri(Ft,tt.TEXTURE_WRAP_T,en[Dt.wrapT]),(Ft===tt.TEXTURE_3D||Ft===tt.TEXTURE_2D_ARRAY)&&tt.texParameteri(Ft,tt.TEXTURE_WRAP_R,en[Dt.wrapR]),tt.texParameteri(Ft,tt.TEXTURE_MAG_FILTER,sn[Dt.magFilter]),tt.texParameteri(Ft,tt.TEXTURE_MIN_FILTER,sn[Dt.minFilter])):(tt.texParameteri(Ft,tt.TEXTURE_WRAP_S,tt.CLAMP_TO_EDGE),tt.texParameteri(Ft,tt.TEXTURE_WRAP_T,tt.CLAMP_TO_EDGE),(Ft===tt.TEXTURE_3D||Ft===tt.TEXTURE_2D_ARRAY)&&tt.texParameteri(Ft,tt.TEXTURE_WRAP_R,tt.CLAMP_TO_EDGE),(Dt.wrapS!==ClampToEdgeWrapping||Dt.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),tt.texParameteri(Ft,tt.TEXTURE_MAG_FILTER,Bt(Dt.magFilter)),tt.texParameteri(Ft,tt.TEXTURE_MIN_FILTER,Bt(Dt.minFilter)),Dt.minFilter!==NearestFilter&&Dt.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Dt.compareFunction&&(tt.texParameteri(Ft,tt.TEXTURE_COMPARE_MODE,tt.COMPARE_REF_TO_TEXTURE),tt.texParameteri(Ft,tt.TEXTURE_COMPARE_FUNC,rn[Dt.compareFunction])),_.has("EXT_texture_filter_anisotropic")===!0){const bn=_.get("EXT_texture_filter_anisotropic");if(Dt.magFilter===NearestFilter||Dt.minFilter!==NearestMipmapLinearFilter&&Dt.minFilter!==LinearMipmapLinearFilter||Dt.type===FloatType&&_.has("OES_texture_float_linear")===!1||st===!1&&Dt.type===HalfFloatType&&_.has("OES_texture_half_float_linear")===!1)return;(Dt.anisotropy>1||nt.get(Dt).__currentAnisotropy)&&(tt.texParameterf(Ft,bn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Dt.anisotropy,rt.getMaxAnisotropy())),nt.get(Dt).__currentAnisotropy=Dt.anisotropy)}}function dn(Ft,Dt){let on=!1;Ft.__webglInit===void 0&&(Ft.__webglInit=!0,Dt.addEventListener("dispose",Ot));const bn=Dt.source;let Mn=vt.get(bn);Mn===void 0&&(Mn={},vt.set(bn,Mn));const wn=Xt(Dt);if(wn!==Ft.__cacheKey){Mn[wn]===void 0&&(Mn[wn]={texture:tt.createTexture(),usedTimes:0},ot.memory.textures++,on=!0),Mn[wn].usedTimes++;const $n=Mn[Ft.__cacheKey];$n!==void 0&&(Mn[Ft.__cacheKey].usedTimes--,$n.usedTimes===0&&zt(Dt)),Ft.__cacheKey=wn,Ft.__webglTexture=Mn[wn].texture}return on}function Bn(Ft,Dt,on){let bn=tt.TEXTURE_2D;(Dt.isDataArrayTexture||Dt.isCompressedArrayTexture)&&(bn=tt.TEXTURE_2D_ARRAY),Dt.isData3DTexture&&(bn=tt.TEXTURE_3D);const Mn=dn(Ft,Dt),wn=Dt.source;_e.bindTexture(bn,Ft.__webglTexture,tt.TEXTURE0+on);const $n=nt.get(wn);if(wn.version!==$n.__version||Mn===!0){_e.activeTexture(tt.TEXTURE0+on),tt.pixelStorei(tt.UNPACK_FLIP_Y_WEBGL,Dt.flipY),tt.pixelStorei(tt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Dt.premultiplyAlpha),tt.pixelStorei(tt.UNPACK_ALIGNMENT,Dt.unpackAlignment),tt.pixelStorei(tt.UNPACK_COLORSPACE_CONVERSION_WEBGL,tt.NONE);const Gn=Tt(Dt)&&St(Dt.image)===!1;let En=xt(Dt.image,Gn,!1,ct);En=jn(Dt,En);const zn=St(En)||st,Vn=it.convert(Dt.format,Dt.colorSpace);let Un=it.convert(Dt.type),Fn=Pt(Dt.internalFormat,Vn,Un,Dt.colorSpace);an(bn,Dt,zn);let kn;const Yn=Dt.mipmaps,nr=st&&Dt.isVideoTexture!==!0,tn=$n.__version===void 0||Mn===!0,fn=wt(Dt,En,zn);if(Dt.isDepthTexture)Fn=tt.DEPTH_COMPONENT,st?Dt.type===FloatType?Fn=tt.DEPTH_COMPONENT32F:Dt.type===UnsignedIntType?Fn=tt.DEPTH_COMPONENT24:Dt.type===UnsignedInt248Type?Fn=tt.DEPTH24_STENCIL8:Fn=tt.DEPTH_COMPONENT16:Dt.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Dt.format===DepthFormat&&Fn===tt.DEPTH_COMPONENT&&Dt.type!==UnsignedShortType&&Dt.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Dt.type=UnsignedIntType,Un=it.convert(Dt.type)),Dt.format===DepthStencilFormat&&Fn===tt.DEPTH_COMPONENT&&(Fn=tt.DEPTH_STENCIL,Dt.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Dt.type=UnsignedInt248Type,Un=it.convert(Dt.type))),tn&&(nr?_e.texStorage2D(tt.TEXTURE_2D,1,Fn,En.width,En.height):_e.texImage2D(tt.TEXTURE_2D,0,Fn,En.width,En.height,0,Vn,Un,null));else if(Dt.isDataTexture)if(Yn.length>0&&zn){nr&&tn&&_e.texStorage2D(tt.TEXTURE_2D,fn,Fn,Yn[0].width,Yn[0].height);for(let mn=0,Wn=Yn.length;mn<Wn;mn++)kn=Yn[mn],nr?_e.texSubImage2D(tt.TEXTURE_2D,mn,0,0,kn.width,kn.height,Vn,Un,kn.data):_e.texImage2D(tt.TEXTURE_2D,mn,Fn,kn.width,kn.height,0,Vn,Un,kn.data);Dt.generateMipmaps=!1}else nr?(tn&&_e.texStorage2D(tt.TEXTURE_2D,fn,Fn,En.width,En.height),_e.texSubImage2D(tt.TEXTURE_2D,0,0,0,En.width,En.height,Vn,Un,En.data)):_e.texImage2D(tt.TEXTURE_2D,0,Fn,En.width,En.height,0,Vn,Un,En.data);else if(Dt.isCompressedTexture)if(Dt.isCompressedArrayTexture){nr&&tn&&_e.texStorage3D(tt.TEXTURE_2D_ARRAY,fn,Fn,Yn[0].width,Yn[0].height,En.depth);for(let mn=0,Wn=Yn.length;mn<Wn;mn++)kn=Yn[mn],Dt.format!==RGBAFormat?Vn!==null?nr?_e.compressedTexSubImage3D(tt.TEXTURE_2D_ARRAY,mn,0,0,0,kn.width,kn.height,En.depth,Vn,kn.data,0,0):_e.compressedTexImage3D(tt.TEXTURE_2D_ARRAY,mn,Fn,kn.width,kn.height,En.depth,0,kn.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):nr?_e.texSubImage3D(tt.TEXTURE_2D_ARRAY,mn,0,0,0,kn.width,kn.height,En.depth,Vn,Un,kn.data):_e.texImage3D(tt.TEXTURE_2D_ARRAY,mn,Fn,kn.width,kn.height,En.depth,0,Vn,Un,kn.data)}else{nr&&tn&&_e.texStorage2D(tt.TEXTURE_2D,fn,Fn,Yn[0].width,Yn[0].height);for(let mn=0,Wn=Yn.length;mn<Wn;mn++)kn=Yn[mn],Dt.format!==RGBAFormat?Vn!==null?nr?_e.compressedTexSubImage2D(tt.TEXTURE_2D,mn,0,0,kn.width,kn.height,Vn,kn.data):_e.compressedTexImage2D(tt.TEXTURE_2D,mn,Fn,kn.width,kn.height,0,kn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):nr?_e.texSubImage2D(tt.TEXTURE_2D,mn,0,0,kn.width,kn.height,Vn,Un,kn.data):_e.texImage2D(tt.TEXTURE_2D,mn,Fn,kn.width,kn.height,0,Vn,Un,kn.data)}else if(Dt.isDataArrayTexture)nr?(tn&&_e.texStorage3D(tt.TEXTURE_2D_ARRAY,fn,Fn,En.width,En.height,En.depth),_e.texSubImage3D(tt.TEXTURE_2D_ARRAY,0,0,0,0,En.width,En.height,En.depth,Vn,Un,En.data)):_e.texImage3D(tt.TEXTURE_2D_ARRAY,0,Fn,En.width,En.height,En.depth,0,Vn,Un,En.data);else if(Dt.isData3DTexture)nr?(tn&&_e.texStorage3D(tt.TEXTURE_3D,fn,Fn,En.width,En.height,En.depth),_e.texSubImage3D(tt.TEXTURE_3D,0,0,0,0,En.width,En.height,En.depth,Vn,Un,En.data)):_e.texImage3D(tt.TEXTURE_3D,0,Fn,En.width,En.height,En.depth,0,Vn,Un,En.data);else if(Dt.isFramebufferTexture){if(tn)if(nr)_e.texStorage2D(tt.TEXTURE_2D,fn,Fn,En.width,En.height);else{let mn=En.width,Wn=En.height;for(let Zn=0;Zn<fn;Zn++)_e.texImage2D(tt.TEXTURE_2D,Zn,Fn,mn,Wn,0,Vn,Un,null),mn>>=1,Wn>>=1}}else if(Yn.length>0&&zn){nr&&tn&&_e.texStorage2D(tt.TEXTURE_2D,fn,Fn,Yn[0].width,Yn[0].height);for(let mn=0,Wn=Yn.length;mn<Wn;mn++)kn=Yn[mn],nr?_e.texSubImage2D(tt.TEXTURE_2D,mn,0,0,Vn,Un,kn):_e.texImage2D(tt.TEXTURE_2D,mn,Fn,Vn,Un,kn);Dt.generateMipmaps=!1}else nr?(tn&&_e.texStorage2D(tt.TEXTURE_2D,fn,Fn,En.width,En.height),_e.texSubImage2D(tt.TEXTURE_2D,0,0,0,Vn,Un,En)):_e.texImage2D(tt.TEXTURE_2D,0,Fn,Vn,Un,En);Mt(Dt,zn)&&bt(bn),$n.__version=wn.version,Dt.onUpdate&&Dt.onUpdate(Dt)}Ft.__version=Dt.version}function Nn(Ft,Dt,on){if(Dt.image.length!==6)return;const bn=dn(Ft,Dt),Mn=Dt.source;_e.bindTexture(tt.TEXTURE_CUBE_MAP,Ft.__webglTexture,tt.TEXTURE0+on);const wn=nt.get(Mn);if(Mn.version!==wn.__version||bn===!0){_e.activeTexture(tt.TEXTURE0+on),tt.pixelStorei(tt.UNPACK_FLIP_Y_WEBGL,Dt.flipY),tt.pixelStorei(tt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Dt.premultiplyAlpha),tt.pixelStorei(tt.UNPACK_ALIGNMENT,Dt.unpackAlignment),tt.pixelStorei(tt.UNPACK_COLORSPACE_CONVERSION_WEBGL,tt.NONE);const $n=Dt.isCompressedTexture||Dt.image[0].isCompressedTexture,Gn=Dt.image[0]&&Dt.image[0].isDataTexture,En=[];for(let mn=0;mn<6;mn++)!$n&&!Gn?En[mn]=xt(Dt.image[mn],!1,!0,lt):En[mn]=Gn?Dt.image[mn].image:Dt.image[mn],En[mn]=jn(Dt,En[mn]);const zn=En[0],Vn=St(zn)||st,Un=it.convert(Dt.format,Dt.colorSpace),Fn=it.convert(Dt.type),kn=Pt(Dt.internalFormat,Un,Fn,Dt.colorSpace),Yn=st&&Dt.isVideoTexture!==!0,nr=wn.__version===void 0||bn===!0;let tn=wt(Dt,zn,Vn);an(tt.TEXTURE_CUBE_MAP,Dt,Vn);let fn;if($n){Yn&&nr&&_e.texStorage2D(tt.TEXTURE_CUBE_MAP,tn,kn,zn.width,zn.height);for(let mn=0;mn<6;mn++){fn=En[mn].mipmaps;for(let Wn=0;Wn<fn.length;Wn++){const Zn=fn[Wn];Dt.format!==RGBAFormat?Un!==null?Yn?_e.compressedTexSubImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+mn,Wn,0,0,Zn.width,Zn.height,Un,Zn.data):_e.compressedTexImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+mn,Wn,kn,Zn.width,Zn.height,0,Zn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Yn?_e.texSubImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+mn,Wn,0,0,Zn.width,Zn.height,Un,Fn,Zn.data):_e.texImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+mn,Wn,kn,Zn.width,Zn.height,0,Un,Fn,Zn.data)}}}else{fn=Dt.mipmaps,Yn&&nr&&(fn.length>0&&tn++,_e.texStorage2D(tt.TEXTURE_CUBE_MAP,tn,kn,En[0].width,En[0].height));for(let mn=0;mn<6;mn++)if(Gn){Yn?_e.texSubImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+mn,0,0,0,En[mn].width,En[mn].height,Un,Fn,En[mn].data):_e.texImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+mn,0,kn,En[mn].width,En[mn].height,0,Un,Fn,En[mn].data);for(let Wn=0;Wn<fn.length;Wn++){const mr=fn[Wn].image[mn].image;Yn?_e.texSubImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+mn,Wn+1,0,0,mr.width,mr.height,Un,Fn,mr.data):_e.texImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+mn,Wn+1,kn,mr.width,mr.height,0,Un,Fn,mr.data)}}else{Yn?_e.texSubImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+mn,0,0,0,Un,Fn,En[mn]):_e.texImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+mn,0,kn,Un,Fn,En[mn]);for(let Wn=0;Wn<fn.length;Wn++){const Zn=fn[Wn];Yn?_e.texSubImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+mn,Wn+1,0,0,Un,Fn,Zn.image[mn]):_e.texImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+mn,Wn+1,kn,Un,Fn,Zn.image[mn])}}}Mt(Dt,Vn)&&bt(tt.TEXTURE_CUBE_MAP),wn.__version=Mn.version,Dt.onUpdate&&Dt.onUpdate(Dt)}Ft.__version=Dt.version}function gn(Ft,Dt,on,bn,Mn){const wn=it.convert(on.format,on.colorSpace),$n=it.convert(on.type),Gn=Pt(on.internalFormat,wn,$n,on.colorSpace);nt.get(Dt).__hasExternalTextures||(Mn===tt.TEXTURE_3D||Mn===tt.TEXTURE_2D_ARRAY?_e.texImage3D(Mn,0,Gn,Dt.width,Dt.height,Dt.depth,0,wn,$n,null):_e.texImage2D(Mn,0,Gn,Dt.width,Dt.height,0,wn,$n,null)),_e.bindFramebuffer(tt.FRAMEBUFFER,Ft),On(Dt)?ht.framebufferTexture2DMultisampleEXT(tt.FRAMEBUFFER,bn,Mn,nt.get(on).__webglTexture,0,Ln(Dt)):(Mn===tt.TEXTURE_2D||Mn>=tt.TEXTURE_CUBE_MAP_POSITIVE_X&&Mn<=tt.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&tt.framebufferTexture2D(tt.FRAMEBUFFER,bn,Mn,nt.get(on).__webglTexture,0),_e.bindFramebuffer(tt.FRAMEBUFFER,null)}function Ht(Ft,Dt,on){if(tt.bindRenderbuffer(tt.RENDERBUFFER,Ft),Dt.depthBuffer&&!Dt.stencilBuffer){let bn=tt.DEPTH_COMPONENT16;if(on||On(Dt)){const Mn=Dt.depthTexture;Mn&&Mn.isDepthTexture&&(Mn.type===FloatType?bn=tt.DEPTH_COMPONENT32F:Mn.type===UnsignedIntType&&(bn=tt.DEPTH_COMPONENT24));const wn=Ln(Dt);On(Dt)?ht.renderbufferStorageMultisampleEXT(tt.RENDERBUFFER,wn,bn,Dt.width,Dt.height):tt.renderbufferStorageMultisample(tt.RENDERBUFFER,wn,bn,Dt.width,Dt.height)}else tt.renderbufferStorage(tt.RENDERBUFFER,bn,Dt.width,Dt.height);tt.framebufferRenderbuffer(tt.FRAMEBUFFER,tt.DEPTH_ATTACHMENT,tt.RENDERBUFFER,Ft)}else if(Dt.depthBuffer&&Dt.stencilBuffer){const bn=Ln(Dt);on&&On(Dt)===!1?tt.renderbufferStorageMultisample(tt.RENDERBUFFER,bn,tt.DEPTH24_STENCIL8,Dt.width,Dt.height):On(Dt)?ht.renderbufferStorageMultisampleEXT(tt.RENDERBUFFER,bn,tt.DEPTH24_STENCIL8,Dt.width,Dt.height):tt.renderbufferStorage(tt.RENDERBUFFER,tt.DEPTH_STENCIL,Dt.width,Dt.height),tt.framebufferRenderbuffer(tt.FRAMEBUFFER,tt.DEPTH_STENCIL_ATTACHMENT,tt.RENDERBUFFER,Ft)}else{const bn=Dt.isWebGLMultipleRenderTargets===!0?Dt.texture:[Dt.texture];for(let Mn=0;Mn<bn.length;Mn++){const wn=bn[Mn],$n=it.convert(wn.format,wn.colorSpace),Gn=it.convert(wn.type),En=Pt(wn.internalFormat,$n,Gn,wn.colorSpace),zn=Ln(Dt);on&&On(Dt)===!1?tt.renderbufferStorageMultisample(tt.RENDERBUFFER,zn,En,Dt.width,Dt.height):On(Dt)?ht.renderbufferStorageMultisampleEXT(tt.RENDERBUFFER,zn,En,Dt.width,Dt.height):tt.renderbufferStorage(tt.RENDERBUFFER,En,Dt.width,Dt.height)}}tt.bindRenderbuffer(tt.RENDERBUFFER,null)}function xn(Ft,Dt){if(Dt&&Dt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(_e.bindFramebuffer(tt.FRAMEBUFFER,Ft),!(Dt.depthTexture&&Dt.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!nt.get(Dt.depthTexture).__webglTexture||Dt.depthTexture.image.width!==Dt.width||Dt.depthTexture.image.height!==Dt.height)&&(Dt.depthTexture.image.width=Dt.width,Dt.depthTexture.image.height=Dt.height,Dt.depthTexture.needsUpdate=!0),Vt(Dt.depthTexture,0);const bn=nt.get(Dt.depthTexture).__webglTexture,Mn=Ln(Dt);if(Dt.depthTexture.format===DepthFormat)On(Dt)?ht.framebufferTexture2DMultisampleEXT(tt.FRAMEBUFFER,tt.DEPTH_ATTACHMENT,tt.TEXTURE_2D,bn,0,Mn):tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.DEPTH_ATTACHMENT,tt.TEXTURE_2D,bn,0);else if(Dt.depthTexture.format===DepthStencilFormat)On(Dt)?ht.framebufferTexture2DMultisampleEXT(tt.FRAMEBUFFER,tt.DEPTH_STENCIL_ATTACHMENT,tt.TEXTURE_2D,bn,0,Mn):tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.DEPTH_STENCIL_ATTACHMENT,tt.TEXTURE_2D,bn,0);else throw new Error("Unknown depthTexture format")}function hn(Ft){const Dt=nt.get(Ft),on=Ft.isWebGLCubeRenderTarget===!0;if(Ft.depthTexture&&!Dt.__autoAllocateDepthBuffer){if(on)throw new Error("target.depthTexture not supported in Cube render targets");xn(Dt.__webglFramebuffer,Ft)}else if(on){Dt.__webglDepthbuffer=[];for(let bn=0;bn<6;bn++)_e.bindFramebuffer(tt.FRAMEBUFFER,Dt.__webglFramebuffer[bn]),Dt.__webglDepthbuffer[bn]=tt.createRenderbuffer(),Ht(Dt.__webglDepthbuffer[bn],Ft,!1)}else _e.bindFramebuffer(tt.FRAMEBUFFER,Dt.__webglFramebuffer),Dt.__webglDepthbuffer=tt.createRenderbuffer(),Ht(Dt.__webglDepthbuffer,Ft,!1);_e.bindFramebuffer(tt.FRAMEBUFFER,null)}function vn(Ft,Dt,on){const bn=nt.get(Ft);Dt!==void 0&&gn(bn.__webglFramebuffer,Ft,Ft.texture,tt.COLOR_ATTACHMENT0,tt.TEXTURE_2D),on!==void 0&&hn(Ft)}function pn(Ft){const Dt=Ft.texture,on=nt.get(Ft),bn=nt.get(Dt);Ft.addEventListener("dispose",Ut),Ft.isWebGLMultipleRenderTargets!==!0&&(bn.__webglTexture===void 0&&(bn.__webglTexture=tt.createTexture()),bn.__version=Dt.version,ot.memory.textures++);const Mn=Ft.isWebGLCubeRenderTarget===!0,wn=Ft.isWebGLMultipleRenderTargets===!0,$n=St(Ft)||st;if(Mn){on.__webglFramebuffer=[];for(let Gn=0;Gn<6;Gn++)on.__webglFramebuffer[Gn]=tt.createFramebuffer()}else{if(on.__webglFramebuffer=tt.createFramebuffer(),wn)if(rt.drawBuffers){const Gn=Ft.texture;for(let En=0,zn=Gn.length;En<zn;En++){const Vn=nt.get(Gn[En]);Vn.__webglTexture===void 0&&(Vn.__webglTexture=tt.createTexture(),ot.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(st&&Ft.samples>0&&On(Ft)===!1){const Gn=wn?Dt:[Dt];on.__webglMultisampledFramebuffer=tt.createFramebuffer(),on.__webglColorRenderbuffer=[],_e.bindFramebuffer(tt.FRAMEBUFFER,on.__webglMultisampledFramebuffer);for(let En=0;En<Gn.length;En++){const zn=Gn[En];on.__webglColorRenderbuffer[En]=tt.createRenderbuffer(),tt.bindRenderbuffer(tt.RENDERBUFFER,on.__webglColorRenderbuffer[En]);const Vn=it.convert(zn.format,zn.colorSpace),Un=it.convert(zn.type),Fn=Pt(zn.internalFormat,Vn,Un,zn.colorSpace,Ft.isXRRenderTarget===!0),kn=Ln(Ft);tt.renderbufferStorageMultisample(tt.RENDERBUFFER,kn,Fn,Ft.width,Ft.height),tt.framebufferRenderbuffer(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0+En,tt.RENDERBUFFER,on.__webglColorRenderbuffer[En])}tt.bindRenderbuffer(tt.RENDERBUFFER,null),Ft.depthBuffer&&(on.__webglDepthRenderbuffer=tt.createRenderbuffer(),Ht(on.__webglDepthRenderbuffer,Ft,!0)),_e.bindFramebuffer(tt.FRAMEBUFFER,null)}}if(Mn){_e.bindTexture(tt.TEXTURE_CUBE_MAP,bn.__webglTexture),an(tt.TEXTURE_CUBE_MAP,Dt,$n);for(let Gn=0;Gn<6;Gn++)gn(on.__webglFramebuffer[Gn],Ft,Dt,tt.COLOR_ATTACHMENT0,tt.TEXTURE_CUBE_MAP_POSITIVE_X+Gn);Mt(Dt,$n)&&bt(tt.TEXTURE_CUBE_MAP),_e.unbindTexture()}else if(wn){const Gn=Ft.texture;for(let En=0,zn=Gn.length;En<zn;En++){const Vn=Gn[En],Un=nt.get(Vn);_e.bindTexture(tt.TEXTURE_2D,Un.__webglTexture),an(tt.TEXTURE_2D,Vn,$n),gn(on.__webglFramebuffer,Ft,Vn,tt.COLOR_ATTACHMENT0+En,tt.TEXTURE_2D),Mt(Vn,$n)&&bt(tt.TEXTURE_2D)}_e.unbindTexture()}else{let Gn=tt.TEXTURE_2D;(Ft.isWebGL3DRenderTarget||Ft.isWebGLArrayRenderTarget)&&(st?Gn=Ft.isWebGL3DRenderTarget?tt.TEXTURE_3D:tt.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),_e.bindTexture(Gn,bn.__webglTexture),an(Gn,Dt,$n),gn(on.__webglFramebuffer,Ft,Dt,tt.COLOR_ATTACHMENT0,Gn),Mt(Dt,$n)&&bt(Gn),_e.unbindTexture()}Ft.depthBuffer&&hn(Ft)}function Hn(Ft){const Dt=St(Ft)||st,on=Ft.isWebGLMultipleRenderTargets===!0?Ft.texture:[Ft.texture];for(let bn=0,Mn=on.length;bn<Mn;bn++){const wn=on[bn];if(Mt(wn,Dt)){const $n=Ft.isWebGLCubeRenderTarget?tt.TEXTURE_CUBE_MAP:tt.TEXTURE_2D,Gn=nt.get(wn).__webglTexture;_e.bindTexture($n,Gn),bt($n),_e.unbindTexture()}}}function yn(Ft){if(st&&Ft.samples>0&&On(Ft)===!1){const Dt=Ft.isWebGLMultipleRenderTargets?Ft.texture:[Ft.texture],on=Ft.width,bn=Ft.height;let Mn=tt.COLOR_BUFFER_BIT;const wn=[],$n=Ft.stencilBuffer?tt.DEPTH_STENCIL_ATTACHMENT:tt.DEPTH_ATTACHMENT,Gn=nt.get(Ft),En=Ft.isWebGLMultipleRenderTargets===!0;if(En)for(let zn=0;zn<Dt.length;zn++)_e.bindFramebuffer(tt.FRAMEBUFFER,Gn.__webglMultisampledFramebuffer),tt.framebufferRenderbuffer(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0+zn,tt.RENDERBUFFER,null),_e.bindFramebuffer(tt.FRAMEBUFFER,Gn.__webglFramebuffer),tt.framebufferTexture2D(tt.DRAW_FRAMEBUFFER,tt.COLOR_ATTACHMENT0+zn,tt.TEXTURE_2D,null,0);_e.bindFramebuffer(tt.READ_FRAMEBUFFER,Gn.__webglMultisampledFramebuffer),_e.bindFramebuffer(tt.DRAW_FRAMEBUFFER,Gn.__webglFramebuffer);for(let zn=0;zn<Dt.length;zn++){wn.push(tt.COLOR_ATTACHMENT0+zn),Ft.depthBuffer&&wn.push($n);const Vn=Gn.__ignoreDepthValues!==void 0?Gn.__ignoreDepthValues:!1;if(Vn===!1&&(Ft.depthBuffer&&(Mn|=tt.DEPTH_BUFFER_BIT),Ft.stencilBuffer&&(Mn|=tt.STENCIL_BUFFER_BIT)),En&&tt.framebufferRenderbuffer(tt.READ_FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.RENDERBUFFER,Gn.__webglColorRenderbuffer[zn]),Vn===!0&&(tt.invalidateFramebuffer(tt.READ_FRAMEBUFFER,[$n]),tt.invalidateFramebuffer(tt.DRAW_FRAMEBUFFER,[$n])),En){const Un=nt.get(Dt[zn]).__webglTexture;tt.framebufferTexture2D(tt.DRAW_FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.TEXTURE_2D,Un,0)}tt.blitFramebuffer(0,0,on,bn,0,0,on,bn,Mn,tt.NEAREST),pt&&tt.invalidateFramebuffer(tt.READ_FRAMEBUFFER,wn)}if(_e.bindFramebuffer(tt.READ_FRAMEBUFFER,null),_e.bindFramebuffer(tt.DRAW_FRAMEBUFFER,null),En)for(let zn=0;zn<Dt.length;zn++){_e.bindFramebuffer(tt.FRAMEBUFFER,Gn.__webglMultisampledFramebuffer),tt.framebufferRenderbuffer(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0+zn,tt.RENDERBUFFER,Gn.__webglColorRenderbuffer[zn]);const Vn=nt.get(Dt[zn]).__webglTexture;_e.bindFramebuffer(tt.FRAMEBUFFER,Gn.__webglFramebuffer),tt.framebufferTexture2D(tt.DRAW_FRAMEBUFFER,tt.COLOR_ATTACHMENT0+zn,tt.TEXTURE_2D,Vn,0)}_e.bindFramebuffer(tt.DRAW_FRAMEBUFFER,Gn.__webglMultisampledFramebuffer)}}function Ln(Ft){return Math.min(ut,Ft.samples)}function On(Ft){const Dt=nt.get(Ft);return st&&Ft.samples>0&&_.has("WEBGL_multisampled_render_to_texture")===!0&&Dt.__useRenderToTexture!==!1}function Sn(Ft){const Dt=ot.render.frame;gt.get(Ft)!==Dt&&(gt.set(Ft,Dt),Ft.update())}function jn(Ft,Dt){const on=Ft.colorSpace,bn=Ft.format,Mn=Ft.type;return Ft.isCompressedTexture===!0||Ft.format===_SRGBAFormat||on!==LinearSRGBColorSpace&&on!==NoColorSpace&&(on===SRGBColorSpace?st===!1?_.has("EXT_sRGB")===!0&&bn===RGBAFormat?(Ft.format=_SRGBAFormat,Ft.minFilter=LinearFilter,Ft.generateMipmaps=!1):Dt=ImageUtils.sRGBToLinear(Dt):(bn!==RGBAFormat||Mn!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",on)),Dt}this.allocateTextureUnit=Gt,this.resetTextureUnits=qt,this.setTexture2D=Vt,this.setTexture2DArray=Wt,this.setTexture3D=$t,this.setTextureCube=nn,this.rebindTextures=vn,this.setupRenderTarget=pn,this.updateRenderTargetMipmap=Hn,this.updateMultisampleRenderTarget=yn,this.setupDepthRenderbuffer=hn,this.setupFrameBufferTexture=gn,this.useMultisampledRTT=On}function WebGLUtils(tt,_,_e){const nt=_e.isWebGL2;function rt(it,ot=NoColorSpace){let st;if(it===UnsignedByteType)return tt.UNSIGNED_BYTE;if(it===UnsignedShort4444Type)return tt.UNSIGNED_SHORT_4_4_4_4;if(it===UnsignedShort5551Type)return tt.UNSIGNED_SHORT_5_5_5_1;if(it===ByteType)return tt.BYTE;if(it===ShortType)return tt.SHORT;if(it===UnsignedShortType)return tt.UNSIGNED_SHORT;if(it===IntType)return tt.INT;if(it===UnsignedIntType)return tt.UNSIGNED_INT;if(it===FloatType)return tt.FLOAT;if(it===HalfFloatType)return nt?tt.HALF_FLOAT:(st=_.get("OES_texture_half_float"),st!==null?st.HALF_FLOAT_OES:null);if(it===AlphaFormat)return tt.ALPHA;if(it===RGBAFormat)return tt.RGBA;if(it===LuminanceFormat)return tt.LUMINANCE;if(it===LuminanceAlphaFormat)return tt.LUMINANCE_ALPHA;if(it===DepthFormat)return tt.DEPTH_COMPONENT;if(it===DepthStencilFormat)return tt.DEPTH_STENCIL;if(it===_SRGBAFormat)return st=_.get("EXT_sRGB"),st!==null?st.SRGB_ALPHA_EXT:null;if(it===RedFormat)return tt.RED;if(it===RedIntegerFormat)return tt.RED_INTEGER;if(it===RGFormat)return tt.RG;if(it===RGIntegerFormat)return tt.RG_INTEGER;if(it===RGBAIntegerFormat)return tt.RGBA_INTEGER;if(it===RGB_S3TC_DXT1_Format||it===RGBA_S3TC_DXT1_Format||it===RGBA_S3TC_DXT3_Format||it===RGBA_S3TC_DXT5_Format)if(ot===SRGBColorSpace)if(st=_.get("WEBGL_compressed_texture_s3tc_srgb"),st!==null){if(it===RGB_S3TC_DXT1_Format)return st.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(it===RGBA_S3TC_DXT1_Format)return st.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(it===RGBA_S3TC_DXT3_Format)return st.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(it===RGBA_S3TC_DXT5_Format)return st.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(st=_.get("WEBGL_compressed_texture_s3tc"),st!==null){if(it===RGB_S3TC_DXT1_Format)return st.COMPRESSED_RGB_S3TC_DXT1_EXT;if(it===RGBA_S3TC_DXT1_Format)return st.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(it===RGBA_S3TC_DXT3_Format)return st.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(it===RGBA_S3TC_DXT5_Format)return st.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(it===RGB_PVRTC_4BPPV1_Format||it===RGB_PVRTC_2BPPV1_Format||it===RGBA_PVRTC_4BPPV1_Format||it===RGBA_PVRTC_2BPPV1_Format)if(st=_.get("WEBGL_compressed_texture_pvrtc"),st!==null){if(it===RGB_PVRTC_4BPPV1_Format)return st.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(it===RGB_PVRTC_2BPPV1_Format)return st.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(it===RGBA_PVRTC_4BPPV1_Format)return st.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(it===RGBA_PVRTC_2BPPV1_Format)return st.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(it===RGB_ETC1_Format)return st=_.get("WEBGL_compressed_texture_etc1"),st!==null?st.COMPRESSED_RGB_ETC1_WEBGL:null;if(it===RGB_ETC2_Format||it===RGBA_ETC2_EAC_Format)if(st=_.get("WEBGL_compressed_texture_etc"),st!==null){if(it===RGB_ETC2_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ETC2:st.COMPRESSED_RGB8_ETC2;if(it===RGBA_ETC2_EAC_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:st.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(it===RGBA_ASTC_4x4_Format||it===RGBA_ASTC_5x4_Format||it===RGBA_ASTC_5x5_Format||it===RGBA_ASTC_6x5_Format||it===RGBA_ASTC_6x6_Format||it===RGBA_ASTC_8x5_Format||it===RGBA_ASTC_8x6_Format||it===RGBA_ASTC_8x8_Format||it===RGBA_ASTC_10x5_Format||it===RGBA_ASTC_10x6_Format||it===RGBA_ASTC_10x8_Format||it===RGBA_ASTC_10x10_Format||it===RGBA_ASTC_12x10_Format||it===RGBA_ASTC_12x12_Format)if(st=_.get("WEBGL_compressed_texture_astc"),st!==null){if(it===RGBA_ASTC_4x4_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:st.COMPRESSED_RGBA_ASTC_4x4_KHR;if(it===RGBA_ASTC_5x4_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:st.COMPRESSED_RGBA_ASTC_5x4_KHR;if(it===RGBA_ASTC_5x5_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:st.COMPRESSED_RGBA_ASTC_5x5_KHR;if(it===RGBA_ASTC_6x5_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:st.COMPRESSED_RGBA_ASTC_6x5_KHR;if(it===RGBA_ASTC_6x6_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:st.COMPRESSED_RGBA_ASTC_6x6_KHR;if(it===RGBA_ASTC_8x5_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:st.COMPRESSED_RGBA_ASTC_8x5_KHR;if(it===RGBA_ASTC_8x6_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:st.COMPRESSED_RGBA_ASTC_8x6_KHR;if(it===RGBA_ASTC_8x8_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:st.COMPRESSED_RGBA_ASTC_8x8_KHR;if(it===RGBA_ASTC_10x5_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:st.COMPRESSED_RGBA_ASTC_10x5_KHR;if(it===RGBA_ASTC_10x6_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:st.COMPRESSED_RGBA_ASTC_10x6_KHR;if(it===RGBA_ASTC_10x8_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:st.COMPRESSED_RGBA_ASTC_10x8_KHR;if(it===RGBA_ASTC_10x10_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:st.COMPRESSED_RGBA_ASTC_10x10_KHR;if(it===RGBA_ASTC_12x10_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:st.COMPRESSED_RGBA_ASTC_12x10_KHR;if(it===RGBA_ASTC_12x12_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:st.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(it===RGBA_BPTC_Format)if(st=_.get("EXT_texture_compression_bptc"),st!==null){if(it===RGBA_BPTC_Format)return ot===SRGBColorSpace?st.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:st.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(it===RED_RGTC1_Format||it===SIGNED_RED_RGTC1_Format||it===RED_GREEN_RGTC2_Format||it===SIGNED_RED_GREEN_RGTC2_Format)if(st=_.get("EXT_texture_compression_rgtc"),st!==null){if(it===RGBA_BPTC_Format)return st.COMPRESSED_RED_RGTC1_EXT;if(it===SIGNED_RED_RGTC1_Format)return st.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(it===RED_GREEN_RGTC2_Format)return st.COMPRESSED_RED_GREEN_RGTC2_EXT;if(it===SIGNED_RED_GREEN_RGTC2_Format)return st.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return it===UnsignedInt248Type?nt?tt.UNSIGNED_INT_24_8:(st=_.get("WEBGL_depth_texture"),st!==null?st.UNSIGNED_INT_24_8_WEBGL:null):tt[it]!==void 0?tt[it]:null}return{convert:rt}}class ArrayCamera extends PerspectiveCamera{constructor(_=[]){super(),this.isArrayCamera=!0,this.cameras=_}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(_){return this._targetRay!==null&&this._targetRay.dispatchEvent(_),this._grip!==null&&this._grip.dispatchEvent(_),this._hand!==null&&this._hand.dispatchEvent(_),this}connect(_){if(_&&_.hand){const _e=this._hand;if(_e)for(const nt of _.hand.values())this._getHandJoint(_e,nt)}return this.dispatchEvent({type:"connected",data:_}),this}disconnect(_){return this.dispatchEvent({type:"disconnected",data:_}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(_,_e,nt){let rt=null,it=null,ot=null;const st=this._targetRay,at=this._grip,lt=this._hand;if(_&&_e.session.visibilityState!=="visible-blurred"){if(lt&&_.hand){ot=!0;for(const yt of _.hand.values()){const vt=_e.getJointPose(yt,nt),mt=this._getHandJoint(lt,yt);vt!==null&&(mt.matrix.fromArray(vt.transform.matrix),mt.matrix.decompose(mt.position,mt.rotation,mt.scale),mt.matrixWorldNeedsUpdate=!0,mt.jointRadius=vt.radius),mt.visible=vt!==null}const ct=lt.joints["index-finger-tip"],ut=lt.joints["thumb-tip"],ht=ct.position.distanceTo(ut.position),pt=.02,gt=.005;lt.inputState.pinching&&ht>pt+gt?(lt.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:_.handedness,target:this})):!lt.inputState.pinching&&ht<=pt-gt&&(lt.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:_.handedness,target:this}))}else at!==null&&_.gripSpace&&(it=_e.getPose(_.gripSpace,nt),it!==null&&(at.matrix.fromArray(it.transform.matrix),at.matrix.decompose(at.position,at.rotation,at.scale),at.matrixWorldNeedsUpdate=!0,it.linearVelocity?(at.hasLinearVelocity=!0,at.linearVelocity.copy(it.linearVelocity)):at.hasLinearVelocity=!1,it.angularVelocity?(at.hasAngularVelocity=!0,at.angularVelocity.copy(it.angularVelocity)):at.hasAngularVelocity=!1));st!==null&&(rt=_e.getPose(_.targetRaySpace,nt),rt===null&&it!==null&&(rt=it),rt!==null&&(st.matrix.fromArray(rt.transform.matrix),st.matrix.decompose(st.position,st.rotation,st.scale),st.matrixWorldNeedsUpdate=!0,rt.linearVelocity?(st.hasLinearVelocity=!0,st.linearVelocity.copy(rt.linearVelocity)):st.hasLinearVelocity=!1,rt.angularVelocity?(st.hasAngularVelocity=!0,st.angularVelocity.copy(rt.angularVelocity)):st.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return st!==null&&(st.visible=rt!==null),at!==null&&(at.visible=it!==null),lt!==null&&(lt.visible=ot!==null),this}_getHandJoint(_,_e){if(_.joints[_e.jointName]===void 0){const nt=new Group;nt.matrixAutoUpdate=!1,nt.visible=!1,_.joints[_e.jointName]=nt,_.add(nt)}return _.joints[_e.jointName]}}class DepthTexture extends Texture{constructor(_,_e,nt,rt,it,ot,st,at,lt,ct){if(ct=ct!==void 0?ct:DepthFormat,ct!==DepthFormat&&ct!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");nt===void 0&&ct===DepthFormat&&(nt=UnsignedIntType),nt===void 0&&ct===DepthStencilFormat&&(nt=UnsignedInt248Type),super(null,rt,it,ot,st,at,ct,nt,lt),this.isDepthTexture=!0,this.image={width:_,height:_e},this.magFilter=st!==void 0?st:NearestFilter,this.minFilter=at!==void 0?at:NearestFilter,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(_){return super.copy(_),this.compareFunction=_.compareFunction,this}toJSON(_){const _e=super.toJSON(_);return this.compareFunction!==null&&(_e.compareFunction=this.compareFunction),_e}}class WebXRManager extends EventDispatcher$1{constructor(_,_e){super();const nt=this;let rt=null,it=1,ot=null,st="local-floor",at=1,lt=null,ct=null,ut=null,ht=null,pt=null,gt=null;const yt=_e.getContextAttributes();let vt=null,mt=null;const _t=[],xt=[];let St=null;const Tt=new PerspectiveCamera;Tt.layers.enable(1),Tt.viewport=new Vector4;const Mt=new PerspectiveCamera;Mt.layers.enable(2),Mt.viewport=new Vector4;const bt=[Tt,Mt],Pt=new ArrayCamera;Pt.layers.enable(1),Pt.layers.enable(2);let wt=null,Bt=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getCamera=function(){},this.setUserCamera=function($t){St=$t},this.getController=function($t){let nn=_t[$t];return nn===void 0&&(nn=new WebXRController,_t[$t]=nn),nn.getTargetRaySpace()},this.getControllerGrip=function($t){let nn=_t[$t];return nn===void 0&&(nn=new WebXRController,_t[$t]=nn),nn.getGripSpace()},this.getHand=function($t){let nn=_t[$t];return nn===void 0&&(nn=new WebXRController,_t[$t]=nn),nn.getHandSpace()};function Ot($t){const nn=xt.indexOf($t.inputSource);if(nn===-1)return;const en=_t[nn];en!==void 0&&(en.update($t.inputSource,$t.frame,lt||ot),en.dispatchEvent({type:$t.type,data:$t.inputSource}))}function Ut(){rt.removeEventListener("select",Ot),rt.removeEventListener("selectstart",Ot),rt.removeEventListener("selectend",Ot),rt.removeEventListener("squeeze",Ot),rt.removeEventListener("squeezestart",Ot),rt.removeEventListener("squeezeend",Ot),rt.removeEventListener("end",Ut),rt.removeEventListener("inputsourceschange",Nt);for(let $t=0;$t<_t.length;$t++){const nn=xt[$t];nn!==null&&(xt[$t]=null,_t[$t].disconnect(nn))}wt=null,Bt=null,_.setRenderTarget(vt),pt=null,ht=null,ut=null,rt=null,mt=null,Wt.stop(),nt.isPresenting=!1,nt.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function($t){it=$t,nt.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function($t){st=$t,nt.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return lt||ot},this.setReferenceSpace=function($t){lt=$t},this.getBaseLayer=function(){return ht!==null?ht:pt},this.getBinding=function(){return ut},this.getFrame=function(){return gt},this.getSession=function(){return rt},this.setSession=async function($t){if(rt=$t,rt!==null){if(vt=_.getRenderTarget(),rt.addEventListener("select",Ot),rt.addEventListener("selectstart",Ot),rt.addEventListener("selectend",Ot),rt.addEventListener("squeeze",Ot),rt.addEventListener("squeezestart",Ot),rt.addEventListener("squeezeend",Ot),rt.addEventListener("end",Ut),rt.addEventListener("inputsourceschange",Nt),yt.xrCompatible!==!0&&await _e.makeXRCompatible(),rt.renderState.layers===void 0||_.capabilities.isWebGL2===!1){const nn={antialias:rt.renderState.layers===void 0?yt.antialias:!0,alpha:!0,depth:yt.depth,stencil:yt.stencil,framebufferScaleFactor:it};pt=new XRWebGLLayer(rt,_e,nn),rt.updateRenderState({baseLayer:pt}),mt=new WebGLRenderTarget(pt.framebufferWidth,pt.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:_.outputColorSpace,stencilBuffer:yt.stencil})}else{let nn=null,en=null,sn=null;yt.depth&&(sn=yt.stencil?_e.DEPTH24_STENCIL8:_e.DEPTH_COMPONENT24,nn=yt.stencil?DepthStencilFormat:DepthFormat,en=yt.stencil?UnsignedInt248Type:UnsignedIntType);const rn={colorFormat:_e.RGBA8,depthFormat:sn,scaleFactor:it};ut=new XRWebGLBinding(rt,_e),ht=ut.createProjectionLayer(rn),rt.updateRenderState({layers:[ht]}),mt=new WebGLRenderTarget(ht.textureWidth,ht.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(ht.textureWidth,ht.textureHeight,en,void 0,void 0,void 0,void 0,void 0,void 0,nn),stencilBuffer:yt.stencil,colorSpace:_.outputColorSpace,samples:yt.antialias?4:0});const an=_.properties.get(mt);an.__ignoreDepthValues=ht.ignoreDepthValues}mt.isXRRenderTarget=!0,this.setFoveation(at),lt=null,ot=await rt.requestReferenceSpace(st),Wt.setContext(rt),Wt.start(),nt.isPresenting=!0,nt.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(rt!==null)return rt.environmentBlendMode};function Nt($t){for(let nn=0;nn<$t.removed.length;nn++){const en=$t.removed[nn],sn=xt.indexOf(en);sn>=0&&(xt[sn]=null,_t[sn].disconnect(en))}for(let nn=0;nn<$t.added.length;nn++){const en=$t.added[nn];let sn=xt.indexOf(en);if(sn===-1){for(let an=0;an<_t.length;an++)if(an>=xt.length){xt.push(en),sn=an;break}else if(xt[an]===null){xt[an]=en,sn=an;break}if(sn===-1)break}const rn=_t[sn];rn&&rn.connect(en)}}const zt=new Vector3,jt=new Vector3;function Yt($t,nn,en){zt.setFromMatrixPosition(nn.matrixWorld),jt.setFromMatrixPosition(en.matrixWorld);const sn=zt.distanceTo(jt),rn=nn.projectionMatrix.elements,an=en.projectionMatrix.elements,dn=rn[14]/(rn[10]-1),Bn=rn[14]/(rn[10]+1),Nn=(rn[9]+1)/rn[5],gn=(rn[9]-1)/rn[5],Ht=(rn[8]-1)/rn[0],xn=(an[8]+1)/an[0],hn=dn*Ht,vn=dn*xn,pn=sn/(-Ht+xn),Hn=pn*-Ht;nn.matrixWorld.decompose($t.position,$t.quaternion,$t.scale),$t.translateX(Hn),$t.translateZ(pn),$t.matrixWorld.compose($t.position,$t.quaternion,$t.scale),$t.matrixWorldInverse.copy($t.matrixWorld).invert();const yn=dn+pn,Ln=Bn+pn,On=hn-Hn,Sn=vn+(sn-Hn),jn=Nn*Bn/Ln*yn,Ft=gn*Bn/Ln*yn;$t.projectionMatrix.makePerspective(On,Sn,jn,Ft,yn,Ln),$t.projectionMatrixInverse.copy($t.projectionMatrix).invert()}function qt($t,nn){nn===null?$t.matrixWorld.copy($t.matrix):$t.matrixWorld.multiplyMatrices(nn.matrixWorld,$t.matrix),$t.matrixWorldInverse.copy($t.matrixWorld).invert()}this.updateCameraXR=function($t){if(rt===null)return $t;St&&($t=St),Pt.near=Mt.near=Tt.near=$t.near,Pt.far=Mt.far=Tt.far=$t.far,(wt!==Pt.near||Bt!==Pt.far)&&(rt.updateRenderState({depthNear:Pt.near,depthFar:Pt.far}),wt=Pt.near,Bt=Pt.far);const nn=$t.parent,en=Pt.cameras;qt(Pt,nn);for(let sn=0;sn<en.length;sn++)qt(en[sn],nn);return en.length===2?Yt(Pt,Tt,Mt):Pt.projectionMatrix.copy(Tt.projectionMatrix),St&&Gt(Pt,nn),Pt};function Gt($t,nn){const en=St;nn===null?en.matrix.copy($t.matrixWorld):(en.matrix.copy(nn.matrixWorld),en.matrix.invert(),en.matrix.multiply($t.matrixWorld)),en.matrix.decompose(en.position,en.quaternion,en.scale),en.updateMatrixWorld(!0);const sn=en.children;for(let rn=0,an=sn.length;rn<an;rn++)sn[rn].updateMatrixWorld(!0);en.projectionMatrix.copy($t.projectionMatrix),en.projectionMatrixInverse.copy($t.projectionMatrixInverse),en.isPerspectiveCamera&&(en.fov=RAD2DEG*2*Math.atan(1/en.projectionMatrix.elements[5]),en.zoom=1)}this.getFoveation=function(){if(!(ht===null&&pt===null))return at},this.setFoveation=function($t){at=$t,ht!==null&&(ht.fixedFoveation=$t),pt!==null&&pt.fixedFoveation!==void 0&&(pt.fixedFoveation=$t)};let Xt=null;function Vt($t,nn){if(ct=nn.getViewerPose(lt||ot),gt=nn,ct!==null){const en=ct.views;pt!==null&&(_.setRenderTargetFramebuffer(mt,pt.framebuffer),_.setRenderTarget(mt));let sn=!1;en.length!==Pt.cameras.length&&(Pt.cameras.length=0,sn=!0);for(let rn=0;rn<en.length;rn++){const an=en[rn];let dn=null;if(pt!==null)dn=pt.getViewport(an);else{const Nn=ut.getViewSubImage(ht,an);dn=Nn.viewport,rn===0&&(_.setRenderTargetTextures(mt,Nn.colorTexture,ht.ignoreDepthValues?void 0:Nn.depthStencilTexture),_.setRenderTarget(mt))}let Bn=bt[rn];Bn===void 0&&(Bn=new PerspectiveCamera,Bn.layers.enable(rn),Bn.viewport=new Vector4,bt[rn]=Bn),Bn.matrix.fromArray(an.transform.matrix),Bn.matrix.decompose(Bn.position,Bn.quaternion,Bn.scale),Bn.projectionMatrix.fromArray(an.projectionMatrix),Bn.projectionMatrixInverse.copy(Bn.projectionMatrix).invert(),Bn.viewport.set(dn.x,dn.y,dn.width,dn.height),rn===0&&(Pt.matrix.copy(Bn.matrix),Pt.matrix.decompose(Pt.position,Pt.quaternion,Pt.scale)),sn===!0&&Pt.cameras.push(Bn)}}for(let en=0;en<_t.length;en++){const sn=xt[en],rn=_t[en];sn!==null&&rn!==void 0&&rn.update(sn,nn,lt||ot)}Xt&&Xt($t,nn),nn.detectedPlanes&&nt.dispatchEvent({type:"planesdetected",data:nn}),gt=null}const Wt=new WebGLAnimation;Wt.setAnimationLoop(Vt),this.setAnimationLoop=function($t){Xt=$t},this.dispose=function(){}}}function WebGLMaterials(tt,_){function _e(vt,mt){vt.matrixAutoUpdate===!0&&vt.updateMatrix(),mt.value.copy(vt.matrix)}function nt(vt,mt){mt.color.getRGB(vt.fogColor.value,getUnlitUniformColorSpace(tt)),mt.isFog?(vt.fogNear.value=mt.near,vt.fogFar.value=mt.far):mt.isFogExp2&&(vt.fogDensity.value=mt.density)}function rt(vt,mt,_t,xt,St){mt.isMeshBasicMaterial||mt.isMeshLambertMaterial?it(vt,mt):mt.isMeshToonMaterial?(it(vt,mt),ut(vt,mt)):mt.isMeshPhongMaterial?(it(vt,mt),ct(vt,mt)):mt.isMeshStandardMaterial?(it(vt,mt),ht(vt,mt),mt.isMeshPhysicalMaterial&&pt(vt,mt,St)):mt.isMeshMatcapMaterial?(it(vt,mt),gt(vt,mt)):mt.isMeshDepthMaterial?it(vt,mt):mt.isMeshDistanceMaterial?(it(vt,mt),yt(vt,mt)):mt.isMeshNormalMaterial?it(vt,mt):mt.isLineBasicMaterial?(ot(vt,mt),mt.isLineDashedMaterial&&st(vt,mt)):mt.isPointsMaterial?at(vt,mt,_t,xt):mt.isSpriteMaterial?lt(vt,mt):mt.isShadowMaterial?(vt.color.value.copy(mt.color),vt.opacity.value=mt.opacity):mt.isShaderMaterial&&(mt.uniformsNeedUpdate=!1)}function it(vt,mt){vt.opacity.value=mt.opacity,mt.color&&vt.diffuse.value.copy(mt.color),mt.emissive&&vt.emissive.value.copy(mt.emissive).multiplyScalar(mt.emissiveIntensity),mt.map&&(vt.map.value=mt.map,_e(mt.map,vt.mapTransform)),mt.alphaMap&&(vt.alphaMap.value=mt.alphaMap,_e(mt.alphaMap,vt.alphaMapTransform)),mt.bumpMap&&(vt.bumpMap.value=mt.bumpMap,_e(mt.bumpMap,vt.bumpMapTransform),vt.bumpScale.value=mt.bumpScale,mt.side===BackSide&&(vt.bumpScale.value*=-1)),mt.normalMap&&(vt.normalMap.value=mt.normalMap,_e(mt.normalMap,vt.normalMapTransform),vt.normalScale.value.copy(mt.normalScale),mt.side===BackSide&&vt.normalScale.value.negate()),mt.displacementMap&&(vt.displacementMap.value=mt.displacementMap,_e(mt.displacementMap,vt.displacementMapTransform),vt.displacementScale.value=mt.displacementScale,vt.displacementBias.value=mt.displacementBias),mt.emissiveMap&&(vt.emissiveMap.value=mt.emissiveMap,_e(mt.emissiveMap,vt.emissiveMapTransform)),mt.specularMap&&(vt.specularMap.value=mt.specularMap,_e(mt.specularMap,vt.specularMapTransform)),mt.alphaTest>0&&(vt.alphaTest.value=mt.alphaTest);const _t=_.get(mt).envMap;if(_t&&(vt.envMap.value=_t,vt.flipEnvMap.value=_t.isCubeTexture&&_t.isRenderTargetTexture===!1?-1:1,vt.reflectivity.value=mt.reflectivity,vt.ior.value=mt.ior,vt.refractionRatio.value=mt.refractionRatio),mt.lightMap){vt.lightMap.value=mt.lightMap;const xt=tt.useLegacyLights===!0?Math.PI:1;vt.lightMapIntensity.value=mt.lightMapIntensity*xt,_e(mt.lightMap,vt.lightMapTransform)}mt.aoMap&&(vt.aoMap.value=mt.aoMap,vt.aoMapIntensity.value=mt.aoMapIntensity,_e(mt.aoMap,vt.aoMapTransform))}function ot(vt,mt){vt.diffuse.value.copy(mt.color),vt.opacity.value=mt.opacity,mt.map&&(vt.map.value=mt.map,_e(mt.map,vt.mapTransform))}function st(vt,mt){vt.dashSize.value=mt.dashSize,vt.totalSize.value=mt.dashSize+mt.gapSize,vt.scale.value=mt.scale}function at(vt,mt,_t,xt){vt.diffuse.value.copy(mt.color),vt.opacity.value=mt.opacity,vt.size.value=mt.size*_t,vt.scale.value=xt*.5,mt.map&&(vt.map.value=mt.map,_e(mt.map,vt.uvTransform)),mt.alphaMap&&(vt.alphaMap.value=mt.alphaMap,_e(mt.alphaMap,vt.alphaMapTransform)),mt.alphaTest>0&&(vt.alphaTest.value=mt.alphaTest)}function lt(vt,mt){vt.diffuse.value.copy(mt.color),vt.opacity.value=mt.opacity,vt.rotation.value=mt.rotation,mt.map&&(vt.map.value=mt.map,_e(mt.map,vt.mapTransform)),mt.alphaMap&&(vt.alphaMap.value=mt.alphaMap,_e(mt.alphaMap,vt.alphaMapTransform)),mt.alphaTest>0&&(vt.alphaTest.value=mt.alphaTest)}function ct(vt,mt){vt.specular.value.copy(mt.specular),vt.shininess.value=Math.max(mt.shininess,1e-4)}function ut(vt,mt){mt.gradientMap&&(vt.gradientMap.value=mt.gradientMap)}function ht(vt,mt){vt.metalness.value=mt.metalness,mt.metalnessMap&&(vt.metalnessMap.value=mt.metalnessMap,_e(mt.metalnessMap,vt.metalnessMapTransform)),vt.roughness.value=mt.roughness,mt.roughnessMap&&(vt.roughnessMap.value=mt.roughnessMap,_e(mt.roughnessMap,vt.roughnessMapTransform)),_.get(mt).envMap&&(vt.envMapIntensity.value=mt.envMapIntensity)}function pt(vt,mt,_t){vt.ior.value=mt.ior,mt.sheen>0&&(vt.sheenColor.value.copy(mt.sheenColor).multiplyScalar(mt.sheen),vt.sheenRoughness.value=mt.sheenRoughness,mt.sheenColorMap&&(vt.sheenColorMap.value=mt.sheenColorMap,_e(mt.sheenColorMap,vt.sheenColorMapTransform)),mt.sheenRoughnessMap&&(vt.sheenRoughnessMap.value=mt.sheenRoughnessMap,_e(mt.sheenRoughnessMap,vt.sheenRoughnessMapTransform))),mt.clearcoat>0&&(vt.clearcoat.value=mt.clearcoat,vt.clearcoatRoughness.value=mt.clearcoatRoughness,mt.clearcoatMap&&(vt.clearcoatMap.value=mt.clearcoatMap,_e(mt.clearcoatMap,vt.clearcoatMapTransform)),mt.clearcoatRoughnessMap&&(vt.clearcoatRoughnessMap.value=mt.clearcoatRoughnessMap,_e(mt.clearcoatRoughnessMap,vt.clearcoatRoughnessMapTransform)),mt.clearcoatNormalMap&&(vt.clearcoatNormalMap.value=mt.clearcoatNormalMap,_e(mt.clearcoatNormalMap,vt.clearcoatNormalMapTransform),vt.clearcoatNormalScale.value.copy(mt.clearcoatNormalScale),mt.side===BackSide&&vt.clearcoatNormalScale.value.negate())),mt.iridescence>0&&(vt.iridescence.value=mt.iridescence,vt.iridescenceIOR.value=mt.iridescenceIOR,vt.iridescenceThicknessMinimum.value=mt.iridescenceThicknessRange[0],vt.iridescenceThicknessMaximum.value=mt.iridescenceThicknessRange[1],mt.iridescenceMap&&(vt.iridescenceMap.value=mt.iridescenceMap,_e(mt.iridescenceMap,vt.iridescenceMapTransform)),mt.iridescenceThicknessMap&&(vt.iridescenceThicknessMap.value=mt.iridescenceThicknessMap,_e(mt.iridescenceThicknessMap,vt.iridescenceThicknessMapTransform))),mt.transmission>0&&(vt.transmission.value=mt.transmission,vt.transmissionSamplerMap.value=_t.texture,vt.transmissionSamplerSize.value.set(_t.width,_t.height),mt.transmissionMap&&(vt.transmissionMap.value=mt.transmissionMap,_e(mt.transmissionMap,vt.transmissionMapTransform)),vt.thickness.value=mt.thickness,mt.thicknessMap&&(vt.thicknessMap.value=mt.thicknessMap,_e(mt.thicknessMap,vt.thicknessMapTransform)),vt.attenuationDistance.value=mt.attenuationDistance,vt.attenuationColor.value.copy(mt.attenuationColor)),mt.anisotropy>0&&(vt.anisotropyVector.value.set(mt.anisotropy*Math.cos(mt.anisotropyRotation),mt.anisotropy*Math.sin(mt.anisotropyRotation)),mt.anisotropyMap&&(vt.anisotropyMap.value=mt.anisotropyMap,_e(mt.anisotropyMap,vt.anisotropyMapTransform))),vt.specularIntensity.value=mt.specularIntensity,vt.specularColor.value.copy(mt.specularColor),mt.specularColorMap&&(vt.specularColorMap.value=mt.specularColorMap,_e(mt.specularColorMap,vt.specularColorMapTransform)),mt.specularIntensityMap&&(vt.specularIntensityMap.value=mt.specularIntensityMap,_e(mt.specularIntensityMap,vt.specularIntensityMapTransform))}function gt(vt,mt){mt.matcap&&(vt.matcap.value=mt.matcap)}function yt(vt,mt){const _t=_.get(mt).light;vt.referencePosition.value.setFromMatrixPosition(_t.matrixWorld),vt.nearDistance.value=_t.shadow.camera.near,vt.farDistance.value=_t.shadow.camera.far}return{refreshFogUniforms:nt,refreshMaterialUniforms:rt}}function WebGLUniformsGroups(tt,_,_e,nt){let rt={},it={},ot=[];const st=_e.isWebGL2?tt.getParameter(tt.MAX_UNIFORM_BUFFER_BINDINGS):0;function at(_t,xt){const St=xt.program;nt.uniformBlockBinding(_t,St)}function lt(_t,xt){let St=rt[_t.id];St===void 0&&(gt(_t),St=ct(_t),rt[_t.id]=St,_t.addEventListener("dispose",vt));const Tt=xt.program;nt.updateUBOMapping(_t,Tt);const Mt=_.render.frame;it[_t.id]!==Mt&&(ht(_t),it[_t.id]=Mt)}function ct(_t){const xt=ut();_t.__bindingPointIndex=xt;const St=tt.createBuffer(),Tt=_t.__size,Mt=_t.usage;return tt.bindBuffer(tt.UNIFORM_BUFFER,St),tt.bufferData(tt.UNIFORM_BUFFER,Tt,Mt),tt.bindBuffer(tt.UNIFORM_BUFFER,null),tt.bindBufferBase(tt.UNIFORM_BUFFER,xt,St),St}function ut(){for(let _t=0;_t<st;_t++)if(ot.indexOf(_t)===-1)return ot.push(_t),_t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function ht(_t){const xt=rt[_t.id],St=_t.uniforms,Tt=_t.__cache;tt.bindBuffer(tt.UNIFORM_BUFFER,xt);for(let Mt=0,bt=St.length;Mt<bt;Mt++){const Pt=St[Mt];if(pt(Pt,Mt,Tt)===!0){const wt=Pt.__offset,Bt=Array.isArray(Pt.value)?Pt.value:[Pt.value];let Ot=0;for(let Ut=0;Ut<Bt.length;Ut++){const Nt=Bt[Ut],zt=yt(Nt);typeof Nt=="number"?(Pt.__data[0]=Nt,tt.bufferSubData(tt.UNIFORM_BUFFER,wt+Ot,Pt.__data)):Nt.isMatrix3?(Pt.__data[0]=Nt.elements[0],Pt.__data[1]=Nt.elements[1],Pt.__data[2]=Nt.elements[2],Pt.__data[3]=Nt.elements[0],Pt.__data[4]=Nt.elements[3],Pt.__data[5]=Nt.elements[4],Pt.__data[6]=Nt.elements[5],Pt.__data[7]=Nt.elements[0],Pt.__data[8]=Nt.elements[6],Pt.__data[9]=Nt.elements[7],Pt.__data[10]=Nt.elements[8],Pt.__data[11]=Nt.elements[0]):(Nt.toArray(Pt.__data,Ot),Ot+=zt.storage/Float32Array.BYTES_PER_ELEMENT)}tt.bufferSubData(tt.UNIFORM_BUFFER,wt,Pt.__data)}}tt.bindBuffer(tt.UNIFORM_BUFFER,null)}function pt(_t,xt,St){const Tt=_t.value;if(St[xt]===void 0){if(typeof Tt=="number")St[xt]=Tt;else{const Mt=Array.isArray(Tt)?Tt:[Tt],bt=[];for(let Pt=0;Pt<Mt.length;Pt++)bt.push(Mt[Pt].clone());St[xt]=bt}return!0}else if(typeof Tt=="number"){if(St[xt]!==Tt)return St[xt]=Tt,!0}else{const Mt=Array.isArray(St[xt])?St[xt]:[St[xt]],bt=Array.isArray(Tt)?Tt:[Tt];for(let Pt=0;Pt<Mt.length;Pt++){const wt=Mt[Pt];if(wt.equals(bt[Pt])===!1)return wt.copy(bt[Pt]),!0}}return!1}function gt(_t){const xt=_t.uniforms;let St=0;const Tt=16;let Mt=0;for(let bt=0,Pt=xt.length;bt<Pt;bt++){const wt=xt[bt],Bt={boundary:0,storage:0},Ot=Array.isArray(wt.value)?wt.value:[wt.value];for(let Ut=0,Nt=Ot.length;Ut<Nt;Ut++){const zt=Ot[Ut],jt=yt(zt);Bt.boundary+=jt.boundary,Bt.storage+=jt.storage}if(wt.__data=new Float32Array(Bt.storage/Float32Array.BYTES_PER_ELEMENT),wt.__offset=St,bt>0){Mt=St%Tt;const Ut=Tt-Mt;Mt!==0&&Ut-Bt.boundary<0&&(St+=Tt-Mt,wt.__offset=St)}St+=Bt.storage}return Mt=St%Tt,Mt>0&&(St+=Tt-Mt),_t.__size=St,_t.__cache={},this}function yt(_t){const xt={boundary:0,storage:0};return typeof _t=="number"?(xt.boundary=4,xt.storage=4):_t.isVector2?(xt.boundary=8,xt.storage=8):_t.isVector3||_t.isColor?(xt.boundary=16,xt.storage=12):_t.isVector4?(xt.boundary=16,xt.storage=16):_t.isMatrix3?(xt.boundary=48,xt.storage=48):_t.isMatrix4?(xt.boundary=64,xt.storage=64):_t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_t),xt}function vt(_t){const xt=_t.target;xt.removeEventListener("dispose",vt);const St=ot.indexOf(xt.__bindingPointIndex);ot.splice(St,1),tt.deleteBuffer(rt[xt.id]),delete rt[xt.id],delete it[xt.id]}function mt(){for(const _t in rt)tt.deleteBuffer(rt[_t]);ot=[],rt={},it={}}return{bind:at,update:lt,dispose:mt}}function createCanvasElement(){const tt=createElementNS("canvas");return tt.style.display="block",tt}class WebGLRenderer{constructor(_={}){const{canvas:_e=createCanvasElement(),context:nt=null,depth:rt=!0,stencil:it=!0,alpha:ot=!1,antialias:st=!1,premultipliedAlpha:at=!0,preserveDrawingBuffer:lt=!1,powerPreference:ct="default",failIfMajorPerformanceCaveat:ut=!1}=_;this.isWebGLRenderer=!0;let ht;nt!==null?ht=nt.getContextAttributes().alpha:ht=ot;const pt=new Uint32Array(4),gt=new Int32Array(4);let yt=null,vt=null;const mt=[],_t=[];this.domElement=_e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=SRGBColorSpace,this.useLegacyLights=!0,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const xt=this;let St=!1,Tt=0,Mt=0,bt=null,Pt=-1,wt=null;const Bt=new Vector4,Ot=new Vector4;let Ut=null;const Nt=new Color$1(0);let zt=0,jt=_e.width,Yt=_e.height,qt=1,Gt=null,Xt=null;const Vt=new Vector4(0,0,jt,Yt),Wt=new Vector4(0,0,jt,Yt);let $t=!1;const nn=new Frustum;let en=!1,sn=!1,rn=null;const an=new Matrix4,dn=new Vector2,Bn=new Vector3,Nn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function gn(){return bt===null?qt:1}let Ht=nt;function xn(Rt,kt){for(let Jt=0;Jt<Rt.length;Jt++){const Kt=Rt[Jt],Qt=_e.getContext(Kt,kt);if(Qt!==null)return Qt}return null}try{const Rt={alpha:!0,depth:rt,stencil:it,antialias:st,premultipliedAlpha:at,preserveDrawingBuffer:lt,powerPreference:ct,failIfMajorPerformanceCaveat:ut};if("setAttribute"in _e&&_e.setAttribute("data-engine",`three.js r${REVISION}`),_e.addEventListener("webglcontextlost",fn,!1),_e.addEventListener("webglcontextrestored",mn,!1),_e.addEventListener("webglcontextcreationerror",Wn,!1),Ht===null){const kt=["webgl2","webgl","experimental-webgl"];if(xt.isWebGL1Renderer===!0&&kt.shift(),Ht=xn(kt,Rt),Ht===null)throw xn(kt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Ht instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Ht.getShaderPrecisionFormat===void 0&&(Ht.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Rt){throw console.error("THREE.WebGLRenderer: "+Rt.message),Rt}let hn,vn,pn,Hn,yn,Ln,On,Sn,jn,Ft,Dt,on,bn,Mn,wn,$n,Gn,En,zn,Vn,Un,Fn,kn,Yn;function nr(){hn=new WebGLExtensions(Ht),vn=new WebGLCapabilities(Ht,hn,_),hn.init(vn),Fn=new WebGLUtils(Ht,hn,vn),pn=new WebGLState(Ht,hn,vn),Hn=new WebGLInfo(Ht),yn=new WebGLProperties,Ln=new WebGLTextures(Ht,hn,pn,yn,vn,Fn,Hn),On=new WebGLCubeMaps(xt),Sn=new WebGLCubeUVMaps(xt),jn=new WebGLAttributes(Ht,vn),kn=new WebGLBindingStates(Ht,hn,jn,vn),Ft=new WebGLGeometries(Ht,jn,Hn,kn),Dt=new WebGLObjects(Ht,Ft,jn,Hn),zn=new WebGLMorphtargets(Ht,vn,Ln),$n=new WebGLClipping(yn),on=new WebGLPrograms(xt,On,Sn,hn,vn,kn,$n),bn=new WebGLMaterials(xt,yn),Mn=new WebGLRenderLists,wn=new WebGLRenderStates(hn,vn),En=new WebGLBackground(xt,On,Sn,pn,Dt,ht,at),Gn=new WebGLShadowMap(xt,Dt,vn),Yn=new WebGLUniformsGroups(Ht,Hn,vn,pn),Vn=new WebGLBufferRenderer(Ht,hn,Hn,vn),Un=new WebGLIndexedBufferRenderer(Ht,hn,Hn,vn),Hn.programs=on.programs,xt.capabilities=vn,xt.extensions=hn,xt.properties=yn,xt.renderLists=Mn,xt.shadowMap=Gn,xt.state=pn,xt.info=Hn}nr();const tn=new WebXRManager(xt,Ht);this.xr=tn,this.getContext=function(){return Ht},this.getContextAttributes=function(){return Ht.getContextAttributes()},this.forceContextLoss=function(){const Rt=hn.get("WEBGL_lose_context");Rt&&Rt.loseContext()},this.forceContextRestore=function(){const Rt=hn.get("WEBGL_lose_context");Rt&&Rt.restoreContext()},this.getPixelRatio=function(){return qt},this.setPixelRatio=function(Rt){Rt!==void 0&&(qt=Rt,this.setSize(jt,Yt,!1))},this.getSize=function(Rt){return Rt.set(jt,Yt)},this.setSize=function(Rt,kt,Jt=!0){if(tn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}jt=Rt,Yt=kt,_e.width=Math.floor(Rt*qt),_e.height=Math.floor(kt*qt),Jt===!0&&(_e.style.width=Rt+"px",_e.style.height=kt+"px"),this.setViewport(0,0,Rt,kt)},this.getDrawingBufferSize=function(Rt){return Rt.set(jt*qt,Yt*qt).floor()},this.setDrawingBufferSize=function(Rt,kt,Jt){jt=Rt,Yt=kt,qt=Jt,_e.width=Math.floor(Rt*Jt),_e.height=Math.floor(kt*Jt),this.setViewport(0,0,Rt,kt)},this.getCurrentViewport=function(Rt){return Rt.copy(Bt)},this.getViewport=function(Rt){return Rt.copy(Vt)},this.setViewport=function(Rt,kt,Jt,Kt){Rt.isVector4?Vt.set(Rt.x,Rt.y,Rt.z,Rt.w):Vt.set(Rt,kt,Jt,Kt),pn.viewport(Bt.copy(Vt).multiplyScalar(qt).floor())},this.getScissor=function(Rt){return Rt.copy(Wt)},this.setScissor=function(Rt,kt,Jt,Kt){Rt.isVector4?Wt.set(Rt.x,Rt.y,Rt.z,Rt.w):Wt.set(Rt,kt,Jt,Kt),pn.scissor(Ot.copy(Wt).multiplyScalar(qt).floor())},this.getScissorTest=function(){return $t},this.setScissorTest=function(Rt){pn.setScissorTest($t=Rt)},this.setOpaqueSort=function(Rt){Gt=Rt},this.setTransparentSort=function(Rt){Xt=Rt},this.getClearColor=function(Rt){return Rt.copy(En.getClearColor())},this.setClearColor=function(){En.setClearColor.apply(En,arguments)},this.getClearAlpha=function(){return En.getClearAlpha()},this.setClearAlpha=function(){En.setClearAlpha.apply(En,arguments)},this.clear=function(Rt=!0,kt=!0,Jt=!0){let Kt=0;if(Rt){let Qt=!1;if(bt!==null){const _n=bt.texture.format;Qt=_n===RGBAIntegerFormat||_n===RGIntegerFormat||_n===RedIntegerFormat}if(Qt){const _n=bt.texture.type,An=_n===UnsignedByteType||_n===UnsignedIntType||_n===UnsignedShortType||_n===UnsignedInt248Type||_n===UnsignedShort4444Type||_n===UnsignedShort5551Type,Rn=En.getClearColor(),Pn=En.getClearAlpha(),Dn=Rn.r,cn=Rn.g,Qn=Rn.b,Xn=yn.get(bt).__webglFramebuffer;An?(pt[0]=Dn,pt[1]=cn,pt[2]=Qn,pt[3]=Pn,Ht.clearBufferuiv(Ht.COLOR,Xn,pt)):(gt[0]=Dn,gt[1]=cn,gt[2]=Qn,gt[3]=Pn,Ht.clearBufferiv(Ht.COLOR,Xn,gt))}else Kt|=Ht.COLOR_BUFFER_BIT}kt&&(Kt|=Ht.DEPTH_BUFFER_BIT),Jt&&(Kt|=Ht.STENCIL_BUFFER_BIT),Ht.clear(Kt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){_e.removeEventListener("webglcontextlost",fn,!1),_e.removeEventListener("webglcontextrestored",mn,!1),_e.removeEventListener("webglcontextcreationerror",Wn,!1),Mn.dispose(),wn.dispose(),yn.dispose(),On.dispose(),Sn.dispose(),Dt.dispose(),kn.dispose(),Yn.dispose(),on.dispose(),tn.dispose(),tn.removeEventListener("sessionstart",Dr),tn.removeEventListener("sessionend",Mr),rn&&(rn.dispose(),rn=null),_r.stop()};function fn(Rt){Rt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),St=!0}function mn(){console.log("THREE.WebGLRenderer: Context Restored."),St=!1;const Rt=Hn.autoReset,kt=Gn.enabled,Jt=Gn.autoUpdate,Kt=Gn.needsUpdate,Qt=Gn.type;nr(),Hn.autoReset=Rt,Gn.enabled=kt,Gn.autoUpdate=Jt,Gn.needsUpdate=Kt,Gn.type=Qt}function Wn(Rt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Rt.statusMessage)}function Zn(Rt){const kt=Rt.target;kt.removeEventListener("dispose",Zn),mr(kt)}function mr(Rt){xr(Rt),yn.remove(Rt)}function xr(Rt){const kt=yn.get(Rt).programs;kt!==void 0&&(kt.forEach(function(Jt){on.releaseProgram(Jt)}),Rt.isShaderMaterial&&on.releaseShaderCache(Rt))}this.renderBufferDirect=function(Rt,kt,Jt,Kt,Qt,_n){kt===null&&(kt=Nn);const An=Qt.isMesh&&Qt.matrixWorld.determinant()<0,Rn=Kr(Rt,kt,Jt,Kt,Qt);pn.setMaterial(Kt,An);let Pn=Jt.index,Dn=1;Kt.wireframe===!0&&(Pn=Ft.getWireframeAttribute(Jt),Dn=2);const cn=Jt.drawRange,Qn=Jt.attributes.position;let Xn=cn.start*Dn,Jn=(cn.start+cn.count)*Dn;_n!==null&&(Xn=Math.max(Xn,_n.start*Dn),Jn=Math.min(Jn,(_n.start+_n.count)*Dn)),Pn!==null?(Xn=Math.max(Xn,0),Jn=Math.min(Jn,Pn.count)):Qn!=null&&(Xn=Math.max(Xn,0),Jn=Math.min(Jn,Qn.count));const ar=Jn-Xn;if(ar<0||ar===1/0)return;kn.setup(Qt,Kt,Rn,Jt,Pn);let ur,or=Vn;if(Pn!==null&&(ur=jn.get(Pn),or=Un,or.setIndex(ur)),Qt.isMesh)Kt.wireframe===!0?(pn.setLineWidth(Kt.wireframeLinewidth*gn()),or.setMode(Ht.LINES)):or.setMode(Ht.TRIANGLES);else if(Qt.isLine){let qn=Kt.linewidth;qn===void 0&&(qn=1),pn.setLineWidth(qn*gn()),Qt.isLineSegments?or.setMode(Ht.LINES):Qt.isLineLoop?or.setMode(Ht.LINE_LOOP):or.setMode(Ht.LINE_STRIP)}else Qt.isPoints?or.setMode(Ht.POINTS):Qt.isSprite&&or.setMode(Ht.TRIANGLES);if(Qt.isInstancedMesh)or.renderInstances(Xn,ar,Qt.count);else if(Jt.isInstancedBufferGeometry){const qn=Jt._maxInstanceCount!==void 0?Jt._maxInstanceCount:1/0,fr=Math.min(Jt.instanceCount,qn);or.renderInstances(Xn,ar,fr)}else or.render(Xn,ar)},this.compile=function(Rt,kt){function Jt(Kt,Qt,_n){Kt.transparent===!0&&Kt.side===DoubleSide&&Kt.forceSinglePass===!1?(Kt.side=BackSide,Kt.needsUpdate=!0,Or(Kt,Qt,_n),Kt.side=FrontSide,Kt.needsUpdate=!0,Or(Kt,Qt,_n),Kt.side=DoubleSide):Or(Kt,Qt,_n)}vt=wn.get(Rt),vt.init(),_t.push(vt),Rt.traverseVisible(function(Kt){Kt.isLight&&Kt.layers.test(kt.layers)&&(vt.pushLight(Kt),Kt.castShadow&&vt.pushShadow(Kt))}),vt.setupLights(xt.useLegacyLights),Rt.traverse(function(Kt){const Qt=Kt.material;if(Qt)if(Array.isArray(Qt))for(let _n=0;_n<Qt.length;_n++){const An=Qt[_n];Jt(An,Rt,Kt)}else Jt(Qt,Rt,Kt)}),_t.pop(),vt=null};let Ar=null;function Br(Rt){Ar&&Ar(Rt)}function Dr(){_r.stop()}function Mr(){_r.start()}const _r=new WebGLAnimation;_r.setAnimationLoop(Br),typeof self<"u"&&_r.setContext(self),this.setAnimationLoop=function(Rt){Ar=Rt,tn.setAnimationLoop(Rt),Rt===null?_r.stop():_r.start()},tn.addEventListener("sessionstart",Dr),tn.addEventListener("sessionend",Mr),this.render=function(Rt,kt){if(kt!==void 0&&kt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(St===!0)return;Rt.matrixWorldAutoUpdate===!0&&Rt.updateMatrixWorld(),kt.parent===null&&kt.matrixWorldAutoUpdate===!0&&kt.updateMatrixWorld(),tn.enabled===!0&&tn.isPresenting===!0&&(kt=tn.updateCameraXR(kt)),Rt.isScene===!0&&Rt.onBeforeRender(xt,Rt,kt,bt),vt=wn.get(Rt,_t.length),vt.init(),_t.push(vt),an.multiplyMatrices(kt.projectionMatrix,kt.matrixWorldInverse),nn.setFromProjectionMatrix(an),sn=this.localClippingEnabled,en=$n.init(this.clippingPlanes,sn),yt=Mn.get(Rt,mt.length),yt.init(),mt.push(yt),ro(Rt,kt,0,xt.sortObjects),yt.finish(),xt.sortObjects===!0&&yt.sort(Gt,Xt),en===!0&&$n.beginShadows();const Jt=vt.state.shadowsArray;if(Gn.render(Jt,Rt,kt),en===!0&&$n.endShadows(),this.info.autoReset===!0&&this.info.reset(),this.info.render.frame++,En.render(yt,Rt),vt.setupLights(xt.useLegacyLights),kt.isArrayCamera){const Kt=kt.cameras;for(let Qt=0,_n=Kt.length;Qt<_n;Qt++){const An=Kt[Qt];Qr(yt,Rt,An,An.viewport)}}else Qr(yt,Rt,kt);bt!==null&&(Ln.updateMultisampleRenderTarget(bt),Ln.updateRenderTargetMipmap(bt)),Rt.isScene===!0&&Rt.onAfterRender(xt,Rt,kt),kn.resetDefaultState(),Pt=-1,wt=null,_t.pop(),_t.length>0?vt=_t[_t.length-1]:vt=null,mt.pop(),mt.length>0?yt=mt[mt.length-1]:yt=null};function ro(Rt,kt,Jt,Kt){if(Rt.visible===!1)return;if(Rt.layers.test(kt.layers)){if(Rt.isGroup)Jt=Rt.renderOrder;else if(Rt.isLOD)Rt.autoUpdate===!0&&Rt.update(kt);else if(Rt.isLight)vt.pushLight(Rt),Rt.castShadow&&vt.pushShadow(Rt);else if(Rt.isSprite){if(!Rt.frustumCulled||nn.intersectsSprite(Rt)){Kt&&Bn.setFromMatrixPosition(Rt.matrixWorld).applyMatrix4(an);const An=Dt.update(Rt),Rn=Rt.material;Rn.visible&&yt.push(Rt,An,Rn,Jt,Bn.z,null)}}else if((Rt.isMesh||Rt.isLine||Rt.isPoints)&&(!Rt.frustumCulled||nn.intersectsObject(Rt))){Rt.isSkinnedMesh&&Rt.skeleton.frame!==Hn.render.frame&&(Rt.skeleton.update(),Rt.skeleton.frame=Hn.render.frame);const An=Dt.update(Rt),Rn=Rt.material;if(Kt&&(Rt.boundingSphere!==void 0?(Rt.boundingSphere===null&&Rt.computeBoundingSphere(),Bn.copy(Rt.boundingSphere.center)):(An.boundingSphere===null&&An.computeBoundingSphere(),Bn.copy(An.boundingSphere.center)),Bn.applyMatrix4(Rt.matrixWorld).applyMatrix4(an)),Array.isArray(Rn)){const Pn=An.groups;for(let Dn=0,cn=Pn.length;Dn<cn;Dn++){const Qn=Pn[Dn],Xn=Rn[Qn.materialIndex];Xn&&Xn.visible&&yt.push(Rt,An,Xn,Jt,Bn.z,Qn)}}else Rn.visible&&yt.push(Rt,An,Rn,Jt,Bn.z,null)}}const _n=Rt.children;for(let An=0,Rn=_n.length;An<Rn;An++)ro(_n[An],kt,Jt,Kt)}function Qr(Rt,kt,Jt,Kt){const Qt=Rt.opaque,_n=Rt.transmissive,An=Rt.transparent;vt.setupLightsView(Jt),en===!0&&$n.setGlobalState(xt.clippingPlanes,Jt),_n.length>0&&Cr(Qt,_n,kt,Jt),Kt&&pn.viewport(Bt.copy(Kt)),Qt.length>0&&Nr(Qt,kt,Jt),_n.length>0&&Nr(_n,kt,Jt),An.length>0&&Nr(An,kt,Jt),pn.buffers.depth.setTest(!0),pn.buffers.depth.setMask(!0),pn.buffers.color.setMask(!0),pn.setPolygonOffset(!1)}function Cr(Rt,kt,Jt,Kt){const Qt=vn.isWebGL2;rn===null&&(rn=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:hn.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:Qt&&st===!0?4:0})),xt.getDrawingBufferSize(dn),Qt?rn.setSize(dn.x,dn.y):rn.setSize(floorPowerOfTwo(dn.x),floorPowerOfTwo(dn.y));const _n=xt.getRenderTarget();xt.setRenderTarget(rn),xt.getClearColor(Nt),zt=xt.getClearAlpha(),zt<1&&xt.setClearColor(16777215,.5),xt.clear();const An=xt.toneMapping;xt.toneMapping=NoToneMapping,Nr(Rt,Jt,Kt),Ln.updateMultisampleRenderTarget(rn),Ln.updateRenderTargetMipmap(rn);let Rn=!1;for(let Pn=0,Dn=kt.length;Pn<Dn;Pn++){const cn=kt[Pn],Qn=cn.object,Xn=cn.geometry,Jn=cn.material,ar=cn.group;if(Jn.side===DoubleSide&&Qn.layers.test(Kt.layers)){const ur=Jn.side;Jn.side=BackSide,Jn.needsUpdate=!0,jr(Qn,Jt,Kt,Xn,Jn,ar),Jn.side=ur,Jn.needsUpdate=!0,Rn=!0}}Rn===!0&&(Ln.updateMultisampleRenderTarget(rn),Ln.updateRenderTargetMipmap(rn)),xt.setRenderTarget(_n),xt.setClearColor(Nt,zt),xt.toneMapping=An}function Nr(Rt,kt,Jt){const Kt=kt.isScene===!0?kt.overrideMaterial:null;for(let Qt=0,_n=Rt.length;Qt<_n;Qt++){const An=Rt[Qt],Rn=An.object,Pn=An.geometry,Dn=Kt===null?An.material:Kt,cn=An.group;Rn.layers.test(Jt.layers)&&jr(Rn,kt,Jt,Pn,Dn,cn)}}function jr(Rt,kt,Jt,Kt,Qt,_n){Rt.onBeforeRender(xt,kt,Jt,Kt,Qt,_n),Rt.modelViewMatrix.multiplyMatrices(Jt.matrixWorldInverse,Rt.matrixWorld),Rt.normalMatrix.getNormalMatrix(Rt.modelViewMatrix),Qt.onBeforeRender(xt,kt,Jt,Kt,Rt,_n),Qt.transparent===!0&&Qt.side===DoubleSide&&Qt.forceSinglePass===!1?(Qt.side=BackSide,Qt.needsUpdate=!0,xt.renderBufferDirect(Jt,kt,Kt,Qt,Rt,_n),Qt.side=FrontSide,Qt.needsUpdate=!0,xt.renderBufferDirect(Jt,kt,Kt,Qt,Rt,_n),Qt.side=DoubleSide):xt.renderBufferDirect(Jt,kt,Kt,Qt,Rt,_n),Rt.onAfterRender(xt,kt,Jt,Kt,Qt,_n)}function Or(Rt,kt,Jt){kt.isScene!==!0&&(kt=Nn);const Kt=yn.get(Rt),Qt=vt.state.lights,_n=vt.state.shadowsArray,An=Qt.state.version,Rn=on.getParameters(Rt,Qt.state,_n,kt,Jt),Pn=on.getProgramCacheKey(Rn);let Dn=Kt.programs;Kt.environment=Rt.isMeshStandardMaterial?kt.environment:null,Kt.fog=kt.fog,Kt.envMap=(Rt.isMeshStandardMaterial?Sn:On).get(Rt.envMap||Kt.environment),Dn===void 0&&(Rt.addEventListener("dispose",Zn),Dn=new Map,Kt.programs=Dn);let cn=Dn.get(Pn);if(cn!==void 0){if(Kt.currentProgram===cn&&Kt.lightsStateVersion===An)return sr(Rt,Rn),cn}else Rn.uniforms=on.getUniforms(Rt),Rt.onBuild(Jt,Rn,xt),Rt.onBeforeCompile(Rn,xt),cn=on.acquireProgram(Rn,Pn),Dn.set(Pn,cn),Kt.uniforms=Rn.uniforms;const Qn=Kt.uniforms;(!Rt.isShaderMaterial&&!Rt.isRawShaderMaterial||Rt.clipping===!0)&&(Qn.clippingPlanes=$n.uniform),sr(Rt,Rn),Kt.needsLights=It(Rt),Kt.lightsStateVersion=An,Kt.needsLights&&(Qn.ambientLightColor.value=Qt.state.ambient,Qn.lightProbe.value=Qt.state.probe,Qn.directionalLights.value=Qt.state.directional,Qn.directionalLightShadows.value=Qt.state.directionalShadow,Qn.spotLights.value=Qt.state.spot,Qn.spotLightShadows.value=Qt.state.spotShadow,Qn.rectAreaLights.value=Qt.state.rectArea,Qn.ltc_1.value=Qt.state.rectAreaLTC1,Qn.ltc_2.value=Qt.state.rectAreaLTC2,Qn.pointLights.value=Qt.state.point,Qn.pointLightShadows.value=Qt.state.pointShadow,Qn.hemisphereLights.value=Qt.state.hemi,Qn.directionalShadowMap.value=Qt.state.directionalShadowMap,Qn.directionalShadowMatrix.value=Qt.state.directionalShadowMatrix,Qn.spotShadowMap.value=Qt.state.spotShadowMap,Qn.spotLightMatrix.value=Qt.state.spotLightMatrix,Qn.spotLightMap.value=Qt.state.spotLightMap,Qn.pointShadowMap.value=Qt.state.pointShadowMap,Qn.pointShadowMatrix.value=Qt.state.pointShadowMatrix);const Xn=cn.getUniforms(),Jn=WebGLUniforms.seqWithValue(Xn.seq,Qn);return Kt.currentProgram=cn,Kt.uniformsList=Jn,cn}function sr(Rt,kt){const Jt=yn.get(Rt);Jt.outputColorSpace=kt.outputColorSpace,Jt.instancing=kt.instancing,Jt.skinning=kt.skinning,Jt.morphTargets=kt.morphTargets,Jt.morphNormals=kt.morphNormals,Jt.morphColors=kt.morphColors,Jt.morphTargetsCount=kt.morphTargetsCount,Jt.numClippingPlanes=kt.numClippingPlanes,Jt.numIntersection=kt.numClipIntersection,Jt.vertexAlphas=kt.vertexAlphas,Jt.vertexTangents=kt.vertexTangents,Jt.toneMapping=kt.toneMapping}function Kr(Rt,kt,Jt,Kt,Qt){kt.isScene!==!0&&(kt=Nn),Ln.resetTextureUnits();const _n=kt.fog,An=Kt.isMeshStandardMaterial?kt.environment:null,Rn=bt===null?xt.outputColorSpace:bt.isXRRenderTarget===!0?bt.texture.colorSpace:LinearSRGBColorSpace,Pn=(Kt.isMeshStandardMaterial?Sn:On).get(Kt.envMap||An),Dn=Kt.vertexColors===!0&&!!Jt.attributes.color&&Jt.attributes.color.itemSize===4,cn=!!Jt.attributes.tangent&&(!!Kt.normalMap||Kt.anisotropy>0),Qn=!!Jt.morphAttributes.position,Xn=!!Jt.morphAttributes.normal,Jn=!!Jt.morphAttributes.color,ar=Kt.toneMapped?xt.toneMapping:NoToneMapping,ur=Jt.morphAttributes.position||Jt.morphAttributes.normal||Jt.morphAttributes.color,or=ur!==void 0?ur.length:0,qn=yn.get(Kt),fr=vt.state.lights;if(en===!0&&(sn===!0||Rt!==wt)){const pr=Rt===wt&&Kt.id===Pt;$n.setState(Kt,Rt,pr)}let rr=!1;Kt.version===qn.__version?(qn.needsLights&&qn.lightsStateVersion!==fr.state.version||qn.outputColorSpace!==Rn||Qt.isInstancedMesh&&qn.instancing===!1||!Qt.isInstancedMesh&&qn.instancing===!0||Qt.isSkinnedMesh&&qn.skinning===!1||!Qt.isSkinnedMesh&&qn.skinning===!0||qn.envMap!==Pn||Kt.fog===!0&&qn.fog!==_n||qn.numClippingPlanes!==void 0&&(qn.numClippingPlanes!==$n.numPlanes||qn.numIntersection!==$n.numIntersection)||qn.vertexAlphas!==Dn||qn.vertexTangents!==cn||qn.morphTargets!==Qn||qn.morphNormals!==Xn||qn.morphColors!==Jn||qn.toneMapping!==ar||vn.isWebGL2===!0&&qn.morphTargetsCount!==or)&&(rr=!0):(rr=!0,qn.__version=Kt.version);let gr=qn.currentProgram;rr===!0&&(gr=Or(Kt,kt,Qt));let Ir=!1,hr=!1,Rr=!1;const Pr=gr.getUniforms(),Lr=qn.uniforms;if(pn.useProgram(gr.program)&&(Ir=!0,hr=!0,Rr=!0),Kt.id!==Pt&&(Pt=Kt.id,hr=!0),Ir||wt!==Rt){if(Pr.setValue(Ht,"projectionMatrix",Rt.projectionMatrix),vn.logarithmicDepthBuffer&&Pr.setValue(Ht,"logDepthBufFC",2/(Math.log(Rt.far+1)/Math.LN2)),wt!==Rt&&(wt=Rt,hr=!0,Rr=!0),Kt.isShaderMaterial||Kt.isMeshPhongMaterial||Kt.isMeshToonMaterial||Kt.isMeshStandardMaterial||Kt.envMap){const pr=Pr.map.cameraPosition;pr!==void 0&&pr.setValue(Ht,Bn.setFromMatrixPosition(Rt.matrixWorld))}(Kt.isMeshPhongMaterial||Kt.isMeshToonMaterial||Kt.isMeshLambertMaterial||Kt.isMeshBasicMaterial||Kt.isMeshStandardMaterial||Kt.isShaderMaterial)&&Pr.setValue(Ht,"isOrthographic",Rt.isOrthographicCamera===!0),(Kt.isMeshPhongMaterial||Kt.isMeshToonMaterial||Kt.isMeshLambertMaterial||Kt.isMeshBasicMaterial||Kt.isMeshStandardMaterial||Kt.isShaderMaterial||Kt.isShadowMaterial||Qt.isSkinnedMesh)&&Pr.setValue(Ht,"viewMatrix",Rt.matrixWorldInverse)}if(Qt.isSkinnedMesh){Pr.setOptional(Ht,Qt,"bindMatrix"),Pr.setOptional(Ht,Qt,"bindMatrixInverse");const pr=Qt.skeleton;pr&&(vn.floatVertexTextures?(pr.boneTexture===null&&pr.computeBoneTexture(),Pr.setValue(Ht,"boneTexture",pr.boneTexture,Ln),Pr.setValue(Ht,"boneTextureSize",pr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Hr=Jt.morphAttributes;if((Hr.position!==void 0||Hr.normal!==void 0||Hr.color!==void 0&&vn.isWebGL2===!0)&&zn.update(Qt,Jt,gr),(hr||qn.receiveShadow!==Qt.receiveShadow)&&(qn.receiveShadow=Qt.receiveShadow,Pr.setValue(Ht,"receiveShadow",Qt.receiveShadow)),Kt.isMeshGouraudMaterial&&Kt.envMap!==null&&(Lr.envMap.value=Pn,Lr.flipEnvMap.value=Pn.isCubeTexture&&Pn.isRenderTargetTexture===!1?-1:1),hr&&(Pr.setValue(Ht,"toneMappingExposure",xt.toneMappingExposure),qn.needsLights&&_o(Lr,Rr),_n&&Kt.fog===!0&&bn.refreshFogUniforms(Lr,_n),bn.refreshMaterialUniforms(Lr,Kt,qt,Yt,rn),WebGLUniforms.upload(Ht,qn.uniformsList,Lr,Ln)),Kt.isShaderMaterial&&Kt.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Ht,qn.uniformsList,Lr,Ln),Kt.uniformsNeedUpdate=!1),Kt.isSpriteMaterial&&Pr.setValue(Ht,"center",Qt.center),Pr.setValue(Ht,"modelViewMatrix",Qt.modelViewMatrix),Pr.setValue(Ht,"normalMatrix",Qt.normalMatrix),Pr.setValue(Ht,"modelMatrix",Qt.matrixWorld),Kt.isShaderMaterial||Kt.isRawShaderMaterial){const pr=Kt.uniformsGroups;for(let $r=0,br=pr.length;$r<br;$r++)if(vn.isWebGL2){const wr=pr[$r];Yn.update(wr,gr),Yn.bind(wr,gr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return gr}function _o(Rt,kt){Rt.ambientLightColor.needsUpdate=kt,Rt.lightProbe.needsUpdate=kt,Rt.directionalLights.needsUpdate=kt,Rt.directionalLightShadows.needsUpdate=kt,Rt.pointLights.needsUpdate=kt,Rt.pointLightShadows.needsUpdate=kt,Rt.spotLights.needsUpdate=kt,Rt.spotLightShadows.needsUpdate=kt,Rt.rectAreaLights.needsUpdate=kt,Rt.hemisphereLights.needsUpdate=kt}function It(Rt){return Rt.isMeshLambertMaterial||Rt.isMeshToonMaterial||Rt.isMeshPhongMaterial||Rt.isMeshStandardMaterial||Rt.isShadowMaterial||Rt.isShaderMaterial&&Rt.lights===!0}this.getActiveCubeFace=function(){return Tt},this.getActiveMipmapLevel=function(){return Mt},this.getRenderTarget=function(){return bt},this.setRenderTargetTextures=function(Rt,kt,Jt){yn.get(Rt.texture).__webglTexture=kt,yn.get(Rt.depthTexture).__webglTexture=Jt;const Kt=yn.get(Rt);Kt.__hasExternalTextures=!0,Kt.__hasExternalTextures&&(Kt.__autoAllocateDepthBuffer=Jt===void 0,Kt.__autoAllocateDepthBuffer||hn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Kt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Rt,kt){const Jt=yn.get(Rt);Jt.__webglFramebuffer=kt,Jt.__useDefaultFramebuffer=kt===void 0},this.setRenderTarget=function(Rt,kt=0,Jt=0){bt=Rt,Tt=kt,Mt=Jt;let Kt=!0,Qt=null,_n=!1,An=!1;if(Rt){const Pn=yn.get(Rt);Pn.__useDefaultFramebuffer!==void 0?(pn.bindFramebuffer(Ht.FRAMEBUFFER,null),Kt=!1):Pn.__webglFramebuffer===void 0?Ln.setupRenderTarget(Rt):Pn.__hasExternalTextures&&Ln.rebindTextures(Rt,yn.get(Rt.texture).__webglTexture,yn.get(Rt.depthTexture).__webglTexture);const Dn=Rt.texture;(Dn.isData3DTexture||Dn.isDataArrayTexture||Dn.isCompressedArrayTexture)&&(An=!0);const cn=yn.get(Rt).__webglFramebuffer;Rt.isWebGLCubeRenderTarget?(Qt=cn[kt],_n=!0):vn.isWebGL2&&Rt.samples>0&&Ln.useMultisampledRTT(Rt)===!1?Qt=yn.get(Rt).__webglMultisampledFramebuffer:Qt=cn,Bt.copy(Rt.viewport),Ot.copy(Rt.scissor),Ut=Rt.scissorTest}else Bt.copy(Vt).multiplyScalar(qt).floor(),Ot.copy(Wt).multiplyScalar(qt).floor(),Ut=$t;if(pn.bindFramebuffer(Ht.FRAMEBUFFER,Qt)&&vn.drawBuffers&&Kt&&pn.drawBuffers(Rt,Qt),pn.viewport(Bt),pn.scissor(Ot),pn.setScissorTest(Ut),_n){const Pn=yn.get(Rt.texture);Ht.framebufferTexture2D(Ht.FRAMEBUFFER,Ht.COLOR_ATTACHMENT0,Ht.TEXTURE_CUBE_MAP_POSITIVE_X+kt,Pn.__webglTexture,Jt)}else if(An){const Pn=yn.get(Rt.texture),Dn=kt||0;Ht.framebufferTextureLayer(Ht.FRAMEBUFFER,Ht.COLOR_ATTACHMENT0,Pn.__webglTexture,Jt||0,Dn)}Pt=-1},this.readRenderTargetPixels=function(Rt,kt,Jt,Kt,Qt,_n,An){if(!(Rt&&Rt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Rn=yn.get(Rt).__webglFramebuffer;if(Rt.isWebGLCubeRenderTarget&&An!==void 0&&(Rn=Rn[An]),Rn){pn.bindFramebuffer(Ht.FRAMEBUFFER,Rn);try{const Pn=Rt.texture,Dn=Pn.format,cn=Pn.type;if(Dn!==RGBAFormat&&Fn.convert(Dn)!==Ht.getParameter(Ht.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Qn=cn===HalfFloatType&&(hn.has("EXT_color_buffer_half_float")||vn.isWebGL2&&hn.has("EXT_color_buffer_float"));if(cn!==UnsignedByteType&&Fn.convert(cn)!==Ht.getParameter(Ht.IMPLEMENTATION_COLOR_READ_TYPE)&&!(cn===FloatType&&(vn.isWebGL2||hn.has("OES_texture_float")||hn.has("WEBGL_color_buffer_float")))&&!Qn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}kt>=0&&kt<=Rt.width-Kt&&Jt>=0&&Jt<=Rt.height-Qt&&Ht.readPixels(kt,Jt,Kt,Qt,Fn.convert(Dn),Fn.convert(cn),_n)}finally{const Pn=bt!==null?yn.get(bt).__webglFramebuffer:null;pn.bindFramebuffer(Ht.FRAMEBUFFER,Pn)}}},this.copyFramebufferToTexture=function(Rt,kt,Jt=0){const Kt=Math.pow(2,-Jt),Qt=Math.floor(kt.image.width*Kt),_n=Math.floor(kt.image.height*Kt);Ln.setTexture2D(kt,0),Ht.copyTexSubImage2D(Ht.TEXTURE_2D,Jt,0,0,Rt.x,Rt.y,Qt,_n),pn.unbindTexture()},this.copyTextureToTexture=function(Rt,kt,Jt,Kt=0){const Qt=kt.image.width,_n=kt.image.height,An=Fn.convert(Jt.format),Rn=Fn.convert(Jt.type);Ln.setTexture2D(Jt,0),Ht.pixelStorei(Ht.UNPACK_FLIP_Y_WEBGL,Jt.flipY),Ht.pixelStorei(Ht.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Jt.premultiplyAlpha),Ht.pixelStorei(Ht.UNPACK_ALIGNMENT,Jt.unpackAlignment),kt.isDataTexture?Ht.texSubImage2D(Ht.TEXTURE_2D,Kt,Rt.x,Rt.y,Qt,_n,An,Rn,kt.image.data):kt.isCompressedTexture?Ht.compressedTexSubImage2D(Ht.TEXTURE_2D,Kt,Rt.x,Rt.y,kt.mipmaps[0].width,kt.mipmaps[0].height,An,kt.mipmaps[0].data):Ht.texSubImage2D(Ht.TEXTURE_2D,Kt,Rt.x,Rt.y,An,Rn,kt.image),Kt===0&&Jt.generateMipmaps&&Ht.generateMipmap(Ht.TEXTURE_2D),pn.unbindTexture()},this.copyTextureToTexture3D=function(Rt,kt,Jt,Kt,Qt=0){if(xt.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const _n=Rt.max.x-Rt.min.x+1,An=Rt.max.y-Rt.min.y+1,Rn=Rt.max.z-Rt.min.z+1,Pn=Fn.convert(Kt.format),Dn=Fn.convert(Kt.type);let cn;if(Kt.isData3DTexture)Ln.setTexture3D(Kt,0),cn=Ht.TEXTURE_3D;else if(Kt.isDataArrayTexture)Ln.setTexture2DArray(Kt,0),cn=Ht.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Ht.pixelStorei(Ht.UNPACK_FLIP_Y_WEBGL,Kt.flipY),Ht.pixelStorei(Ht.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Kt.premultiplyAlpha),Ht.pixelStorei(Ht.UNPACK_ALIGNMENT,Kt.unpackAlignment);const Qn=Ht.getParameter(Ht.UNPACK_ROW_LENGTH),Xn=Ht.getParameter(Ht.UNPACK_IMAGE_HEIGHT),Jn=Ht.getParameter(Ht.UNPACK_SKIP_PIXELS),ar=Ht.getParameter(Ht.UNPACK_SKIP_ROWS),ur=Ht.getParameter(Ht.UNPACK_SKIP_IMAGES),or=Jt.isCompressedTexture?Jt.mipmaps[0]:Jt.image;Ht.pixelStorei(Ht.UNPACK_ROW_LENGTH,or.width),Ht.pixelStorei(Ht.UNPACK_IMAGE_HEIGHT,or.height),Ht.pixelStorei(Ht.UNPACK_SKIP_PIXELS,Rt.min.x),Ht.pixelStorei(Ht.UNPACK_SKIP_ROWS,Rt.min.y),Ht.pixelStorei(Ht.UNPACK_SKIP_IMAGES,Rt.min.z),Jt.isDataTexture||Jt.isData3DTexture?Ht.texSubImage3D(cn,Qt,kt.x,kt.y,kt.z,_n,An,Rn,Pn,Dn,or.data):Jt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ht.compressedTexSubImage3D(cn,Qt,kt.x,kt.y,kt.z,_n,An,Rn,Pn,or.data)):Ht.texSubImage3D(cn,Qt,kt.x,kt.y,kt.z,_n,An,Rn,Pn,Dn,or),Ht.pixelStorei(Ht.UNPACK_ROW_LENGTH,Qn),Ht.pixelStorei(Ht.UNPACK_IMAGE_HEIGHT,Xn),Ht.pixelStorei(Ht.UNPACK_SKIP_PIXELS,Jn),Ht.pixelStorei(Ht.UNPACK_SKIP_ROWS,ar),Ht.pixelStorei(Ht.UNPACK_SKIP_IMAGES,ur),Qt===0&&Kt.generateMipmaps&&Ht.generateMipmap(cn),pn.unbindTexture()},this.initTexture=function(Rt){Rt.isCubeTexture?Ln.setTextureCube(Rt,0):Rt.isData3DTexture?Ln.setTexture3D(Rt,0):Rt.isDataArrayTexture||Rt.isCompressedArrayTexture?Ln.setTexture2DArray(Rt,0):Ln.setTexture2D(Rt,0),pn.unbindTexture()},this.resetState=function(){Tt=0,Mt=0,bt=null,pn.reset(),kn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(_){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!_}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set outputEncoding(_){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=_===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace}}class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor(_,_e=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color$1(_),this.density=_e}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Fog{constructor(_,_e=1,nt=1e3){this.isFog=!0,this.name="",this.color=new Color$1(_),this.near=_e,this.far=nt}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(_,_e){return super.copy(_,_e),_.background!==null&&(this.background=_.background.clone()),_.environment!==null&&(this.environment=_.environment.clone()),_.fog!==null&&(this.fog=_.fog.clone()),this.backgroundBlurriness=_.backgroundBlurriness,this.backgroundIntensity=_.backgroundIntensity,_.overrideMaterial!==null&&(this.overrideMaterial=_.overrideMaterial.clone()),this.matrixAutoUpdate=_.matrixAutoUpdate,this}toJSON(_){const _e=super.toJSON(_);return this.fog!==null&&(_e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(_e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(_e.object.backgroundIntensity=this.backgroundIntensity),_e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(_){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=_}}class InterleavedBuffer{constructor(_,_e){this.isInterleavedBuffer=!0,this.array=_,this.stride=_e,this.count=_!==void 0?_.length/_e:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID$1()}onUploadCallback(){}set needsUpdate(_){_===!0&&this.version++}setUsage(_){return this.usage=_,this}copy(_){return this.array=new _.array.constructor(_.array),this.count=_.count,this.stride=_.stride,this.usage=_.usage,this}copyAt(_,_e,nt){_*=this.stride,nt*=_e.stride;for(let rt=0,it=this.stride;rt<it;rt++)this.array[_+rt]=_e.array[nt+rt];return this}set(_,_e=0){return this.array.set(_,_e),this}clone(_){_.arrayBuffers===void 0&&(_.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),_.arrayBuffers[this.array.buffer._uuid]===void 0&&(_.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const _e=new this.array.constructor(_.arrayBuffers[this.array.buffer._uuid]),nt=new this.constructor(_e,this.stride);return nt.setUsage(this.usage),nt}onUpload(_){return this.onUploadCallback=_,this}toJSON(_){return _.arrayBuffers===void 0&&(_.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),_.arrayBuffers[this.array.buffer._uuid]===void 0&&(_.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$5=new Vector3;class InterleavedBufferAttribute{constructor(_,_e,nt,rt=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=_,this.itemSize=_e,this.offset=nt,this.normalized=rt}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(_){this.data.needsUpdate=_}applyMatrix4(_){for(let _e=0,nt=this.data.count;_e<nt;_e++)_vector$5.fromBufferAttribute(this,_e),_vector$5.applyMatrix4(_),this.setXYZ(_e,_vector$5.x,_vector$5.y,_vector$5.z);return this}applyNormalMatrix(_){for(let _e=0,nt=this.count;_e<nt;_e++)_vector$5.fromBufferAttribute(this,_e),_vector$5.applyNormalMatrix(_),this.setXYZ(_e,_vector$5.x,_vector$5.y,_vector$5.z);return this}transformDirection(_){for(let _e=0,nt=this.count;_e<nt;_e++)_vector$5.fromBufferAttribute(this,_e),_vector$5.transformDirection(_),this.setXYZ(_e,_vector$5.x,_vector$5.y,_vector$5.z);return this}setX(_,_e){return this.normalized&&(_e=normalize$5(_e,this.array)),this.data.array[_*this.data.stride+this.offset]=_e,this}setY(_,_e){return this.normalized&&(_e=normalize$5(_e,this.array)),this.data.array[_*this.data.stride+this.offset+1]=_e,this}setZ(_,_e){return this.normalized&&(_e=normalize$5(_e,this.array)),this.data.array[_*this.data.stride+this.offset+2]=_e,this}setW(_,_e){return this.normalized&&(_e=normalize$5(_e,this.array)),this.data.array[_*this.data.stride+this.offset+3]=_e,this}getX(_){let _e=this.data.array[_*this.data.stride+this.offset];return this.normalized&&(_e=denormalize(_e,this.array)),_e}getY(_){let _e=this.data.array[_*this.data.stride+this.offset+1];return this.normalized&&(_e=denormalize(_e,this.array)),_e}getZ(_){let _e=this.data.array[_*this.data.stride+this.offset+2];return this.normalized&&(_e=denormalize(_e,this.array)),_e}getW(_){let _e=this.data.array[_*this.data.stride+this.offset+3];return this.normalized&&(_e=denormalize(_e,this.array)),_e}setXY(_,_e,nt){return _=_*this.data.stride+this.offset,this.normalized&&(_e=normalize$5(_e,this.array),nt=normalize$5(nt,this.array)),this.data.array[_+0]=_e,this.data.array[_+1]=nt,this}setXYZ(_,_e,nt,rt){return _=_*this.data.stride+this.offset,this.normalized&&(_e=normalize$5(_e,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array)),this.data.array[_+0]=_e,this.data.array[_+1]=nt,this.data.array[_+2]=rt,this}setXYZW(_,_e,nt,rt,it){return _=_*this.data.stride+this.offset,this.normalized&&(_e=normalize$5(_e,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array),it=normalize$5(it,this.array)),this.data.array[_+0]=_e,this.data.array[_+1]=nt,this.data.array[_+2]=rt,this.data.array[_+3]=it,this}clone(_){if(_===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const _e=[];for(let nt=0;nt<this.count;nt++){const rt=nt*this.data.stride+this.offset;for(let it=0;it<this.itemSize;it++)_e.push(this.data.array[rt+it])}return new BufferAttribute(new this.array.constructor(_e),this.itemSize,this.normalized)}else return _.interleavedBuffers===void 0&&(_.interleavedBuffers={}),_.interleavedBuffers[this.data.uuid]===void 0&&(_.interleavedBuffers[this.data.uuid]=this.data.clone(_)),new InterleavedBufferAttribute(_.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(_){if(_===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const _e=[];for(let nt=0;nt<this.count;nt++){const rt=nt*this.data.stride+this.offset;for(let it=0;it<this.itemSize;it++)_e.push(this.data.array[rt+it])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:_e,normalized:this.normalized}}else return _.interleavedBuffers===void 0&&(_.interleavedBuffers={}),_.interleavedBuffers[this.data.uuid]===void 0&&(_.interleavedBuffers[this.data.uuid]=this.data.toJSON(_)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(_){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.alphaMap=_.alphaMap,this.rotation=_.rotation,this.sizeAttenuation=_.sizeAttenuation,this.fog=_.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(_){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const _e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),nt=new InterleavedBuffer(_e,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(nt,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(nt,2,3,!1))}this.geometry=_geometry,this.material=_!==void 0?_:new SpriteMaterial,this.center=new Vector2(.5,.5)}raycast(_,_e){_.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(_.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(_.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),_.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const nt=this.material.rotation;let rt,it;nt!==0&&(it=Math.cos(nt),rt=Math.sin(nt));const ot=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,ot,_worldScale,rt,it),transformVertex(_vB.set(.5,-.5,0),_mvPosition,ot,_worldScale,rt,it),transformVertex(_vC.set(.5,.5,0),_mvPosition,ot,_worldScale,rt,it),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let st=_.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(st===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,ot,_worldScale,rt,it),_uvB.set(0,1),st=_.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),st===null))return;const at=_.ray.origin.distanceTo(_intersectPoint);at<_.near||at>_.far||_e.push({distance:at,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(_,_e){return super.copy(_,_e),_.center!==void 0&&this.center.copy(_.center),this.material=_.material,this}}function transformVertex(tt,_,_e,nt,rt,it){_alignedPosition.subVectors(tt,_e).addScalar(.5).multiply(nt),rt!==void 0?(_rotatedPosition.x=it*_alignedPosition.x-rt*_alignedPosition.y,_rotatedPosition.y=rt*_alignedPosition.x+it*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),tt.copy(_),tt.x+=_rotatedPosition.x,tt.y+=_rotatedPosition.y,tt.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(_){super.copy(_,!1);const _e=_.levels;for(let nt=0,rt=_e.length;nt<rt;nt++){const it=_e[nt];this.addLevel(it.object.clone(),it.distance,it.hysteresis)}return this.autoUpdate=_.autoUpdate,this}addLevel(_,_e=0,nt=0){_e=Math.abs(_e);const rt=this.levels;let it;for(it=0;it<rt.length&&!(_e<rt[it].distance);it++);return rt.splice(it,0,{distance:_e,hysteresis:nt,object:_}),this.add(_),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(_){const _e=this.levels;if(_e.length>0){let nt,rt;for(nt=1,rt=_e.length;nt<rt;nt++){let it=_e[nt].distance;if(_e[nt].object.visible&&(it-=it*_e[nt].hysteresis),_<it)break}return _e[nt-1].object}return null}raycast(_,_e){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const rt=_.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(rt).raycast(_,_e)}}update(_){const _e=this.levels;if(_e.length>1){_v1$2.setFromMatrixPosition(_.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const nt=_v1$2.distanceTo(_v2$1)/_.zoom;_e[0].object.visible=!0;let rt,it;for(rt=1,it=_e.length;rt<it;rt++){let ot=_e[rt].distance;if(_e[rt].object.visible&&(ot-=ot*_e[rt].hysteresis),nt>=ot)_e[rt-1].object.visible=!1,_e[rt].object.visible=!0;else break}for(this._currentLevel=rt-1;rt<it;rt++)_e[rt].object.visible=!1}}toJSON(_){const _e=super.toJSON(_);this.autoUpdate===!1&&(_e.object.autoUpdate=!1),_e.object.levels=[];const nt=this.levels;for(let rt=0,it=nt.length;rt<it;rt++){const ot=nt[rt];_e.object.levels.push({object:ot.object.uuid,distance:ot.distance,hysteresis:ot.hysteresis})}return _e}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$3=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(_,_e){super(_,_e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const _=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const _e=_.getAttribute("position");for(let nt=0;nt<_e.count;nt++)_vertex.fromBufferAttribute(_e,nt),this.applyBoneTransform(nt,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const _=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const _e=_.getAttribute("position");for(let nt=0;nt<_e.count;nt++)_vertex.fromBufferAttribute(_e,nt),this.applyBoneTransform(nt,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(_,_e){return super.copy(_,_e),this.bindMode=_.bindMode,this.bindMatrix.copy(_.bindMatrix),this.bindMatrixInverse.copy(_.bindMatrixInverse),this.skeleton=_.skeleton,_.boundingBox!==null&&(this.boundingBox=_.boundingBox.clone()),_.boundingSphere!==null&&(this.boundingSphere=_.boundingSphere.clone()),this}raycast(_,_e){const nt=this.material,rt=this.matrixWorld;nt!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$3.copy(this.boundingSphere),_sphere$3.applyMatrix4(rt),_.ray.intersectsSphere(_sphere$3)!==!1&&(_inverseMatrix$2.copy(rt).invert(),_ray$2.copy(_.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(_,_e,_ray$2)))}getVertexPosition(_,_e){return super.getVertexPosition(_,_e),this.applyBoneTransform(_,_e),_e}bind(_,_e){this.skeleton=_,_e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),_e=this.matrixWorld),this.bindMatrix.copy(_e),this.bindMatrixInverse.copy(_e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const _=new Vector4,_e=this.geometry.attributes.skinWeight;for(let nt=0,rt=_e.count;nt<rt;nt++){_.fromBufferAttribute(_e,nt);const it=1/_.manhattanLength();it!==1/0?_.multiplyScalar(it):_.set(1,0,0,0),_e.setXYZW(nt,_.x,_.y,_.z,_.w)}}updateMatrixWorld(_){super.updateMatrixWorld(_),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(_,_e){const nt=this.skeleton,rt=this.geometry;_skinIndex.fromBufferAttribute(rt.attributes.skinIndex,_),_skinWeight.fromBufferAttribute(rt.attributes.skinWeight,_),_basePosition.copy(_e).applyMatrix4(this.bindMatrix),_e.set(0,0,0);for(let it=0;it<4;it++){const ot=_skinWeight.getComponent(it);if(ot!==0){const st=_skinIndex.getComponent(it);_matrix4.multiplyMatrices(nt.bones[st].matrixWorld,nt.boneInverses[st]),_e.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),ot)}}return _e.applyMatrix4(this.bindMatrixInverse)}boneTransform(_,_e){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(_,_e)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(_=null,_e=1,nt=1,rt,it,ot,st,at,lt=NearestFilter,ct=NearestFilter,ut,ht){super(null,ot,st,at,lt,ct,rt,it,ut,ht),this.isDataTexture=!0,this.image={data:_,width:_e,height:nt},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$1=new Matrix4;class Skeleton{constructor(_=[],_e=[]){this.uuid=generateUUID$1(),this.bones=_.slice(0),this.boneInverses=_e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const _=this.bones,_e=this.boneInverses;if(this.boneMatrices=new Float32Array(_.length*16),_e.length===0)this.calculateInverses();else if(_.length!==_e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let nt=0,rt=this.bones.length;nt<rt;nt++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let _=0,_e=this.bones.length;_<_e;_++){const nt=new Matrix4;this.bones[_]&&nt.copy(this.bones[_].matrixWorld).invert(),this.boneInverses.push(nt)}}pose(){for(let _=0,_e=this.bones.length;_<_e;_++){const nt=this.bones[_];nt&&nt.matrixWorld.copy(this.boneInverses[_]).invert()}for(let _=0,_e=this.bones.length;_<_e;_++){const nt=this.bones[_];nt&&(nt.parent&&nt.parent.isBone?(nt.matrix.copy(nt.parent.matrixWorld).invert(),nt.matrix.multiply(nt.matrixWorld)):nt.matrix.copy(nt.matrixWorld),nt.matrix.decompose(nt.position,nt.quaternion,nt.scale))}}update(){const _=this.bones,_e=this.boneInverses,nt=this.boneMatrices,rt=this.boneTexture;for(let it=0,ot=_.length;it<ot;it++){const st=_[it]?_[it].matrixWorld:_identityMatrix$1;_offsetMatrix.multiplyMatrices(st,_e[it]),_offsetMatrix.toArray(nt,it*16)}rt!==null&&(rt.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let _=Math.sqrt(this.bones.length*4);_=ceilPowerOfTwo(_),_=Math.max(_,4);const _e=new Float32Array(_*_*4);_e.set(this.boneMatrices);const nt=new DataTexture(_e,_,_,RGBAFormat,FloatType);return nt.needsUpdate=!0,this.boneMatrices=_e,this.boneTexture=nt,this.boneTextureSize=_,this}getBoneByName(_){for(let _e=0,nt=this.bones.length;_e<nt;_e++){const rt=this.bones[_e];if(rt.name===_)return rt}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(_,_e){this.uuid=_.uuid;for(let nt=0,rt=_.bones.length;nt<rt;nt++){const it=_.bones[nt];let ot=_e[it];ot===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",it),ot=new Bone),this.bones.push(ot),this.boneInverses.push(new Matrix4().fromArray(_.boneInverses[nt]))}return this.init(),this}toJSON(){const _={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};_.uuid=this.uuid;const _e=this.bones,nt=this.boneInverses;for(let rt=0,it=_e.length;rt<it;rt++){const ot=_e[rt];_.bones.push(ot.uuid);const st=nt[rt];_.boneInverses.push(st.toArray())}return _}}class InstancedBufferAttribute extends BufferAttribute{constructor(_,_e,nt,rt=1){super(_,_e,nt),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=rt}copy(_){return super.copy(_),this.meshPerAttribute=_.meshPerAttribute,this}toJSON(){const _=super.toJSON();return _.meshPerAttribute=this.meshPerAttribute,_.isInstancedBufferAttribute=!0,_}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh=new Mesh,_sphere$2=new Sphere;class InstancedMesh extends Mesh{constructor(_,_e,nt){super(_,_e),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(nt*16),16),this.instanceColor=null,this.count=nt,this.boundingBox=null,this.boundingSphere=null;for(let rt=0;rt<nt;rt++)this.setMatrixAt(rt,_identity)}computeBoundingBox(){const _=this.geometry,_e=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),_.boundingBox===null&&_.computeBoundingBox(),this.boundingBox.makeEmpty();for(let nt=0;nt<_e;nt++)this.getMatrixAt(nt,_instanceLocalMatrix),_box3.copy(_.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const _=this.geometry,_e=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),_.boundingSphere===null&&_.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let nt=0;nt<_e;nt++)this.getMatrixAt(nt,_instanceLocalMatrix),_sphere$2.copy(_.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$2)}copy(_,_e){return super.copy(_,_e),this.instanceMatrix.copy(_.instanceMatrix),_.instanceColor!==null&&(this.instanceColor=_.instanceColor.clone()),this.count=_.count,_.boundingBox!==null&&(this.boundingBox=_.boundingBox.clone()),_.boundingSphere!==null&&(this.boundingSphere=_.boundingSphere.clone()),this}getColorAt(_,_e){_e.fromArray(this.instanceColor.array,_*3)}getMatrixAt(_,_e){_e.fromArray(this.instanceMatrix.array,_*16)}raycast(_,_e){const nt=this.matrixWorld,rt=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$2.copy(this.boundingSphere),_sphere$2.applyMatrix4(nt),_.ray.intersectsSphere(_sphere$2)!==!1))for(let it=0;it<rt;it++){this.getMatrixAt(it,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(nt,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(_,_instanceIntersects);for(let ot=0,st=_instanceIntersects.length;ot<st;ot++){const at=_instanceIntersects[ot];at.instanceId=it,at.object=this,_e.push(at)}_instanceIntersects.length=0}}setColorAt(_,_e){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3),3)),_e.toArray(this.instanceColor.array,_*3)}setMatrixAt(_,_e){_e.toArray(this.instanceMatrix.array,_*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class LineBasicMaterial extends Material{constructor(_){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color$1(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.linewidth=_.linewidth,this.linecap=_.linecap,this.linejoin=_.linejoin,this.fog=_.fog,this}}const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere;class Line extends Object3D{constructor(_=new BufferGeometry,_e=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=_,this.material=_e,this.updateMorphTargets()}copy(_,_e){return super.copy(_,_e),this.material=_.material,this.geometry=_.geometry,this}computeLineDistances(){const _=this.geometry;if(_.index===null){const _e=_.attributes.position,nt=[0];for(let rt=1,it=_e.count;rt<it;rt++)_start$1.fromBufferAttribute(_e,rt-1),_end$1.fromBufferAttribute(_e,rt),nt[rt]=nt[rt-1],nt[rt]+=_start$1.distanceTo(_end$1);_.setAttribute("lineDistance",new Float32BufferAttribute(nt,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(_,_e){const nt=this.geometry,rt=this.matrixWorld,it=_.params.Line.threshold,ot=nt.drawRange;if(nt.boundingSphere===null&&nt.computeBoundingSphere(),_sphere$1.copy(nt.boundingSphere),_sphere$1.applyMatrix4(rt),_sphere$1.radius+=it,_.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(rt).invert(),_ray$1.copy(_.ray).applyMatrix4(_inverseMatrix$1);const st=it/((this.scale.x+this.scale.y+this.scale.z)/3),at=st*st,lt=new Vector3,ct=new Vector3,ut=new Vector3,ht=new Vector3,pt=this.isLineSegments?2:1,gt=nt.index,vt=nt.attributes.position;if(gt!==null){const mt=Math.max(0,ot.start),_t=Math.min(gt.count,ot.start+ot.count);for(let xt=mt,St=_t-1;xt<St;xt+=pt){const Tt=gt.getX(xt),Mt=gt.getX(xt+1);if(lt.fromBufferAttribute(vt,Tt),ct.fromBufferAttribute(vt,Mt),_ray$1.distanceSqToSegment(lt,ct,ht,ut)>at)continue;ht.applyMatrix4(this.matrixWorld);const Pt=_.ray.origin.distanceTo(ht);Pt<_.near||Pt>_.far||_e.push({distance:Pt,point:ut.clone().applyMatrix4(this.matrixWorld),index:xt,face:null,faceIndex:null,object:this})}}else{const mt=Math.max(0,ot.start),_t=Math.min(vt.count,ot.start+ot.count);for(let xt=mt,St=_t-1;xt<St;xt+=pt){if(lt.fromBufferAttribute(vt,xt),ct.fromBufferAttribute(vt,xt+1),_ray$1.distanceSqToSegment(lt,ct,ht,ut)>at)continue;ht.applyMatrix4(this.matrixWorld);const Mt=_.ray.origin.distanceTo(ht);Mt<_.near||Mt>_.far||_e.push({distance:Mt,point:ut.clone().applyMatrix4(this.matrixWorld),index:xt,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const _e=this.geometry.morphAttributes,nt=Object.keys(_e);if(nt.length>0){const rt=_e[nt[0]];if(rt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let it=0,ot=rt.length;it<ot;it++){const st=rt[it].name||String(it);this.morphTargetInfluences.push(0),this.morphTargetDictionary[st]=it}}}}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(_,_e){super(_,_e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const _=this.geometry;if(_.index===null){const _e=_.attributes.position,nt=[];for(let rt=0,it=_e.count;rt<it;rt+=2)_start.fromBufferAttribute(_e,rt),_end.fromBufferAttribute(_e,rt+1),nt[rt]=rt===0?0:nt[rt-1],nt[rt+1]=nt[rt]+_start.distanceTo(_end);_.setAttribute("lineDistance",new Float32BufferAttribute(nt,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(_,_e){super(_,_e),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(_){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.alphaMap=_.alphaMap,this.size=_.size,this.sizeAttenuation=_.sizeAttenuation,this.fog=_.fog,this}}const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere$6=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(_=new BufferGeometry,_e=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=_,this.material=_e,this.updateMorphTargets()}copy(_,_e){return super.copy(_,_e),this.material=_.material,this.geometry=_.geometry,this}raycast(_,_e){const nt=this.geometry,rt=this.matrixWorld,it=_.params.Points.threshold,ot=nt.drawRange;if(nt.boundingSphere===null&&nt.computeBoundingSphere(),_sphere$6.copy(nt.boundingSphere),_sphere$6.applyMatrix4(rt),_sphere$6.radius+=it,_.ray.intersectsSphere(_sphere$6)===!1)return;_inverseMatrix.copy(rt).invert(),_ray.copy(_.ray).applyMatrix4(_inverseMatrix);const st=it/((this.scale.x+this.scale.y+this.scale.z)/3),at=st*st,lt=nt.index,ut=nt.attributes.position;if(lt!==null){const ht=Math.max(0,ot.start),pt=Math.min(lt.count,ot.start+ot.count);for(let gt=ht,yt=pt;gt<yt;gt++){const vt=lt.getX(gt);_position$2.fromBufferAttribute(ut,vt),testPoint(_position$2,vt,at,rt,_,_e,this)}}else{const ht=Math.max(0,ot.start),pt=Math.min(ut.count,ot.start+ot.count);for(let gt=ht,yt=pt;gt<yt;gt++)_position$2.fromBufferAttribute(ut,gt),testPoint(_position$2,gt,at,rt,_,_e,this)}}updateMorphTargets(){const _e=this.geometry.morphAttributes,nt=Object.keys(_e);if(nt.length>0){const rt=_e[nt[0]];if(rt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let it=0,ot=rt.length;it<ot;it++){const st=rt[it].name||String(it);this.morphTargetInfluences.push(0),this.morphTargetDictionary[st]=it}}}}}function testPoint(tt,_,_e,nt,rt,it,ot){const st=_ray.distanceSqToPoint(tt);if(st<_e){const at=new Vector3;_ray.closestPointToPoint(tt,at),at.applyMatrix4(nt);const lt=rt.ray.origin.distanceTo(at);if(lt<rt.near||lt>rt.far)return;it.push({distance:lt,distanceToRay:Math.sqrt(st),point:at,index:_,face:null,object:ot})}}class VideoTexture extends Texture{constructor(_,_e,nt,rt,it,ot,st,at,lt){super(_,_e,nt,rt,it,ot,st,at,lt),this.isVideoTexture=!0,this.minFilter=ot!==void 0?ot:LinearFilter,this.magFilter=it!==void 0?it:LinearFilter,this.generateMipmaps=!1;const ct=this;function ut(){ct.needsUpdate=!0,_.requestVideoFrameCallback(ut)}"requestVideoFrameCallback"in _&&_.requestVideoFrameCallback(ut)}clone(){return new this.constructor(this.image).copy(this)}update(){const _=this.image;"requestVideoFrameCallback"in _===!1&&_.readyState>=_.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FramebufferTexture extends Texture{constructor(_,_e){super({width:_,height:_e}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(_,_e,nt,rt,it,ot,st,at,lt,ct,ut,ht){super(null,ot,st,at,lt,ct,rt,it,ut,ht),this.isCompressedTexture=!0,this.image={width:_e,height:nt},this.mipmaps=_,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(_,_e,nt,rt,it,ot){super(_,_e,nt,it,ot),this.isCompressedArrayTexture=!0,this.image.depth=rt,this.wrapR=ClampToEdgeWrapping}}class CanvasTexture extends Texture{constructor(_,_e,nt,rt,it,ot,st,at,lt){super(_,_e,nt,rt,it,ot,st,at,lt),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(_,_e){const nt=this.getUtoTmapping(_);return this.getPoint(nt,_e)}getPoints(_=5){const _e=[];for(let nt=0;nt<=_;nt++)_e.push(this.getPoint(nt/_));return _e}getSpacedPoints(_=5){const _e=[];for(let nt=0;nt<=_;nt++)_e.push(this.getPointAt(nt/_));return _e}getLength(){const _=this.getLengths();return _[_.length-1]}getLengths(_=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===_+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const _e=[];let nt,rt=this.getPoint(0),it=0;_e.push(0);for(let ot=1;ot<=_;ot++)nt=this.getPoint(ot/_),it+=nt.distanceTo(rt),_e.push(it),rt=nt;return this.cacheArcLengths=_e,_e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(_,_e){const nt=this.getLengths();let rt=0;const it=nt.length;let ot;_e?ot=_e:ot=_*nt[it-1];let st=0,at=it-1,lt;for(;st<=at;)if(rt=Math.floor(st+(at-st)/2),lt=nt[rt]-ot,lt<0)st=rt+1;else if(lt>0)at=rt-1;else{at=rt;break}if(rt=at,nt[rt]===ot)return rt/(it-1);const ct=nt[rt],ht=nt[rt+1]-ct,pt=(ot-ct)/ht;return(rt+pt)/(it-1)}getTangent(_,_e){let rt=_-1e-4,it=_+1e-4;rt<0&&(rt=0),it>1&&(it=1);const ot=this.getPoint(rt),st=this.getPoint(it),at=_e||(ot.isVector2?new Vector2:new Vector3);return at.copy(st).sub(ot).normalize(),at}getTangentAt(_,_e){const nt=this.getUtoTmapping(_);return this.getTangent(nt,_e)}computeFrenetFrames(_,_e){const nt=new Vector3,rt=[],it=[],ot=[],st=new Vector3,at=new Matrix4;for(let pt=0;pt<=_;pt++){const gt=pt/_;rt[pt]=this.getTangentAt(gt,new Vector3)}it[0]=new Vector3,ot[0]=new Vector3;let lt=Number.MAX_VALUE;const ct=Math.abs(rt[0].x),ut=Math.abs(rt[0].y),ht=Math.abs(rt[0].z);ct<=lt&&(lt=ct,nt.set(1,0,0)),ut<=lt&&(lt=ut,nt.set(0,1,0)),ht<=lt&&nt.set(0,0,1),st.crossVectors(rt[0],nt).normalize(),it[0].crossVectors(rt[0],st),ot[0].crossVectors(rt[0],it[0]);for(let pt=1;pt<=_;pt++){if(it[pt]=it[pt-1].clone(),ot[pt]=ot[pt-1].clone(),st.crossVectors(rt[pt-1],rt[pt]),st.length()>Number.EPSILON){st.normalize();const gt=Math.acos(clamp$4(rt[pt-1].dot(rt[pt]),-1,1));it[pt].applyMatrix4(at.makeRotationAxis(st,gt))}ot[pt].crossVectors(rt[pt],it[pt])}if(_e===!0){let pt=Math.acos(clamp$4(it[0].dot(it[_]),-1,1));pt/=_,rt[0].dot(st.crossVectors(it[0],it[_]))>0&&(pt=-pt);for(let gt=1;gt<=_;gt++)it[gt].applyMatrix4(at.makeRotationAxis(rt[gt],pt*gt)),ot[gt].crossVectors(rt[gt],it[gt])}return{tangents:rt,normals:it,binormals:ot}}clone(){return new this.constructor().copy(this)}copy(_){return this.arcLengthDivisions=_.arcLengthDivisions,this}toJSON(){const _={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return _.arcLengthDivisions=this.arcLengthDivisions,_.type=this.type,_}fromJSON(_){return this.arcLengthDivisions=_.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(_=0,_e=0,nt=1,rt=1,it=0,ot=Math.PI*2,st=!1,at=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=_,this.aY=_e,this.xRadius=nt,this.yRadius=rt,this.aStartAngle=it,this.aEndAngle=ot,this.aClockwise=st,this.aRotation=at}getPoint(_,_e){const nt=_e||new Vector2,rt=Math.PI*2;let it=this.aEndAngle-this.aStartAngle;const ot=Math.abs(it)<Number.EPSILON;for(;it<0;)it+=rt;for(;it>rt;)it-=rt;it<Number.EPSILON&&(ot?it=0:it=rt),this.aClockwise===!0&&!ot&&(it===rt?it=-rt:it=it-rt);const st=this.aStartAngle+_*it;let at=this.aX+this.xRadius*Math.cos(st),lt=this.aY+this.yRadius*Math.sin(st);if(this.aRotation!==0){const ct=Math.cos(this.aRotation),ut=Math.sin(this.aRotation),ht=at-this.aX,pt=lt-this.aY;at=ht*ct-pt*ut+this.aX,lt=ht*ut+pt*ct+this.aY}return nt.set(at,lt)}copy(_){return super.copy(_),this.aX=_.aX,this.aY=_.aY,this.xRadius=_.xRadius,this.yRadius=_.yRadius,this.aStartAngle=_.aStartAngle,this.aEndAngle=_.aEndAngle,this.aClockwise=_.aClockwise,this.aRotation=_.aRotation,this}toJSON(){const _=super.toJSON();return _.aX=this.aX,_.aY=this.aY,_.xRadius=this.xRadius,_.yRadius=this.yRadius,_.aStartAngle=this.aStartAngle,_.aEndAngle=this.aEndAngle,_.aClockwise=this.aClockwise,_.aRotation=this.aRotation,_}fromJSON(_){return super.fromJSON(_),this.aX=_.aX,this.aY=_.aY,this.xRadius=_.xRadius,this.yRadius=_.yRadius,this.aStartAngle=_.aStartAngle,this.aEndAngle=_.aEndAngle,this.aClockwise=_.aClockwise,this.aRotation=_.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(_,_e,nt,rt,it,ot){super(_,_e,nt,nt,rt,it,ot),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let tt=0,_=0,_e=0,nt=0;function rt(it,ot,st,at){tt=it,_=st,_e=-3*it+3*ot-2*st-at,nt=2*it-2*ot+st+at}return{initCatmullRom:function(it,ot,st,at,lt){rt(ot,st,lt*(st-it),lt*(at-ot))},initNonuniformCatmullRom:function(it,ot,st,at,lt,ct,ut){let ht=(ot-it)/lt-(st-it)/(lt+ct)+(st-ot)/ct,pt=(st-ot)/ct-(at-ot)/(ct+ut)+(at-st)/ut;ht*=ct,pt*=ct,rt(ot,st,ht,pt)},calc:function(it){const ot=it*it,st=ot*it;return tt+_*it+_e*ot+nt*st}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(_=[],_e=!1,nt="centripetal",rt=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=_,this.closed=_e,this.curveType=nt,this.tension=rt}getPoint(_,_e=new Vector3){const nt=_e,rt=this.points,it=rt.length,ot=(it-(this.closed?0:1))*_;let st=Math.floor(ot),at=ot-st;this.closed?st+=st>0?0:(Math.floor(Math.abs(st)/it)+1)*it:at===0&&st===it-1&&(st=it-2,at=1);let lt,ct;this.closed||st>0?lt=rt[(st-1)%it]:(tmp.subVectors(rt[0],rt[1]).add(rt[0]),lt=tmp);const ut=rt[st%it],ht=rt[(st+1)%it];if(this.closed||st+2<it?ct=rt[(st+2)%it]:(tmp.subVectors(rt[it-1],rt[it-2]).add(rt[it-1]),ct=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const pt=this.curveType==="chordal"?.5:.25;let gt=Math.pow(lt.distanceToSquared(ut),pt),yt=Math.pow(ut.distanceToSquared(ht),pt),vt=Math.pow(ht.distanceToSquared(ct),pt);yt<1e-4&&(yt=1),gt<1e-4&&(gt=yt),vt<1e-4&&(vt=yt),px.initNonuniformCatmullRom(lt.x,ut.x,ht.x,ct.x,gt,yt,vt),py.initNonuniformCatmullRom(lt.y,ut.y,ht.y,ct.y,gt,yt,vt),pz.initNonuniformCatmullRom(lt.z,ut.z,ht.z,ct.z,gt,yt,vt)}else this.curveType==="catmullrom"&&(px.initCatmullRom(lt.x,ut.x,ht.x,ct.x,this.tension),py.initCatmullRom(lt.y,ut.y,ht.y,ct.y,this.tension),pz.initCatmullRom(lt.z,ut.z,ht.z,ct.z,this.tension));return nt.set(px.calc(at),py.calc(at),pz.calc(at)),nt}copy(_){super.copy(_),this.points=[];for(let _e=0,nt=_.points.length;_e<nt;_e++){const rt=_.points[_e];this.points.push(rt.clone())}return this.closed=_.closed,this.curveType=_.curveType,this.tension=_.tension,this}toJSON(){const _=super.toJSON();_.points=[];for(let _e=0,nt=this.points.length;_e<nt;_e++){const rt=this.points[_e];_.points.push(rt.toArray())}return _.closed=this.closed,_.curveType=this.curveType,_.tension=this.tension,_}fromJSON(_){super.fromJSON(_),this.points=[];for(let _e=0,nt=_.points.length;_e<nt;_e++){const rt=_.points[_e];this.points.push(new Vector3().fromArray(rt))}return this.closed=_.closed,this.curveType=_.curveType,this.tension=_.tension,this}}function CatmullRom(tt,_,_e,nt,rt){const it=(nt-_)*.5,ot=(rt-_e)*.5,st=tt*tt,at=tt*st;return(2*_e-2*nt+it+ot)*at+(-3*_e+3*nt-2*it-ot)*st+it*tt+_e}function QuadraticBezierP0(tt,_){const _e=1-tt;return _e*_e*_}function QuadraticBezierP1(tt,_){return 2*(1-tt)*tt*_}function QuadraticBezierP2(tt,_){return tt*tt*_}function QuadraticBezier(tt,_,_e,nt){return QuadraticBezierP0(tt,_)+QuadraticBezierP1(tt,_e)+QuadraticBezierP2(tt,nt)}function CubicBezierP0(tt,_){const _e=1-tt;return _e*_e*_e*_}function CubicBezierP1(tt,_){const _e=1-tt;return 3*_e*_e*tt*_}function CubicBezierP2(tt,_){return 3*(1-tt)*tt*tt*_}function CubicBezierP3(tt,_){return tt*tt*tt*_}function CubicBezier(tt,_,_e,nt,rt){return CubicBezierP0(tt,_)+CubicBezierP1(tt,_e)+CubicBezierP2(tt,nt)+CubicBezierP3(tt,rt)}class CubicBezierCurve extends Curve{constructor(_=new Vector2,_e=new Vector2,nt=new Vector2,rt=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=_,this.v1=_e,this.v2=nt,this.v3=rt}getPoint(_,_e=new Vector2){const nt=_e,rt=this.v0,it=this.v1,ot=this.v2,st=this.v3;return nt.set(CubicBezier(_,rt.x,it.x,ot.x,st.x),CubicBezier(_,rt.y,it.y,ot.y,st.y)),nt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this.v3.copy(_.v3),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_.v3=this.v3.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this.v3.fromArray(_.v3),this}}class CubicBezierCurve3 extends Curve{constructor(_=new Vector3,_e=new Vector3,nt=new Vector3,rt=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=_,this.v1=_e,this.v2=nt,this.v3=rt}getPoint(_,_e=new Vector3){const nt=_e,rt=this.v0,it=this.v1,ot=this.v2,st=this.v3;return nt.set(CubicBezier(_,rt.x,it.x,ot.x,st.x),CubicBezier(_,rt.y,it.y,ot.y,st.y),CubicBezier(_,rt.z,it.z,ot.z,st.z)),nt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this.v3.copy(_.v3),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_.v3=this.v3.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this.v3.fromArray(_.v3),this}}class LineCurve extends Curve{constructor(_=new Vector2,_e=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=_,this.v2=_e}getPoint(_,_e=new Vector2){const nt=_e;return _===1?nt.copy(this.v2):(nt.copy(this.v2).sub(this.v1),nt.multiplyScalar(_).add(this.v1)),nt}getPointAt(_,_e){return this.getPoint(_,_e)}getTangent(_,_e=new Vector2){return _e.subVectors(this.v2,this.v1).normalize()}getTangentAt(_,_e){return this.getTangent(_,_e)}copy(_){return super.copy(_),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class LineCurve3 extends Curve{constructor(_=new Vector3,_e=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=_,this.v2=_e}getPoint(_,_e=new Vector3){const nt=_e;return _===1?nt.copy(this.v2):(nt.copy(this.v2).sub(this.v1),nt.multiplyScalar(_).add(this.v1)),nt}getPointAt(_,_e){return this.getPoint(_,_e)}getTangent(_,_e=new Vector3){return _e.subVectors(this.v2,this.v1).normalize()}getTangentAt(_,_e){return this.getTangent(_,_e)}copy(_){return super.copy(_),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class QuadraticBezierCurve extends Curve{constructor(_=new Vector2,_e=new Vector2,nt=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=_,this.v1=_e,this.v2=nt}getPoint(_,_e=new Vector2){const nt=_e,rt=this.v0,it=this.v1,ot=this.v2;return nt.set(QuadraticBezier(_,rt.x,it.x,ot.x),QuadraticBezier(_,rt.y,it.y,ot.y)),nt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(_=new Vector3,_e=new Vector3,nt=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=_,this.v1=_e,this.v2=nt}getPoint(_,_e=new Vector3){const nt=_e,rt=this.v0,it=this.v1,ot=this.v2;return nt.set(QuadraticBezier(_,rt.x,it.x,ot.x),QuadraticBezier(_,rt.y,it.y,ot.y),QuadraticBezier(_,rt.z,it.z,ot.z)),nt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class SplineCurve extends Curve{constructor(_=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=_}getPoint(_,_e=new Vector2){const nt=_e,rt=this.points,it=(rt.length-1)*_,ot=Math.floor(it),st=it-ot,at=rt[ot===0?ot:ot-1],lt=rt[ot],ct=rt[ot>rt.length-2?rt.length-1:ot+1],ut=rt[ot>rt.length-3?rt.length-1:ot+2];return nt.set(CatmullRom(st,at.x,lt.x,ct.x,ut.x),CatmullRom(st,at.y,lt.y,ct.y,ut.y)),nt}copy(_){super.copy(_),this.points=[];for(let _e=0,nt=_.points.length;_e<nt;_e++){const rt=_.points[_e];this.points.push(rt.clone())}return this}toJSON(){const _=super.toJSON();_.points=[];for(let _e=0,nt=this.points.length;_e<nt;_e++){const rt=this.points[_e];_.points.push(rt.toArray())}return _}fromJSON(_){super.fromJSON(_),this.points=[];for(let _e=0,nt=_.points.length;_e<nt;_e++){const rt=_.points[_e];this.points.push(new Vector2().fromArray(rt))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(_){this.curves.push(_)}closePath(){const _=this.curves[0].getPoint(0),_e=this.curves[this.curves.length-1].getPoint(1);_.equals(_e)||this.curves.push(new LineCurve(_e,_))}getPoint(_,_e){const nt=_*this.getLength(),rt=this.getCurveLengths();let it=0;for(;it<rt.length;){if(rt[it]>=nt){const ot=rt[it]-nt,st=this.curves[it],at=st.getLength(),lt=at===0?0:1-ot/at;return st.getPointAt(lt,_e)}it++}return null}getLength(){const _=this.getCurveLengths();return _[_.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const _=[];let _e=0;for(let nt=0,rt=this.curves.length;nt<rt;nt++)_e+=this.curves[nt].getLength(),_.push(_e);return this.cacheLengths=_,_}getSpacedPoints(_=40){const _e=[];for(let nt=0;nt<=_;nt++)_e.push(this.getPoint(nt/_));return this.autoClose&&_e.push(_e[0]),_e}getPoints(_=12){const _e=[];let nt;for(let rt=0,it=this.curves;rt<it.length;rt++){const ot=it[rt],st=ot.isEllipseCurve?_*2:ot.isLineCurve||ot.isLineCurve3?1:ot.isSplineCurve?_*ot.points.length:_,at=ot.getPoints(st);for(let lt=0;lt<at.length;lt++){const ct=at[lt];nt&&nt.equals(ct)||(_e.push(ct),nt=ct)}}return this.autoClose&&_e.length>1&&!_e[_e.length-1].equals(_e[0])&&_e.push(_e[0]),_e}copy(_){super.copy(_),this.curves=[];for(let _e=0,nt=_.curves.length;_e<nt;_e++){const rt=_.curves[_e];this.curves.push(rt.clone())}return this.autoClose=_.autoClose,this}toJSON(){const _=super.toJSON();_.autoClose=this.autoClose,_.curves=[];for(let _e=0,nt=this.curves.length;_e<nt;_e++){const rt=this.curves[_e];_.curves.push(rt.toJSON())}return _}fromJSON(_){super.fromJSON(_),this.autoClose=_.autoClose,this.curves=[];for(let _e=0,nt=_.curves.length;_e<nt;_e++){const rt=_.curves[_e];this.curves.push(new Curves[rt.type]().fromJSON(rt))}return this}}class Path extends CurvePath{constructor(_){super(),this.type="Path",this.currentPoint=new Vector2,_&&this.setFromPoints(_)}setFromPoints(_){this.moveTo(_[0].x,_[0].y);for(let _e=1,nt=_.length;_e<nt;_e++)this.lineTo(_[_e].x,_[_e].y);return this}moveTo(_,_e){return this.currentPoint.set(_,_e),this}lineTo(_,_e){const nt=new LineCurve(this.currentPoint.clone(),new Vector2(_,_e));return this.curves.push(nt),this.currentPoint.set(_,_e),this}quadraticCurveTo(_,_e,nt,rt){const it=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(_,_e),new Vector2(nt,rt));return this.curves.push(it),this.currentPoint.set(nt,rt),this}bezierCurveTo(_,_e,nt,rt,it,ot){const st=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(_,_e),new Vector2(nt,rt),new Vector2(it,ot));return this.curves.push(st),this.currentPoint.set(it,ot),this}splineThru(_){const _e=[this.currentPoint.clone()].concat(_),nt=new SplineCurve(_e);return this.curves.push(nt),this.currentPoint.copy(_[_.length-1]),this}arc(_,_e,nt,rt,it,ot){const st=this.currentPoint.x,at=this.currentPoint.y;return this.absarc(_+st,_e+at,nt,rt,it,ot),this}absarc(_,_e,nt,rt,it,ot){return this.absellipse(_,_e,nt,nt,rt,it,ot),this}ellipse(_,_e,nt,rt,it,ot,st,at){const lt=this.currentPoint.x,ct=this.currentPoint.y;return this.absellipse(_+lt,_e+ct,nt,rt,it,ot,st,at),this}absellipse(_,_e,nt,rt,it,ot,st,at){const lt=new EllipseCurve(_,_e,nt,rt,it,ot,st,at);if(this.curves.length>0){const ut=lt.getPoint(0);ut.equals(this.currentPoint)||this.lineTo(ut.x,ut.y)}this.curves.push(lt);const ct=lt.getPoint(1);return this.currentPoint.copy(ct),this}copy(_){return super.copy(_),this.currentPoint.copy(_.currentPoint),this}toJSON(){const _=super.toJSON();return _.currentPoint=this.currentPoint.toArray(),_}fromJSON(_){return super.fromJSON(_),this.currentPoint.fromArray(_.currentPoint),this}}class LatheGeometry extends BufferGeometry{constructor(_=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],_e=12,nt=0,rt=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:_,segments:_e,phiStart:nt,phiLength:rt},_e=Math.floor(_e),rt=clamp$4(rt,0,Math.PI*2);const it=[],ot=[],st=[],at=[],lt=[],ct=1/_e,ut=new Vector3,ht=new Vector2,pt=new Vector3,gt=new Vector3,yt=new Vector3;let vt=0,mt=0;for(let _t=0;_t<=_.length-1;_t++)switch(_t){case 0:vt=_[_t+1].x-_[_t].x,mt=_[_t+1].y-_[_t].y,pt.x=mt*1,pt.y=-vt,pt.z=mt*0,yt.copy(pt),pt.normalize(),at.push(pt.x,pt.y,pt.z);break;case _.length-1:at.push(yt.x,yt.y,yt.z);break;default:vt=_[_t+1].x-_[_t].x,mt=_[_t+1].y-_[_t].y,pt.x=mt*1,pt.y=-vt,pt.z=mt*0,gt.copy(pt),pt.x+=yt.x,pt.y+=yt.y,pt.z+=yt.z,pt.normalize(),at.push(pt.x,pt.y,pt.z),yt.copy(gt)}for(let _t=0;_t<=_e;_t++){const xt=nt+_t*ct*rt,St=Math.sin(xt),Tt=Math.cos(xt);for(let Mt=0;Mt<=_.length-1;Mt++){ut.x=_[Mt].x*St,ut.y=_[Mt].y,ut.z=_[Mt].x*Tt,ot.push(ut.x,ut.y,ut.z),ht.x=_t/_e,ht.y=Mt/(_.length-1),st.push(ht.x,ht.y);const bt=at[3*Mt+0]*St,Pt=at[3*Mt+1],wt=at[3*Mt+0]*Tt;lt.push(bt,Pt,wt)}}for(let _t=0;_t<_e;_t++)for(let xt=0;xt<_.length-1;xt++){const St=xt+_t*_.length,Tt=St,Mt=St+_.length,bt=St+_.length+1,Pt=St+1;it.push(Tt,Mt,Pt),it.push(bt,Pt,Mt)}this.setIndex(it),this.setAttribute("position",new Float32BufferAttribute(ot,3)),this.setAttribute("uv",new Float32BufferAttribute(st,2)),this.setAttribute("normal",new Float32BufferAttribute(lt,3))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new LatheGeometry(_.points,_.segments,_.phiStart,_.phiLength)}}class CapsuleGeometry extends LatheGeometry{constructor(_=1,_e=1,nt=4,rt=8){const it=new Path;it.absarc(0,-_e/2,_,Math.PI*1.5,0),it.absarc(0,_e/2,_,0,Math.PI*.5),super(it.getPoints(nt),rt),this.type="CapsuleGeometry",this.parameters={radius:_,height:_e,capSegments:nt,radialSegments:rt}}static fromJSON(_){return new CapsuleGeometry(_.radius,_.length,_.capSegments,_.radialSegments)}}class CircleGeometry extends BufferGeometry{constructor(_=1,_e=32,nt=0,rt=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:_,segments:_e,thetaStart:nt,thetaLength:rt},_e=Math.max(3,_e);const it=[],ot=[],st=[],at=[],lt=new Vector3,ct=new Vector2;ot.push(0,0,0),st.push(0,0,1),at.push(.5,.5);for(let ut=0,ht=3;ut<=_e;ut++,ht+=3){const pt=nt+ut/_e*rt;lt.x=_*Math.cos(pt),lt.y=_*Math.sin(pt),ot.push(lt.x,lt.y,lt.z),st.push(0,0,1),ct.x=(ot[ht]/_+1)/2,ct.y=(ot[ht+1]/_+1)/2,at.push(ct.x,ct.y)}for(let ut=1;ut<=_e;ut++)it.push(ut,ut+1,0);this.setIndex(it),this.setAttribute("position",new Float32BufferAttribute(ot,3)),this.setAttribute("normal",new Float32BufferAttribute(st,3)),this.setAttribute("uv",new Float32BufferAttribute(at,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CircleGeometry(_.radius,_.segments,_.thetaStart,_.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(_=1,_e=1,nt=1,rt=32,it=1,ot=!1,st=0,at=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:_,radiusBottom:_e,height:nt,radialSegments:rt,heightSegments:it,openEnded:ot,thetaStart:st,thetaLength:at};const lt=this;rt=Math.floor(rt),it=Math.floor(it);const ct=[],ut=[],ht=[],pt=[];let gt=0;const yt=[],vt=nt/2;let mt=0;_t(),ot===!1&&(_>0&&xt(!0),_e>0&&xt(!1)),this.setIndex(ct),this.setAttribute("position",new Float32BufferAttribute(ut,3)),this.setAttribute("normal",new Float32BufferAttribute(ht,3)),this.setAttribute("uv",new Float32BufferAttribute(pt,2));function _t(){const St=new Vector3,Tt=new Vector3;let Mt=0;const bt=(_e-_)/nt;for(let Pt=0;Pt<=it;Pt++){const wt=[],Bt=Pt/it,Ot=Bt*(_e-_)+_;for(let Ut=0;Ut<=rt;Ut++){const Nt=Ut/rt,zt=Nt*at+st,jt=Math.sin(zt),Yt=Math.cos(zt);Tt.x=Ot*jt,Tt.y=-Bt*nt+vt,Tt.z=Ot*Yt,ut.push(Tt.x,Tt.y,Tt.z),St.set(jt,bt,Yt).normalize(),ht.push(St.x,St.y,St.z),pt.push(Nt,1-Bt),wt.push(gt++)}yt.push(wt)}for(let Pt=0;Pt<rt;Pt++)for(let wt=0;wt<it;wt++){const Bt=yt[wt][Pt],Ot=yt[wt+1][Pt],Ut=yt[wt+1][Pt+1],Nt=yt[wt][Pt+1];ct.push(Bt,Ot,Nt),ct.push(Ot,Ut,Nt),Mt+=6}lt.addGroup(mt,Mt,0),mt+=Mt}function xt(St){const Tt=gt,Mt=new Vector2,bt=new Vector3;let Pt=0;const wt=St===!0?_:_e,Bt=St===!0?1:-1;for(let Ut=1;Ut<=rt;Ut++)ut.push(0,vt*Bt,0),ht.push(0,Bt,0),pt.push(.5,.5),gt++;const Ot=gt;for(let Ut=0;Ut<=rt;Ut++){const zt=Ut/rt*at+st,jt=Math.cos(zt),Yt=Math.sin(zt);bt.x=wt*Yt,bt.y=vt*Bt,bt.z=wt*jt,ut.push(bt.x,bt.y,bt.z),ht.push(0,Bt,0),Mt.x=jt*.5+.5,Mt.y=Yt*.5*Bt+.5,pt.push(Mt.x,Mt.y),gt++}for(let Ut=0;Ut<rt;Ut++){const Nt=Tt+Ut,zt=Ot+Ut;St===!0?ct.push(zt,zt+1,Nt):ct.push(zt+1,zt,Nt),Pt+=3}lt.addGroup(mt,Pt,St===!0?1:2),mt+=Pt}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CylinderGeometry(_.radiusTop,_.radiusBottom,_.height,_.radialSegments,_.heightSegments,_.openEnded,_.thetaStart,_.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(_=1,_e=1,nt=32,rt=1,it=!1,ot=0,st=Math.PI*2){super(0,_,_e,nt,rt,it,ot,st),this.type="ConeGeometry",this.parameters={radius:_,height:_e,radialSegments:nt,heightSegments:rt,openEnded:it,thetaStart:ot,thetaLength:st}}static fromJSON(_){return new ConeGeometry(_.radius,_.height,_.radialSegments,_.heightSegments,_.openEnded,_.thetaStart,_.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(_=[],_e=[],nt=1,rt=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:_,indices:_e,radius:nt,detail:rt};const it=[],ot=[];st(rt),lt(nt),ct(),this.setAttribute("position",new Float32BufferAttribute(it,3)),this.setAttribute("normal",new Float32BufferAttribute(it.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(ot,2)),rt===0?this.computeVertexNormals():this.normalizeNormals();function st(_t){const xt=new Vector3,St=new Vector3,Tt=new Vector3;for(let Mt=0;Mt<_e.length;Mt+=3)pt(_e[Mt+0],xt),pt(_e[Mt+1],St),pt(_e[Mt+2],Tt),at(xt,St,Tt,_t)}function at(_t,xt,St,Tt){const Mt=Tt+1,bt=[];for(let Pt=0;Pt<=Mt;Pt++){bt[Pt]=[];const wt=_t.clone().lerp(St,Pt/Mt),Bt=xt.clone().lerp(St,Pt/Mt),Ot=Mt-Pt;for(let Ut=0;Ut<=Ot;Ut++)Ut===0&&Pt===Mt?bt[Pt][Ut]=wt:bt[Pt][Ut]=wt.clone().lerp(Bt,Ut/Ot)}for(let Pt=0;Pt<Mt;Pt++)for(let wt=0;wt<2*(Mt-Pt)-1;wt++){const Bt=Math.floor(wt/2);wt%2===0?(ht(bt[Pt][Bt+1]),ht(bt[Pt+1][Bt]),ht(bt[Pt][Bt])):(ht(bt[Pt][Bt+1]),ht(bt[Pt+1][Bt+1]),ht(bt[Pt+1][Bt]))}}function lt(_t){const xt=new Vector3;for(let St=0;St<it.length;St+=3)xt.x=it[St+0],xt.y=it[St+1],xt.z=it[St+2],xt.normalize().multiplyScalar(_t),it[St+0]=xt.x,it[St+1]=xt.y,it[St+2]=xt.z}function ct(){const _t=new Vector3;for(let xt=0;xt<it.length;xt+=3){_t.x=it[xt+0],_t.y=it[xt+1],_t.z=it[xt+2];const St=vt(_t)/2/Math.PI+.5,Tt=mt(_t)/Math.PI+.5;ot.push(St,1-Tt)}gt(),ut()}function ut(){for(let _t=0;_t<ot.length;_t+=6){const xt=ot[_t+0],St=ot[_t+2],Tt=ot[_t+4],Mt=Math.max(xt,St,Tt),bt=Math.min(xt,St,Tt);Mt>.9&&bt<.1&&(xt<.2&&(ot[_t+0]+=1),St<.2&&(ot[_t+2]+=1),Tt<.2&&(ot[_t+4]+=1))}}function ht(_t){it.push(_t.x,_t.y,_t.z)}function pt(_t,xt){const St=_t*3;xt.x=_[St+0],xt.y=_[St+1],xt.z=_[St+2]}function gt(){const _t=new Vector3,xt=new Vector3,St=new Vector3,Tt=new Vector3,Mt=new Vector2,bt=new Vector2,Pt=new Vector2;for(let wt=0,Bt=0;wt<it.length;wt+=9,Bt+=6){_t.set(it[wt+0],it[wt+1],it[wt+2]),xt.set(it[wt+3],it[wt+4],it[wt+5]),St.set(it[wt+6],it[wt+7],it[wt+8]),Mt.set(ot[Bt+0],ot[Bt+1]),bt.set(ot[Bt+2],ot[Bt+3]),Pt.set(ot[Bt+4],ot[Bt+5]),Tt.copy(_t).add(xt).add(St).divideScalar(3);const Ot=vt(Tt);yt(Mt,Bt+0,_t,Ot),yt(bt,Bt+2,xt,Ot),yt(Pt,Bt+4,St,Ot)}}function yt(_t,xt,St,Tt){Tt<0&&_t.x===1&&(ot[xt]=_t.x-1),St.x===0&&St.z===0&&(ot[xt]=Tt/2/Math.PI+.5)}function vt(_t){return Math.atan2(_t.z,-_t.x)}function mt(_t){return Math.atan2(-_t.y,Math.sqrt(_t.x*_t.x+_t.z*_t.z))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new PolyhedronGeometry(_.vertices,_.indices,_.radius,_.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(_=1,_e=0){const nt=(1+Math.sqrt(5))/2,rt=1/nt,it=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-rt,-nt,0,-rt,nt,0,rt,-nt,0,rt,nt,-rt,-nt,0,-rt,nt,0,rt,-nt,0,rt,nt,0,-nt,0,-rt,nt,0,-rt,-nt,0,rt,nt,0,rt],ot=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(it,ot,_,_e),this.type="DodecahedronGeometry",this.parameters={radius:_,detail:_e}}static fromJSON(_){return new DodecahedronGeometry(_.radius,_.detail)}}const _v0=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(_=null,_e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:_,thresholdAngle:_e},_!==null){const rt=Math.pow(10,4),it=Math.cos(DEG2RAD$1*_e),ot=_.getIndex(),st=_.getAttribute("position"),at=ot?ot.count:st.count,lt=[0,0,0],ct=["a","b","c"],ut=new Array(3),ht={},pt=[];for(let gt=0;gt<at;gt+=3){ot?(lt[0]=ot.getX(gt),lt[1]=ot.getX(gt+1),lt[2]=ot.getX(gt+2)):(lt[0]=gt,lt[1]=gt+1,lt[2]=gt+2);const{a:yt,b:vt,c:mt}=_triangle;if(yt.fromBufferAttribute(st,lt[0]),vt.fromBufferAttribute(st,lt[1]),mt.fromBufferAttribute(st,lt[2]),_triangle.getNormal(_normal),ut[0]=`${Math.round(yt.x*rt)},${Math.round(yt.y*rt)},${Math.round(yt.z*rt)}`,ut[1]=`${Math.round(vt.x*rt)},${Math.round(vt.y*rt)},${Math.round(vt.z*rt)}`,ut[2]=`${Math.round(mt.x*rt)},${Math.round(mt.y*rt)},${Math.round(mt.z*rt)}`,!(ut[0]===ut[1]||ut[1]===ut[2]||ut[2]===ut[0]))for(let _t=0;_t<3;_t++){const xt=(_t+1)%3,St=ut[_t],Tt=ut[xt],Mt=_triangle[ct[_t]],bt=_triangle[ct[xt]],Pt=`${St}_${Tt}`,wt=`${Tt}_${St}`;wt in ht&&ht[wt]?(_normal.dot(ht[wt].normal)<=it&&(pt.push(Mt.x,Mt.y,Mt.z),pt.push(bt.x,bt.y,bt.z)),ht[wt]=null):Pt in ht||(ht[Pt]={index0:lt[_t],index1:lt[xt],normal:_normal.clone()})}}for(const gt in ht)if(ht[gt]){const{index0:yt,index1:vt}=ht[gt];_v0.fromBufferAttribute(st,yt),_v1$1.fromBufferAttribute(st,vt),pt.push(_v0.x,_v0.y,_v0.z),pt.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(pt,3))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}}class Shape extends Path{constructor(_){super(_),this.uuid=generateUUID$1(),this.type="Shape",this.holes=[]}getPointsHoles(_){const _e=[];for(let nt=0,rt=this.holes.length;nt<rt;nt++)_e[nt]=this.holes[nt].getPoints(_);return _e}extractPoints(_){return{shape:this.getPoints(_),holes:this.getPointsHoles(_)}}copy(_){super.copy(_),this.holes=[];for(let _e=0,nt=_.holes.length;_e<nt;_e++){const rt=_.holes[_e];this.holes.push(rt.clone())}return this}toJSON(){const _=super.toJSON();_.uuid=this.uuid,_.holes=[];for(let _e=0,nt=this.holes.length;_e<nt;_e++){const rt=this.holes[_e];_.holes.push(rt.toJSON())}return _}fromJSON(_){super.fromJSON(_),this.uuid=_.uuid,this.holes=[];for(let _e=0,nt=_.holes.length;_e<nt;_e++){const rt=_.holes[_e];this.holes.push(new Path().fromJSON(rt))}return this}}const Earcut={triangulate:function(tt,_,_e=2){const nt=_&&_.length,rt=nt?_[0]*_e:tt.length;let it=linkedList(tt,0,rt,_e,!0);const ot=[];if(!it||it.next===it.prev)return ot;let st,at,lt,ct,ut,ht,pt;if(nt&&(it=eliminateHoles(tt,_,it,_e)),tt.length>80*_e){st=lt=tt[0],at=ct=tt[1];for(let gt=_e;gt<rt;gt+=_e)ut=tt[gt],ht=tt[gt+1],ut<st&&(st=ut),ht<at&&(at=ht),ut>lt&&(lt=ut),ht>ct&&(ct=ht);pt=Math.max(lt-st,ct-at),pt=pt!==0?32767/pt:0}return earcutLinked(it,ot,_e,st,at,pt,0),ot}};function linkedList(tt,_,_e,nt,rt){let it,ot;if(rt===signedArea(tt,_,_e,nt)>0)for(it=_;it<_e;it+=nt)ot=insertNode(it,tt[it],tt[it+1],ot);else for(it=_e-nt;it>=_;it-=nt)ot=insertNode(it,tt[it],tt[it+1],ot);return ot&&equals(ot,ot.next)&&(removeNode(ot),ot=ot.next),ot}function filterPoints(tt,_){if(!tt)return tt;_||(_=tt);let _e=tt,nt;do if(nt=!1,!_e.steiner&&(equals(_e,_e.next)||area(_e.prev,_e,_e.next)===0)){if(removeNode(_e),_e=_=_e.prev,_e===_e.next)break;nt=!0}else _e=_e.next;while(nt||_e!==_);return _}function earcutLinked(tt,_,_e,nt,rt,it,ot){if(!tt)return;!ot&&it&&indexCurve(tt,nt,rt,it);let st=tt,at,lt;for(;tt.prev!==tt.next;){if(at=tt.prev,lt=tt.next,it?isEarHashed(tt,nt,rt,it):isEar(tt)){_.push(at.i/_e|0),_.push(tt.i/_e|0),_.push(lt.i/_e|0),removeNode(tt),tt=lt.next,st=lt.next;continue}if(tt=lt,tt===st){ot?ot===1?(tt=cureLocalIntersections(filterPoints(tt),_,_e),earcutLinked(tt,_,_e,nt,rt,it,2)):ot===2&&splitEarcut(tt,_,_e,nt,rt,it):earcutLinked(filterPoints(tt),_,_e,nt,rt,it,1);break}}}function isEar(tt){const _=tt.prev,_e=tt,nt=tt.next;if(area(_,_e,nt)>=0)return!1;const rt=_.x,it=_e.x,ot=nt.x,st=_.y,at=_e.y,lt=nt.y,ct=rt<it?rt<ot?rt:ot:it<ot?it:ot,ut=st<at?st<lt?st:lt:at<lt?at:lt,ht=rt>it?rt>ot?rt:ot:it>ot?it:ot,pt=st>at?st>lt?st:lt:at>lt?at:lt;let gt=nt.next;for(;gt!==_;){if(gt.x>=ct&&gt.x<=ht&&gt.y>=ut&&gt.y<=pt&&pointInTriangle(rt,st,it,at,ot,lt,gt.x,gt.y)&&area(gt.prev,gt,gt.next)>=0)return!1;gt=gt.next}return!0}function isEarHashed(tt,_,_e,nt){const rt=tt.prev,it=tt,ot=tt.next;if(area(rt,it,ot)>=0)return!1;const st=rt.x,at=it.x,lt=ot.x,ct=rt.y,ut=it.y,ht=ot.y,pt=st<at?st<lt?st:lt:at<lt?at:lt,gt=ct<ut?ct<ht?ct:ht:ut<ht?ut:ht,yt=st>at?st>lt?st:lt:at>lt?at:lt,vt=ct>ut?ct>ht?ct:ht:ut>ht?ut:ht,mt=zOrder(pt,gt,_,_e,nt),_t=zOrder(yt,vt,_,_e,nt);let xt=tt.prevZ,St=tt.nextZ;for(;xt&&xt.z>=mt&&St&&St.z<=_t;){if(xt.x>=pt&&xt.x<=yt&&xt.y>=gt&&xt.y<=vt&&xt!==rt&&xt!==ot&&pointInTriangle(st,ct,at,ut,lt,ht,xt.x,xt.y)&&area(xt.prev,xt,xt.next)>=0||(xt=xt.prevZ,St.x>=pt&&St.x<=yt&&St.y>=gt&&St.y<=vt&&St!==rt&&St!==ot&&pointInTriangle(st,ct,at,ut,lt,ht,St.x,St.y)&&area(St.prev,St,St.next)>=0))return!1;St=St.nextZ}for(;xt&&xt.z>=mt;){if(xt.x>=pt&&xt.x<=yt&&xt.y>=gt&&xt.y<=vt&&xt!==rt&&xt!==ot&&pointInTriangle(st,ct,at,ut,lt,ht,xt.x,xt.y)&&area(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}for(;St&&St.z<=_t;){if(St.x>=pt&&St.x<=yt&&St.y>=gt&&St.y<=vt&&St!==rt&&St!==ot&&pointInTriangle(st,ct,at,ut,lt,ht,St.x,St.y)&&area(St.prev,St,St.next)>=0)return!1;St=St.nextZ}return!0}function cureLocalIntersections(tt,_,_e){let nt=tt;do{const rt=nt.prev,it=nt.next.next;!equals(rt,it)&&intersects(rt,nt,nt.next,it)&&locallyInside(rt,it)&&locallyInside(it,rt)&&(_.push(rt.i/_e|0),_.push(nt.i/_e|0),_.push(it.i/_e|0),removeNode(nt),removeNode(nt.next),nt=tt=it),nt=nt.next}while(nt!==tt);return filterPoints(nt)}function splitEarcut(tt,_,_e,nt,rt,it){let ot=tt;do{let st=ot.next.next;for(;st!==ot.prev;){if(ot.i!==st.i&&isValidDiagonal(ot,st)){let at=splitPolygon(ot,st);ot=filterPoints(ot,ot.next),at=filterPoints(at,at.next),earcutLinked(ot,_,_e,nt,rt,it,0),earcutLinked(at,_,_e,nt,rt,it,0);return}st=st.next}ot=ot.next}while(ot!==tt)}function eliminateHoles(tt,_,_e,nt){const rt=[];let it,ot,st,at,lt;for(it=0,ot=_.length;it<ot;it++)st=_[it]*nt,at=it<ot-1?_[it+1]*nt:tt.length,lt=linkedList(tt,st,at,nt,!1),lt===lt.next&&(lt.steiner=!0),rt.push(getLeftmost(lt));for(rt.sort(compareX),it=0;it<rt.length;it++)_e=eliminateHole(rt[it],_e);return _e}function compareX(tt,_){return tt.x-_.x}function eliminateHole(tt,_){const _e=findHoleBridge(tt,_);if(!_e)return _;const nt=splitPolygon(_e,tt);return filterPoints(nt,nt.next),filterPoints(_e,_e.next)}function findHoleBridge(tt,_){let _e=_,nt=-1/0,rt;const it=tt.x,ot=tt.y;do{if(ot<=_e.y&&ot>=_e.next.y&&_e.next.y!==_e.y){const ht=_e.x+(ot-_e.y)*(_e.next.x-_e.x)/(_e.next.y-_e.y);if(ht<=it&&ht>nt&&(nt=ht,rt=_e.x<_e.next.x?_e:_e.next,ht===it))return rt}_e=_e.next}while(_e!==_);if(!rt)return null;const st=rt,at=rt.x,lt=rt.y;let ct=1/0,ut;_e=rt;do it>=_e.x&&_e.x>=at&&it!==_e.x&&pointInTriangle(ot<lt?it:nt,ot,at,lt,ot<lt?nt:it,ot,_e.x,_e.y)&&(ut=Math.abs(ot-_e.y)/(it-_e.x),locallyInside(_e,tt)&&(ut<ct||ut===ct&&(_e.x>rt.x||_e.x===rt.x&&sectorContainsSector(rt,_e)))&&(rt=_e,ct=ut)),_e=_e.next;while(_e!==st);return rt}function sectorContainsSector(tt,_){return area(tt.prev,tt,_.prev)<0&&area(_.next,tt,tt.next)<0}function indexCurve(tt,_,_e,nt){let rt=tt;do rt.z===0&&(rt.z=zOrder(rt.x,rt.y,_,_e,nt)),rt.prevZ=rt.prev,rt.nextZ=rt.next,rt=rt.next;while(rt!==tt);rt.prevZ.nextZ=null,rt.prevZ=null,sortLinked(rt)}function sortLinked(tt){let _,_e,nt,rt,it,ot,st,at,lt=1;do{for(_e=tt,tt=null,it=null,ot=0;_e;){for(ot++,nt=_e,st=0,_=0;_<lt&&(st++,nt=nt.nextZ,!!nt);_++);for(at=lt;st>0||at>0&&nt;)st!==0&&(at===0||!nt||_e.z<=nt.z)?(rt=_e,_e=_e.nextZ,st--):(rt=nt,nt=nt.nextZ,at--),it?it.nextZ=rt:tt=rt,rt.prevZ=it,it=rt;_e=nt}it.nextZ=null,lt*=2}while(ot>1);return tt}function zOrder(tt,_,_e,nt,rt){return tt=(tt-_e)*rt|0,_=(_-nt)*rt|0,tt=(tt|tt<<8)&16711935,tt=(tt|tt<<4)&252645135,tt=(tt|tt<<2)&858993459,tt=(tt|tt<<1)&1431655765,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,tt|_<<1}function getLeftmost(tt){let _=tt,_e=tt;do(_.x<_e.x||_.x===_e.x&&_.y<_e.y)&&(_e=_),_=_.next;while(_!==tt);return _e}function pointInTriangle(tt,_,_e,nt,rt,it,ot,st){return(rt-ot)*(_-st)>=(tt-ot)*(it-st)&&(tt-ot)*(nt-st)>=(_e-ot)*(_-st)&&(_e-ot)*(it-st)>=(rt-ot)*(nt-st)}function isValidDiagonal(tt,_){return tt.next.i!==_.i&&tt.prev.i!==_.i&&!intersectsPolygon(tt,_)&&(locallyInside(tt,_)&&locallyInside(_,tt)&&middleInside(tt,_)&&(area(tt.prev,tt,_.prev)||area(tt,_.prev,_))||equals(tt,_)&&area(tt.prev,tt,tt.next)>0&&area(_.prev,_,_.next)>0)}function area(tt,_,_e){return(_.y-tt.y)*(_e.x-_.x)-(_.x-tt.x)*(_e.y-_.y)}function equals(tt,_){return tt.x===_.x&&tt.y===_.y}function intersects(tt,_,_e,nt){const rt=sign(area(tt,_,_e)),it=sign(area(tt,_,nt)),ot=sign(area(_e,nt,tt)),st=sign(area(_e,nt,_));return!!(rt!==it&&ot!==st||rt===0&&onSegment(tt,_e,_)||it===0&&onSegment(tt,nt,_)||ot===0&&onSegment(_e,tt,nt)||st===0&&onSegment(_e,_,nt))}function onSegment(tt,_,_e){return _.x<=Math.max(tt.x,_e.x)&&_.x>=Math.min(tt.x,_e.x)&&_.y<=Math.max(tt.y,_e.y)&&_.y>=Math.min(tt.y,_e.y)}function sign(tt){return tt>0?1:tt<0?-1:0}function intersectsPolygon(tt,_){let _e=tt;do{if(_e.i!==tt.i&&_e.next.i!==tt.i&&_e.i!==_.i&&_e.next.i!==_.i&&intersects(_e,_e.next,tt,_))return!0;_e=_e.next}while(_e!==tt);return!1}function locallyInside(tt,_){return area(tt.prev,tt,tt.next)<0?area(tt,_,tt.next)>=0&&area(tt,tt.prev,_)>=0:area(tt,_,tt.prev)<0||area(tt,tt.next,_)<0}function middleInside(tt,_){let _e=tt,nt=!1;const rt=(tt.x+_.x)/2,it=(tt.y+_.y)/2;do _e.y>it!=_e.next.y>it&&_e.next.y!==_e.y&&rt<(_e.next.x-_e.x)*(it-_e.y)/(_e.next.y-_e.y)+_e.x&&(nt=!nt),_e=_e.next;while(_e!==tt);return nt}function splitPolygon(tt,_){const _e=new Node$1(tt.i,tt.x,tt.y),nt=new Node$1(_.i,_.x,_.y),rt=tt.next,it=_.prev;return tt.next=_,_.prev=tt,_e.next=rt,rt.prev=_e,nt.next=_e,_e.prev=nt,it.next=nt,nt.prev=it,nt}function insertNode(tt,_,_e,nt){const rt=new Node$1(tt,_,_e);return nt?(rt.next=nt.next,rt.prev=nt,nt.next.prev=rt,nt.next=rt):(rt.prev=rt,rt.next=rt),rt}function removeNode(tt){tt.next.prev=tt.prev,tt.prev.next=tt.next,tt.prevZ&&(tt.prevZ.nextZ=tt.nextZ),tt.nextZ&&(tt.nextZ.prevZ=tt.prevZ)}function Node$1(tt,_,_e){this.i=tt,this.x=_,this.y=_e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(tt,_,_e,nt){let rt=0;for(let it=_,ot=_e-nt;it<_e;it+=nt)rt+=(tt[ot]-tt[it])*(tt[it+1]+tt[ot+1]),ot=it;return rt}class ShapeUtils{static area(_){const _e=_.length;let nt=0;for(let rt=_e-1,it=0;it<_e;rt=it++)nt+=_[rt].x*_[it].y-_[it].x*_[rt].y;return nt*.5}static isClockWise(_){return ShapeUtils.area(_)<0}static triangulateShape(_,_e){const nt=[],rt=[],it=[];removeDupEndPts(_),addContour(nt,_);let ot=_.length;_e.forEach(removeDupEndPts);for(let at=0;at<_e.length;at++)rt.push(ot),ot+=_e[at].length,addContour(nt,_e[at]);const st=Earcut.triangulate(nt,rt);for(let at=0;at<st.length;at+=3)it.push(st.slice(at,at+3));return it}}function removeDupEndPts(tt){const _=tt.length;_>2&&tt[_-1].equals(tt[0])&&tt.pop()}function addContour(tt,_){for(let _e=0;_e<_.length;_e++)tt.push(_[_e].x),tt.push(_[_e].y)}class ExtrudeGeometry extends BufferGeometry{constructor(_=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),_e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:_,options:_e},_=Array.isArray(_)?_:[_];const nt=this,rt=[],it=[];for(let st=0,at=_.length;st<at;st++){const lt=_[st];ot(lt)}this.setAttribute("position",new Float32BufferAttribute(rt,3)),this.setAttribute("uv",new Float32BufferAttribute(it,2)),this.computeVertexNormals();function ot(st){const at=[],lt=_e.curveSegments!==void 0?_e.curveSegments:12,ct=_e.steps!==void 0?_e.steps:1,ut=_e.depth!==void 0?_e.depth:1;let ht=_e.bevelEnabled!==void 0?_e.bevelEnabled:!0,pt=_e.bevelThickness!==void 0?_e.bevelThickness:.2,gt=_e.bevelSize!==void 0?_e.bevelSize:pt-.1,yt=_e.bevelOffset!==void 0?_e.bevelOffset:0,vt=_e.bevelSegments!==void 0?_e.bevelSegments:3;const mt=_e.extrudePath,_t=_e.UVGenerator!==void 0?_e.UVGenerator:WorldUVGenerator;let xt,St=!1,Tt,Mt,bt,Pt;mt&&(xt=mt.getSpacedPoints(ct),St=!0,ht=!1,Tt=mt.computeFrenetFrames(ct,!1),Mt=new Vector3,bt=new Vector3,Pt=new Vector3),ht||(vt=0,pt=0,gt=0,yt=0);const wt=st.extractPoints(lt);let Bt=wt.shape;const Ot=wt.holes;if(!ShapeUtils.isClockWise(Bt)){Bt=Bt.reverse();for(let Ht=0,xn=Ot.length;Ht<xn;Ht++){const hn=Ot[Ht];ShapeUtils.isClockWise(hn)&&(Ot[Ht]=hn.reverse())}}const Nt=ShapeUtils.triangulateShape(Bt,Ot),zt=Bt;for(let Ht=0,xn=Ot.length;Ht<xn;Ht++){const hn=Ot[Ht];Bt=Bt.concat(hn)}function jt(Ht,xn,hn){return xn||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ht.clone().addScaledVector(xn,hn)}const Yt=Bt.length,qt=Nt.length;function Gt(Ht,xn,hn){let vn,pn,Hn;const yn=Ht.x-xn.x,Ln=Ht.y-xn.y,On=hn.x-Ht.x,Sn=hn.y-Ht.y,jn=yn*yn+Ln*Ln,Ft=yn*Sn-Ln*On;if(Math.abs(Ft)>Number.EPSILON){const Dt=Math.sqrt(jn),on=Math.sqrt(On*On+Sn*Sn),bn=xn.x-Ln/Dt,Mn=xn.y+yn/Dt,wn=hn.x-Sn/on,$n=hn.y+On/on,Gn=((wn-bn)*Sn-($n-Mn)*On)/(yn*Sn-Ln*On);vn=bn+yn*Gn-Ht.x,pn=Mn+Ln*Gn-Ht.y;const En=vn*vn+pn*pn;if(En<=2)return new Vector2(vn,pn);Hn=Math.sqrt(En/2)}else{let Dt=!1;yn>Number.EPSILON?On>Number.EPSILON&&(Dt=!0):yn<-Number.EPSILON?On<-Number.EPSILON&&(Dt=!0):Math.sign(Ln)===Math.sign(Sn)&&(Dt=!0),Dt?(vn=-Ln,pn=yn,Hn=Math.sqrt(jn)):(vn=yn,pn=Ln,Hn=Math.sqrt(jn/2))}return new Vector2(vn/Hn,pn/Hn)}const Xt=[];for(let Ht=0,xn=zt.length,hn=xn-1,vn=Ht+1;Ht<xn;Ht++,hn++,vn++)hn===xn&&(hn=0),vn===xn&&(vn=0),Xt[Ht]=Gt(zt[Ht],zt[hn],zt[vn]);const Vt=[];let Wt,$t=Xt.concat();for(let Ht=0,xn=Ot.length;Ht<xn;Ht++){const hn=Ot[Ht];Wt=[];for(let vn=0,pn=hn.length,Hn=pn-1,yn=vn+1;vn<pn;vn++,Hn++,yn++)Hn===pn&&(Hn=0),yn===pn&&(yn=0),Wt[vn]=Gt(hn[vn],hn[Hn],hn[yn]);Vt.push(Wt),$t=$t.concat(Wt)}for(let Ht=0;Ht<vt;Ht++){const xn=Ht/vt,hn=pt*Math.cos(xn*Math.PI/2),vn=gt*Math.sin(xn*Math.PI/2)+yt;for(let pn=0,Hn=zt.length;pn<Hn;pn++){const yn=jt(zt[pn],Xt[pn],vn);an(yn.x,yn.y,-hn)}for(let pn=0,Hn=Ot.length;pn<Hn;pn++){const yn=Ot[pn];Wt=Vt[pn];for(let Ln=0,On=yn.length;Ln<On;Ln++){const Sn=jt(yn[Ln],Wt[Ln],vn);an(Sn.x,Sn.y,-hn)}}}const nn=gt+yt;for(let Ht=0;Ht<Yt;Ht++){const xn=ht?jt(Bt[Ht],$t[Ht],nn):Bt[Ht];St?(bt.copy(Tt.normals[0]).multiplyScalar(xn.x),Mt.copy(Tt.binormals[0]).multiplyScalar(xn.y),Pt.copy(xt[0]).add(bt).add(Mt),an(Pt.x,Pt.y,Pt.z)):an(xn.x,xn.y,0)}for(let Ht=1;Ht<=ct;Ht++)for(let xn=0;xn<Yt;xn++){const hn=ht?jt(Bt[xn],$t[xn],nn):Bt[xn];St?(bt.copy(Tt.normals[Ht]).multiplyScalar(hn.x),Mt.copy(Tt.binormals[Ht]).multiplyScalar(hn.y),Pt.copy(xt[Ht]).add(bt).add(Mt),an(Pt.x,Pt.y,Pt.z)):an(hn.x,hn.y,ut/ct*Ht)}for(let Ht=vt-1;Ht>=0;Ht--){const xn=Ht/vt,hn=pt*Math.cos(xn*Math.PI/2),vn=gt*Math.sin(xn*Math.PI/2)+yt;for(let pn=0,Hn=zt.length;pn<Hn;pn++){const yn=jt(zt[pn],Xt[pn],vn);an(yn.x,yn.y,ut+hn)}for(let pn=0,Hn=Ot.length;pn<Hn;pn++){const yn=Ot[pn];Wt=Vt[pn];for(let Ln=0,On=yn.length;Ln<On;Ln++){const Sn=jt(yn[Ln],Wt[Ln],vn);St?an(Sn.x,Sn.y+xt[ct-1].y,xt[ct-1].x+hn):an(Sn.x,Sn.y,ut+hn)}}}en(),sn();function en(){const Ht=rt.length/3;if(ht){let xn=0,hn=Yt*xn;for(let vn=0;vn<qt;vn++){const pn=Nt[vn];dn(pn[2]+hn,pn[1]+hn,pn[0]+hn)}xn=ct+vt*2,hn=Yt*xn;for(let vn=0;vn<qt;vn++){const pn=Nt[vn];dn(pn[0]+hn,pn[1]+hn,pn[2]+hn)}}else{for(let xn=0;xn<qt;xn++){const hn=Nt[xn];dn(hn[2],hn[1],hn[0])}for(let xn=0;xn<qt;xn++){const hn=Nt[xn];dn(hn[0]+Yt*ct,hn[1]+Yt*ct,hn[2]+Yt*ct)}}nt.addGroup(Ht,rt.length/3-Ht,0)}function sn(){const Ht=rt.length/3;let xn=0;rn(zt,xn),xn+=zt.length;for(let hn=0,vn=Ot.length;hn<vn;hn++){const pn=Ot[hn];rn(pn,xn),xn+=pn.length}nt.addGroup(Ht,rt.length/3-Ht,1)}function rn(Ht,xn){let hn=Ht.length;for(;--hn>=0;){const vn=hn;let pn=hn-1;pn<0&&(pn=Ht.length-1);for(let Hn=0,yn=ct+vt*2;Hn<yn;Hn++){const Ln=Yt*Hn,On=Yt*(Hn+1),Sn=xn+vn+Ln,jn=xn+pn+Ln,Ft=xn+pn+On,Dt=xn+vn+On;Bn(Sn,jn,Ft,Dt)}}}function an(Ht,xn,hn){at.push(Ht),at.push(xn),at.push(hn)}function dn(Ht,xn,hn){Nn(Ht),Nn(xn),Nn(hn);const vn=rt.length/3,pn=_t.generateTopUV(nt,rt,vn-3,vn-2,vn-1);gn(pn[0]),gn(pn[1]),gn(pn[2])}function Bn(Ht,xn,hn,vn){Nn(Ht),Nn(xn),Nn(vn),Nn(xn),Nn(hn),Nn(vn);const pn=rt.length/3,Hn=_t.generateSideWallUV(nt,rt,pn-6,pn-3,pn-2,pn-1);gn(Hn[0]),gn(Hn[1]),gn(Hn[3]),gn(Hn[1]),gn(Hn[2]),gn(Hn[3])}function Nn(Ht){rt.push(at[Ht*3+0]),rt.push(at[Ht*3+1]),rt.push(at[Ht*3+2])}function gn(Ht){it.push(Ht.x),it.push(Ht.y)}}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON(),_e=this.parameters.shapes,nt=this.parameters.options;return toJSON$1(_e,nt,_)}static fromJSON(_,_e){const nt=[];for(let it=0,ot=_.shapes.length;it<ot;it++){const st=_e[_.shapes[it]];nt.push(st)}const rt=_.options.extrudePath;return rt!==void 0&&(_.options.extrudePath=new Curves[rt.type]().fromJSON(rt)),new ExtrudeGeometry(nt,_.options)}}const WorldUVGenerator={generateTopUV:function(tt,_,_e,nt,rt){const it=_[_e*3],ot=_[_e*3+1],st=_[nt*3],at=_[nt*3+1],lt=_[rt*3],ct=_[rt*3+1];return[new Vector2(it,ot),new Vector2(st,at),new Vector2(lt,ct)]},generateSideWallUV:function(tt,_,_e,nt,rt,it){const ot=_[_e*3],st=_[_e*3+1],at=_[_e*3+2],lt=_[nt*3],ct=_[nt*3+1],ut=_[nt*3+2],ht=_[rt*3],pt=_[rt*3+1],gt=_[rt*3+2],yt=_[it*3],vt=_[it*3+1],mt=_[it*3+2];return Math.abs(st-ct)<Math.abs(ot-lt)?[new Vector2(ot,1-at),new Vector2(lt,1-ut),new Vector2(ht,1-gt),new Vector2(yt,1-mt)]:[new Vector2(st,1-at),new Vector2(ct,1-ut),new Vector2(pt,1-gt),new Vector2(vt,1-mt)]}};function toJSON$1(tt,_,_e){if(_e.shapes=[],Array.isArray(tt))for(let nt=0,rt=tt.length;nt<rt;nt++){const it=tt[nt];_e.shapes.push(it.uuid)}else _e.shapes.push(tt.uuid);return _e.options=Object.assign({},_),_.extrudePath!==void 0&&(_e.options.extrudePath=_.extrudePath.toJSON()),_e}class IcosahedronGeometry extends PolyhedronGeometry{constructor(_=1,_e=0){const nt=(1+Math.sqrt(5))/2,rt=[-1,nt,0,1,nt,0,-1,-nt,0,1,-nt,0,0,-1,nt,0,1,nt,0,-1,-nt,0,1,-nt,nt,0,-1,nt,0,1,-nt,0,-1,-nt,0,1],it=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(rt,it,_,_e),this.type="IcosahedronGeometry",this.parameters={radius:_,detail:_e}}static fromJSON(_){return new IcosahedronGeometry(_.radius,_.detail)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(_=1,_e=0){const nt=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],rt=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(nt,rt,_,_e),this.type="OctahedronGeometry",this.parameters={radius:_,detail:_e}}static fromJSON(_){return new OctahedronGeometry(_.radius,_.detail)}}class RingGeometry extends BufferGeometry{constructor(_=.5,_e=1,nt=32,rt=1,it=0,ot=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:_,outerRadius:_e,thetaSegments:nt,phiSegments:rt,thetaStart:it,thetaLength:ot},nt=Math.max(3,nt),rt=Math.max(1,rt);const st=[],at=[],lt=[],ct=[];let ut=_;const ht=(_e-_)/rt,pt=new Vector3,gt=new Vector2;for(let yt=0;yt<=rt;yt++){for(let vt=0;vt<=nt;vt++){const mt=it+vt/nt*ot;pt.x=ut*Math.cos(mt),pt.y=ut*Math.sin(mt),at.push(pt.x,pt.y,pt.z),lt.push(0,0,1),gt.x=(pt.x/_e+1)/2,gt.y=(pt.y/_e+1)/2,ct.push(gt.x,gt.y)}ut+=ht}for(let yt=0;yt<rt;yt++){const vt=yt*(nt+1);for(let mt=0;mt<nt;mt++){const _t=mt+vt,xt=_t,St=_t+nt+1,Tt=_t+nt+2,Mt=_t+1;st.push(xt,St,Mt),st.push(St,Tt,Mt)}}this.setIndex(st),this.setAttribute("position",new Float32BufferAttribute(at,3)),this.setAttribute("normal",new Float32BufferAttribute(lt,3)),this.setAttribute("uv",new Float32BufferAttribute(ct,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new RingGeometry(_.innerRadius,_.outerRadius,_.thetaSegments,_.phiSegments,_.thetaStart,_.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(_=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),_e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:_,curveSegments:_e};const nt=[],rt=[],it=[],ot=[];let st=0,at=0;if(Array.isArray(_)===!1)lt(_);else for(let ct=0;ct<_.length;ct++)lt(_[ct]),this.addGroup(st,at,ct),st+=at,at=0;this.setIndex(nt),this.setAttribute("position",new Float32BufferAttribute(rt,3)),this.setAttribute("normal",new Float32BufferAttribute(it,3)),this.setAttribute("uv",new Float32BufferAttribute(ot,2));function lt(ct){const ut=rt.length/3,ht=ct.extractPoints(_e);let pt=ht.shape;const gt=ht.holes;ShapeUtils.isClockWise(pt)===!1&&(pt=pt.reverse());for(let vt=0,mt=gt.length;vt<mt;vt++){const _t=gt[vt];ShapeUtils.isClockWise(_t)===!0&&(gt[vt]=_t.reverse())}const yt=ShapeUtils.triangulateShape(pt,gt);for(let vt=0,mt=gt.length;vt<mt;vt++){const _t=gt[vt];pt=pt.concat(_t)}for(let vt=0,mt=pt.length;vt<mt;vt++){const _t=pt[vt];rt.push(_t.x,_t.y,0),it.push(0,0,1),ot.push(_t.x,_t.y)}for(let vt=0,mt=yt.length;vt<mt;vt++){const _t=yt[vt],xt=_t[0]+ut,St=_t[1]+ut,Tt=_t[2]+ut;nt.push(xt,St,Tt),at+=3}}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON(),_e=this.parameters.shapes;return toJSON(_e,_)}static fromJSON(_,_e){const nt=[];for(let rt=0,it=_.shapes.length;rt<it;rt++){const ot=_e[_.shapes[rt]];nt.push(ot)}return new ShapeGeometry(nt,_.curveSegments)}}function toJSON(tt,_){if(_.shapes=[],Array.isArray(tt))for(let _e=0,nt=tt.length;_e<nt;_e++){const rt=tt[_e];_.shapes.push(rt.uuid)}else _.shapes.push(tt.uuid);return _}class SphereGeometry extends BufferGeometry{constructor(_=1,_e=32,nt=16,rt=0,it=Math.PI*2,ot=0,st=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:_,widthSegments:_e,heightSegments:nt,phiStart:rt,phiLength:it,thetaStart:ot,thetaLength:st},_e=Math.max(3,Math.floor(_e)),nt=Math.max(2,Math.floor(nt));const at=Math.min(ot+st,Math.PI);let lt=0;const ct=[],ut=new Vector3,ht=new Vector3,pt=[],gt=[],yt=[],vt=[];for(let mt=0;mt<=nt;mt++){const _t=[],xt=mt/nt;let St=0;mt===0&&ot===0?St=.5/_e:mt===nt&&at===Math.PI&&(St=-.5/_e);for(let Tt=0;Tt<=_e;Tt++){const Mt=Tt/_e;ut.x=-_*Math.cos(rt+Mt*it)*Math.sin(ot+xt*st),ut.y=_*Math.cos(ot+xt*st),ut.z=_*Math.sin(rt+Mt*it)*Math.sin(ot+xt*st),gt.push(ut.x,ut.y,ut.z),ht.copy(ut).normalize(),yt.push(ht.x,ht.y,ht.z),vt.push(Mt+St,1-xt),_t.push(lt++)}ct.push(_t)}for(let mt=0;mt<nt;mt++)for(let _t=0;_t<_e;_t++){const xt=ct[mt][_t+1],St=ct[mt][_t],Tt=ct[mt+1][_t],Mt=ct[mt+1][_t+1];(mt!==0||ot>0)&&pt.push(xt,St,Mt),(mt!==nt-1||at<Math.PI)&&pt.push(St,Tt,Mt)}this.setIndex(pt),this.setAttribute("position",new Float32BufferAttribute(gt,3)),this.setAttribute("normal",new Float32BufferAttribute(yt,3)),this.setAttribute("uv",new Float32BufferAttribute(vt,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new SphereGeometry(_.radius,_.widthSegments,_.heightSegments,_.phiStart,_.phiLength,_.thetaStart,_.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(_=1,_e=0){const nt=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],rt=[2,1,0,0,3,2,1,3,0,2,3,1];super(nt,rt,_,_e),this.type="TetrahedronGeometry",this.parameters={radius:_,detail:_e}}static fromJSON(_){return new TetrahedronGeometry(_.radius,_.detail)}}class TorusGeometry extends BufferGeometry{constructor(_=1,_e=.4,nt=12,rt=48,it=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:_,tube:_e,radialSegments:nt,tubularSegments:rt,arc:it},nt=Math.floor(nt),rt=Math.floor(rt);const ot=[],st=[],at=[],lt=[],ct=new Vector3,ut=new Vector3,ht=new Vector3;for(let pt=0;pt<=nt;pt++)for(let gt=0;gt<=rt;gt++){const yt=gt/rt*it,vt=pt/nt*Math.PI*2;ut.x=(_+_e*Math.cos(vt))*Math.cos(yt),ut.y=(_+_e*Math.cos(vt))*Math.sin(yt),ut.z=_e*Math.sin(vt),st.push(ut.x,ut.y,ut.z),ct.x=_*Math.cos(yt),ct.y=_*Math.sin(yt),ht.subVectors(ut,ct).normalize(),at.push(ht.x,ht.y,ht.z),lt.push(gt/rt),lt.push(pt/nt)}for(let pt=1;pt<=nt;pt++)for(let gt=1;gt<=rt;gt++){const yt=(rt+1)*pt+gt-1,vt=(rt+1)*(pt-1)+gt-1,mt=(rt+1)*(pt-1)+gt,_t=(rt+1)*pt+gt;ot.push(yt,vt,_t),ot.push(vt,mt,_t)}this.setIndex(ot),this.setAttribute("position",new Float32BufferAttribute(st,3)),this.setAttribute("normal",new Float32BufferAttribute(at,3)),this.setAttribute("uv",new Float32BufferAttribute(lt,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new TorusGeometry(_.radius,_.tube,_.radialSegments,_.tubularSegments,_.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(_=1,_e=.4,nt=64,rt=8,it=2,ot=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:_,tube:_e,tubularSegments:nt,radialSegments:rt,p:it,q:ot},nt=Math.floor(nt),rt=Math.floor(rt);const st=[],at=[],lt=[],ct=[],ut=new Vector3,ht=new Vector3,pt=new Vector3,gt=new Vector3,yt=new Vector3,vt=new Vector3,mt=new Vector3;for(let xt=0;xt<=nt;++xt){const St=xt/nt*it*Math.PI*2;_t(St,it,ot,_,pt),_t(St+.01,it,ot,_,gt),vt.subVectors(gt,pt),mt.addVectors(gt,pt),yt.crossVectors(vt,mt),mt.crossVectors(yt,vt),yt.normalize(),mt.normalize();for(let Tt=0;Tt<=rt;++Tt){const Mt=Tt/rt*Math.PI*2,bt=-_e*Math.cos(Mt),Pt=_e*Math.sin(Mt);ut.x=pt.x+(bt*mt.x+Pt*yt.x),ut.y=pt.y+(bt*mt.y+Pt*yt.y),ut.z=pt.z+(bt*mt.z+Pt*yt.z),at.push(ut.x,ut.y,ut.z),ht.subVectors(ut,pt).normalize(),lt.push(ht.x,ht.y,ht.z),ct.push(xt/nt),ct.push(Tt/rt)}}for(let xt=1;xt<=nt;xt++)for(let St=1;St<=rt;St++){const Tt=(rt+1)*(xt-1)+(St-1),Mt=(rt+1)*xt+(St-1),bt=(rt+1)*xt+St,Pt=(rt+1)*(xt-1)+St;st.push(Tt,Mt,Pt),st.push(Mt,bt,Pt)}this.setIndex(st),this.setAttribute("position",new Float32BufferAttribute(at,3)),this.setAttribute("normal",new Float32BufferAttribute(lt,3)),this.setAttribute("uv",new Float32BufferAttribute(ct,2));function _t(xt,St,Tt,Mt,bt){const Pt=Math.cos(xt),wt=Math.sin(xt),Bt=Tt/St*xt,Ot=Math.cos(Bt);bt.x=Mt*(2+Ot)*.5*Pt,bt.y=Mt*(2+Ot)*wt*.5,bt.z=Mt*Math.sin(Bt)*.5}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new TorusKnotGeometry(_.radius,_.tube,_.tubularSegments,_.radialSegments,_.p,_.q)}}class TubeGeometry extends BufferGeometry{constructor(_=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),_e=64,nt=1,rt=8,it=!1){super(),this.type="TubeGeometry",this.parameters={path:_,tubularSegments:_e,radius:nt,radialSegments:rt,closed:it};const ot=_.computeFrenetFrames(_e,it);this.tangents=ot.tangents,this.normals=ot.normals,this.binormals=ot.binormals;const st=new Vector3,at=new Vector3,lt=new Vector2;let ct=new Vector3;const ut=[],ht=[],pt=[],gt=[];yt(),this.setIndex(gt),this.setAttribute("position",new Float32BufferAttribute(ut,3)),this.setAttribute("normal",new Float32BufferAttribute(ht,3)),this.setAttribute("uv",new Float32BufferAttribute(pt,2));function yt(){for(let xt=0;xt<_e;xt++)vt(xt);vt(it===!1?_e:0),_t(),mt()}function vt(xt){ct=_.getPointAt(xt/_e,ct);const St=ot.normals[xt],Tt=ot.binormals[xt];for(let Mt=0;Mt<=rt;Mt++){const bt=Mt/rt*Math.PI*2,Pt=Math.sin(bt),wt=-Math.cos(bt);at.x=wt*St.x+Pt*Tt.x,at.y=wt*St.y+Pt*Tt.y,at.z=wt*St.z+Pt*Tt.z,at.normalize(),ht.push(at.x,at.y,at.z),st.x=ct.x+nt*at.x,st.y=ct.y+nt*at.y,st.z=ct.z+nt*at.z,ut.push(st.x,st.y,st.z)}}function mt(){for(let xt=1;xt<=_e;xt++)for(let St=1;St<=rt;St++){const Tt=(rt+1)*(xt-1)+(St-1),Mt=(rt+1)*xt+(St-1),bt=(rt+1)*xt+St,Pt=(rt+1)*(xt-1)+St;gt.push(Tt,Mt,Pt),gt.push(Mt,bt,Pt)}}function _t(){for(let xt=0;xt<=_e;xt++)for(let St=0;St<=rt;St++)lt.x=xt/_e,lt.y=St/rt,pt.push(lt.x,lt.y)}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON();return _.path=this.parameters.path.toJSON(),_}static fromJSON(_){return new TubeGeometry(new Curves[_.path.type]().fromJSON(_.path),_.tubularSegments,_.radius,_.radialSegments,_.closed)}}class WireframeGeometry extends BufferGeometry{constructor(_=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:_},_!==null){const _e=[],nt=new Set,rt=new Vector3,it=new Vector3;if(_.index!==null){const ot=_.attributes.position,st=_.index;let at=_.groups;at.length===0&&(at=[{start:0,count:st.count,materialIndex:0}]);for(let lt=0,ct=at.length;lt<ct;++lt){const ut=at[lt],ht=ut.start,pt=ut.count;for(let gt=ht,yt=ht+pt;gt<yt;gt+=3)for(let vt=0;vt<3;vt++){const mt=st.getX(gt+vt),_t=st.getX(gt+(vt+1)%3);rt.fromBufferAttribute(ot,mt),it.fromBufferAttribute(ot,_t),isUniqueEdge(rt,it,nt)===!0&&(_e.push(rt.x,rt.y,rt.z),_e.push(it.x,it.y,it.z))}}}else{const ot=_.attributes.position;for(let st=0,at=ot.count/3;st<at;st++)for(let lt=0;lt<3;lt++){const ct=3*st+lt,ut=3*st+(lt+1)%3;rt.fromBufferAttribute(ot,ct),it.fromBufferAttribute(ot,ut),isUniqueEdge(rt,it,nt)===!0&&(_e.push(rt.x,rt.y,rt.z),_e.push(it.x,it.y,it.z))}}this.setAttribute("position",new Float32BufferAttribute(_e,3))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}}function isUniqueEdge(tt,_,_e){const nt=`${tt.x},${tt.y},${tt.z}-${_.x},${_.y},${_.z}`,rt=`${_.x},${_.y},${_.z}-${tt.x},${tt.y},${tt.z}`;return _e.has(nt)===!0||_e.has(rt)===!0?!1:(_e.add(nt),_e.add(rt),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(_){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color$1(0),this.transparent=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.fog=_.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(_){super(_),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(_){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color$1(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.defines={STANDARD:""},this.color.copy(_.color),this.roughness=_.roughness,this.metalness=_.metalness,this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.roughnessMap=_.roughnessMap,this.metalnessMap=_.metalnessMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapIntensity=_.envMapIntensity,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(_){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$4(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(_e){this.ior=(1+.4*_e)/(1-.4*_e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color$1(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color$1(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color$1(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(_)}get anisotropy(){return this._anisotropy}set anisotropy(_){this._anisotropy>0!=_>0&&this.version++,this._anisotropy=_}get clearcoat(){return this._clearcoat}set clearcoat(_){this._clearcoat>0!=_>0&&this.version++,this._clearcoat=_}get iridescence(){return this._iridescence}set iridescence(_){this._iridescence>0!=_>0&&this.version++,this._iridescence=_}get sheen(){return this._sheen}set sheen(_){this._sheen>0!=_>0&&this.version++,this._sheen=_}get transmission(){return this._transmission}set transmission(_){this._transmission>0!=_>0&&this.version++,this._transmission=_}copy(_){return super.copy(_),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=_.anisotropy,this.anisotropyRotation=_.anisotropyRotation,this.anisotropyMap=_.anisotropyMap,this.clearcoat=_.clearcoat,this.clearcoatMap=_.clearcoatMap,this.clearcoatRoughness=_.clearcoatRoughness,this.clearcoatRoughnessMap=_.clearcoatRoughnessMap,this.clearcoatNormalMap=_.clearcoatNormalMap,this.clearcoatNormalScale.copy(_.clearcoatNormalScale),this.ior=_.ior,this.iridescence=_.iridescence,this.iridescenceMap=_.iridescenceMap,this.iridescenceIOR=_.iridescenceIOR,this.iridescenceThicknessRange=[..._.iridescenceThicknessRange],this.iridescenceThicknessMap=_.iridescenceThicknessMap,this.sheen=_.sheen,this.sheenColor.copy(_.sheenColor),this.sheenColorMap=_.sheenColorMap,this.sheenRoughness=_.sheenRoughness,this.sheenRoughnessMap=_.sheenRoughnessMap,this.transmission=_.transmission,this.transmissionMap=_.transmissionMap,this.thickness=_.thickness,this.thicknessMap=_.thicknessMap,this.attenuationDistance=_.attenuationDistance,this.attenuationColor.copy(_.attenuationColor),this.specularIntensity=_.specularIntensity,this.specularIntensityMap=_.specularIntensityMap,this.specularColor.copy(_.specularColor),this.specularColorMap=_.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(_){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color$1(16777215),this.specular=new Color$1(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.specular.copy(_.specular),this.shininess=_.shininess,this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshToonMaterial extends Material{constructor(_){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color$1(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.gradientMap=_.gradientMap,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.alphaMap=_.alphaMap,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.fog=_.fog,this}}class MeshNormalMaterial extends Material{constructor(_){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(_)}copy(_){return super.copy(_),this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.flatShading=_.flatShading,this}}class MeshLambertMaterial extends Material{constructor(_){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshMatcapMaterial extends Material{constructor(_){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color$1(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.defines={MATCAP:""},this.color.copy(_.color),this.matcap=_.matcap,this.map=_.map,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.alphaMap=_.alphaMap,this.flatShading=_.flatShading,this.fog=_.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(_){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(_)}copy(_){return super.copy(_),this.scale=_.scale,this.dashSize=_.dashSize,this.gapSize=_.gapSize,this}}function arraySlice(tt,_,_e){return isTypedArray(tt)?new tt.constructor(tt.subarray(_,_e!==void 0?_e:tt.length)):tt.slice(_,_e)}function convertArray(tt,_,_e){return!tt||!_e&&tt.constructor===_?tt:typeof _.BYTES_PER_ELEMENT=="number"?new _(tt):Array.prototype.slice.call(tt)}function isTypedArray(tt){return ArrayBuffer.isView(tt)&&!(tt instanceof DataView)}function getKeyframeOrder(tt){function _(rt,it){return tt[rt]-tt[it]}const _e=tt.length,nt=new Array(_e);for(let rt=0;rt!==_e;++rt)nt[rt]=rt;return nt.sort(_),nt}function sortedArray(tt,_,_e){const nt=tt.length,rt=new tt.constructor(nt);for(let it=0,ot=0;ot!==nt;++it){const st=_e[it]*_;for(let at=0;at!==_;++at)rt[ot++]=tt[st+at]}return rt}function flattenJSON(tt,_,_e,nt){let rt=1,it=tt[0];for(;it!==void 0&&it[nt]===void 0;)it=tt[rt++];if(it===void 0)return;let ot=it[nt];if(ot!==void 0)if(Array.isArray(ot))do ot=it[nt],ot!==void 0&&(_.push(it.time),_e.push.apply(_e,ot)),it=tt[rt++];while(it!==void 0);else if(ot.toArray!==void 0)do ot=it[nt],ot!==void 0&&(_.push(it.time),ot.toArray(_e,_e.length)),it=tt[rt++];while(it!==void 0);else do ot=it[nt],ot!==void 0&&(_.push(it.time),_e.push(ot)),it=tt[rt++];while(it!==void 0)}function subclip(tt,_,_e,nt,rt=30){const it=tt.clone();it.name=_;const ot=[];for(let at=0;at<it.tracks.length;++at){const lt=it.tracks[at],ct=lt.getValueSize(),ut=[],ht=[];for(let pt=0;pt<lt.times.length;++pt){const gt=lt.times[pt]*rt;if(!(gt<_e||gt>=nt)){ut.push(lt.times[pt]);for(let yt=0;yt<ct;++yt)ht.push(lt.values[pt*ct+yt])}}ut.length!==0&&(lt.times=convertArray(ut,lt.times.constructor),lt.values=convertArray(ht,lt.values.constructor),ot.push(lt))}it.tracks=ot;let st=1/0;for(let at=0;at<it.tracks.length;++at)st>it.tracks[at].times[0]&&(st=it.tracks[at].times[0]);for(let at=0;at<it.tracks.length;++at)it.tracks[at].shift(-1*st);return it.resetDuration(),it}function makeClipAdditive(tt,_=0,_e=tt,nt=30){nt<=0&&(nt=30);const rt=_e.tracks.length,it=_/nt;for(let ot=0;ot<rt;++ot){const st=_e.tracks[ot],at=st.ValueTypeName;if(at==="bool"||at==="string")continue;const lt=tt.tracks.find(function(mt){return mt.name===st.name&&mt.ValueTypeName===at});if(lt===void 0)continue;let ct=0;const ut=st.getValueSize();st.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ct=ut/3);let ht=0;const pt=lt.getValueSize();lt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ht=pt/3);const gt=st.times.length-1;let yt;if(it<=st.times[0]){const mt=ct,_t=ut-ct;yt=arraySlice(st.values,mt,_t)}else if(it>=st.times[gt]){const mt=gt*ut+ct,_t=mt+ut-ct;yt=arraySlice(st.values,mt,_t)}else{const mt=st.createInterpolant(),_t=ct,xt=ut-ct;mt.evaluate(it),yt=arraySlice(mt.resultBuffer,_t,xt)}at==="quaternion"&&new Quaternion().fromArray(yt).normalize().conjugate().toArray(yt);const vt=lt.times.length;for(let mt=0;mt<vt;++mt){const _t=mt*pt+ht;if(at==="quaternion")Quaternion.multiplyQuaternionsFlat(lt.values,_t,yt,0,lt.values,_t);else{const xt=pt-ht*2;for(let St=0;St<xt;++St)lt.values[_t+St]-=yt[St]}}}return tt.blendMode=AdditiveAnimationBlendMode,tt}const AnimationUtils={arraySlice,convertArray,isTypedArray,getKeyframeOrder,sortedArray,flattenJSON,subclip,makeClipAdditive};class Interpolant{constructor(_,_e,nt,rt){this.parameterPositions=_,this._cachedIndex=0,this.resultBuffer=rt!==void 0?rt:new _e.constructor(nt),this.sampleValues=_e,this.valueSize=nt,this.settings=null,this.DefaultSettings_={}}evaluate(_){const _e=this.parameterPositions;let nt=this._cachedIndex,rt=_e[nt],it=_e[nt-1];e:{t:{let ot;n:{r:if(!(_<rt)){for(let st=nt+2;;){if(rt===void 0){if(_<it)break r;return nt=_e.length,this._cachedIndex=nt,this.copySampleValue_(nt-1)}if(nt===st)break;if(it=rt,rt=_e[++nt],_<rt)break t}ot=_e.length;break n}if(!(_>=it)){const st=_e[1];_<st&&(nt=2,it=st);for(let at=nt-2;;){if(it===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(nt===at)break;if(rt=it,it=_e[--nt-1],_>=it)break t}ot=nt,nt=0;break n}break e}for(;nt<ot;){const st=nt+ot>>>1;_<_e[st]?ot=st:nt=st+1}if(rt=_e[nt],it=_e[nt-1],it===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(rt===void 0)return nt=_e.length,this._cachedIndex=nt,this.copySampleValue_(nt-1)}this._cachedIndex=nt,this.intervalChanged_(nt,it,rt)}return this.interpolate_(nt,it,_,rt)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(_){const _e=this.resultBuffer,nt=this.sampleValues,rt=this.valueSize,it=_*rt;for(let ot=0;ot!==rt;++ot)_e[ot]=nt[it+ot];return _e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(_,_e,nt,rt){super(_,_e,nt,rt),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(_,_e,nt){const rt=this.parameterPositions;let it=_-2,ot=_+1,st=rt[it],at=rt[ot];if(st===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:it=_,st=2*_e-nt;break;case WrapAroundEnding:it=rt.length-2,st=_e+rt[it]-rt[it+1];break;default:it=_,st=nt}if(at===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:ot=_,at=2*nt-_e;break;case WrapAroundEnding:ot=1,at=nt+rt[1]-rt[0];break;default:ot=_-1,at=_e}const lt=(nt-_e)*.5,ct=this.valueSize;this._weightPrev=lt/(_e-st),this._weightNext=lt/(at-nt),this._offsetPrev=it*ct,this._offsetNext=ot*ct}interpolate_(_,_e,nt,rt){const it=this.resultBuffer,ot=this.sampleValues,st=this.valueSize,at=_*st,lt=at-st,ct=this._offsetPrev,ut=this._offsetNext,ht=this._weightPrev,pt=this._weightNext,gt=(nt-_e)/(rt-_e),yt=gt*gt,vt=yt*gt,mt=-ht*vt+2*ht*yt-ht*gt,_t=(1+ht)*vt+(-1.5-2*ht)*yt+(-.5+ht)*gt+1,xt=(-1-pt)*vt+(1.5+pt)*yt+.5*gt,St=pt*vt-pt*yt;for(let Tt=0;Tt!==st;++Tt)it[Tt]=mt*ot[ct+Tt]+_t*ot[lt+Tt]+xt*ot[at+Tt]+St*ot[ut+Tt];return it}}class LinearInterpolant extends Interpolant{constructor(_,_e,nt,rt){super(_,_e,nt,rt)}interpolate_(_,_e,nt,rt){const it=this.resultBuffer,ot=this.sampleValues,st=this.valueSize,at=_*st,lt=at-st,ct=(nt-_e)/(rt-_e),ut=1-ct;for(let ht=0;ht!==st;++ht)it[ht]=ot[lt+ht]*ut+ot[at+ht]*ct;return it}}class DiscreteInterpolant extends Interpolant{constructor(_,_e,nt,rt){super(_,_e,nt,rt)}interpolate_(_){return this.copySampleValue_(_-1)}}class KeyframeTrack{constructor(_,_e,nt,rt){if(_===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(_e===void 0||_e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+_);this.name=_,this.times=convertArray(_e,this.TimeBufferType),this.values=convertArray(nt,this.ValueBufferType),this.setInterpolation(rt||this.DefaultInterpolation)}static toJSON(_){const _e=_.constructor;let nt;if(_e.toJSON!==this.toJSON)nt=_e.toJSON(_);else{nt={name:_.name,times:convertArray(_.times,Array),values:convertArray(_.values,Array)};const rt=_.getInterpolation();rt!==_.DefaultInterpolation&&(nt.interpolation=rt)}return nt.type=_.ValueTypeName,nt}InterpolantFactoryMethodDiscrete(_){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),_)}InterpolantFactoryMethodLinear(_){return new LinearInterpolant(this.times,this.values,this.getValueSize(),_)}InterpolantFactoryMethodSmooth(_){return new CubicInterpolant(this.times,this.values,this.getValueSize(),_)}setInterpolation(_){let _e;switch(_){case InterpolateDiscrete:_e=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:_e=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:_e=this.InterpolantFactoryMethodSmooth;break}if(_e===void 0){const nt="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(_!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(nt);return console.warn("THREE.KeyframeTrack:",nt),this}return this.createInterpolant=_e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(_){if(_!==0){const _e=this.times;for(let nt=0,rt=_e.length;nt!==rt;++nt)_e[nt]+=_}return this}scale(_){if(_!==1){const _e=this.times;for(let nt=0,rt=_e.length;nt!==rt;++nt)_e[nt]*=_}return this}trim(_,_e){const nt=this.times,rt=nt.length;let it=0,ot=rt-1;for(;it!==rt&&nt[it]<_;)++it;for(;ot!==-1&&nt[ot]>_e;)--ot;if(++ot,it!==0||ot!==rt){it>=ot&&(ot=Math.max(ot,1),it=ot-1);const st=this.getValueSize();this.times=arraySlice(nt,it,ot),this.values=arraySlice(this.values,it*st,ot*st)}return this}validate(){let _=!0;const _e=this.getValueSize();_e-Math.floor(_e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),_=!1);const nt=this.times,rt=this.values,it=nt.length;it===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),_=!1);let ot=null;for(let st=0;st!==it;st++){const at=nt[st];if(typeof at=="number"&&isNaN(at)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,st,at),_=!1;break}if(ot!==null&&ot>at){console.error("THREE.KeyframeTrack: Out of order keys.",this,st,at,ot),_=!1;break}ot=at}if(rt!==void 0&&isTypedArray(rt))for(let st=0,at=rt.length;st!==at;++st){const lt=rt[st];if(isNaN(lt)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,st,lt),_=!1;break}}return _}optimize(){const _=arraySlice(this.times),_e=arraySlice(this.values),nt=this.getValueSize(),rt=this.getInterpolation()===InterpolateSmooth,it=_.length-1;let ot=1;for(let st=1;st<it;++st){let at=!1;const lt=_[st],ct=_[st+1];if(lt!==ct&&(st!==1||lt!==_[0]))if(rt)at=!0;else{const ut=st*nt,ht=ut-nt,pt=ut+nt;for(let gt=0;gt!==nt;++gt){const yt=_e[ut+gt];if(yt!==_e[ht+gt]||yt!==_e[pt+gt]){at=!0;break}}}if(at){if(st!==ot){_[ot]=_[st];const ut=st*nt,ht=ot*nt;for(let pt=0;pt!==nt;++pt)_e[ht+pt]=_e[ut+pt]}++ot}}if(it>0){_[ot]=_[it];for(let st=it*nt,at=ot*nt,lt=0;lt!==nt;++lt)_e[at+lt]=_e[st+lt];++ot}return ot!==_.length?(this.times=arraySlice(_,0,ot),this.values=arraySlice(_e,0,ot*nt)):(this.times=_,this.values=_e),this}clone(){const _=arraySlice(this.times,0),_e=arraySlice(this.values,0),nt=this.constructor,rt=new nt(this.name,_,_e);return rt.createInterpolant=this.createInterpolant,rt}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(_,_e,nt,rt){super(_,_e,nt,rt)}interpolate_(_,_e,nt,rt){const it=this.resultBuffer,ot=this.sampleValues,st=this.valueSize,at=(nt-_e)/(rt-_e);let lt=_*st;for(let ct=lt+st;lt!==ct;lt+=4)Quaternion.slerpFlat(it,0,ot,lt-st,ot,lt,at);return it}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(_){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),_)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(_,_e=-1,nt,rt=NormalAnimationBlendMode){this.name=_,this.tracks=nt,this.duration=_e,this.blendMode=rt,this.uuid=generateUUID$1(),this.duration<0&&this.resetDuration()}static parse(_){const _e=[],nt=_.tracks,rt=1/(_.fps||1);for(let ot=0,st=nt.length;ot!==st;++ot)_e.push(parseKeyframeTrack(nt[ot]).scale(rt));const it=new this(_.name,_.duration,_e,_.blendMode);return it.uuid=_.uuid,it}static toJSON(_){const _e=[],nt=_.tracks,rt={name:_.name,duration:_.duration,tracks:_e,uuid:_.uuid,blendMode:_.blendMode};for(let it=0,ot=nt.length;it!==ot;++it)_e.push(KeyframeTrack.toJSON(nt[it]));return rt}static CreateFromMorphTargetSequence(_,_e,nt,rt){const it=_e.length,ot=[];for(let st=0;st<it;st++){let at=[],lt=[];at.push((st+it-1)%it,st,(st+1)%it),lt.push(0,1,0);const ct=getKeyframeOrder(at);at=sortedArray(at,1,ct),lt=sortedArray(lt,1,ct),!rt&&at[0]===0&&(at.push(it),lt.push(lt[0])),ot.push(new NumberKeyframeTrack(".morphTargetInfluences["+_e[st].name+"]",at,lt).scale(1/nt))}return new this(_,-1,ot)}static findByName(_,_e){let nt=_;if(!Array.isArray(_)){const rt=_;nt=rt.geometry&&rt.geometry.animations||rt.animations}for(let rt=0;rt<nt.length;rt++)if(nt[rt].name===_e)return nt[rt];return null}static CreateClipsFromMorphTargetSequences(_,_e,nt){const rt={},it=/^([\w-]*?)([\d]+)$/;for(let st=0,at=_.length;st<at;st++){const lt=_[st],ct=lt.name.match(it);if(ct&&ct.length>1){const ut=ct[1];let ht=rt[ut];ht||(rt[ut]=ht=[]),ht.push(lt)}}const ot=[];for(const st in rt)ot.push(this.CreateFromMorphTargetSequence(st,rt[st],_e,nt));return ot}static parseAnimation(_,_e){if(!_)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const nt=function(ut,ht,pt,gt,yt){if(pt.length!==0){const vt=[],mt=[];flattenJSON(pt,vt,mt,gt),vt.length!==0&&yt.push(new ut(ht,vt,mt))}},rt=[],it=_.name||"default",ot=_.fps||30,st=_.blendMode;let at=_.length||-1;const lt=_.hierarchy||[];for(let ut=0;ut<lt.length;ut++){const ht=lt[ut].keys;if(!(!ht||ht.length===0))if(ht[0].morphTargets){const pt={};let gt;for(gt=0;gt<ht.length;gt++)if(ht[gt].morphTargets)for(let yt=0;yt<ht[gt].morphTargets.length;yt++)pt[ht[gt].morphTargets[yt]]=-1;for(const yt in pt){const vt=[],mt=[];for(let _t=0;_t!==ht[gt].morphTargets.length;++_t){const xt=ht[gt];vt.push(xt.time),mt.push(xt.morphTarget===yt?1:0)}rt.push(new NumberKeyframeTrack(".morphTargetInfluence["+yt+"]",vt,mt))}at=pt.length*ot}else{const pt=".bones["+_e[ut].name+"]";nt(VectorKeyframeTrack,pt+".position",ht,"pos",rt),nt(QuaternionKeyframeTrack,pt+".quaternion",ht,"rot",rt),nt(VectorKeyframeTrack,pt+".scale",ht,"scl",rt)}}return rt.length===0?null:new this(it,at,rt,st)}resetDuration(){const _=this.tracks;let _e=0;for(let nt=0,rt=_.length;nt!==rt;++nt){const it=this.tracks[nt];_e=Math.max(_e,it.times[it.times.length-1])}return this.duration=_e,this}trim(){for(let _=0;_<this.tracks.length;_++)this.tracks[_].trim(0,this.duration);return this}validate(){let _=!0;for(let _e=0;_e<this.tracks.length;_e++)_=_&&this.tracks[_e].validate();return _}optimize(){for(let _=0;_<this.tracks.length;_++)this.tracks[_].optimize();return this}clone(){const _=[];for(let _e=0;_e<this.tracks.length;_e++)_.push(this.tracks[_e].clone());return new this.constructor(this.name,this.duration,_,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(tt){switch(tt.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+tt)}function parseKeyframeTrack(tt){if(tt.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const _=getTrackTypeForValueTypeName(tt.type);if(tt.times===void 0){const _e=[],nt=[];flattenJSON(tt.keys,_e,nt,"value"),tt.times=_e,tt.values=nt}return _.parse!==void 0?_.parse(tt):new _(tt.name,tt.times,tt.values,tt.interpolation)}const Cache={enabled:!1,files:{},add:function(tt,_){this.enabled!==!1&&(this.files[tt]=_)},get:function(tt){if(this.enabled!==!1)return this.files[tt]},remove:function(tt){delete this.files[tt]},clear:function(){this.files={}}};class LoadingManager{constructor(_,_e,nt){const rt=this;let it=!1,ot=0,st=0,at;const lt=[];this.onStart=void 0,this.onLoad=_,this.onProgress=_e,this.onError=nt,this.itemStart=function(ct){st++,it===!1&&rt.onStart!==void 0&&rt.onStart(ct,ot,st),it=!0},this.itemEnd=function(ct){ot++,rt.onProgress!==void 0&&rt.onProgress(ct,ot,st),ot===st&&(it=!1,rt.onLoad!==void 0&&rt.onLoad())},this.itemError=function(ct){rt.onError!==void 0&&rt.onError(ct)},this.resolveURL=function(ct){return at?at(ct):ct},this.setURLModifier=function(ct){return at=ct,this},this.addHandler=function(ct,ut){return lt.push(ct,ut),this},this.removeHandler=function(ct){const ut=lt.indexOf(ct);return ut!==-1&&lt.splice(ut,2),this},this.getHandler=function(ct){for(let ut=0,ht=lt.length;ut<ht;ut+=2){const pt=lt[ut],gt=lt[ut+1];if(pt.global&&(pt.lastIndex=0),pt.test(ct))return gt}return null}}}const DefaultLoadingManager=new LoadingManager;let Loader$1=class{constructor(_){this.manager=_!==void 0?_:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(_,_e){const nt=this;return new Promise(function(rt,it){nt.load(_,rt,_e,it)})}parse(){}setCrossOrigin(_){return this.crossOrigin=_,this}setWithCredentials(_){return this.withCredentials=_,this}setPath(_){return this.path=_,this}setResourcePath(_){return this.resourcePath=_,this}setRequestHeader(_){return this.requestHeader=_,this}};const loading={};class HttpError extends Error{constructor(_,_e){super(_),this.response=_e}}class FileLoader extends Loader$1{constructor(_){super(_)}load(_,_e,nt,rt){_===void 0&&(_=""),this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const it=Cache.get(_);if(it!==void 0)return this.manager.itemStart(_),setTimeout(()=>{_e&&_e(it),this.manager.itemEnd(_)},0),it;if(loading[_]!==void 0){loading[_].push({onLoad:_e,onProgress:nt,onError:rt});return}loading[_]=[],loading[_].push({onLoad:_e,onProgress:nt,onError:rt});const ot=new Request(_,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),st=this.mimeType,at=this.responseType;fetch(ot).then(lt=>{if(lt.status===200||lt.status===0){if(lt.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||lt.body===void 0||lt.body.getReader===void 0)return lt;const ct=loading[_],ut=lt.body.getReader(),ht=lt.headers.get("Content-Length")||lt.headers.get("X-File-Size"),pt=ht?parseInt(ht):0,gt=pt!==0;let yt=0;const vt=new ReadableStream({start(mt){_t();function _t(){ut.read().then(({done:xt,value:St})=>{if(xt)mt.close();else{yt+=St.byteLength;const Tt=new ProgressEvent("progress",{lengthComputable:gt,loaded:yt,total:pt});for(let Mt=0,bt=ct.length;Mt<bt;Mt++){const Pt=ct[Mt];Pt.onProgress&&Pt.onProgress(Tt)}mt.enqueue(St),_t()}})}}});return new Response(vt)}else throw new HttpError(`fetch for "${lt.url}" responded with ${lt.status}: ${lt.statusText}`,lt)}).then(lt=>{switch(at){case"arraybuffer":return lt.arrayBuffer();case"blob":return lt.blob();case"document":return lt.text().then(ct=>new DOMParser().parseFromString(ct,st));case"json":return lt.json();default:if(st===void 0)return lt.text();{const ut=/charset="?([^;"\s]*)"?/i.exec(st),ht=ut&&ut[1]?ut[1].toLowerCase():void 0,pt=new TextDecoder(ht);return lt.arrayBuffer().then(gt=>pt.decode(gt))}}}).then(lt=>{Cache.add(_,lt);const ct=loading[_];delete loading[_];for(let ut=0,ht=ct.length;ut<ht;ut++){const pt=ct[ut];pt.onLoad&&pt.onLoad(lt)}}).catch(lt=>{const ct=loading[_];if(ct===void 0)throw this.manager.itemError(_),lt;delete loading[_];for(let ut=0,ht=ct.length;ut<ht;ut++){const pt=ct[ut];pt.onError&&pt.onError(lt)}this.manager.itemError(_)}).finally(()=>{this.manager.itemEnd(_)}),this.manager.itemStart(_)}setResponseType(_){return this.responseType=_,this}setMimeType(_){return this.mimeType=_,this}}class AnimationLoader extends Loader$1{constructor(_){super(_)}load(_,_e,nt,rt){const it=this,ot=new FileLoader(this.manager);ot.setPath(this.path),ot.setRequestHeader(this.requestHeader),ot.setWithCredentials(this.withCredentials),ot.load(_,function(st){try{_e(it.parse(JSON.parse(st)))}catch(at){rt?rt(at):console.error(at),it.manager.itemError(_)}},nt,rt)}parse(_){const _e=[];for(let nt=0;nt<_.length;nt++){const rt=AnimationClip.parse(_[nt]);_e.push(rt)}return _e}}class CompressedTextureLoader extends Loader$1{constructor(_){super(_)}load(_,_e,nt,rt){const it=this,ot=[],st=new CompressedTexture,at=new FileLoader(this.manager);at.setPath(this.path),at.setResponseType("arraybuffer"),at.setRequestHeader(this.requestHeader),at.setWithCredentials(it.withCredentials);let lt=0;function ct(ut){at.load(_[ut],function(ht){const pt=it.parse(ht,!0);ot[ut]={width:pt.width,height:pt.height,format:pt.format,mipmaps:pt.mipmaps},lt+=1,lt===6&&(pt.mipmapCount===1&&(st.minFilter=LinearFilter),st.image=ot,st.format=pt.format,st.needsUpdate=!0,_e&&_e(st))},nt,rt)}if(Array.isArray(_))for(let ut=0,ht=_.length;ut<ht;++ut)ct(ut);else at.load(_,function(ut){const ht=it.parse(ut,!0);if(ht.isCubemap){const pt=ht.mipmaps.length/ht.mipmapCount;for(let gt=0;gt<pt;gt++){ot[gt]={mipmaps:[]};for(let yt=0;yt<ht.mipmapCount;yt++)ot[gt].mipmaps.push(ht.mipmaps[gt*ht.mipmapCount+yt]),ot[gt].format=ht.format,ot[gt].width=ht.width,ot[gt].height=ht.height}st.image=ot}else st.image.width=ht.width,st.image.height=ht.height,st.mipmaps=ht.mipmaps;ht.mipmapCount===1&&(st.minFilter=LinearFilter),st.format=ht.format,st.needsUpdate=!0,_e&&_e(st)},nt,rt);return st}}class ImageLoader extends Loader$1{constructor(_){super(_)}load(_,_e,nt,rt){this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const it=this,ot=Cache.get(_);if(ot!==void 0)return it.manager.itemStart(_),setTimeout(function(){_e&&_e(ot),it.manager.itemEnd(_)},0),ot;const st=createElementNS("img");function at(){ct(),Cache.add(_,this),_e&&_e(this),it.manager.itemEnd(_)}function lt(ut){ct(),rt&&rt(ut),it.manager.itemError(_),it.manager.itemEnd(_)}function ct(){st.removeEventListener("load",at,!1),st.removeEventListener("error",lt,!1)}return st.addEventListener("load",at,!1),st.addEventListener("error",lt,!1),_.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(st.crossOrigin=this.crossOrigin),it.manager.itemStart(_),st.src=_,st}}class CubeTextureLoader extends Loader$1{constructor(_){super(_)}load(_,_e,nt,rt){const it=new CubeTexture;it.colorSpace=SRGBColorSpace;const ot=new ImageLoader(this.manager);ot.setCrossOrigin(this.crossOrigin),ot.setPath(this.path);let st=0;function at(lt){ot.load(_[lt],function(ct){it.images[lt]=ct,st++,st===6&&(it.needsUpdate=!0,_e&&_e(it))},void 0,rt)}for(let lt=0;lt<_.length;++lt)at(lt);return it}}class DataTextureLoader extends Loader$1{constructor(_){super(_)}load(_,_e,nt,rt){const it=this,ot=new DataTexture,st=new FileLoader(this.manager);return st.setResponseType("arraybuffer"),st.setRequestHeader(this.requestHeader),st.setPath(this.path),st.setWithCredentials(it.withCredentials),st.load(_,function(at){const lt=it.parse(at);lt&&(lt.image!==void 0?ot.image=lt.image:lt.data!==void 0&&(ot.image.width=lt.width,ot.image.height=lt.height,ot.image.data=lt.data),ot.wrapS=lt.wrapS!==void 0?lt.wrapS:ClampToEdgeWrapping,ot.wrapT=lt.wrapT!==void 0?lt.wrapT:ClampToEdgeWrapping,ot.magFilter=lt.magFilter!==void 0?lt.magFilter:LinearFilter,ot.minFilter=lt.minFilter!==void 0?lt.minFilter:LinearFilter,ot.anisotropy=lt.anisotropy!==void 0?lt.anisotropy:1,lt.colorSpace!==void 0?ot.colorSpace=lt.colorSpace:lt.encoding!==void 0&&(ot.encoding=lt.encoding),lt.flipY!==void 0&&(ot.flipY=lt.flipY),lt.format!==void 0&&(ot.format=lt.format),lt.type!==void 0&&(ot.type=lt.type),lt.mipmaps!==void 0&&(ot.mipmaps=lt.mipmaps,ot.minFilter=LinearMipmapLinearFilter),lt.mipmapCount===1&&(ot.minFilter=LinearFilter),lt.generateMipmaps!==void 0&&(ot.generateMipmaps=lt.generateMipmaps),ot.needsUpdate=!0,_e&&_e(ot,lt))},nt,rt),ot}}class TextureLoader extends Loader$1{constructor(_){super(_)}load(_,_e,nt,rt){const it=new Texture,ot=new ImageLoader(this.manager);return ot.setCrossOrigin(this.crossOrigin),ot.setPath(this.path),ot.load(_,function(st){it.image=st,it.needsUpdate=!0,_e!==void 0&&_e(it)},nt,rt),it}}class Light extends Object3D{constructor(_,_e=1){super(),this.isLight=!0,this.type="Light",this.color=new Color$1(_),this.intensity=_e}dispose(){}copy(_,_e){return super.copy(_,_e),this.color.copy(_.color),this.intensity=_.intensity,this}toJSON(_){const _e=super.toJSON(_);return _e.object.color=this.color.getHex(),_e.object.intensity=this.intensity,this.groundColor!==void 0&&(_e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(_e.object.distance=this.distance),this.angle!==void 0&&(_e.object.angle=this.angle),this.decay!==void 0&&(_e.object.decay=this.decay),this.penumbra!==void 0&&(_e.object.penumbra=this.penumbra),this.shadow!==void 0&&(_e.object.shadow=this.shadow.toJSON()),_e}}class HemisphereLight extends Light{constructor(_,_e,nt){super(_,nt),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color$1(_e)}copy(_,_e){return super.copy(_,_e),this.groundColor.copy(_.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(_){this.camera=_,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(_){const _e=this.camera,nt=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(_.matrixWorld),_e.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(_.target.matrixWorld),_e.lookAt(_lookTarget$1),_e.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(_e.projectionMatrix,_e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),nt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),nt.multiply(_projScreenMatrix$1)}getViewport(_){return this._viewports[_]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(_){return this.camera=_.camera.clone(),this.bias=_.bias,this.radius=_.radius,this.mapSize.copy(_.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const _={};return this.bias!==0&&(_.bias=this.bias),this.normalBias!==0&&(_.normalBias=this.normalBias),this.radius!==1&&(_.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(_.mapSize=this.mapSize.toArray()),_.camera=this.camera.toJSON(!1).object,delete _.camera.matrix,_}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(_){const _e=this.camera,nt=RAD2DEG*2*_.angle*this.focus,rt=this.mapSize.width/this.mapSize.height,it=_.distance||_e.far;(nt!==_e.fov||rt!==_e.aspect||it!==_e.far)&&(_e.fov=nt,_e.aspect=rt,_e.far=it,_e.updateProjectionMatrix()),super.updateMatrices(_)}copy(_){return super.copy(_),this.focus=_.focus,this}}class SpotLight extends Light{constructor(_,_e,nt=0,rt=Math.PI/3,it=0,ot=2){super(_,_e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=nt,this.angle=rt,this.penumbra=it,this.decay=ot,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(_){this.intensity=_/Math.PI}dispose(){this.shadow.dispose()}copy(_,_e){return super.copy(_,_e),this.distance=_.distance,this.angle=_.angle,this.penumbra=_.penumbra,this.decay=_.decay,this.target=_.target.clone(),this.shadow=_.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(_,_e=0){const nt=this.camera,rt=this.matrix,it=_.distance||nt.far;it!==nt.far&&(nt.far=it,nt.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(_.matrixWorld),nt.position.copy(_lightPositionWorld),_lookTarget.copy(nt.position),_lookTarget.add(this._cubeDirections[_e]),nt.up.copy(this._cubeUps[_e]),nt.lookAt(_lookTarget),nt.updateMatrixWorld(),rt.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(nt.projectionMatrix,nt.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(_,_e,nt=0,rt=2){super(_,_e),this.isPointLight=!0,this.type="PointLight",this.distance=nt,this.decay=rt,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(_){this.intensity=_/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(_,_e){return super.copy(_,_e),this.distance=_.distance,this.decay=_.decay,this.shadow=_.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(_,_e){super(_,_e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(_){return super.copy(_),this.target=_.target.clone(),this.shadow=_.shadow.clone(),this}}class AmbientLight extends Light{constructor(_,_e){super(_,_e),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(_,_e,nt=10,rt=10){super(_,_e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=nt,this.height=rt}get power(){return this.intensity*this.width*this.height*Math.PI}set power(_){this.intensity=_/(this.width*this.height*Math.PI)}copy(_){return super.copy(_),this.width=_.width,this.height=_.height,this}toJSON(_){const _e=super.toJSON(_);return _e.object.width=this.width,_e.object.height=this.height,_e}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let _=0;_<9;_++)this.coefficients.push(new Vector3)}set(_){for(let _e=0;_e<9;_e++)this.coefficients[_e].copy(_[_e]);return this}zero(){for(let _=0;_<9;_++)this.coefficients[_].set(0,0,0);return this}getAt(_,_e){const nt=_.x,rt=_.y,it=_.z,ot=this.coefficients;return _e.copy(ot[0]).multiplyScalar(.282095),_e.addScaledVector(ot[1],.488603*rt),_e.addScaledVector(ot[2],.488603*it),_e.addScaledVector(ot[3],.488603*nt),_e.addScaledVector(ot[4],1.092548*(nt*rt)),_e.addScaledVector(ot[5],1.092548*(rt*it)),_e.addScaledVector(ot[6],.315392*(3*it*it-1)),_e.addScaledVector(ot[7],1.092548*(nt*it)),_e.addScaledVector(ot[8],.546274*(nt*nt-rt*rt)),_e}getIrradianceAt(_,_e){const nt=_.x,rt=_.y,it=_.z,ot=this.coefficients;return _e.copy(ot[0]).multiplyScalar(.886227),_e.addScaledVector(ot[1],2*.511664*rt),_e.addScaledVector(ot[2],2*.511664*it),_e.addScaledVector(ot[3],2*.511664*nt),_e.addScaledVector(ot[4],2*.429043*nt*rt),_e.addScaledVector(ot[5],2*.429043*rt*it),_e.addScaledVector(ot[6],.743125*it*it-.247708),_e.addScaledVector(ot[7],2*.429043*nt*it),_e.addScaledVector(ot[8],.429043*(nt*nt-rt*rt)),_e}add(_){for(let _e=0;_e<9;_e++)this.coefficients[_e].add(_.coefficients[_e]);return this}addScaledSH(_,_e){for(let nt=0;nt<9;nt++)this.coefficients[nt].addScaledVector(_.coefficients[nt],_e);return this}scale(_){for(let _e=0;_e<9;_e++)this.coefficients[_e].multiplyScalar(_);return this}lerp(_,_e){for(let nt=0;nt<9;nt++)this.coefficients[nt].lerp(_.coefficients[nt],_e);return this}equals(_){for(let _e=0;_e<9;_e++)if(!this.coefficients[_e].equals(_.coefficients[_e]))return!1;return!0}copy(_){return this.set(_.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(_,_e=0){const nt=this.coefficients;for(let rt=0;rt<9;rt++)nt[rt].fromArray(_,_e+rt*3);return this}toArray(_=[],_e=0){const nt=this.coefficients;for(let rt=0;rt<9;rt++)nt[rt].toArray(_,_e+rt*3);return _}static getBasisAt(_,_e){const nt=_.x,rt=_.y,it=_.z;_e[0]=.282095,_e[1]=.488603*rt,_e[2]=.488603*it,_e[3]=.488603*nt,_e[4]=1.092548*nt*rt,_e[5]=1.092548*rt*it,_e[6]=.315392*(3*it*it-1),_e[7]=1.092548*nt*it,_e[8]=.546274*(nt*nt-rt*rt)}}class LightProbe extends Light{constructor(_=new SphericalHarmonics3,_e=1){super(void 0,_e),this.isLightProbe=!0,this.sh=_}copy(_){return super.copy(_),this.sh.copy(_.sh),this}fromJSON(_){return this.intensity=_.intensity,this.sh.fromArray(_.sh),this}toJSON(_){const _e=super.toJSON(_);return _e.object.sh=this.sh.toArray(),_e}}class MaterialLoader extends Loader$1{constructor(_){super(_),this.textures={}}load(_,_e,nt,rt){const it=this,ot=new FileLoader(it.manager);ot.setPath(it.path),ot.setRequestHeader(it.requestHeader),ot.setWithCredentials(it.withCredentials),ot.load(_,function(st){try{_e(it.parse(JSON.parse(st)))}catch(at){rt?rt(at):console.error(at),it.manager.itemError(_)}},nt,rt)}parse(_){const _e=this.textures;function nt(it){return _e[it]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",it),_e[it]}const rt=MaterialLoader.createMaterialFromType(_.type);if(_.uuid!==void 0&&(rt.uuid=_.uuid),_.name!==void 0&&(rt.name=_.name),_.color!==void 0&&rt.color!==void 0&&rt.color.setHex(_.color),_.roughness!==void 0&&(rt.roughness=_.roughness),_.metalness!==void 0&&(rt.metalness=_.metalness),_.sheen!==void 0&&(rt.sheen=_.sheen),_.sheenColor!==void 0&&(rt.sheenColor=new Color$1().setHex(_.sheenColor)),_.sheenRoughness!==void 0&&(rt.sheenRoughness=_.sheenRoughness),_.emissive!==void 0&&rt.emissive!==void 0&&rt.emissive.setHex(_.emissive),_.specular!==void 0&&rt.specular!==void 0&&rt.specular.setHex(_.specular),_.specularIntensity!==void 0&&(rt.specularIntensity=_.specularIntensity),_.specularColor!==void 0&&rt.specularColor!==void 0&&rt.specularColor.setHex(_.specularColor),_.shininess!==void 0&&(rt.shininess=_.shininess),_.clearcoat!==void 0&&(rt.clearcoat=_.clearcoat),_.clearcoatRoughness!==void 0&&(rt.clearcoatRoughness=_.clearcoatRoughness),_.iridescence!==void 0&&(rt.iridescence=_.iridescence),_.iridescenceIOR!==void 0&&(rt.iridescenceIOR=_.iridescenceIOR),_.iridescenceThicknessRange!==void 0&&(rt.iridescenceThicknessRange=_.iridescenceThicknessRange),_.transmission!==void 0&&(rt.transmission=_.transmission),_.thickness!==void 0&&(rt.thickness=_.thickness),_.attenuationDistance!==void 0&&(rt.attenuationDistance=_.attenuationDistance),_.attenuationColor!==void 0&&rt.attenuationColor!==void 0&&rt.attenuationColor.setHex(_.attenuationColor),_.anisotropy!==void 0&&(rt.anisotropy=_.anisotropy),_.anisotropyRotation!==void 0&&(rt.anisotropyRotation=_.anisotropyRotation),_.fog!==void 0&&(rt.fog=_.fog),_.flatShading!==void 0&&(rt.flatShading=_.flatShading),_.blending!==void 0&&(rt.blending=_.blending),_.combine!==void 0&&(rt.combine=_.combine),_.side!==void 0&&(rt.side=_.side),_.shadowSide!==void 0&&(rt.shadowSide=_.shadowSide),_.opacity!==void 0&&(rt.opacity=_.opacity),_.transparent!==void 0&&(rt.transparent=_.transparent),_.alphaTest!==void 0&&(rt.alphaTest=_.alphaTest),_.depthTest!==void 0&&(rt.depthTest=_.depthTest),_.depthWrite!==void 0&&(rt.depthWrite=_.depthWrite),_.colorWrite!==void 0&&(rt.colorWrite=_.colorWrite),_.stencilWrite!==void 0&&(rt.stencilWrite=_.stencilWrite),_.stencilWriteMask!==void 0&&(rt.stencilWriteMask=_.stencilWriteMask),_.stencilFunc!==void 0&&(rt.stencilFunc=_.stencilFunc),_.stencilRef!==void 0&&(rt.stencilRef=_.stencilRef),_.stencilFuncMask!==void 0&&(rt.stencilFuncMask=_.stencilFuncMask),_.stencilFail!==void 0&&(rt.stencilFail=_.stencilFail),_.stencilZFail!==void 0&&(rt.stencilZFail=_.stencilZFail),_.stencilZPass!==void 0&&(rt.stencilZPass=_.stencilZPass),_.wireframe!==void 0&&(rt.wireframe=_.wireframe),_.wireframeLinewidth!==void 0&&(rt.wireframeLinewidth=_.wireframeLinewidth),_.wireframeLinecap!==void 0&&(rt.wireframeLinecap=_.wireframeLinecap),_.wireframeLinejoin!==void 0&&(rt.wireframeLinejoin=_.wireframeLinejoin),_.rotation!==void 0&&(rt.rotation=_.rotation),_.linewidth!==1&&(rt.linewidth=_.linewidth),_.dashSize!==void 0&&(rt.dashSize=_.dashSize),_.gapSize!==void 0&&(rt.gapSize=_.gapSize),_.scale!==void 0&&(rt.scale=_.scale),_.polygonOffset!==void 0&&(rt.polygonOffset=_.polygonOffset),_.polygonOffsetFactor!==void 0&&(rt.polygonOffsetFactor=_.polygonOffsetFactor),_.polygonOffsetUnits!==void 0&&(rt.polygonOffsetUnits=_.polygonOffsetUnits),_.dithering!==void 0&&(rt.dithering=_.dithering),_.alphaToCoverage!==void 0&&(rt.alphaToCoverage=_.alphaToCoverage),_.premultipliedAlpha!==void 0&&(rt.premultipliedAlpha=_.premultipliedAlpha),_.forceSinglePass!==void 0&&(rt.forceSinglePass=_.forceSinglePass),_.visible!==void 0&&(rt.visible=_.visible),_.toneMapped!==void 0&&(rt.toneMapped=_.toneMapped),_.userData!==void 0&&(rt.userData=_.userData),_.vertexColors!==void 0&&(typeof _.vertexColors=="number"?rt.vertexColors=_.vertexColors>0:rt.vertexColors=_.vertexColors),_.uniforms!==void 0)for(const it in _.uniforms){const ot=_.uniforms[it];switch(rt.uniforms[it]={},ot.type){case"t":rt.uniforms[it].value=nt(ot.value);break;case"c":rt.uniforms[it].value=new Color$1().setHex(ot.value);break;case"v2":rt.uniforms[it].value=new Vector2().fromArray(ot.value);break;case"v3":rt.uniforms[it].value=new Vector3().fromArray(ot.value);break;case"v4":rt.uniforms[it].value=new Vector4().fromArray(ot.value);break;case"m3":rt.uniforms[it].value=new Matrix3().fromArray(ot.value);break;case"m4":rt.uniforms[it].value=new Matrix4().fromArray(ot.value);break;default:rt.uniforms[it].value=ot.value}}if(_.defines!==void 0&&(rt.defines=_.defines),_.vertexShader!==void 0&&(rt.vertexShader=_.vertexShader),_.fragmentShader!==void 0&&(rt.fragmentShader=_.fragmentShader),_.glslVersion!==void 0&&(rt.glslVersion=_.glslVersion),_.extensions!==void 0)for(const it in _.extensions)rt.extensions[it]=_.extensions[it];if(_.lights!==void 0&&(rt.lights=_.lights),_.clipping!==void 0&&(rt.clipping=_.clipping),_.size!==void 0&&(rt.size=_.size),_.sizeAttenuation!==void 0&&(rt.sizeAttenuation=_.sizeAttenuation),_.map!==void 0&&(rt.map=nt(_.map)),_.matcap!==void 0&&(rt.matcap=nt(_.matcap)),_.alphaMap!==void 0&&(rt.alphaMap=nt(_.alphaMap)),_.bumpMap!==void 0&&(rt.bumpMap=nt(_.bumpMap)),_.bumpScale!==void 0&&(rt.bumpScale=_.bumpScale),_.normalMap!==void 0&&(rt.normalMap=nt(_.normalMap)),_.normalMapType!==void 0&&(rt.normalMapType=_.normalMapType),_.normalScale!==void 0){let it=_.normalScale;Array.isArray(it)===!1&&(it=[it,it]),rt.normalScale=new Vector2().fromArray(it)}return _.displacementMap!==void 0&&(rt.displacementMap=nt(_.displacementMap)),_.displacementScale!==void 0&&(rt.displacementScale=_.displacementScale),_.displacementBias!==void 0&&(rt.displacementBias=_.displacementBias),_.roughnessMap!==void 0&&(rt.roughnessMap=nt(_.roughnessMap)),_.metalnessMap!==void 0&&(rt.metalnessMap=nt(_.metalnessMap)),_.emissiveMap!==void 0&&(rt.emissiveMap=nt(_.emissiveMap)),_.emissiveIntensity!==void 0&&(rt.emissiveIntensity=_.emissiveIntensity),_.specularMap!==void 0&&(rt.specularMap=nt(_.specularMap)),_.specularIntensityMap!==void 0&&(rt.specularIntensityMap=nt(_.specularIntensityMap)),_.specularColorMap!==void 0&&(rt.specularColorMap=nt(_.specularColorMap)),_.envMap!==void 0&&(rt.envMap=nt(_.envMap)),_.envMapIntensity!==void 0&&(rt.envMapIntensity=_.envMapIntensity),_.reflectivity!==void 0&&(rt.reflectivity=_.reflectivity),_.refractionRatio!==void 0&&(rt.refractionRatio=_.refractionRatio),_.lightMap!==void 0&&(rt.lightMap=nt(_.lightMap)),_.lightMapIntensity!==void 0&&(rt.lightMapIntensity=_.lightMapIntensity),_.aoMap!==void 0&&(rt.aoMap=nt(_.aoMap)),_.aoMapIntensity!==void 0&&(rt.aoMapIntensity=_.aoMapIntensity),_.gradientMap!==void 0&&(rt.gradientMap=nt(_.gradientMap)),_.clearcoatMap!==void 0&&(rt.clearcoatMap=nt(_.clearcoatMap)),_.clearcoatRoughnessMap!==void 0&&(rt.clearcoatRoughnessMap=nt(_.clearcoatRoughnessMap)),_.clearcoatNormalMap!==void 0&&(rt.clearcoatNormalMap=nt(_.clearcoatNormalMap)),_.clearcoatNormalScale!==void 0&&(rt.clearcoatNormalScale=new Vector2().fromArray(_.clearcoatNormalScale)),_.iridescenceMap!==void 0&&(rt.iridescenceMap=nt(_.iridescenceMap)),_.iridescenceThicknessMap!==void 0&&(rt.iridescenceThicknessMap=nt(_.iridescenceThicknessMap)),_.transmissionMap!==void 0&&(rt.transmissionMap=nt(_.transmissionMap)),_.thicknessMap!==void 0&&(rt.thicknessMap=nt(_.thicknessMap)),_.anisotropyMap!==void 0&&(rt.anisotropyMap=nt(_.anisotropyMap)),_.sheenColorMap!==void 0&&(rt.sheenColorMap=nt(_.sheenColorMap)),_.sheenRoughnessMap!==void 0&&(rt.sheenRoughnessMap=nt(_.sheenRoughnessMap)),rt}setTextures(_){return this.textures=_,this}static createMaterialFromType(_){const _e={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new _e[_]}}class LoaderUtils{static decodeText(_){if(typeof TextDecoder<"u")return new TextDecoder().decode(_);let _e="";for(let nt=0,rt=_.length;nt<rt;nt++)_e+=String.fromCharCode(_[nt]);try{return decodeURIComponent(escape(_e))}catch{return _e}}static extractUrlBase(_){const _e=_.lastIndexOf("/");return _e===-1?"./":_.slice(0,_e+1)}static resolveURL(_,_e){return typeof _!="string"||_===""?"":(/^https?:\/\//i.test(_e)&&/^\//.test(_)&&(_e=_e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(_)||/^data:.*,.*$/i.test(_)||/^blob:.*$/i.test(_)?_:_e+_)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(_){return super.copy(_),this.instanceCount=_.instanceCount,this}toJSON(){const _=super.toJSON();return _.instanceCount=this.instanceCount,_.isInstancedBufferGeometry=!0,_}}class BufferGeometryLoader extends Loader$1{constructor(_){super(_)}load(_,_e,nt,rt){const it=this,ot=new FileLoader(it.manager);ot.setPath(it.path),ot.setRequestHeader(it.requestHeader),ot.setWithCredentials(it.withCredentials),ot.load(_,function(st){try{_e(it.parse(JSON.parse(st)))}catch(at){rt?rt(at):console.error(at),it.manager.itemError(_)}},nt,rt)}parse(_){const _e={},nt={};function rt(pt,gt){if(_e[gt]!==void 0)return _e[gt];const vt=pt.interleavedBuffers[gt],mt=it(pt,vt.buffer),_t=getTypedArray(vt.type,mt),xt=new InterleavedBuffer(_t,vt.stride);return xt.uuid=vt.uuid,_e[gt]=xt,xt}function it(pt,gt){if(nt[gt]!==void 0)return nt[gt];const vt=pt.arrayBuffers[gt],mt=new Uint32Array(vt).buffer;return nt[gt]=mt,mt}const ot=_.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,st=_.data.index;if(st!==void 0){const pt=getTypedArray(st.type,st.array);ot.setIndex(new BufferAttribute(pt,1))}const at=_.data.attributes;for(const pt in at){const gt=at[pt];let yt;if(gt.isInterleavedBufferAttribute){const vt=rt(_.data,gt.data);yt=new InterleavedBufferAttribute(vt,gt.itemSize,gt.offset,gt.normalized)}else{const vt=getTypedArray(gt.type,gt.array),mt=gt.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;yt=new mt(vt,gt.itemSize,gt.normalized)}gt.name!==void 0&&(yt.name=gt.name),gt.usage!==void 0&&yt.setUsage(gt.usage),gt.updateRange!==void 0&&(yt.updateRange.offset=gt.updateRange.offset,yt.updateRange.count=gt.updateRange.count),ot.setAttribute(pt,yt)}const lt=_.data.morphAttributes;if(lt)for(const pt in lt){const gt=lt[pt],yt=[];for(let vt=0,mt=gt.length;vt<mt;vt++){const _t=gt[vt];let xt;if(_t.isInterleavedBufferAttribute){const St=rt(_.data,_t.data);xt=new InterleavedBufferAttribute(St,_t.itemSize,_t.offset,_t.normalized)}else{const St=getTypedArray(_t.type,_t.array);xt=new BufferAttribute(St,_t.itemSize,_t.normalized)}_t.name!==void 0&&(xt.name=_t.name),yt.push(xt)}ot.morphAttributes[pt]=yt}_.data.morphTargetsRelative&&(ot.morphTargetsRelative=!0);const ut=_.data.groups||_.data.drawcalls||_.data.offsets;if(ut!==void 0)for(let pt=0,gt=ut.length;pt!==gt;++pt){const yt=ut[pt];ot.addGroup(yt.start,yt.count,yt.materialIndex)}const ht=_.data.boundingSphere;if(ht!==void 0){const pt=new Vector3;ht.center!==void 0&&pt.fromArray(ht.center),ot.boundingSphere=new Sphere(pt,ht.radius)}return _.name&&(ot.name=_.name),_.userData&&(ot.userData=_.userData),ot}}class ObjectLoader extends Loader$1{constructor(_){super(_)}load(_,_e,nt,rt){const it=this,ot=this.path===""?LoaderUtils.extractUrlBase(_):this.path;this.resourcePath=this.resourcePath||ot;const st=new FileLoader(this.manager);st.setPath(this.path),st.setRequestHeader(this.requestHeader),st.setWithCredentials(this.withCredentials),st.load(_,function(at){let lt=null;try{lt=JSON.parse(at)}catch(ut){rt!==void 0&&rt(ut),console.error("THREE:ObjectLoader: Can't parse "+_+".",ut.message);return}const ct=lt.metadata;if(ct===void 0||ct.type===void 0||ct.type.toLowerCase()==="geometry"){rt!==void 0&&rt(new Error("THREE.ObjectLoader: Can't load "+_)),console.error("THREE.ObjectLoader: Can't load "+_);return}it.parse(lt,_e)},nt,rt)}async loadAsync(_,_e){const nt=this,rt=this.path===""?LoaderUtils.extractUrlBase(_):this.path;this.resourcePath=this.resourcePath||rt;const it=new FileLoader(this.manager);it.setPath(this.path),it.setRequestHeader(this.requestHeader),it.setWithCredentials(this.withCredentials);const ot=await it.loadAsync(_,_e),st=JSON.parse(ot),at=st.metadata;if(at===void 0||at.type===void 0||at.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+_);return await nt.parseAsync(st)}parse(_,_e){const nt=this.parseAnimations(_.animations),rt=this.parseShapes(_.shapes),it=this.parseGeometries(_.geometries,rt),ot=this.parseImages(_.images,function(){_e!==void 0&&_e(lt)}),st=this.parseTextures(_.textures,ot),at=this.parseMaterials(_.materials,st),lt=this.parseObject(_.object,it,at,st,nt),ct=this.parseSkeletons(_.skeletons,lt);if(this.bindSkeletons(lt,ct),_e!==void 0){let ut=!1;for(const ht in ot)if(ot[ht].data instanceof HTMLImageElement){ut=!0;break}ut===!1&&_e(lt)}return lt}async parseAsync(_){const _e=this.parseAnimations(_.animations),nt=this.parseShapes(_.shapes),rt=this.parseGeometries(_.geometries,nt),it=await this.parseImagesAsync(_.images),ot=this.parseTextures(_.textures,it),st=this.parseMaterials(_.materials,ot),at=this.parseObject(_.object,rt,st,ot,_e),lt=this.parseSkeletons(_.skeletons,at);return this.bindSkeletons(at,lt),at}parseShapes(_){const _e={};if(_!==void 0)for(let nt=0,rt=_.length;nt<rt;nt++){const it=new Shape().fromJSON(_[nt]);_e[it.uuid]=it}return _e}parseSkeletons(_,_e){const nt={},rt={};if(_e.traverse(function(it){it.isBone&&(rt[it.uuid]=it)}),_!==void 0)for(let it=0,ot=_.length;it<ot;it++){const st=new Skeleton().fromJSON(_[it],rt);nt[st.uuid]=st}return nt}parseGeometries(_,_e){const nt={};if(_!==void 0){const rt=new BufferGeometryLoader;for(let it=0,ot=_.length;it<ot;it++){let st;const at=_[it];switch(at.type){case"BufferGeometry":case"InstancedBufferGeometry":st=rt.parse(at);break;default:at.type in Geometries?st=Geometries[at.type].fromJSON(at,_e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${at.type}"`)}st.uuid=at.uuid,at.name!==void 0&&(st.name=at.name),at.userData!==void 0&&(st.userData=at.userData),nt[at.uuid]=st}}return nt}parseMaterials(_,_e){const nt={},rt={};if(_!==void 0){const it=new MaterialLoader;it.setTextures(_e);for(let ot=0,st=_.length;ot<st;ot++){const at=_[ot];nt[at.uuid]===void 0&&(nt[at.uuid]=it.parse(at)),rt[at.uuid]=nt[at.uuid]}}return rt}parseAnimations(_){const _e={};if(_!==void 0)for(let nt=0;nt<_.length;nt++){const rt=_[nt],it=AnimationClip.parse(rt);_e[it.uuid]=it}return _e}parseImages(_,_e){const nt=this,rt={};let it;function ot(at){return nt.manager.itemStart(at),it.load(at,function(){nt.manager.itemEnd(at)},void 0,function(){nt.manager.itemError(at),nt.manager.itemEnd(at)})}function st(at){if(typeof at=="string"){const lt=at,ct=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(lt)?lt:nt.resourcePath+lt;return ot(ct)}else return at.data?{data:getTypedArray(at.type,at.data),width:at.width,height:at.height}:null}if(_!==void 0&&_.length>0){const at=new LoadingManager(_e);it=new ImageLoader(at),it.setCrossOrigin(this.crossOrigin);for(let lt=0,ct=_.length;lt<ct;lt++){const ut=_[lt],ht=ut.url;if(Array.isArray(ht)){const pt=[];for(let gt=0,yt=ht.length;gt<yt;gt++){const vt=ht[gt],mt=st(vt);mt!==null&&(mt instanceof HTMLImageElement?pt.push(mt):pt.push(new DataTexture(mt.data,mt.width,mt.height)))}rt[ut.uuid]=new Source(pt)}else{const pt=st(ut.url);rt[ut.uuid]=new Source(pt)}}}return rt}async parseImagesAsync(_){const _e=this,nt={};let rt;async function it(ot){if(typeof ot=="string"){const st=ot,at=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(st)?st:_e.resourcePath+st;return await rt.loadAsync(at)}else return ot.data?{data:getTypedArray(ot.type,ot.data),width:ot.width,height:ot.height}:null}if(_!==void 0&&_.length>0){rt=new ImageLoader(this.manager),rt.setCrossOrigin(this.crossOrigin);for(let ot=0,st=_.length;ot<st;ot++){const at=_[ot],lt=at.url;if(Array.isArray(lt)){const ct=[];for(let ut=0,ht=lt.length;ut<ht;ut++){const pt=lt[ut],gt=await it(pt);gt!==null&&(gt instanceof HTMLImageElement?ct.push(gt):ct.push(new DataTexture(gt.data,gt.width,gt.height)))}nt[at.uuid]=new Source(ct)}else{const ct=await it(at.url);nt[at.uuid]=new Source(ct)}}}return nt}parseTextures(_,_e){function nt(it,ot){return typeof it=="number"?it:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",it),ot[it])}const rt={};if(_!==void 0)for(let it=0,ot=_.length;it<ot;it++){const st=_[it];st.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',st.uuid),_e[st.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",st.image);const at=_e[st.image],lt=at.data;let ct;Array.isArray(lt)?(ct=new CubeTexture,lt.length===6&&(ct.needsUpdate=!0)):(lt&&lt.data?ct=new DataTexture:ct=new Texture,lt&&(ct.needsUpdate=!0)),ct.source=at,ct.uuid=st.uuid,st.name!==void 0&&(ct.name=st.name),st.mapping!==void 0&&(ct.mapping=nt(st.mapping,TEXTURE_MAPPING)),st.channel!==void 0&&(ct.channel=st.channel),st.offset!==void 0&&ct.offset.fromArray(st.offset),st.repeat!==void 0&&ct.repeat.fromArray(st.repeat),st.center!==void 0&&ct.center.fromArray(st.center),st.rotation!==void 0&&(ct.rotation=st.rotation),st.wrap!==void 0&&(ct.wrapS=nt(st.wrap[0],TEXTURE_WRAPPING),ct.wrapT=nt(st.wrap[1],TEXTURE_WRAPPING)),st.format!==void 0&&(ct.format=st.format),st.internalFormat!==void 0&&(ct.internalFormat=st.internalFormat),st.type!==void 0&&(ct.type=st.type),st.colorSpace!==void 0&&(ct.colorSpace=st.colorSpace),st.encoding!==void 0&&(ct.encoding=st.encoding),st.minFilter!==void 0&&(ct.minFilter=nt(st.minFilter,TEXTURE_FILTER)),st.magFilter!==void 0&&(ct.magFilter=nt(st.magFilter,TEXTURE_FILTER)),st.anisotropy!==void 0&&(ct.anisotropy=st.anisotropy),st.flipY!==void 0&&(ct.flipY=st.flipY),st.generateMipmaps!==void 0&&(ct.generateMipmaps=st.generateMipmaps),st.premultiplyAlpha!==void 0&&(ct.premultiplyAlpha=st.premultiplyAlpha),st.unpackAlignment!==void 0&&(ct.unpackAlignment=st.unpackAlignment),st.compareFunction!==void 0&&(ct.compareFunction=st.compareFunction),st.userData!==void 0&&(ct.userData=st.userData),rt[st.uuid]=ct}return rt}parseObject(_,_e,nt,rt,it){let ot;function st(ht){return _e[ht]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",ht),_e[ht]}function at(ht){if(ht!==void 0){if(Array.isArray(ht)){const pt=[];for(let gt=0,yt=ht.length;gt<yt;gt++){const vt=ht[gt];nt[vt]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",vt),pt.push(nt[vt])}return pt}return nt[ht]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",ht),nt[ht]}}function lt(ht){return rt[ht]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",ht),rt[ht]}let ct,ut;switch(_.type){case"Scene":ot=new Scene,_.background!==void 0&&(Number.isInteger(_.background)?ot.background=new Color$1(_.background):ot.background=lt(_.background)),_.environment!==void 0&&(ot.environment=lt(_.environment)),_.fog!==void 0&&(_.fog.type==="Fog"?ot.fog=new Fog(_.fog.color,_.fog.near,_.fog.far):_.fog.type==="FogExp2"&&(ot.fog=new FogExp2(_.fog.color,_.fog.density))),_.backgroundBlurriness!==void 0&&(ot.backgroundBlurriness=_.backgroundBlurriness),_.backgroundIntensity!==void 0&&(ot.backgroundIntensity=_.backgroundIntensity);break;case"PerspectiveCamera":ot=new PerspectiveCamera(_.fov,_.aspect,_.near,_.far),_.focus!==void 0&&(ot.focus=_.focus),_.zoom!==void 0&&(ot.zoom=_.zoom),_.filmGauge!==void 0&&(ot.filmGauge=_.filmGauge),_.filmOffset!==void 0&&(ot.filmOffset=_.filmOffset),_.view!==void 0&&(ot.view=Object.assign({},_.view));break;case"OrthographicCamera":ot=new OrthographicCamera(_.left,_.right,_.top,_.bottom,_.near,_.far),_.zoom!==void 0&&(ot.zoom=_.zoom),_.view!==void 0&&(ot.view=Object.assign({},_.view));break;case"AmbientLight":ot=new AmbientLight(_.color,_.intensity);break;case"DirectionalLight":ot=new DirectionalLight(_.color,_.intensity);break;case"PointLight":ot=new PointLight(_.color,_.intensity,_.distance,_.decay);break;case"RectAreaLight":ot=new RectAreaLight(_.color,_.intensity,_.width,_.height);break;case"SpotLight":ot=new SpotLight(_.color,_.intensity,_.distance,_.angle,_.penumbra,_.decay);break;case"HemisphereLight":ot=new HemisphereLight(_.color,_.groundColor,_.intensity);break;case"LightProbe":ot=new LightProbe().fromJSON(_);break;case"SkinnedMesh":ct=st(_.geometry),ut=at(_.material),ot=new SkinnedMesh(ct,ut),_.bindMode!==void 0&&(ot.bindMode=_.bindMode),_.bindMatrix!==void 0&&ot.bindMatrix.fromArray(_.bindMatrix),_.skeleton!==void 0&&(ot.skeleton=_.skeleton);break;case"Mesh":ct=st(_.geometry),ut=at(_.material),ot=new Mesh(ct,ut);break;case"InstancedMesh":ct=st(_.geometry),ut=at(_.material);const ht=_.count,pt=_.instanceMatrix,gt=_.instanceColor;ot=new InstancedMesh(ct,ut,ht),ot.instanceMatrix=new InstancedBufferAttribute(new Float32Array(pt.array),16),gt!==void 0&&(ot.instanceColor=new InstancedBufferAttribute(new Float32Array(gt.array),gt.itemSize));break;case"LOD":ot=new LOD;break;case"Line":ot=new Line(st(_.geometry),at(_.material));break;case"LineLoop":ot=new LineLoop(st(_.geometry),at(_.material));break;case"LineSegments":ot=new LineSegments(st(_.geometry),at(_.material));break;case"PointCloud":case"Points":ot=new Points(st(_.geometry),at(_.material));break;case"Sprite":ot=new Sprite(at(_.material));break;case"Group":ot=new Group;break;case"Bone":ot=new Bone;break;default:ot=new Object3D}if(ot.uuid=_.uuid,_.name!==void 0&&(ot.name=_.name),_.matrix!==void 0?(ot.matrix.fromArray(_.matrix),_.matrixAutoUpdate!==void 0&&(ot.matrixAutoUpdate=_.matrixAutoUpdate),ot.matrixAutoUpdate&&ot.matrix.decompose(ot.position,ot.quaternion,ot.scale)):(_.position!==void 0&&ot.position.fromArray(_.position),_.rotation!==void 0&&ot.rotation.fromArray(_.rotation),_.quaternion!==void 0&&ot.quaternion.fromArray(_.quaternion),_.scale!==void 0&&ot.scale.fromArray(_.scale)),_.up!==void 0&&ot.up.fromArray(_.up),_.castShadow!==void 0&&(ot.castShadow=_.castShadow),_.receiveShadow!==void 0&&(ot.receiveShadow=_.receiveShadow),_.shadow&&(_.shadow.bias!==void 0&&(ot.shadow.bias=_.shadow.bias),_.shadow.normalBias!==void 0&&(ot.shadow.normalBias=_.shadow.normalBias),_.shadow.radius!==void 0&&(ot.shadow.radius=_.shadow.radius),_.shadow.mapSize!==void 0&&ot.shadow.mapSize.fromArray(_.shadow.mapSize),_.shadow.camera!==void 0&&(ot.shadow.camera=this.parseObject(_.shadow.camera))),_.visible!==void 0&&(ot.visible=_.visible),_.frustumCulled!==void 0&&(ot.frustumCulled=_.frustumCulled),_.renderOrder!==void 0&&(ot.renderOrder=_.renderOrder),_.userData!==void 0&&(ot.userData=_.userData),_.layers!==void 0&&(ot.layers.mask=_.layers),_.children!==void 0){const ht=_.children;for(let pt=0;pt<ht.length;pt++)ot.add(this.parseObject(ht[pt],_e,nt,rt,it))}if(_.animations!==void 0){const ht=_.animations;for(let pt=0;pt<ht.length;pt++){const gt=ht[pt];ot.animations.push(it[gt])}}if(_.type==="LOD"){_.autoUpdate!==void 0&&(ot.autoUpdate=_.autoUpdate);const ht=_.levels;for(let pt=0;pt<ht.length;pt++){const gt=ht[pt],yt=ot.getObjectByProperty("uuid",gt.object);yt!==void 0&&ot.addLevel(yt,gt.distance,gt.hysteresis)}}return ot}bindSkeletons(_,_e){Object.keys(_e).length!==0&&_.traverse(function(nt){if(nt.isSkinnedMesh===!0&&nt.skeleton!==void 0){const rt=_e[nt.skeleton];rt===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",nt.skeleton):nt.bind(rt,nt.bindMatrix)}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};class ImageBitmapLoader extends Loader$1{constructor(_){super(_),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(_){return this.options=_,this}load(_,_e,nt,rt){_===void 0&&(_=""),this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const it=this,ot=Cache.get(_);if(ot!==void 0)return it.manager.itemStart(_),setTimeout(function(){_e&&_e(ot),it.manager.itemEnd(_)},0),ot;const st={};st.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",st.headers=this.requestHeader,fetch(_,st).then(function(at){return at.blob()}).then(function(at){return createImageBitmap(at,Object.assign(it.options,{colorSpaceConversion:"none"}))}).then(function(at){Cache.add(_,at),_e&&_e(at),it.manager.itemEnd(_)}).catch(function(at){rt&&rt(at),it.manager.itemError(_),it.manager.itemEnd(_)}),it.manager.itemStart(_)}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(_){_context=_}}class AudioLoader extends Loader$1{constructor(_){super(_)}load(_,_e,nt,rt){const it=this,ot=new FileLoader(this.manager);ot.setResponseType("arraybuffer"),ot.setPath(this.path),ot.setRequestHeader(this.requestHeader),ot.setWithCredentials(this.withCredentials),ot.load(_,function(at){try{const lt=at.slice(0);AudioContext.getContext().decodeAudioData(lt,function(ut){_e(ut)},st)}catch(lt){st(lt)}},nt,rt);function st(at){rt?rt(at):console.error(at),it.manager.itemError(_)}}}class HemisphereLightProbe extends LightProbe{constructor(_,_e,nt=1){super(void 0,nt),this.isHemisphereLightProbe=!0;const rt=new Color$1().set(_),it=new Color$1().set(_e),ot=new Vector3(rt.r,rt.g,rt.b),st=new Vector3(it.r,it.g,it.b),at=Math.sqrt(Math.PI),lt=at*Math.sqrt(.75);this.sh.coefficients[0].copy(ot).add(st).multiplyScalar(at),this.sh.coefficients[1].copy(ot).sub(st).multiplyScalar(lt)}}class AmbientLightProbe extends LightProbe{constructor(_,_e=1){super(void 0,_e),this.isAmbientLightProbe=!0;const nt=new Color$1().set(_);this.sh.coefficients[0].set(nt.r,nt.g,nt.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(_){const _e=this._cache;if(_e.focus!==_.focus||_e.fov!==_.fov||_e.aspect!==_.aspect*this.aspect||_e.near!==_.near||_e.far!==_.far||_e.zoom!==_.zoom||_e.eyeSep!==this.eyeSep){_e.focus=_.focus,_e.fov=_.fov,_e.aspect=_.aspect*this.aspect,_e.near=_.near,_e.far=_.far,_e.zoom=_.zoom,_e.eyeSep=this.eyeSep,_projectionMatrix.copy(_.projectionMatrix);const rt=_e.eyeSep/2,it=rt*_e.near/_e.focus,ot=_e.near*Math.tan(DEG2RAD$1*_e.fov*.5)/_e.zoom;let st,at;_eyeLeft.elements[12]=-rt,_eyeRight.elements[12]=rt,st=-ot*_e.aspect+it,at=ot*_e.aspect+it,_projectionMatrix.elements[0]=2*_e.near/(at-st),_projectionMatrix.elements[8]=(at+st)/(at-st),this.cameraL.projectionMatrix.copy(_projectionMatrix),st=-ot*_e.aspect-it,at=ot*_e.aspect-it,_projectionMatrix.elements[0]=2*_e.near/(at-st),_projectionMatrix.elements[8]=(at+st)/(at-st),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(_.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(_.matrixWorld).multiply(_eyeRight)}}class Clock{constructor(_=!0){this.autoStart=_,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now$2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let _=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const _e=now$2();_=(_e-this.oldTime)/1e3,this.oldTime=_e,this.elapsedTime+=_}return _}}function now$2(){return(typeof performance>"u"?Date:performance).now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(_){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=_,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(_){return this.gain.gain.setTargetAtTime(_,this.context.currentTime,.01),this}updateMatrixWorld(_){super.updateMatrixWorld(_);const _e=this.context.listener,nt=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),_e.positionX){const rt=this.context.currentTime+this.timeDelta;_e.positionX.linearRampToValueAtTime(_position$1.x,rt),_e.positionY.linearRampToValueAtTime(_position$1.y,rt),_e.positionZ.linearRampToValueAtTime(_position$1.z,rt),_e.forwardX.linearRampToValueAtTime(_orientation$1.x,rt),_e.forwardY.linearRampToValueAtTime(_orientation$1.y,rt),_e.forwardZ.linearRampToValueAtTime(_orientation$1.z,rt),_e.upX.linearRampToValueAtTime(nt.x,rt),_e.upY.linearRampToValueAtTime(nt.y,rt),_e.upZ.linearRampToValueAtTime(nt.z,rt)}else _e.setPosition(_position$1.x,_position$1.y,_position$1.z),_e.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,nt.x,nt.y,nt.z)}}let Audio$1=class extends Object3D{constructor(_){super(),this.type="Audio",this.listener=_,this.context=_.context,this.gain=this.context.createGain(),this.gain.connect(_.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(_){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=_,this.connect(),this}setMediaElementSource(_){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(_),this.connect(),this}setMediaStreamSource(_){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(_),this.connect(),this}setBuffer(_){return this.buffer=_,this.sourceType="buffer",this.autoplay&&this.play(),this}play(_=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+_;const _e=this.context.createBufferSource();return _e.buffer=this.buffer,_e.loop=this.loop,_e.loopStart=this.loopStart,_e.loopEnd=this.loopEnd,_e.onended=this.onEnded.bind(this),_e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=_e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let _=1,_e=this.filters.length;_<_e;_++)this.filters[_-1].connect(this.filters[_]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let _=1,_e=this.filters.length;_<_e;_++)this.filters[_-1].disconnect(this.filters[_]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(_){return _||(_=[]),this._connected===!0?(this.disconnect(),this.filters=_.slice(),this.connect()):this.filters=_.slice(),this}setDetune(_){if(this.detune=_,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(_){return this.setFilters(_?[_]:[])}setPlaybackRate(_){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=_,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(_){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=_,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(_){return this.loopStart=_,this}setLoopEnd(_){return this.loopEnd=_,this}getVolume(){return this.gain.gain.value}setVolume(_){return this.gain.gain.setTargetAtTime(_,this.context.currentTime,.01),this}};const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio$1{constructor(_){super(_),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(_){return this.panner.refDistance=_,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(_){return this.panner.rolloffFactor=_,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(_){return this.panner.distanceModel=_,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(_){return this.panner.maxDistance=_,this}setDirectionalCone(_,_e,nt){return this.panner.coneInnerAngle=_,this.panner.coneOuterAngle=_e,this.panner.coneOuterGain=nt,this}updateMatrixWorld(_){if(super.updateMatrixWorld(_),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const _e=this.panner;if(_e.positionX){const nt=this.context.currentTime+this.listener.timeDelta;_e.positionX.linearRampToValueAtTime(_position.x,nt),_e.positionY.linearRampToValueAtTime(_position.y,nt),_e.positionZ.linearRampToValueAtTime(_position.z,nt),_e.orientationX.linearRampToValueAtTime(_orientation.x,nt),_e.orientationY.linearRampToValueAtTime(_orientation.y,nt),_e.orientationZ.linearRampToValueAtTime(_orientation.z,nt)}else _e.setPosition(_position.x,_position.y,_position.z),_e.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(_,_e=2048){this.analyser=_.context.createAnalyser(),this.analyser.fftSize=_e,this.data=new Uint8Array(this.analyser.frequencyBinCount),_.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let _=0;const _e=this.getFrequencyData();for(let nt=0;nt<_e.length;nt++)_+=_e[nt];return _/_e.length}}class PropertyMixer{constructor(_,_e,nt){this.binding=_,this.valueSize=nt;let rt,it,ot;switch(_e){case"quaternion":rt=this._slerp,it=this._slerpAdditive,ot=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(nt*6),this._workIndex=5;break;case"string":case"bool":rt=this._select,it=this._select,ot=this._setAdditiveIdentityOther,this.buffer=new Array(nt*5);break;default:rt=this._lerp,it=this._lerpAdditive,ot=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(nt*5)}this._mixBufferRegion=rt,this._mixBufferRegionAdditive=it,this._setIdentity=ot,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(_,_e){const nt=this.buffer,rt=this.valueSize,it=_*rt+rt;let ot=this.cumulativeWeight;if(ot===0){for(let st=0;st!==rt;++st)nt[it+st]=nt[st];ot=_e}else{ot+=_e;const st=_e/ot;this._mixBufferRegion(nt,it,0,st,rt)}this.cumulativeWeight=ot}accumulateAdditive(_){const _e=this.buffer,nt=this.valueSize,rt=nt*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(_e,rt,0,_,nt),this.cumulativeWeightAdditive+=_}apply(_){const _e=this.valueSize,nt=this.buffer,rt=_*_e+_e,it=this.cumulativeWeight,ot=this.cumulativeWeightAdditive,st=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,it<1){const at=_e*this._origIndex;this._mixBufferRegion(nt,rt,at,1-it,_e)}ot>0&&this._mixBufferRegionAdditive(nt,rt,this._addIndex*_e,1,_e);for(let at=_e,lt=_e+_e;at!==lt;++at)if(nt[at]!==nt[at+_e]){st.setValue(nt,rt);break}}saveOriginalState(){const _=this.binding,_e=this.buffer,nt=this.valueSize,rt=nt*this._origIndex;_.getValue(_e,rt);for(let it=nt,ot=rt;it!==ot;++it)_e[it]=_e[rt+it%nt];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const _=this.valueSize*3;this.binding.setValue(this.buffer,_)}_setAdditiveIdentityNumeric(){const _=this._addIndex*this.valueSize,_e=_+this.valueSize;for(let nt=_;nt<_e;nt++)this.buffer[nt]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const _=this._origIndex*this.valueSize,_e=this._addIndex*this.valueSize;for(let nt=0;nt<this.valueSize;nt++)this.buffer[_e+nt]=this.buffer[_+nt]}_select(_,_e,nt,rt,it){if(rt>=.5)for(let ot=0;ot!==it;++ot)_[_e+ot]=_[nt+ot]}_slerp(_,_e,nt,rt){Quaternion.slerpFlat(_,_e,_,_e,_,nt,rt)}_slerpAdditive(_,_e,nt,rt,it){const ot=this._workIndex*it;Quaternion.multiplyQuaternionsFlat(_,ot,_,_e,_,nt),Quaternion.slerpFlat(_,_e,_,_e,_,ot,rt)}_lerp(_,_e,nt,rt,it){const ot=1-rt;for(let st=0;st!==it;++st){const at=_e+st;_[at]=_[at]*ot+_[nt+st]*rt}}_lerpAdditive(_,_e,nt,rt,it){for(let ot=0;ot!==it;++ot){const st=_e+ot;_[st]=_[st]+_[nt+ot]*rt}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(_,_e,nt){const rt=nt||PropertyBinding.parseTrackName(_e);this._targetGroup=_,this._bindings=_.subscribe_(_e,rt)}getValue(_,_e){this.bind();const nt=this._targetGroup.nCachedObjects_,rt=this._bindings[nt];rt!==void 0&&rt.getValue(_,_e)}setValue(_,_e){const nt=this._bindings;for(let rt=this._targetGroup.nCachedObjects_,it=nt.length;rt!==it;++rt)nt[rt].setValue(_,_e)}bind(){const _=this._bindings;for(let _e=this._targetGroup.nCachedObjects_,nt=_.length;_e!==nt;++_e)_[_e].bind()}unbind(){const _=this._bindings;for(let _e=this._targetGroup.nCachedObjects_,nt=_.length;_e!==nt;++_e)_[_e].unbind()}}class PropertyBinding{constructor(_,_e,nt){this.path=_e,this.parsedPath=nt||PropertyBinding.parseTrackName(_e),this.node=PropertyBinding.findNode(_,this.parsedPath.nodeName),this.rootNode=_,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(_,_e,nt){return _&&_.isAnimationObjectGroup?new PropertyBinding.Composite(_,_e,nt):new PropertyBinding(_,_e,nt)}static sanitizeNodeName(_){return _.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(_){const _e=_trackRe.exec(_);if(_e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+_);const nt={nodeName:_e[2],objectName:_e[3],objectIndex:_e[4],propertyName:_e[5],propertyIndex:_e[6]},rt=nt.nodeName&&nt.nodeName.lastIndexOf(".");if(rt!==void 0&&rt!==-1){const it=nt.nodeName.substring(rt+1);_supportedObjectNames.indexOf(it)!==-1&&(nt.nodeName=nt.nodeName.substring(0,rt),nt.objectName=it)}if(nt.propertyName===null||nt.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+_);return nt}static findNode(_,_e){if(_e===void 0||_e===""||_e==="."||_e===-1||_e===_.name||_e===_.uuid)return _;if(_.skeleton){const nt=_.skeleton.getBoneByName(_e);if(nt!==void 0)return nt}if(_.children){const nt=function(it){for(let ot=0;ot<it.length;ot++){const st=it[ot];if(st.name===_e||st.uuid===_e)return st;const at=nt(st.children);if(at)return at}return null},rt=nt(_.children);if(rt)return rt}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(_,_e){_[_e]=this.targetObject[this.propertyName]}_getValue_array(_,_e){const nt=this.resolvedProperty;for(let rt=0,it=nt.length;rt!==it;++rt)_[_e++]=nt[rt]}_getValue_arrayElement(_,_e){_[_e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(_,_e){this.resolvedProperty.toArray(_,_e)}_setValue_direct(_,_e){this.targetObject[this.propertyName]=_[_e]}_setValue_direct_setNeedsUpdate(_,_e){this.targetObject[this.propertyName]=_[_e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(_,_e){this.targetObject[this.propertyName]=_[_e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(_,_e){const nt=this.resolvedProperty;for(let rt=0,it=nt.length;rt!==it;++rt)nt[rt]=_[_e++]}_setValue_array_setNeedsUpdate(_,_e){const nt=this.resolvedProperty;for(let rt=0,it=nt.length;rt!==it;++rt)nt[rt]=_[_e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(_,_e){const nt=this.resolvedProperty;for(let rt=0,it=nt.length;rt!==it;++rt)nt[rt]=_[_e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(_,_e){this.resolvedProperty[this.propertyIndex]=_[_e]}_setValue_arrayElement_setNeedsUpdate(_,_e){this.resolvedProperty[this.propertyIndex]=_[_e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(_,_e){this.resolvedProperty[this.propertyIndex]=_[_e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(_,_e){this.resolvedProperty.fromArray(_,_e)}_setValue_fromArray_setNeedsUpdate(_,_e){this.resolvedProperty.fromArray(_,_e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(_,_e){this.resolvedProperty.fromArray(_,_e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(_,_e){this.bind(),this.getValue(_,_e)}_setValue_unbound(_,_e){this.bind(),this.setValue(_,_e)}bind(){let _=this.node;const _e=this.parsedPath,nt=_e.objectName,rt=_e.propertyName;let it=_e.propertyIndex;if(_||(_=PropertyBinding.findNode(this.rootNode,_e.nodeName),this.node=_),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!_){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(nt){let lt=_e.objectIndex;switch(nt){case"materials":if(!_.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}_=_.material.materials;break;case"bones":if(!_.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}_=_.skeleton.bones;for(let ct=0;ct<_.length;ct++)if(_[ct].name===lt){lt=ct;break}break;case"map":if("map"in _){_=_.map;break}if(!_.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}_=_.material.map;break;default:if(_[nt]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}_=_[nt]}if(lt!==void 0){if(_[lt]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,_);return}_=_[lt]}}const ot=_[rt];if(ot===void 0){const lt=_e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+lt+"."+rt+" but it wasn't found.",_);return}let st=this.Versioning.None;this.targetObject=_,_.needsUpdate!==void 0?st=this.Versioning.NeedsUpdate:_.matrixWorldNeedsUpdate!==void 0&&(st=this.Versioning.MatrixWorldNeedsUpdate);let at=this.BindingType.Direct;if(it!==void 0){if(rt==="morphTargetInfluences"){if(!_.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!_.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}_.morphTargetDictionary[it]!==void 0&&(it=_.morphTargetDictionary[it])}at=this.BindingType.ArrayElement,this.resolvedProperty=ot,this.propertyIndex=it}else ot.fromArray!==void 0&&ot.toArray!==void 0?(at=this.BindingType.HasFromToArray,this.resolvedProperty=ot):Array.isArray(ot)?(at=this.BindingType.EntireArray,this.resolvedProperty=ot):this.propertyName=rt;this.getValue=this.GetterByBindingType[at],this.setValue=this.SetterByBindingTypeAndVersioning[at][st]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID$1(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const _={};this._indicesByUUID=_;for(let nt=0,rt=arguments.length;nt!==rt;++nt)_[arguments[nt].uuid]=nt;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const _e=this;this.stats={objects:{get total(){return _e._objects.length},get inUse(){return this.total-_e.nCachedObjects_}},get bindingsPerObject(){return _e._bindings.length}}}add(){const _=this._objects,_e=this._indicesByUUID,nt=this._paths,rt=this._parsedPaths,it=this._bindings,ot=it.length;let st,at=_.length,lt=this.nCachedObjects_;for(let ct=0,ut=arguments.length;ct!==ut;++ct){const ht=arguments[ct],pt=ht.uuid;let gt=_e[pt];if(gt===void 0){gt=at++,_e[pt]=gt,_.push(ht);for(let yt=0,vt=ot;yt!==vt;++yt)it[yt].push(new PropertyBinding(ht,nt[yt],rt[yt]))}else if(gt<lt){st=_[gt];const yt=--lt,vt=_[yt];_e[vt.uuid]=gt,_[gt]=vt,_e[pt]=yt,_[yt]=ht;for(let mt=0,_t=ot;mt!==_t;++mt){const xt=it[mt],St=xt[yt];let Tt=xt[gt];xt[gt]=St,Tt===void 0&&(Tt=new PropertyBinding(ht,nt[mt],rt[mt])),xt[yt]=Tt}}else _[gt]!==st&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=lt}remove(){const _=this._objects,_e=this._indicesByUUID,nt=this._bindings,rt=nt.length;let it=this.nCachedObjects_;for(let ot=0,st=arguments.length;ot!==st;++ot){const at=arguments[ot],lt=at.uuid,ct=_e[lt];if(ct!==void 0&&ct>=it){const ut=it++,ht=_[ut];_e[ht.uuid]=ct,_[ct]=ht,_e[lt]=ut,_[ut]=at;for(let pt=0,gt=rt;pt!==gt;++pt){const yt=nt[pt],vt=yt[ut],mt=yt[ct];yt[ct]=vt,yt[ut]=mt}}}this.nCachedObjects_=it}uncache(){const _=this._objects,_e=this._indicesByUUID,nt=this._bindings,rt=nt.length;let it=this.nCachedObjects_,ot=_.length;for(let st=0,at=arguments.length;st!==at;++st){const lt=arguments[st],ct=lt.uuid,ut=_e[ct];if(ut!==void 0)if(delete _e[ct],ut<it){const ht=--it,pt=_[ht],gt=--ot,yt=_[gt];_e[pt.uuid]=ut,_[ut]=pt,_e[yt.uuid]=ht,_[ht]=yt,_.pop();for(let vt=0,mt=rt;vt!==mt;++vt){const _t=nt[vt],xt=_t[ht],St=_t[gt];_t[ut]=xt,_t[ht]=St,_t.pop()}}else{const ht=--ot,pt=_[ht];ht>0&&(_e[pt.uuid]=ut),_[ut]=pt,_.pop();for(let gt=0,yt=rt;gt!==yt;++gt){const vt=nt[gt];vt[ut]=vt[ht],vt.pop()}}}this.nCachedObjects_=it}subscribe_(_,_e){const nt=this._bindingsIndicesByPath;let rt=nt[_];const it=this._bindings;if(rt!==void 0)return it[rt];const ot=this._paths,st=this._parsedPaths,at=this._objects,lt=at.length,ct=this.nCachedObjects_,ut=new Array(lt);rt=it.length,nt[_]=rt,ot.push(_),st.push(_e),it.push(ut);for(let ht=ct,pt=at.length;ht!==pt;++ht){const gt=at[ht];ut[ht]=new PropertyBinding(gt,_,_e)}return ut}unsubscribe_(_){const _e=this._bindingsIndicesByPath,nt=_e[_];if(nt!==void 0){const rt=this._paths,it=this._parsedPaths,ot=this._bindings,st=ot.length-1,at=ot[st],lt=_[st];_e[lt]=nt,ot[nt]=at,ot.pop(),it[nt]=it[st],it.pop(),rt[nt]=rt[st],rt.pop()}}}class AnimationAction{constructor(_,_e,nt=null,rt=_e.blendMode){this._mixer=_,this._clip=_e,this._localRoot=nt,this.blendMode=rt;const it=_e.tracks,ot=it.length,st=new Array(ot),at={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let lt=0;lt!==ot;++lt){const ct=it[lt].createInterpolant(null);st[lt]=ct,ct.settings=at}this._interpolantSettings=at,this._interpolants=st,this._propertyBindings=new Array(ot),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(_){return this._startTime=_,this}setLoop(_,_e){return this.loop=_,this.repetitions=_e,this}setEffectiveWeight(_){return this.weight=_,this._effectiveWeight=this.enabled?_:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(_){return this._scheduleFading(_,0,1)}fadeOut(_){return this._scheduleFading(_,1,0)}crossFadeFrom(_,_e,nt){if(_.fadeOut(_e),this.fadeIn(_e),nt){const rt=this._clip.duration,it=_._clip.duration,ot=it/rt,st=rt/it;_.warp(1,ot,_e),this.warp(st,1,_e)}return this}crossFadeTo(_,_e,nt){return _.crossFadeFrom(this,_e,nt)}stopFading(){const _=this._weightInterpolant;return _!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(_)),this}setEffectiveTimeScale(_){return this.timeScale=_,this._effectiveTimeScale=this.paused?0:_,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(_){return this.timeScale=this._clip.duration/_,this.stopWarping()}syncWith(_){return this.time=_.time,this.timeScale=_.timeScale,this.stopWarping()}halt(_){return this.warp(this._effectiveTimeScale,0,_)}warp(_,_e,nt){const rt=this._mixer,it=rt.time,ot=this.timeScale;let st=this._timeScaleInterpolant;st===null&&(st=rt._lendControlInterpolant(),this._timeScaleInterpolant=st);const at=st.parameterPositions,lt=st.sampleValues;return at[0]=it,at[1]=it+nt,lt[0]=_/ot,lt[1]=_e/ot,this}stopWarping(){const _=this._timeScaleInterpolant;return _!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(_)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(_,_e,nt,rt){if(!this.enabled){this._updateWeight(_);return}const it=this._startTime;if(it!==null){const at=(_-it)*nt;at<0||nt===0?_e=0:(this._startTime=null,_e=nt*at)}_e*=this._updateTimeScale(_);const ot=this._updateTime(_e),st=this._updateWeight(_);if(st>0){const at=this._interpolants,lt=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let ct=0,ut=at.length;ct!==ut;++ct)at[ct].evaluate(ot),lt[ct].accumulateAdditive(st);break;case NormalAnimationBlendMode:default:for(let ct=0,ut=at.length;ct!==ut;++ct)at[ct].evaluate(ot),lt[ct].accumulate(rt,st)}}}_updateWeight(_){let _e=0;if(this.enabled){_e=this.weight;const nt=this._weightInterpolant;if(nt!==null){const rt=nt.evaluate(_)[0];_e*=rt,_>nt.parameterPositions[1]&&(this.stopFading(),rt===0&&(this.enabled=!1))}}return this._effectiveWeight=_e,_e}_updateTimeScale(_){let _e=0;if(!this.paused){_e=this.timeScale;const nt=this._timeScaleInterpolant;if(nt!==null){const rt=nt.evaluate(_)[0];_e*=rt,_>nt.parameterPositions[1]&&(this.stopWarping(),_e===0?this.paused=!0:this.timeScale=_e)}}return this._effectiveTimeScale=_e,_e}_updateTime(_){const _e=this._clip.duration,nt=this.loop;let rt=this.time+_,it=this._loopCount;const ot=nt===LoopPingPong;if(_===0)return it===-1?rt:ot&&(it&1)===1?_e-rt:rt;if(nt===LoopOnce){it===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(rt>=_e)rt=_e;else if(rt<0)rt=0;else{this.time=rt;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=rt,this._mixer.dispatchEvent({type:"finished",action:this,direction:_<0?-1:1})}}else{if(it===-1&&(_>=0?(it=0,this._setEndings(!0,this.repetitions===0,ot)):this._setEndings(this.repetitions===0,!0,ot)),rt>=_e||rt<0){const st=Math.floor(rt/_e);rt-=_e*st,it+=Math.abs(st);const at=this.repetitions-it;if(at<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,rt=_>0?_e:0,this.time=rt,this._mixer.dispatchEvent({type:"finished",action:this,direction:_>0?1:-1});else{if(at===1){const lt=_<0;this._setEndings(lt,!lt,ot)}else this._setEndings(!1,!1,ot);this._loopCount=it,this.time=rt,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:st})}}else this.time=rt;if(ot&&(it&1)===1)return _e-rt}return rt}_setEndings(_,_e,nt){const rt=this._interpolantSettings;nt?(rt.endingStart=ZeroSlopeEnding,rt.endingEnd=ZeroSlopeEnding):(_?rt.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:rt.endingStart=WrapAroundEnding,_e?rt.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:rt.endingEnd=WrapAroundEnding)}_scheduleFading(_,_e,nt){const rt=this._mixer,it=rt.time;let ot=this._weightInterpolant;ot===null&&(ot=rt._lendControlInterpolant(),this._weightInterpolant=ot);const st=ot.parameterPositions,at=ot.sampleValues;return st[0]=it,at[0]=_e,st[1]=it+_,at[1]=nt,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher$1{constructor(_){super(),this._root=_,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(_,_e){const nt=_._localRoot||this._root,rt=_._clip.tracks,it=rt.length,ot=_._propertyBindings,st=_._interpolants,at=nt.uuid,lt=this._bindingsByRootAndName;let ct=lt[at];ct===void 0&&(ct={},lt[at]=ct);for(let ut=0;ut!==it;++ut){const ht=rt[ut],pt=ht.name;let gt=ct[pt];if(gt!==void 0)++gt.referenceCount,ot[ut]=gt;else{if(gt=ot[ut],gt!==void 0){gt._cacheIndex===null&&(++gt.referenceCount,this._addInactiveBinding(gt,at,pt));continue}const yt=_e&&_e._propertyBindings[ut].binding.parsedPath;gt=new PropertyMixer(PropertyBinding.create(nt,pt,yt),ht.ValueTypeName,ht.getValueSize()),++gt.referenceCount,this._addInactiveBinding(gt,at,pt),ot[ut]=gt}st[ut].resultBuffer=gt.buffer}}_activateAction(_){if(!this._isActiveAction(_)){if(_._cacheIndex===null){const nt=(_._localRoot||this._root).uuid,rt=_._clip.uuid,it=this._actionsByClip[rt];this._bindAction(_,it&&it.knownActions[0]),this._addInactiveAction(_,rt,nt)}const _e=_._propertyBindings;for(let nt=0,rt=_e.length;nt!==rt;++nt){const it=_e[nt];it.useCount++===0&&(this._lendBinding(it),it.saveOriginalState())}this._lendAction(_)}}_deactivateAction(_){if(this._isActiveAction(_)){const _e=_._propertyBindings;for(let nt=0,rt=_e.length;nt!==rt;++nt){const it=_e[nt];--it.useCount===0&&(it.restoreOriginalState(),this._takeBackBinding(it))}this._takeBackAction(_)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const _=this;this.stats={actions:{get total(){return _._actions.length},get inUse(){return _._nActiveActions}},bindings:{get total(){return _._bindings.length},get inUse(){return _._nActiveBindings}},controlInterpolants:{get total(){return _._controlInterpolants.length},get inUse(){return _._nActiveControlInterpolants}}}}_isActiveAction(_){const _e=_._cacheIndex;return _e!==null&&_e<this._nActiveActions}_addInactiveAction(_,_e,nt){const rt=this._actions,it=this._actionsByClip;let ot=it[_e];if(ot===void 0)ot={knownActions:[_],actionByRoot:{}},_._byClipCacheIndex=0,it[_e]=ot;else{const st=ot.knownActions;_._byClipCacheIndex=st.length,st.push(_)}_._cacheIndex=rt.length,rt.push(_),ot.actionByRoot[nt]=_}_removeInactiveAction(_){const _e=this._actions,nt=_e[_e.length-1],rt=_._cacheIndex;nt._cacheIndex=rt,_e[rt]=nt,_e.pop(),_._cacheIndex=null;const it=_._clip.uuid,ot=this._actionsByClip,st=ot[it],at=st.knownActions,lt=at[at.length-1],ct=_._byClipCacheIndex;lt._byClipCacheIndex=ct,at[ct]=lt,at.pop(),_._byClipCacheIndex=null;const ut=st.actionByRoot,ht=(_._localRoot||this._root).uuid;delete ut[ht],at.length===0&&delete ot[it],this._removeInactiveBindingsForAction(_)}_removeInactiveBindingsForAction(_){const _e=_._propertyBindings;for(let nt=0,rt=_e.length;nt!==rt;++nt){const it=_e[nt];--it.referenceCount===0&&this._removeInactiveBinding(it)}}_lendAction(_){const _e=this._actions,nt=_._cacheIndex,rt=this._nActiveActions++,it=_e[rt];_._cacheIndex=rt,_e[rt]=_,it._cacheIndex=nt,_e[nt]=it}_takeBackAction(_){const _e=this._actions,nt=_._cacheIndex,rt=--this._nActiveActions,it=_e[rt];_._cacheIndex=rt,_e[rt]=_,it._cacheIndex=nt,_e[nt]=it}_addInactiveBinding(_,_e,nt){const rt=this._bindingsByRootAndName,it=this._bindings;let ot=rt[_e];ot===void 0&&(ot={},rt[_e]=ot),ot[nt]=_,_._cacheIndex=it.length,it.push(_)}_removeInactiveBinding(_){const _e=this._bindings,nt=_.binding,rt=nt.rootNode.uuid,it=nt.path,ot=this._bindingsByRootAndName,st=ot[rt],at=_e[_e.length-1],lt=_._cacheIndex;at._cacheIndex=lt,_e[lt]=at,_e.pop(),delete st[it],Object.keys(st).length===0&&delete ot[rt]}_lendBinding(_){const _e=this._bindings,nt=_._cacheIndex,rt=this._nActiveBindings++,it=_e[rt];_._cacheIndex=rt,_e[rt]=_,it._cacheIndex=nt,_e[nt]=it}_takeBackBinding(_){const _e=this._bindings,nt=_._cacheIndex,rt=--this._nActiveBindings,it=_e[rt];_._cacheIndex=rt,_e[rt]=_,it._cacheIndex=nt,_e[nt]=it}_lendControlInterpolant(){const _=this._controlInterpolants,_e=this._nActiveControlInterpolants++;let nt=_[_e];return nt===void 0&&(nt=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),nt.__cacheIndex=_e,_[_e]=nt),nt}_takeBackControlInterpolant(_){const _e=this._controlInterpolants,nt=_.__cacheIndex,rt=--this._nActiveControlInterpolants,it=_e[rt];_.__cacheIndex=rt,_e[rt]=_,it.__cacheIndex=nt,_e[nt]=it}clipAction(_,_e,nt){const rt=_e||this._root,it=rt.uuid;let ot=typeof _=="string"?AnimationClip.findByName(rt,_):_;const st=ot!==null?ot.uuid:_,at=this._actionsByClip[st];let lt=null;if(nt===void 0&&(ot!==null?nt=ot.blendMode:nt=NormalAnimationBlendMode),at!==void 0){const ut=at.actionByRoot[it];if(ut!==void 0&&ut.blendMode===nt)return ut;lt=at.knownActions[0],ot===null&&(ot=lt._clip)}if(ot===null)return null;const ct=new AnimationAction(this,ot,_e,nt);return this._bindAction(ct,lt),this._addInactiveAction(ct,st,it),ct}existingAction(_,_e){const nt=_e||this._root,rt=nt.uuid,it=typeof _=="string"?AnimationClip.findByName(nt,_):_,ot=it?it.uuid:_,st=this._actionsByClip[ot];return st!==void 0&&st.actionByRoot[rt]||null}stopAllAction(){const _=this._actions,_e=this._nActiveActions;for(let nt=_e-1;nt>=0;--nt)_[nt].stop();return this}update(_){_*=this.timeScale;const _e=this._actions,nt=this._nActiveActions,rt=this.time+=_,it=Math.sign(_),ot=this._accuIndex^=1;for(let lt=0;lt!==nt;++lt)_e[lt]._update(rt,_,it,ot);const st=this._bindings,at=this._nActiveBindings;for(let lt=0;lt!==at;++lt)st[lt].apply(ot);return this}setTime(_){this.time=0;for(let _e=0;_e<this._actions.length;_e++)this._actions[_e].time=0;return this.update(_)}getRoot(){return this._root}uncacheClip(_){const _e=this._actions,nt=_.uuid,rt=this._actionsByClip,it=rt[nt];if(it!==void 0){const ot=it.knownActions;for(let st=0,at=ot.length;st!==at;++st){const lt=ot[st];this._deactivateAction(lt);const ct=lt._cacheIndex,ut=_e[_e.length-1];lt._cacheIndex=null,lt._byClipCacheIndex=null,ut._cacheIndex=ct,_e[ct]=ut,_e.pop(),this._removeInactiveBindingsForAction(lt)}delete rt[nt]}}uncacheRoot(_){const _e=_.uuid,nt=this._actionsByClip;for(const ot in nt){const st=nt[ot].actionByRoot,at=st[_e];at!==void 0&&(this._deactivateAction(at),this._removeInactiveAction(at))}const rt=this._bindingsByRootAndName,it=rt[_e];if(it!==void 0)for(const ot in it){const st=it[ot];st.restoreOriginalState(),this._removeInactiveBinding(st)}}uncacheAction(_,_e){const nt=this.existingAction(_,_e);nt!==null&&(this._deactivateAction(nt),this._removeInactiveAction(nt))}}class Uniform{constructor(_){this.value=_}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let id=0;class UniformsGroup extends EventDispatcher$1{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:id++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(_){return this.uniforms.push(_),this}remove(_){const _e=this.uniforms.indexOf(_);return _e!==-1&&this.uniforms.splice(_e,1),this}setName(_){return this.name=_,this}setUsage(_){return this.usage=_,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(_){this.name=_.name,this.usage=_.usage;const _e=_.uniforms;this.uniforms.length=0;for(let nt=0,rt=_e.length;nt<rt;nt++)this.uniforms.push(_e[nt].clone());return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(_,_e,nt=1){super(_,_e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=nt}copy(_){return super.copy(_),this.meshPerAttribute=_.meshPerAttribute,this}clone(_){const _e=super.clone(_);return _e.meshPerAttribute=this.meshPerAttribute,_e}toJSON(_){const _e=super.toJSON(_);return _e.isInstancedInterleavedBuffer=!0,_e.meshPerAttribute=this.meshPerAttribute,_e}}class GLBufferAttribute{constructor(_,_e,nt,rt,it){this.isGLBufferAttribute=!0,this.name="",this.buffer=_,this.type=_e,this.itemSize=nt,this.elementSize=rt,this.count=it,this.version=0}set needsUpdate(_){_===!0&&this.version++}setBuffer(_){return this.buffer=_,this}setType(_,_e){return this.type=_,this.elementSize=_e,this}setItemSize(_){return this.itemSize=_,this}setCount(_){return this.count=_,this}}class Raycaster{constructor(_,_e,nt=0,rt=1/0){this.ray=new Ray(_,_e),this.near=nt,this.far=rt,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(_,_e){this.ray.set(_,_e)}setFromCamera(_,_e){_e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(_e.matrixWorld),this.ray.direction.set(_.x,_.y,.5).unproject(_e).sub(this.ray.origin).normalize(),this.camera=_e):_e.isOrthographicCamera?(this.ray.origin.set(_.x,_.y,(_e.near+_e.far)/(_e.near-_e.far)).unproject(_e),this.ray.direction.set(0,0,-1).transformDirection(_e.matrixWorld),this.camera=_e):console.error("THREE.Raycaster: Unsupported camera type: "+_e.type)}intersectObject(_,_e=!0,nt=[]){return intersectObject(_,this,nt,_e),nt.sort(ascSort),nt}intersectObjects(_,_e=!0,nt=[]){for(let rt=0,it=_.length;rt<it;rt++)intersectObject(_[rt],this,nt,_e);return nt.sort(ascSort),nt}}function ascSort(tt,_){return tt.distance-_.distance}function intersectObject(tt,_,_e,nt){if(tt.layers.test(_.layers)&&tt.raycast(_,_e),nt===!0){const rt=tt.children;for(let it=0,ot=rt.length;it<ot;it++)intersectObject(rt[it],_,_e,!0)}}class Spherical{constructor(_=1,_e=0,nt=0){return this.radius=_,this.phi=_e,this.theta=nt,this}set(_,_e,nt){return this.radius=_,this.phi=_e,this.theta=nt,this}copy(_){return this.radius=_.radius,this.phi=_.phi,this.theta=_.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(_){return this.setFromCartesianCoords(_.x,_.y,_.z)}setFromCartesianCoords(_,_e,nt){return this.radius=Math.sqrt(_*_+_e*_e+nt*nt),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(_,nt),this.phi=Math.acos(clamp$4(_e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(_=1,_e=0,nt=0){return this.radius=_,this.theta=_e,this.y=nt,this}set(_,_e,nt){return this.radius=_,this.theta=_e,this.y=nt,this}copy(_){return this.radius=_.radius,this.theta=_.theta,this.y=_.y,this}setFromVector3(_){return this.setFromCartesianCoords(_.x,_.y,_.z)}setFromCartesianCoords(_,_e,nt){return this.radius=Math.sqrt(_*_+nt*nt),this.theta=Math.atan2(_,nt),this.y=_e,this}clone(){return new this.constructor().copy(this)}}const _vector$4=new Vector2;class Box2{constructor(_=new Vector2(1/0,1/0),_e=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=_,this.max=_e}set(_,_e){return this.min.copy(_),this.max.copy(_e),this}setFromPoints(_){this.makeEmpty();for(let _e=0,nt=_.length;_e<nt;_e++)this.expandByPoint(_[_e]);return this}setFromCenterAndSize(_,_e){const nt=_vector$4.copy(_e).multiplyScalar(.5);return this.min.copy(_).sub(nt),this.max.copy(_).add(nt),this}clone(){return new this.constructor().copy(this)}copy(_){return this.min.copy(_.min),this.max.copy(_.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(_){return this.isEmpty()?_.set(0,0):_.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(_){return this.isEmpty()?_.set(0,0):_.subVectors(this.max,this.min)}expandByPoint(_){return this.min.min(_),this.max.max(_),this}expandByVector(_){return this.min.sub(_),this.max.add(_),this}expandByScalar(_){return this.min.addScalar(-_),this.max.addScalar(_),this}containsPoint(_){return!(_.x<this.min.x||_.x>this.max.x||_.y<this.min.y||_.y>this.max.y)}containsBox(_){return this.min.x<=_.min.x&&_.max.x<=this.max.x&&this.min.y<=_.min.y&&_.max.y<=this.max.y}getParameter(_,_e){return _e.set((_.x-this.min.x)/(this.max.x-this.min.x),(_.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(_){return!(_.max.x<this.min.x||_.min.x>this.max.x||_.max.y<this.min.y||_.min.y>this.max.y)}clampPoint(_,_e){return _e.copy(_).clamp(this.min,this.max)}distanceToPoint(_){return this.clampPoint(_,_vector$4).distanceTo(_)}intersect(_){return this.min.max(_.min),this.max.min(_.max),this.isEmpty()&&this.makeEmpty(),this}union(_){return this.min.min(_.min),this.max.max(_.max),this}translate(_){return this.min.add(_),this.max.add(_),this}equals(_){return _.min.equals(this.min)&&_.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(_=new Vector3,_e=new Vector3){this.start=_,this.end=_e}set(_,_e){return this.start.copy(_),this.end.copy(_e),this}copy(_){return this.start.copy(_.start),this.end.copy(_.end),this}getCenter(_){return _.addVectors(this.start,this.end).multiplyScalar(.5)}delta(_){return _.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(_,_e){return this.delta(_e).multiplyScalar(_).add(this.start)}closestPointToPointParameter(_,_e){_startP.subVectors(_,this.start),_startEnd.subVectors(this.end,this.start);const nt=_startEnd.dot(_startEnd);let it=_startEnd.dot(_startP)/nt;return _e&&(it=clamp$4(it,0,1)),it}closestPointToPoint(_,_e,nt){const rt=this.closestPointToPointParameter(_,_e);return this.delta(nt).multiplyScalar(rt).add(this.start)}applyMatrix4(_){return this.start.applyMatrix4(_),this.end.applyMatrix4(_),this}equals(_){return _.start.equals(this.start)&&_.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(_,_e){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=_e,this.type="SpotLightHelper";const nt=new BufferGeometry,rt=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let ot=0,st=1,at=32;ot<at;ot++,st++){const lt=ot/at*Math.PI*2,ct=st/at*Math.PI*2;rt.push(Math.cos(lt),Math.sin(lt),1,Math.cos(ct),Math.sin(ct),1)}nt.setAttribute("position",new Float32BufferAttribute(rt,3));const it=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(nt,it),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const _=this.light.distance?this.light.distance:1e3,_e=_*Math.tan(this.light.angle);this.cone.scale.set(_e,_e,_),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(_){const _e=getBoneList(_),nt=new BufferGeometry,rt=[],it=[],ot=new Color$1(0,0,1),st=new Color$1(0,1,0);for(let lt=0;lt<_e.length;lt++){const ct=_e[lt];ct.parent&&ct.parent.isBone&&(rt.push(0,0,0),rt.push(0,0,0),it.push(ot.r,ot.g,ot.b),it.push(st.r,st.g,st.b))}nt.setAttribute("position",new Float32BufferAttribute(rt,3)),nt.setAttribute("color",new Float32BufferAttribute(it,3));const at=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(nt,at),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=_,this.bones=_e,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(_){const _e=this.bones,nt=this.geometry,rt=nt.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let it=0,ot=0;it<_e.length;it++){const st=_e[it];st.parent&&st.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,st.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),rt.setXYZ(ot,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,st.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),rt.setXYZ(ot+1,_vector$2.x,_vector$2.y,_vector$2.z),ot+=2)}nt.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(_)}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(tt){const _=[];tt.isBone===!0&&_.push(tt);for(let _e=0;_e<tt.children.length;_e++)_.push.apply(_,getBoneList(tt.children[_e]));return _}class PointLightHelper extends Mesh{constructor(_,_e,nt){const rt=new SphereGeometry(_e,4,2),it=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(rt,it),this.light=_,this.color=nt,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color$1,_color2=new Color$1;class HemisphereLightHelper extends Object3D{constructor(_,_e,nt){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=nt,this.type="HemisphereLightHelper";const rt=new OctahedronGeometry(_e);rt.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const it=rt.getAttribute("position"),ot=new Float32Array(it.count*3);rt.setAttribute("color",new BufferAttribute(ot,3)),this.add(new Mesh(rt,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const _=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const _e=_.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let nt=0,rt=_e.count;nt<rt;nt++){const it=nt<rt/2?_color1:_color2;_e.setXYZ(nt,it.r,it.g,it.b)}_e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),_.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(_=10,_e=10,nt=4473924,rt=8947848){nt=new Color$1(nt),rt=new Color$1(rt);const it=_e/2,ot=_/_e,st=_/2,at=[],lt=[];for(let ht=0,pt=0,gt=-st;ht<=_e;ht++,gt+=ot){at.push(-st,0,gt,st,0,gt),at.push(gt,0,-st,gt,0,st);const yt=ht===it?nt:rt;yt.toArray(lt,pt),pt+=3,yt.toArray(lt,pt),pt+=3,yt.toArray(lt,pt),pt+=3,yt.toArray(lt,pt),pt+=3}const ct=new BufferGeometry;ct.setAttribute("position",new Float32BufferAttribute(at,3)),ct.setAttribute("color",new Float32BufferAttribute(lt,3));const ut=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(ct,ut),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(_=10,_e=16,nt=8,rt=64,it=4473924,ot=8947848){it=new Color$1(it),ot=new Color$1(ot);const st=[],at=[];if(_e>1)for(let ut=0;ut<_e;ut++){const ht=ut/_e*(Math.PI*2),pt=Math.sin(ht)*_,gt=Math.cos(ht)*_;st.push(0,0,0),st.push(pt,0,gt);const yt=ut&1?it:ot;at.push(yt.r,yt.g,yt.b),at.push(yt.r,yt.g,yt.b)}for(let ut=0;ut<nt;ut++){const ht=ut&1?it:ot,pt=_-_/nt*ut;for(let gt=0;gt<rt;gt++){let yt=gt/rt*(Math.PI*2),vt=Math.sin(yt)*pt,mt=Math.cos(yt)*pt;st.push(vt,0,mt),at.push(ht.r,ht.g,ht.b),yt=(gt+1)/rt*(Math.PI*2),vt=Math.sin(yt)*pt,mt=Math.cos(yt)*pt,st.push(vt,0,mt),at.push(ht.r,ht.g,ht.b)}}const lt=new BufferGeometry;lt.setAttribute("position",new Float32BufferAttribute(st,3)),lt.setAttribute("color",new Float32BufferAttribute(at,3));const ct=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(lt,ct),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2$5=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(_,_e,nt){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=nt,this.type="DirectionalLightHelper",_e===void 0&&(_e=1);let rt=new BufferGeometry;rt.setAttribute("position",new Float32BufferAttribute([-_e,_e,0,_e,_e,0,_e,-_e,0,-_e,-_e,0,-_e,_e,0],3));const it=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(rt,it),this.add(this.lightPlane),rt=new BufferGeometry,rt.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(rt,it),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2$5.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2$5,_v1),this.lightPlane.lookAt(_v2$5),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$5),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(_){const _e=new BufferGeometry,nt=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),rt=[],it=[],ot={};st("n1","n2"),st("n2","n4"),st("n4","n3"),st("n3","n1"),st("f1","f2"),st("f2","f4"),st("f4","f3"),st("f3","f1"),st("n1","f1"),st("n2","f2"),st("n3","f3"),st("n4","f4"),st("p","n1"),st("p","n2"),st("p","n3"),st("p","n4"),st("u1","u2"),st("u2","u3"),st("u3","u1"),st("c","t"),st("p","c"),st("cn1","cn2"),st("cn3","cn4"),st("cf1","cf2"),st("cf3","cf4");function st(gt,yt){at(gt),at(yt)}function at(gt){rt.push(0,0,0),it.push(0,0,0),ot[gt]===void 0&&(ot[gt]=[]),ot[gt].push(rt.length/3-1)}_e.setAttribute("position",new Float32BufferAttribute(rt,3)),_e.setAttribute("color",new Float32BufferAttribute(it,3)),super(_e,nt),this.type="CameraHelper",this.camera=_,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=ot,this.update();const lt=new Color$1(16755200),ct=new Color$1(16711680),ut=new Color$1(43775),ht=new Color$1(16777215),pt=new Color$1(3355443);this.setColors(lt,ct,ut,ht,pt)}setColors(_,_e,nt,rt,it){const st=this.geometry.getAttribute("color");st.setXYZ(0,_.r,_.g,_.b),st.setXYZ(1,_.r,_.g,_.b),st.setXYZ(2,_.r,_.g,_.b),st.setXYZ(3,_.r,_.g,_.b),st.setXYZ(4,_.r,_.g,_.b),st.setXYZ(5,_.r,_.g,_.b),st.setXYZ(6,_.r,_.g,_.b),st.setXYZ(7,_.r,_.g,_.b),st.setXYZ(8,_.r,_.g,_.b),st.setXYZ(9,_.r,_.g,_.b),st.setXYZ(10,_.r,_.g,_.b),st.setXYZ(11,_.r,_.g,_.b),st.setXYZ(12,_.r,_.g,_.b),st.setXYZ(13,_.r,_.g,_.b),st.setXYZ(14,_.r,_.g,_.b),st.setXYZ(15,_.r,_.g,_.b),st.setXYZ(16,_.r,_.g,_.b),st.setXYZ(17,_.r,_.g,_.b),st.setXYZ(18,_.r,_.g,_.b),st.setXYZ(19,_.r,_.g,_.b),st.setXYZ(20,_.r,_.g,_.b),st.setXYZ(21,_.r,_.g,_.b),st.setXYZ(22,_.r,_.g,_.b),st.setXYZ(23,_.r,_.g,_.b),st.setXYZ(24,_e.r,_e.g,_e.b),st.setXYZ(25,_e.r,_e.g,_e.b),st.setXYZ(26,_e.r,_e.g,_e.b),st.setXYZ(27,_e.r,_e.g,_e.b),st.setXYZ(28,_e.r,_e.g,_e.b),st.setXYZ(29,_e.r,_e.g,_e.b),st.setXYZ(30,_e.r,_e.g,_e.b),st.setXYZ(31,_e.r,_e.g,_e.b),st.setXYZ(32,nt.r,nt.g,nt.b),st.setXYZ(33,nt.r,nt.g,nt.b),st.setXYZ(34,nt.r,nt.g,nt.b),st.setXYZ(35,nt.r,nt.g,nt.b),st.setXYZ(36,nt.r,nt.g,nt.b),st.setXYZ(37,nt.r,nt.g,nt.b),st.setXYZ(38,rt.r,rt.g,rt.b),st.setXYZ(39,rt.r,rt.g,rt.b),st.setXYZ(40,it.r,it.g,it.b),st.setXYZ(41,it.r,it.g,it.b),st.setXYZ(42,it.r,it.g,it.b),st.setXYZ(43,it.r,it.g,it.b),st.setXYZ(44,it.r,it.g,it.b),st.setXYZ(45,it.r,it.g,it.b),st.setXYZ(46,it.r,it.g,it.b),st.setXYZ(47,it.r,it.g,it.b),st.setXYZ(48,it.r,it.g,it.b),st.setXYZ(49,it.r,it.g,it.b),st.needsUpdate=!0}update(){const _=this.geometry,_e=this.pointMap,nt=1,rt=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",_e,_,_camera,0,0,-1),setPoint("t",_e,_,_camera,0,0,1),setPoint("n1",_e,_,_camera,-nt,-rt,-1),setPoint("n2",_e,_,_camera,nt,-rt,-1),setPoint("n3",_e,_,_camera,-nt,rt,-1),setPoint("n4",_e,_,_camera,nt,rt,-1),setPoint("f1",_e,_,_camera,-nt,-rt,1),setPoint("f2",_e,_,_camera,nt,-rt,1),setPoint("f3",_e,_,_camera,-nt,rt,1),setPoint("f4",_e,_,_camera,nt,rt,1),setPoint("u1",_e,_,_camera,nt*.7,rt*1.1,-1),setPoint("u2",_e,_,_camera,-nt*.7,rt*1.1,-1),setPoint("u3",_e,_,_camera,0,rt*2,-1),setPoint("cf1",_e,_,_camera,-nt,0,1),setPoint("cf2",_e,_,_camera,nt,0,1),setPoint("cf3",_e,_,_camera,0,-rt,1),setPoint("cf4",_e,_,_camera,0,rt,1),setPoint("cn1",_e,_,_camera,-nt,0,-1),setPoint("cn2",_e,_,_camera,nt,0,-1),setPoint("cn3",_e,_,_camera,0,-rt,-1),setPoint("cn4",_e,_,_camera,0,rt,-1),_.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(tt,_,_e,nt,rt,it,ot){_vector.set(rt,it,ot).unproject(nt);const st=_[tt];if(st!==void 0){const at=_e.getAttribute("position");for(let lt=0,ct=st.length;lt<ct;lt++)at.setXYZ(st[lt],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(_,_e=16776960){const nt=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),rt=new Float32Array(8*3),it=new BufferGeometry;it.setIndex(new BufferAttribute(nt,1)),it.setAttribute("position",new BufferAttribute(rt,3)),super(it,new LineBasicMaterial({color:_e,toneMapped:!1})),this.object=_,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(_){if(_!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const _e=_box.min,nt=_box.max,rt=this.geometry.attributes.position,it=rt.array;it[0]=nt.x,it[1]=nt.y,it[2]=nt.z,it[3]=_e.x,it[4]=nt.y,it[5]=nt.z,it[6]=_e.x,it[7]=_e.y,it[8]=nt.z,it[9]=nt.x,it[10]=_e.y,it[11]=nt.z,it[12]=nt.x,it[13]=nt.y,it[14]=_e.z,it[15]=_e.x,it[16]=nt.y,it[17]=_e.z,it[18]=_e.x,it[19]=_e.y,it[20]=_e.z,it[21]=nt.x,it[22]=_e.y,it[23]=_e.z,rt.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(_){return this.object=_,this.update(),this}copy(_,_e){return super.copy(_,_e),this.object=_.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(_,_e=16776960){const nt=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),rt=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],it=new BufferGeometry;it.setIndex(new BufferAttribute(nt,1)),it.setAttribute("position",new Float32BufferAttribute(rt,3)),super(it,new LineBasicMaterial({color:_e,toneMapped:!1})),this.box=_,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(_){const _e=this.box;_e.isEmpty()||(_e.getCenter(this.position),_e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(_))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line{constructor(_,_e=1,nt=16776960){const rt=nt,it=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],ot=new BufferGeometry;ot.setAttribute("position",new Float32BufferAttribute(it,3)),ot.computeBoundingSphere(),super(ot,new LineBasicMaterial({color:rt,toneMapped:!1})),this.type="PlaneHelper",this.plane=_,this.size=_e;const st=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],at=new BufferGeometry;at.setAttribute("position",new Float32BufferAttribute(st,3)),at.computeBoundingSphere(),this.add(new Mesh(at,new MeshBasicMaterial({color:rt,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(_){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(_)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(_=new Vector3(0,0,1),_e=new Vector3(0,0,0),nt=1,rt=16776960,it=nt*.2,ot=it*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(_e),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:rt,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:rt,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(_),this.setLength(nt,it,ot)}setDirection(_){if(_.y>.99999)this.quaternion.set(0,0,0,1);else if(_.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(_.z,0,-_.x).normalize();const _e=Math.acos(_.y);this.quaternion.setFromAxisAngle(_axis,_e)}}setLength(_,_e=_*.2,nt=_e*.2){this.line.scale.set(1,Math.max(1e-4,_-_e),1),this.line.updateMatrix(),this.cone.scale.set(nt,_e,nt),this.cone.position.y=_,this.cone.updateMatrix()}setColor(_){this.line.material.color.set(_),this.cone.material.color.set(_)}copy(_){return super.copy(_,!1),this.line.copy(_.line),this.cone.copy(_.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(_=1){const _e=[0,0,0,_,0,0,0,0,0,0,_,0,0,0,0,0,0,_],nt=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],rt=new BufferGeometry;rt.setAttribute("position",new Float32BufferAttribute(_e,3)),rt.setAttribute("color",new Float32BufferAttribute(nt,3));const it=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(rt,it),this.type="AxesHelper"}setColors(_,_e,nt){const rt=new Color$1,it=this.geometry.attributes.color.array;return rt.set(_),rt.toArray(it,0),rt.toArray(it,3),rt.set(_e),rt.toArray(it,6),rt.toArray(it,9),rt.set(nt),rt.toArray(it,12),rt.toArray(it,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color$1,this.subPaths=[],this.currentPath=null}moveTo(_,_e){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(_,_e),this}lineTo(_,_e){return this.currentPath.lineTo(_,_e),this}quadraticCurveTo(_,_e,nt,rt){return this.currentPath.quadraticCurveTo(_,_e,nt,rt),this}bezierCurveTo(_,_e,nt,rt,it,ot){return this.currentPath.bezierCurveTo(_,_e,nt,rt,it,ot),this}splineThru(_){return this.currentPath.splineThru(_),this}toShapes(_){function _e(mt){const _t=[];for(let xt=0,St=mt.length;xt<St;xt++){const Tt=mt[xt],Mt=new Shape;Mt.curves=Tt.curves,_t.push(Mt)}return _t}function nt(mt,_t){const xt=_t.length;let St=!1;for(let Tt=xt-1,Mt=0;Mt<xt;Tt=Mt++){let bt=_t[Tt],Pt=_t[Mt],wt=Pt.x-bt.x,Bt=Pt.y-bt.y;if(Math.abs(Bt)>Number.EPSILON){if(Bt<0&&(bt=_t[Mt],wt=-wt,Pt=_t[Tt],Bt=-Bt),mt.y<bt.y||mt.y>Pt.y)continue;if(mt.y===bt.y){if(mt.x===bt.x)return!0}else{const Ot=Bt*(mt.x-bt.x)-wt*(mt.y-bt.y);if(Ot===0)return!0;if(Ot<0)continue;St=!St}}else{if(mt.y!==bt.y)continue;if(Pt.x<=mt.x&&mt.x<=bt.x||bt.x<=mt.x&&mt.x<=Pt.x)return!0}}return St}const rt=ShapeUtils.isClockWise,it=this.subPaths;if(it.length===0)return[];let ot,st,at;const lt=[];if(it.length===1)return st=it[0],at=new Shape,at.curves=st.curves,lt.push(at),lt;let ct=!rt(it[0].getPoints());ct=_?!ct:ct;const ut=[],ht=[];let pt=[],gt=0,yt;ht[gt]=void 0,pt[gt]=[];for(let mt=0,_t=it.length;mt<_t;mt++)st=it[mt],yt=st.getPoints(),ot=rt(yt),ot=_?!ot:ot,ot?(!ct&&ht[gt]&&gt++,ht[gt]={s:new Shape,p:yt},ht[gt].s.curves=st.curves,ct&&gt++,pt[gt]=[]):pt[gt].push({h:st,p:yt[0]});if(!ht[0])return _e(it);if(ht.length>1){let mt=!1,_t=0;for(let xt=0,St=ht.length;xt<St;xt++)ut[xt]=[];for(let xt=0,St=ht.length;xt<St;xt++){const Tt=pt[xt];for(let Mt=0;Mt<Tt.length;Mt++){const bt=Tt[Mt];let Pt=!0;for(let wt=0;wt<ht.length;wt++)nt(bt.p,ht[wt].p)&&(xt!==wt&&_t++,Pt?(Pt=!1,ut[wt].push(bt)):mt=!0);Pt&&ut[xt].push(bt)}}_t>0&&mt===!1&&(pt=ut)}let vt;for(let mt=0,_t=ht.length;mt<_t;mt++){at=ht[mt].s,lt.push(at),vt=pt[mt];for(let xt=0,St=vt.length;xt<St;xt++)at.holes.push(vt[xt].h)}return lt}}class BoxBufferGeometry extends BoxGeometry{constructor(_,_e,nt,rt,it,ot){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(_,_e,nt,rt,it,ot)}}class CapsuleBufferGeometry extends CapsuleGeometry{constructor(_,_e,nt,rt){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(_,_e,nt,rt)}}class CircleBufferGeometry extends CircleGeometry{constructor(_,_e,nt,rt){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(_,_e,nt,rt)}}class ConeBufferGeometry extends ConeGeometry{constructor(_,_e,nt,rt,it,ot,st){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(_,_e,nt,rt,it,ot,st)}}class CylinderBufferGeometry extends CylinderGeometry{constructor(_,_e,nt,rt,it,ot,st,at){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(_,_e,nt,rt,it,ot,st,at)}}class DodecahedronBufferGeometry extends DodecahedronGeometry{constructor(_,_e){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(_,_e)}}class ExtrudeBufferGeometry extends ExtrudeGeometry{constructor(_,_e){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(_,_e)}}class IcosahedronBufferGeometry extends IcosahedronGeometry{constructor(_,_e){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(_,_e)}}class LatheBufferGeometry extends LatheGeometry{constructor(_,_e,nt,rt){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(_,_e,nt,rt)}}class OctahedronBufferGeometry extends OctahedronGeometry{constructor(_,_e){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(_,_e)}}class PlaneBufferGeometry extends PlaneGeometry{constructor(_,_e,nt,rt){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(_,_e,nt,rt)}}class PolyhedronBufferGeometry extends PolyhedronGeometry{constructor(_,_e,nt,rt){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(_,_e,nt,rt)}}class RingBufferGeometry extends RingGeometry{constructor(_,_e,nt,rt,it,ot){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(_,_e,nt,rt,it,ot)}}class ShapeBufferGeometry extends ShapeGeometry{constructor(_,_e){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(_,_e)}}class SphereBufferGeometry extends SphereGeometry{constructor(_,_e,nt,rt,it,ot,st){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(_,_e,nt,rt,it,ot,st)}}class TetrahedronBufferGeometry extends TetrahedronGeometry{constructor(_,_e){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(_,_e)}}class TorusBufferGeometry extends TorusGeometry{constructor(_,_e,nt,rt,it){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(_,_e,nt,rt,it)}}class TorusKnotBufferGeometry extends TorusKnotGeometry{constructor(_,_e,nt,rt,it,ot){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(_,_e,nt,rt,it,ot)}}class TubeBufferGeometry extends TubeGeometry{constructor(_,_e,nt,rt,it){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(_,_e,nt,rt,it)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);const THREE$1=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio:Audio$1,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleBufferGeometry,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,Color:Color$1,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderBufferGeometry,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DisplayP3ColorSpace,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher:EventDispatcher$1,ExtrudeBufferGeometry,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,Float64BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,Loader:Loader$1,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,TwoPassDoubleSide,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoTexture,WebGL1Renderer,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLMultipleRenderTargets,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,_SRGBAFormat,sRGBEncoding},Symbol.toStringTag,{value:"Module"}));var constantsExports={},constants={get exports(){return constantsExports},set exports(tt){constantsExports=tt}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;(function(tt){tt.exports=reactReconcilerConstants_production_min})(constants);function createStore$1(tt){let _;const _e=new Set,nt=(lt,ct)=>{const ut=typeof lt=="function"?lt(_):lt;if(ut!==_){const ht=_;_=ct?ut:Object.assign({},_,ut),_e.forEach(pt=>pt(_,ht))}},rt=()=>_,it=(lt,ct=rt,ut=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let ht=ct(_);function pt(){const gt=ct(_);if(!ut(ht,gt)){const yt=ht;lt(ht=gt,yt)}}return _e.add(pt),()=>_e.delete(pt)},at={setState:nt,getState:rt,subscribe:(lt,ct,ut)=>ct||ut?it(lt,ct,ut):(_e.add(lt),()=>_e.delete(lt)),destroy:()=>_e.clear()};return _=tt(nt,rt,at),at}const isSSR=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$1=isSSR?reactExports.useEffect:reactExports.useLayoutEffect;function create(tt){const _=typeof tt=="function"?createStore$1(tt):tt,_e=(nt=_.getState,rt=Object.is)=>{const[,it]=reactExports.useReducer(vt=>vt+1,0),ot=_.getState(),st=reactExports.useRef(ot),at=reactExports.useRef(nt),lt=reactExports.useRef(rt),ct=reactExports.useRef(!1),ut=reactExports.useRef();ut.current===void 0&&(ut.current=nt(ot));let ht,pt=!1;(st.current!==ot||at.current!==nt||lt.current!==rt||ct.current)&&(ht=nt(ot),pt=!rt(ut.current,ht)),useIsomorphicLayoutEffect$1(()=>{pt&&(ut.current=ht),st.current=ot,at.current=nt,lt.current=rt,ct.current=!1});const gt=reactExports.useRef(ot);useIsomorphicLayoutEffect$1(()=>{const vt=()=>{try{const _t=_.getState(),xt=at.current(_t);lt.current(ut.current,xt)||(st.current=_t,ut.current=xt,it())}catch{ct.current=!0,it()}},mt=_.subscribe(vt);return _.getState()!==gt.current&&vt(),mt},[]);const yt=pt?ht:ut.current;return reactExports.useDebugValue(yt),yt};return Object.assign(_e,_),_e[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const nt=[_e,_];return{next(){const rt=nt.length<=0;return{value:nt.shift(),done:rt}}}},_e}var reactReconcilerExports={},reactReconciler={get exports(){return reactReconcilerExports},set exports(tt){reactReconcilerExports=tt}},schedulerExports={},scheduler={get exports(){return schedulerExports},set exports(tt){schedulerExports=tt}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(tt){function _(Gt,Xt){var Vt=Gt.length;Gt.push(Xt);e:for(;0<Vt;){var Wt=Vt-1>>>1,$t=Gt[Wt];if(0<rt($t,Xt))Gt[Wt]=Xt,Gt[Vt]=$t,Vt=Wt;else break e}}function _e(Gt){return Gt.length===0?null:Gt[0]}function nt(Gt){if(Gt.length===0)return null;var Xt=Gt[0],Vt=Gt.pop();if(Vt!==Xt){Gt[0]=Vt;e:for(var Wt=0,$t=Gt.length,nn=$t>>>1;Wt<nn;){var en=2*(Wt+1)-1,sn=Gt[en],rn=en+1,an=Gt[rn];if(0>rt(sn,Vt))rn<$t&&0>rt(an,sn)?(Gt[Wt]=an,Gt[rn]=Vt,Wt=rn):(Gt[Wt]=sn,Gt[en]=Vt,Wt=en);else if(rn<$t&&0>rt(an,Vt))Gt[Wt]=an,Gt[rn]=Vt,Wt=rn;else break e}}return Xt}function rt(Gt,Xt){var Vt=Gt.sortIndex-Xt.sortIndex;return Vt!==0?Vt:Gt.id-Xt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;tt.unstable_now=function(){return it.now()}}else{var ot=Date,st=ot.now();tt.unstable_now=function(){return ot.now()-st}}var at=[],lt=[],ct=1,ut=null,ht=3,pt=!1,gt=!1,yt=!1,vt=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,_t=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xt(Gt){for(var Xt=_e(lt);Xt!==null;){if(Xt.callback===null)nt(lt);else if(Xt.startTime<=Gt)nt(lt),Xt.sortIndex=Xt.expirationTime,_(at,Xt);else break;Xt=_e(lt)}}function St(Gt){if(yt=!1,xt(Gt),!gt)if(_e(at)!==null)gt=!0,Yt(Tt);else{var Xt=_e(lt);Xt!==null&&qt(St,Xt.startTime-Gt)}}function Tt(Gt,Xt){gt=!1,yt&&(yt=!1,mt(Pt),Pt=-1),pt=!0;var Vt=ht;try{for(xt(Xt),ut=_e(at);ut!==null&&(!(ut.expirationTime>Xt)||Gt&&!Ot());){var Wt=ut.callback;if(typeof Wt=="function"){ut.callback=null,ht=ut.priorityLevel;var $t=Wt(ut.expirationTime<=Xt);Xt=tt.unstable_now(),typeof $t=="function"?ut.callback=$t:ut===_e(at)&&nt(at),xt(Xt)}else nt(at);ut=_e(at)}if(ut!==null)var nn=!0;else{var en=_e(lt);en!==null&&qt(St,en.startTime-Xt),nn=!1}return nn}finally{ut=null,ht=Vt,pt=!1}}var Mt=!1,bt=null,Pt=-1,wt=5,Bt=-1;function Ot(){return!(tt.unstable_now()-Bt<wt)}function Ut(){if(bt!==null){var Gt=tt.unstable_now();Bt=Gt;var Xt=!0;try{Xt=bt(!0,Gt)}finally{Xt?Nt():(Mt=!1,bt=null)}}else Mt=!1}var Nt;if(typeof _t=="function")Nt=function(){_t(Ut)};else if(typeof MessageChannel<"u"){var zt=new MessageChannel,jt=zt.port2;zt.port1.onmessage=Ut,Nt=function(){jt.postMessage(null)}}else Nt=function(){vt(Ut,0)};function Yt(Gt){bt=Gt,Mt||(Mt=!0,Nt())}function qt(Gt,Xt){Pt=vt(function(){Gt(tt.unstable_now())},Xt)}tt.unstable_IdlePriority=5,tt.unstable_ImmediatePriority=1,tt.unstable_LowPriority=4,tt.unstable_NormalPriority=3,tt.unstable_Profiling=null,tt.unstable_UserBlockingPriority=2,tt.unstable_cancelCallback=function(Gt){Gt.callback=null},tt.unstable_continueExecution=function(){gt||pt||(gt=!0,Yt(Tt))},tt.unstable_forceFrameRate=function(Gt){0>Gt||125<Gt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):wt=0<Gt?Math.floor(1e3/Gt):5},tt.unstable_getCurrentPriorityLevel=function(){return ht},tt.unstable_getFirstCallbackNode=function(){return _e(at)},tt.unstable_next=function(Gt){switch(ht){case 1:case 2:case 3:var Xt=3;break;default:Xt=ht}var Vt=ht;ht=Xt;try{return Gt()}finally{ht=Vt}},tt.unstable_pauseExecution=function(){},tt.unstable_requestPaint=function(){},tt.unstable_runWithPriority=function(Gt,Xt){switch(Gt){case 1:case 2:case 3:case 4:case 5:break;default:Gt=3}var Vt=ht;ht=Gt;try{return Xt()}finally{ht=Vt}},tt.unstable_scheduleCallback=function(Gt,Xt,Vt){var Wt=tt.unstable_now();switch(typeof Vt=="object"&&Vt!==null?(Vt=Vt.delay,Vt=typeof Vt=="number"&&0<Vt?Wt+Vt:Wt):Vt=Wt,Gt){case 1:var $t=-1;break;case 2:$t=250;break;case 5:$t=1073741823;break;case 4:$t=1e4;break;default:$t=5e3}return $t=Vt+$t,Gt={id:ct++,callback:Xt,priorityLevel:Gt,startTime:Vt,expirationTime:$t,sortIndex:-1},Vt>Wt?(Gt.sortIndex=Vt,_(lt,Gt),_e(at)===null&&Gt===_e(lt)&&(yt?(mt(Pt),Pt=-1):yt=!0,qt(St,Vt-Wt))):(Gt.sortIndex=$t,_(at,Gt),gt||pt||(gt=!0,Yt(Tt))),Gt},tt.unstable_shouldYield=Ot,tt.unstable_wrapCallback=function(Gt){var Xt=ht;return function(){var Vt=ht;ht=Xt;try{return Gt.apply(this,arguments)}finally{ht=Vt}}}})(scheduler_production_min);(function(tt){tt.exports=scheduler_production_min})(scheduler);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function(_){var _e={},nt=reactExports,rt=schedulerExports,it=Object.assign;function ot(ft){for(var dt="https://reactjs.org/docs/error-decoder.html?invariant="+ft,Et=1;Et<arguments.length;Et++)dt+="&args[]="+encodeURIComponent(arguments[Et]);return"Minified React error #"+ft+"; visit "+dt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var st=nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,at=Symbol.for("react.element"),lt=Symbol.for("react.portal"),ct=Symbol.for("react.fragment"),ut=Symbol.for("react.strict_mode"),ht=Symbol.for("react.profiler"),pt=Symbol.for("react.provider"),gt=Symbol.for("react.context"),yt=Symbol.for("react.forward_ref"),vt=Symbol.for("react.suspense"),mt=Symbol.for("react.suspense_list"),_t=Symbol.for("react.memo"),xt=Symbol.for("react.lazy"),St=Symbol.for("react.offscreen"),Tt=Symbol.iterator;function Mt(ft){return ft===null||typeof ft!="object"?null:(ft=Tt&&ft[Tt]||ft["@@iterator"],typeof ft=="function"?ft:null)}function bt(ft){if(ft==null)return null;if(typeof ft=="function")return ft.displayName||ft.name||null;if(typeof ft=="string")return ft;switch(ft){case ct:return"Fragment";case lt:return"Portal";case ht:return"Profiler";case ut:return"StrictMode";case vt:return"Suspense";case mt:return"SuspenseList"}if(typeof ft=="object")switch(ft.$$typeof){case gt:return(ft.displayName||"Context")+".Consumer";case pt:return(ft._context.displayName||"Context")+".Provider";case yt:var dt=ft.render;return ft=ft.displayName,ft||(ft=dt.displayName||dt.name||"",ft=ft!==""?"ForwardRef("+ft+")":"ForwardRef"),ft;case _t:return dt=ft.displayName||null,dt!==null?dt:bt(ft.type)||"Memo";case xt:dt=ft._payload,ft=ft._init;try{return bt(ft(dt))}catch{}}return null}function Pt(ft){var dt=ft.type;switch(ft.tag){case 24:return"Cache";case 9:return(dt.displayName||"Context")+".Consumer";case 10:return(dt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return ft=dt.render,ft=ft.displayName||ft.name||"",dt.displayName||(ft!==""?"ForwardRef("+ft+")":"ForwardRef");case 7:return"Fragment";case 5:return dt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bt(dt);case 8:return dt===ut?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof dt=="function")return dt.displayName||dt.name||null;if(typeof dt=="string")return dt}return null}function wt(ft){var dt=ft,Et=ft;if(ft.alternate)for(;dt.return;)dt=dt.return;else{ft=dt;do dt=ft,dt.flags&4098&&(Et=dt.return),ft=dt.return;while(ft)}return dt.tag===3?Et:null}function Bt(ft){if(wt(ft)!==ft)throw Error(ot(188))}function Ot(ft){var dt=ft.alternate;if(!dt){if(dt=wt(ft),dt===null)throw Error(ot(188));return dt!==ft?null:ft}for(var Et=ft,At=dt;;){var Ct=Et.return;if(Ct===null)break;var Lt=Ct.alternate;if(Lt===null){if(At=Ct.return,At!==null){Et=At;continue}break}if(Ct.child===Lt.child){for(Lt=Ct.child;Lt;){if(Lt===Et)return Bt(Ct),ft;if(Lt===At)return Bt(Ct),dt;Lt=Lt.sibling}throw Error(ot(188))}if(Et.return!==At.return)Et=Ct,At=Lt;else{for(var Zt=!1,ln=Ct.child;ln;){if(ln===Et){Zt=!0,Et=Ct,At=Lt;break}if(ln===At){Zt=!0,At=Ct,Et=Lt;break}ln=ln.sibling}if(!Zt){for(ln=Lt.child;ln;){if(ln===Et){Zt=!0,Et=Lt,At=Ct;break}if(ln===At){Zt=!0,At=Lt,Et=Ct;break}ln=ln.sibling}if(!Zt)throw Error(ot(189))}}if(Et.alternate!==At)throw Error(ot(190))}if(Et.tag!==3)throw Error(ot(188));return Et.stateNode.current===Et?ft:dt}function Ut(ft){return ft=Ot(ft),ft!==null?Nt(ft):null}function Nt(ft){if(ft.tag===5||ft.tag===6)return ft;for(ft=ft.child;ft!==null;){var dt=Nt(ft);if(dt!==null)return dt;ft=ft.sibling}return null}function zt(ft){if(ft.tag===5||ft.tag===6)return ft;for(ft=ft.child;ft!==null;){if(ft.tag!==4){var dt=zt(ft);if(dt!==null)return dt}ft=ft.sibling}return null}var jt=Array.isArray,Yt=_.getPublicInstance,qt=_.getRootHostContext,Gt=_.getChildHostContext,Xt=_.prepareForCommit,Vt=_.resetAfterCommit,Wt=_.createInstance,$t=_.appendInitialChild,nn=_.finalizeInitialChildren,en=_.prepareUpdate,sn=_.shouldSetTextContent,rn=_.createTextInstance,an=_.scheduleTimeout,dn=_.cancelTimeout,Bn=_.noTimeout,Nn=_.isPrimaryRenderer,gn=_.supportsMutation,Ht=_.supportsPersistence,xn=_.supportsHydration,hn=_.getInstanceFromNode,vn=_.preparePortalMount,pn=_.getCurrentEventPriority,Hn=_.detachDeletedInstance,yn=_.supportsMicrotasks,Ln=_.scheduleMicrotask,On=_.supportsTestSelectors,Sn=_.findFiberRoot,jn=_.getBoundingRect,Ft=_.getTextContent,Dt=_.isHiddenSubtree,on=_.matchAccessibilityRole,bn=_.setFocusIfFocusable,Mn=_.setupIntersectionObserver,wn=_.appendChild,$n=_.appendChildToContainer,Gn=_.commitTextUpdate,En=_.commitMount,zn=_.commitUpdate,Vn=_.insertBefore,Un=_.insertInContainerBefore,Fn=_.removeChild,kn=_.removeChildFromContainer,Yn=_.resetTextContent,nr=_.hideInstance,tn=_.hideTextInstance,fn=_.unhideInstance,mn=_.unhideTextInstance,Wn=_.clearContainer,Zn=_.cloneInstance,mr=_.createContainerChildSet,xr=_.appendChildToContainerChildSet,Ar=_.finalizeContainerChildren,Br=_.replaceContainerChildren,Dr=_.cloneHiddenInstance,Mr=_.cloneHiddenTextInstance,_r=_.canHydrateInstance,ro=_.canHydrateTextInstance,Qr=_.canHydrateSuspenseInstance,Cr=_.isSuspenseInstancePending,Nr=_.isSuspenseInstanceFallback,jr=_.registerSuspenseInstanceRetry,Or=_.getNextHydratableSibling,sr=_.getFirstHydratableChild,Kr=_.getFirstHydratableChildWithinContainer,_o=_.getFirstHydratableChildWithinSuspenseInstance,It=_.hydrateInstance,Rt=_.hydrateTextInstance,kt=_.hydrateSuspenseInstance,Jt=_.getNextHydratableInstanceAfterSuspenseInstance,Kt=_.commitHydratedContainer,Qt=_.commitHydratedSuspenseInstance,_n=_.clearSuspenseBoundary,An=_.clearSuspenseBoundaryFromContainer,Rn=_.shouldDeleteUnhydratedTailInstances,Pn=_.didNotMatchHydratedContainerTextInstance,Dn=_.didNotMatchHydratedTextInstance,cn;function Qn(ft){if(cn===void 0)try{throw Error()}catch(Et){var dt=Et.stack.trim().match(/\n( *(at )?)/);cn=dt&&dt[1]||""}return`
`+cn+ft}var Xn=!1;function Jn(ft,dt){if(!ft||Xn)return"";Xn=!0;var Et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(dt)if(dt=function(){throw Error()},Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Kn){var At=Kn}Reflect.construct(ft,[],dt)}else{try{dt.call()}catch(Kn){At=Kn}ft.call(dt.prototype)}else{try{throw Error()}catch(Kn){At=Kn}ft()}}catch(Kn){if(Kn&&At&&typeof Kn.stack=="string"){for(var Ct=Kn.stack.split(`
`),Lt=At.stack.split(`
`),Zt=Ct.length-1,ln=Lt.length-1;1<=Zt&&0<=ln&&Ct[Zt]!==Lt[ln];)ln--;for(;1<=Zt&&0<=ln;Zt--,ln--)if(Ct[Zt]!==Lt[ln]){if(Zt!==1||ln!==1)do if(Zt--,ln--,0>ln||Ct[Zt]!==Lt[ln]){var In=`
`+Ct[Zt].replace(" at new "," at ");return ft.displayName&&In.includes("<anonymous>")&&(In=In.replace("<anonymous>",ft.displayName)),In}while(1<=Zt&&0<=ln);break}}}finally{Xn=!1,Error.prepareStackTrace=Et}return(ft=ft?ft.displayName||ft.name:"")?Qn(ft):""}var ar=Object.prototype.hasOwnProperty,ur=[],or=-1;function qn(ft){return{current:ft}}function fr(ft){0>or||(ft.current=ur[or],ur[or]=null,or--)}function rr(ft,dt){or++,ur[or]=ft.current,ft.current=dt}var gr={},Ir=qn(gr),hr=qn(!1),Rr=gr;function Pr(ft,dt){var Et=ft.type.contextTypes;if(!Et)return gr;var At=ft.stateNode;if(At&&At.__reactInternalMemoizedUnmaskedChildContext===dt)return At.__reactInternalMemoizedMaskedChildContext;var Ct={},Lt;for(Lt in Et)Ct[Lt]=dt[Lt];return At&&(ft=ft.stateNode,ft.__reactInternalMemoizedUnmaskedChildContext=dt,ft.__reactInternalMemoizedMaskedChildContext=Ct),Ct}function Lr(ft){return ft=ft.childContextTypes,ft!=null}function Hr(){fr(hr),fr(Ir)}function pr(ft,dt,Et){if(Ir.current!==gr)throw Error(ot(168));rr(Ir,dt),rr(hr,Et)}function $r(ft,dt,Et){var At=ft.stateNode;if(dt=dt.childContextTypes,typeof At.getChildContext!="function")return Et;At=At.getChildContext();for(var Ct in At)if(!(Ct in dt))throw Error(ot(108,Pt(ft)||"Unknown",Ct));return it({},Et,At)}function br(ft){return ft=(ft=ft.stateNode)&&ft.__reactInternalMemoizedMergedChildContext||gr,Rr=Ir.current,rr(Ir,ft),rr(hr,hr.current),!0}function wr(ft,dt,Et){var At=ft.stateNode;if(!At)throw Error(ot(169));Et?(ft=$r(ft,dt,Rr),At.__reactInternalMemoizedMergedChildContext=ft,fr(hr),fr(Ir),rr(Ir,ft)):fr(hr),rr(hr,Et)}var kr=Math.clz32?Math.clz32:Mo,xo=Math.log,Jr=Math.LN2;function Mo(ft){return ft>>>=0,ft===0?32:31-(xo(ft)/Jr|0)|0}var Jo=64,Zo=4194304;function Qo(ft){switch(ft&-ft){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ft&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return ft&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return ft}}function ys(ft,dt){var Et=ft.pendingLanes;if(Et===0)return 0;var At=0,Ct=ft.suspendedLanes,Lt=ft.pingedLanes,Zt=Et&268435455;if(Zt!==0){var ln=Zt&~Ct;ln!==0?At=Qo(ln):(Lt&=Zt,Lt!==0&&(At=Qo(Lt)))}else Zt=Et&~Ct,Zt!==0?At=Qo(Zt):Lt!==0&&(At=Qo(Lt));if(At===0)return 0;if(dt!==0&&dt!==At&&!(dt&Ct)&&(Ct=At&-At,Lt=dt&-dt,Ct>=Lt||Ct===16&&(Lt&4194240)!==0))return dt;if(At&4&&(At|=Et&16),dt=ft.entangledLanes,dt!==0)for(ft=ft.entanglements,dt&=At;0<dt;)Et=31-kr(dt),Ct=1<<Et,At|=ft[Et],dt&=~Ct;return At}function Bl(ft,dt){switch(ft){case 1:case 2:case 4:return dt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return dt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function js(ft,dt){for(var Et=ft.suspendedLanes,At=ft.pingedLanes,Ct=ft.expirationTimes,Lt=ft.pendingLanes;0<Lt;){var Zt=31-kr(Lt),ln=1<<Zt,In=Ct[Zt];In===-1?(!(ln&Et)||ln&At)&&(Ct[Zt]=Bl(ln,dt)):In<=dt&&(ft.expiredLanes|=ln),Lt&=~ln}}function qo(ft){return ft=ft.pendingLanes&-1073741825,ft!==0?ft:ft&1073741824?1073741824:0}function Bs(ft){for(var dt=[],Et=0;31>Et;Et++)dt.push(ft);return dt}function Ho(ft,dt,Et){ft.pendingLanes|=dt,dt!==536870912&&(ft.suspendedLanes=0,ft.pingedLanes=0),ft=ft.eventTimes,dt=31-kr(dt),ft[dt]=Et}function as(ft,dt){var Et=ft.pendingLanes&~dt;ft.pendingLanes=dt,ft.suspendedLanes=0,ft.pingedLanes=0,ft.expiredLanes&=dt,ft.mutableReadLanes&=dt,ft.entangledLanes&=dt,dt=ft.entanglements;var At=ft.eventTimes;for(ft=ft.expirationTimes;0<Et;){var Ct=31-kr(Et),Lt=1<<Ct;dt[Ct]=0,At[Ct]=-1,ft[Ct]=-1,Et&=~Lt}}function Vo(ft,dt){var Et=ft.entangledLanes|=dt;for(ft=ft.entanglements;Et;){var At=31-kr(Et),Ct=1<<At;Ct&dt|ft[At]&dt&&(ft[At]|=dt),Et&=~Ct}}var Tr=0;function Xs(ft){return ft&=-ft,1<ft?4<ft?ft&268435455?16:536870912:4:1}var es=rt.unstable_scheduleCallback,Ls=rt.unstable_cancelCallback,Ks=rt.unstable_shouldYield,Ll=rt.unstable_requestPaint,Vr=rt.unstable_now,ls=rt.unstable_ImmediatePriority,Il=rt.unstable_UserBlockingPriority,mo=rt.unstable_NormalPriority,Ys=rt.unstable_IdlePriority,cs=null,Co=null;function Js(ft){if(Co&&typeof Co.onCommitFiberRoot=="function")try{Co.onCommitFiberRoot(cs,ft,void 0,(ft.current.flags&128)===128)}catch{}}function Is(ft,dt){return ft===dt&&(ft!==0||1/ft===1/dt)||ft!==ft&&dt!==dt}var bo=typeof Object.is=="function"?Object.is:Is,go=null,Wo=!1,Lo=!1;function Zs(ft){go===null?go=[ft]:go.push(ft)}function Qs(ft){Wo=!0,Zs(ft)}function Eo(){if(!Lo&&go!==null){Lo=!0;var ft=0,dt=Tr;try{var Et=go;for(Tr=1;ft<Et.length;ft++){var At=Et[ft];do At=At(!0);while(At!==null)}go=null,Wo=!1}catch(Ct){throw go!==null&&(go=go.slice(ft+1)),es(ls,Eo),Ct}finally{Tr=dt,Lo=!1}}return null}var _s=st.ReactCurrentBatchConfig;function xs(ft,dt){if(bo(ft,dt))return!0;if(typeof ft!="object"||ft===null||typeof dt!="object"||dt===null)return!1;var Et=Object.keys(ft),At=Object.keys(dt);if(Et.length!==At.length)return!1;for(At=0;At<Et.length;At++){var Ct=Et[At];if(!ar.call(dt,Ct)||!bo(ft[Ct],dt[Ct]))return!1}return!0}function Es(ft){switch(ft.tag){case 5:return Qn(ft.type);case 16:return Qn("Lazy");case 13:return Qn("Suspense");case 19:return Qn("SuspenseList");case 0:case 2:case 15:return ft=Jn(ft.type,!1),ft;case 11:return ft=Jn(ft.type.render,!1),ft;case 1:return ft=Jn(ft.type,!0),ft;default:return""}}function co(ft,dt){if(ft&&ft.defaultProps){dt=it({},dt),ft=ft.defaultProps;for(var Et in ft)dt[Et]===void 0&&(dt[Et]=ft[Et]);return dt}return dt}var io=qn(null),Ds=null,$o=null,us=null;function Os(){us=$o=Ds=null}function Dl(ft,dt,Et){Nn?(rr(io,dt._currentValue),dt._currentValue=Et):(rr(io,dt._currentValue2),dt._currentValue2=Et)}function jo(ft){var dt=io.current;fr(io),Nn?ft._currentValue=dt:ft._currentValue2=dt}function qr(ft,dt,Et){for(;ft!==null;){var At=ft.alternate;if((ft.childLanes&dt)!==dt?(ft.childLanes|=dt,At!==null&&(At.childLanes|=dt)):At!==null&&(At.childLanes&dt)!==dt&&(At.childLanes|=dt),ft===Et)break;ft=ft.return}}function oo(ft,dt){Ds=ft,us=$o=null,ft=ft.dependencies,ft!==null&&ft.firstContext!==null&&(ft.lanes&dt&&(Po=!0),ft.firstContext=null)}function Gr(ft){var dt=Nn?ft._currentValue:ft._currentValue2;if(us!==ft)if(ft={context:ft,memoizedValue:dt,next:null},$o===null){if(Ds===null)throw Error(ot(308));$o=ft,Ds.dependencies={lanes:0,firstContext:ft}}else $o=$o.next=ft;return dt}var to=null,Go=!1;function Eu(ft){ft.updateQueue={baseState:ft.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dp(ft,dt){ft=ft.updateQueue,dt.updateQueue===ft&&(dt.updateQueue={baseState:ft.baseState,firstBaseUpdate:ft.firstBaseUpdate,lastBaseUpdate:ft.lastBaseUpdate,shared:ft.shared,effects:ft.effects})}function ts(ft,dt){return{eventTime:ft,lane:dt,tag:0,payload:null,callback:null,next:null}}function fs(ft,dt){var Et=ft.updateQueue;Et!==null&&(Et=Et.shared,_i!==null&&ft.mode&1&&!(Sr&2)?(ft=Et.interleaved,ft===null?(dt.next=dt,to===null?to=[Et]:to.push(Et)):(dt.next=ft.next,ft.next=dt),Et.interleaved=dt):(ft=Et.pending,ft===null?dt.next=dt:(dt.next=ft.next,ft.next=dt),Et.pending=dt))}function Ol(ft,dt,Et){if(dt=dt.updateQueue,dt!==null&&(dt=dt.shared,(Et&4194240)!==0)){var At=dt.lanes;At&=ft.pendingLanes,Et|=At,dt.lanes=Et,Vo(ft,Et)}}function hp(ft,dt){var Et=ft.updateQueue,At=ft.alternate;if(At!==null&&(At=At.updateQueue,Et===At)){var Ct=null,Lt=null;if(Et=Et.firstBaseUpdate,Et!==null){do{var Zt={eventTime:Et.eventTime,lane:Et.lane,tag:Et.tag,payload:Et.payload,callback:Et.callback,next:null};Lt===null?Ct=Lt=Zt:Lt=Lt.next=Zt,Et=Et.next}while(Et!==null);Lt===null?Ct=Lt=dt:Lt=Lt.next=dt}else Ct=Lt=dt;Et={baseState:At.baseState,firstBaseUpdate:Ct,lastBaseUpdate:Lt,shared:At.shared,effects:At.effects},ft.updateQueue=Et;return}ft=Et.lastBaseUpdate,ft===null?Et.firstBaseUpdate=dt:ft.next=dt,Et.lastBaseUpdate=dt}function Fl(ft,dt,Et,At){var Ct=ft.updateQueue;Go=!1;var Lt=Ct.firstBaseUpdate,Zt=Ct.lastBaseUpdate,ln=Ct.shared.pending;if(ln!==null){Ct.shared.pending=null;var In=ln,Kn=In.next;In.next=null,Zt===null?Lt=Kn:Zt.next=Kn,Zt=In;var ir=ft.alternate;ir!==null&&(ir=ir.updateQueue,ln=ir.lastBaseUpdate,ln!==Zt&&(ln===null?ir.firstBaseUpdate=Kn:ln.next=Kn,ir.lastBaseUpdate=In))}if(Lt!==null){var vr=Ct.baseState;Zt=0,ir=Kn=In=null,ln=Lt;do{var dr=ln.lane,zr=ln.eventTime;if((At&dr)===dr){ir!==null&&(ir=ir.next={eventTime:zr,lane:0,tag:ln.tag,payload:ln.payload,callback:ln.callback,next:null});e:{var cr=ft,po=ln;switch(dr=dt,zr=Et,po.tag){case 1:if(cr=po.payload,typeof cr=="function"){vr=cr.call(zr,vr,dr);break e}vr=cr;break e;case 3:cr.flags=cr.flags&-65537|128;case 0:if(cr=po.payload,dr=typeof cr=="function"?cr.call(zr,vr,dr):cr,dr==null)break e;vr=it({},vr,dr);break e;case 2:Go=!0}}ln.callback!==null&&ln.lane!==0&&(ft.flags|=64,dr=Ct.effects,dr===null?Ct.effects=[ln]:dr.push(ln))}else zr={eventTime:zr,lane:dr,tag:ln.tag,payload:ln.payload,callback:ln.callback,next:null},ir===null?(Kn=ir=zr,In=vr):ir=ir.next=zr,Zt|=dr;if(ln=ln.next,ln===null){if(ln=Ct.shared.pending,ln===null)break;dr=ln,ln=dr.next,dr.next=null,Ct.lastBaseUpdate=dr,Ct.shared.pending=null}}while(1);if(ir===null&&(In=vr),Ct.baseState=In,Ct.firstBaseUpdate=Kn,Ct.lastBaseUpdate=ir,dt=Ct.shared.interleaved,dt!==null){Ct=dt;do Zt|=Ct.lane,Ct=Ct.next;while(Ct!==dt)}else Lt===null&&(Ct.shared.lanes=0);Vs|=Zt,ft.lanes=Zt,ft.memoizedState=vr}}function pp(ft,dt,Et){if(ft=dt.effects,dt.effects=null,ft!==null)for(dt=0;dt<ft.length;dt++){var At=ft[dt],Ct=At.callback;if(Ct!==null){if(At.callback=null,At=Et,typeof Ct!="function")throw Error(ot(191,Ct));Ct.call(At)}}}var mp=new nt.Component().refs;function Su(ft,dt,Et,At){dt=ft.memoizedState,Et=Et(At,dt),Et=Et==null?dt:it({},dt,Et),ft.memoizedState=Et,ft.lanes===0&&(ft.updateQueue.baseState=Et)}var Ul={isMounted:function(ft){return(ft=ft._reactInternals)?wt(ft)===ft:!1},enqueueSetState:function(ft,dt,Et){ft=ft._reactInternals;var At=yo(),Ct=ps(ft),Lt=ts(At,Ct);Lt.payload=dt,Et!=null&&(Lt.callback=Et),fs(ft,Lt),dt=Uo(ft,Ct,At),dt!==null&&Ol(dt,ft,Ct)},enqueueReplaceState:function(ft,dt,Et){ft=ft._reactInternals;var At=yo(),Ct=ps(ft),Lt=ts(At,Ct);Lt.tag=1,Lt.payload=dt,Et!=null&&(Lt.callback=Et),fs(ft,Lt),dt=Uo(ft,Ct,At),dt!==null&&Ol(dt,ft,Ct)},enqueueForceUpdate:function(ft,dt){ft=ft._reactInternals;var Et=yo(),At=ps(ft),Ct=ts(Et,At);Ct.tag=2,dt!=null&&(Ct.callback=dt),fs(ft,Ct),dt=Uo(ft,At,Et),dt!==null&&Ol(dt,ft,At)}};function gp(ft,dt,Et,At,Ct,Lt,Zt){return ft=ft.stateNode,typeof ft.shouldComponentUpdate=="function"?ft.shouldComponentUpdate(At,Lt,Zt):dt.prototype&&dt.prototype.isPureReactComponent?!xs(Et,At)||!xs(Ct,Lt):!0}function vp(ft,dt,Et){var At=!1,Ct=gr,Lt=dt.contextType;return typeof Lt=="object"&&Lt!==null?Lt=Gr(Lt):(Ct=Lr(dt)?Rr:Ir.current,At=dt.contextTypes,Lt=(At=At!=null)?Pr(ft,Ct):gr),dt=new dt(Et,Lt),ft.memoizedState=dt.state!==null&&dt.state!==void 0?dt.state:null,dt.updater=Ul,ft.stateNode=dt,dt._reactInternals=ft,At&&(ft=ft.stateNode,ft.__reactInternalMemoizedUnmaskedChildContext=Ct,ft.__reactInternalMemoizedMaskedChildContext=Lt),dt}function yp(ft,dt,Et,At){ft=dt.state,typeof dt.componentWillReceiveProps=="function"&&dt.componentWillReceiveProps(Et,At),typeof dt.UNSAFE_componentWillReceiveProps=="function"&&dt.UNSAFE_componentWillReceiveProps(Et,At),dt.state!==ft&&Ul.enqueueReplaceState(dt,dt.state,null)}function Au(ft,dt,Et,At){var Ct=ft.stateNode;Ct.props=Et,Ct.state=ft.memoizedState,Ct.refs=mp,Eu(ft);var Lt=dt.contextType;typeof Lt=="object"&&Lt!==null?Ct.context=Gr(Lt):(Lt=Lr(dt)?Rr:Ir.current,Ct.context=Pr(ft,Lt)),Ct.state=ft.memoizedState,Lt=dt.getDerivedStateFromProps,typeof Lt=="function"&&(Su(ft,dt,Lt,Et),Ct.state=ft.memoizedState),typeof dt.getDerivedStateFromProps=="function"||typeof Ct.getSnapshotBeforeUpdate=="function"||typeof Ct.UNSAFE_componentWillMount!="function"&&typeof Ct.componentWillMount!="function"||(dt=Ct.state,typeof Ct.componentWillMount=="function"&&Ct.componentWillMount(),typeof Ct.UNSAFE_componentWillMount=="function"&&Ct.UNSAFE_componentWillMount(),dt!==Ct.state&&Ul.enqueueReplaceState(Ct,Ct.state,null),Fl(ft,Et,Ct,At),Ct.state=ft.memoizedState),typeof Ct.componentDidMount=="function"&&(ft.flags|=4194308)}var Fs=[],Us=0,Nl=null,$l=0,Io=[],Do=0,Ss=null,ns=1,rs="";function As(ft,dt){Fs[Us++]=$l,Fs[Us++]=Nl,Nl=ft,$l=dt}function _p(ft,dt,Et){Io[Do++]=ns,Io[Do++]=rs,Io[Do++]=Ss,Ss=ft;var At=ns;ft=rs;var Ct=32-kr(At)-1;At&=~(1<<Ct),Et+=1;var Lt=32-kr(dt)+Ct;if(30<Lt){var Zt=Ct-Ct%5;Lt=(At&(1<<Zt)-1).toString(32),At>>=Zt,Ct-=Zt,ns=1<<32-kr(dt)+Ct|Et<<Ct|At,rs=Lt+ft}else ns=1<<Lt|Et<<Ct|At,rs=ft}function Tu(ft){ft.return!==null&&(As(ft,1),_p(ft,1,0))}function Mu(ft){for(;ft===Nl;)Nl=Fs[--Us],Fs[Us]=null,$l=Fs[--Us],Fs[Us]=null;for(;ft===Ss;)Ss=Io[--Do],Io[Do]=null,rs=Io[--Do],Io[Do]=null,ns=Io[--Do],Io[Do]=null}var wo=null,Ro=null,Wr=!1,qs=!1,zo=null;function xp(ft,dt){var Et=ko(5,null,null,0);Et.elementType="DELETED",Et.stateNode=dt,Et.return=ft,dt=ft.deletions,dt===null?(ft.deletions=[Et],ft.flags|=16):dt.push(Et)}function Ep(ft,dt){switch(ft.tag){case 5:return dt=_r(dt,ft.type,ft.pendingProps),dt!==null?(ft.stateNode=dt,wo=ft,Ro=sr(dt),!0):!1;case 6:return dt=ro(dt,ft.pendingProps),dt!==null?(ft.stateNode=dt,wo=ft,Ro=null,!0):!1;case 13:if(dt=Qr(dt),dt!==null){var Et=Ss!==null?{id:ns,overflow:rs}:null;return ft.memoizedState={dehydrated:dt,treeContext:Et,retryLane:1073741824},Et=ko(18,null,null,0),Et.stateNode=dt,Et.return=ft,ft.child=Et,wo=ft,Ro=null,!0}return!1;default:return!1}}function Cu(ft){return(ft.mode&1)!==0&&(ft.flags&128)===0}function bu(ft){if(Wr){var dt=Ro;if(dt){var Et=dt;if(!Ep(ft,dt)){if(Cu(ft))throw Error(ot(418));dt=Or(Et);var At=wo;dt&&Ep(ft,dt)?xp(At,Et):(ft.flags=ft.flags&-4097|2,Wr=!1,wo=ft)}}else{if(Cu(ft))throw Error(ot(418));ft.flags=ft.flags&-4097|2,Wr=!1,wo=ft}}}function Sp(ft){for(ft=ft.return;ft!==null&&ft.tag!==5&&ft.tag!==3&&ft.tag!==13;)ft=ft.return;wo=ft}function na(ft){if(!xn||ft!==wo)return!1;if(!Wr)return Sp(ft),Wr=!0,!1;if(ft.tag!==3&&(ft.tag!==5||Rn(ft.type)&&!sn(ft.type,ft.memoizedProps))){var dt=Ro;if(dt){if(Cu(ft)){for(ft=Ro;ft;)ft=Or(ft);throw Error(ot(418))}for(;dt;)xp(ft,dt),dt=Or(dt)}}if(Sp(ft),ft.tag===13){if(!xn)throw Error(ot(316));if(ft=ft.memoizedState,ft=ft!==null?ft.dehydrated:null,!ft)throw Error(ot(317));Ro=Jt(ft)}else Ro=wo?Or(ft.stateNode):null;return!0}function ks(){xn&&(Ro=wo=null,qs=Wr=!1)}function wu(ft){zo===null?zo=[ft]:zo.push(ft)}function ga(ft,dt,Et){if(ft=Et.ref,ft!==null&&typeof ft!="function"&&typeof ft!="object"){if(Et._owner){if(Et=Et._owner,Et){if(Et.tag!==1)throw Error(ot(309));var At=Et.stateNode}if(!At)throw Error(ot(147,ft));var Ct=At,Lt=""+ft;return dt!==null&&dt.ref!==null&&typeof dt.ref=="function"&&dt.ref._stringRef===Lt?dt.ref:(dt=function(Zt){var ln=Ct.refs;ln===mp&&(ln=Ct.refs={}),Zt===null?delete ln[Lt]:ln[Lt]=Zt},dt._stringRef=Lt,dt)}if(typeof ft!="string")throw Error(ot(284));if(!Et._owner)throw Error(ot(290,ft))}return ft}function Gl(ft,dt){throw ft=Object.prototype.toString.call(dt),Error(ot(31,ft==="[object Object]"?"object with keys {"+Object.keys(dt).join(", ")+"}":ft))}function Ap(ft){var dt=ft._init;return dt(ft._payload)}function Tp(ft){function dt(Tn,un){if(ft){var Cn=Tn.deletions;Cn===null?(Tn.deletions=[un],Tn.flags|=16):Cn.push(un)}}function Et(Tn,un){if(!ft)return null;for(;un!==null;)dt(Tn,un),un=un.sibling;return null}function At(Tn,un){for(Tn=new Map;un!==null;)un.key!==null?Tn.set(un.key,un):Tn.set(un.index,un),un=un.sibling;return Tn}function Ct(Tn,un){return Tn=gs(Tn,un),Tn.index=0,Tn.sibling=null,Tn}function Lt(Tn,un,Cn){return Tn.index=Cn,ft?(Cn=Tn.alternate,Cn!==null?(Cn=Cn.index,Cn<un?(Tn.flags|=2,un):Cn):(Tn.flags|=2,un)):(Tn.flags|=1048576,un)}function Zt(Tn){return ft&&Tn.alternate===null&&(Tn.flags|=2),Tn}function ln(Tn,un,Cn,tr){return un===null||un.tag!==6?(un=lp(Cn,Tn.mode,tr),un.return=Tn,un):(un=Ct(un,Cn),un.return=Tn,un)}function In(Tn,un,Cn,tr){var lr=Cn.type;return lr===ct?ir(Tn,un,Cn.props.children,tr,Cn.key):un!==null&&(un.elementType===lr||typeof lr=="object"&&lr!==null&&lr.$$typeof===xt&&Ap(lr)===un.type)?(tr=Ct(un,Cn.props),tr.ref=ga(Tn,un,Cn),tr.return=Tn,tr):(tr=_u(Cn.type,Cn.key,Cn.props,null,Tn.mode,tr),tr.ref=ga(Tn,un,Cn),tr.return=Tn,tr)}function Kn(Tn,un,Cn,tr){return un===null||un.tag!==4||un.stateNode.containerInfo!==Cn.containerInfo||un.stateNode.implementation!==Cn.implementation?(un=cp(Cn,Tn.mode,tr),un.return=Tn,un):(un=Ct(un,Cn.children||[]),un.return=Tn,un)}function ir(Tn,un,Cn,tr,lr){return un===null||un.tag!==7?(un=Ps(Cn,Tn.mode,tr,lr),un.return=Tn,un):(un=Ct(un,Cn),un.return=Tn,un)}function vr(Tn,un,Cn){if(typeof un=="string"&&un!==""||typeof un=="number")return un=lp(""+un,Tn.mode,Cn),un.return=Tn,un;if(typeof un=="object"&&un!==null){switch(un.$$typeof){case at:return Cn=_u(un.type,un.key,un.props,null,Tn.mode,Cn),Cn.ref=ga(Tn,null,un),Cn.return=Tn,Cn;case lt:return un=cp(un,Tn.mode,Cn),un.return=Tn,un;case xt:var tr=un._init;return vr(Tn,tr(un._payload),Cn)}if(jt(un)||Mt(un))return un=Ps(un,Tn.mode,Cn,null),un.return=Tn,un;Gl(Tn,un)}return null}function dr(Tn,un,Cn,tr){var lr=un!==null?un.key:null;if(typeof Cn=="string"&&Cn!==""||typeof Cn=="number")return lr!==null?null:ln(Tn,un,""+Cn,tr);if(typeof Cn=="object"&&Cn!==null){switch(Cn.$$typeof){case at:return Cn.key===lr?In(Tn,un,Cn,tr):null;case lt:return Cn.key===lr?Kn(Tn,un,Cn,tr):null;case xt:return lr=Cn._init,dr(Tn,un,lr(Cn._payload),tr)}if(jt(Cn)||Mt(Cn))return lr!==null?null:ir(Tn,un,Cn,tr,null);Gl(Tn,Cn)}return null}function zr(Tn,un,Cn,tr,lr){if(typeof tr=="string"&&tr!==""||typeof tr=="number")return Tn=Tn.get(Cn)||null,ln(un,Tn,""+tr,lr);if(typeof tr=="object"&&tr!==null){switch(tr.$$typeof){case at:return Tn=Tn.get(tr.key===null?Cn:tr.key)||null,In(un,Tn,tr,lr);case lt:return Tn=Tn.get(tr.key===null?Cn:tr.key)||null,Kn(un,Tn,tr,lr);case xt:var Er=tr._init;return zr(Tn,un,Cn,Er(tr._payload),lr)}if(jt(tr)||Mt(tr))return Tn=Tn.get(Cn)||null,ir(un,Tn,tr,lr,null);Gl(un,tr)}return null}function cr(Tn,un,Cn,tr){for(var lr=null,Er=null,yr=un,Fr=un=0,ao=null;yr!==null&&Fr<Cn.length;Fr++){yr.index>Fr?(ao=yr,yr=null):ao=yr.sibling;var Ur=dr(Tn,yr,Cn[Fr],tr);if(Ur===null){yr===null&&(yr=ao);break}ft&&yr&&Ur.alternate===null&&dt(Tn,yr),un=Lt(Ur,un,Fr),Er===null?lr=Ur:Er.sibling=Ur,Er=Ur,yr=ao}if(Fr===Cn.length)return Et(Tn,yr),Wr&&As(Tn,Fr),lr;if(yr===null){for(;Fr<Cn.length;Fr++)yr=vr(Tn,Cn[Fr],tr),yr!==null&&(un=Lt(yr,un,Fr),Er===null?lr=yr:Er.sibling=yr,Er=yr);return Wr&&As(Tn,Fr),lr}for(yr=At(Tn,yr);Fr<Cn.length;Fr++)ao=zr(yr,Tn,Fr,Cn[Fr],tr),ao!==null&&(ft&&ao.alternate!==null&&yr.delete(ao.key===null?Fr:ao.key),un=Lt(ao,un,Fr),Er===null?lr=ao:Er.sibling=ao,Er=ao);return ft&&yr.forEach(function(vs){return dt(Tn,vs)}),Wr&&As(Tn,Fr),lr}function po(Tn,un,Cn,tr){var lr=Mt(Cn);if(typeof lr!="function")throw Error(ot(150));if(Cn=lr.call(Cn),Cn==null)throw Error(ot(151));for(var Er=lr=null,yr=un,Fr=un=0,ao=null,Ur=Cn.next();yr!==null&&!Ur.done;Fr++,Ur=Cn.next()){yr.index>Fr?(ao=yr,yr=null):ao=yr.sibling;var vs=dr(Tn,yr,Ur.value,tr);if(vs===null){yr===null&&(yr=ao);break}ft&&yr&&vs.alternate===null&&dt(Tn,yr),un=Lt(vs,un,Fr),Er===null?lr=vs:Er.sibling=vs,Er=vs,yr=ao}if(Ur.done)return Et(Tn,yr),Wr&&As(Tn,Fr),lr;if(yr===null){for(;!Ur.done;Fr++,Ur=Cn.next())Ur=vr(Tn,Ur.value,tr),Ur!==null&&(un=Lt(Ur,un,Fr),Er===null?lr=Ur:Er.sibling=Ur,Er=Ur);return Wr&&As(Tn,Fr),lr}for(yr=At(Tn,yr);!Ur.done;Fr++,Ur=Cn.next())Ur=zr(yr,Tn,Fr,Ur.value,tr),Ur!==null&&(ft&&Ur.alternate!==null&&yr.delete(Ur.key===null?Fr:Ur.key),un=Lt(Ur,un,Fr),Er===null?lr=Ur:Er.sibling=Ur,Er=Ur);return ft&&yr.forEach(function(hv){return dt(Tn,hv)}),Wr&&As(Tn,Fr),lr}function No(Tn,un,Cn,tr){if(typeof Cn=="object"&&Cn!==null&&Cn.type===ct&&Cn.key===null&&(Cn=Cn.props.children),typeof Cn=="object"&&Cn!==null){switch(Cn.$$typeof){case at:e:{for(var lr=Cn.key,Er=un;Er!==null;){if(Er.key===lr){if(lr=Cn.type,lr===ct){if(Er.tag===7){Et(Tn,Er.sibling),un=Ct(Er,Cn.props.children),un.return=Tn,Tn=un;break e}}else if(Er.elementType===lr||typeof lr=="object"&&lr!==null&&lr.$$typeof===xt&&Ap(lr)===Er.type){Et(Tn,Er.sibling),un=Ct(Er,Cn.props),un.ref=ga(Tn,Er,Cn),un.return=Tn,Tn=un;break e}Et(Tn,Er);break}else dt(Tn,Er);Er=Er.sibling}Cn.type===ct?(un=Ps(Cn.props.children,Tn.mode,tr,Cn.key),un.return=Tn,Tn=un):(tr=_u(Cn.type,Cn.key,Cn.props,null,Tn.mode,tr),tr.ref=ga(Tn,un,Cn),tr.return=Tn,Tn=tr)}return Zt(Tn);case lt:e:{for(Er=Cn.key;un!==null;){if(un.key===Er)if(un.tag===4&&un.stateNode.containerInfo===Cn.containerInfo&&un.stateNode.implementation===Cn.implementation){Et(Tn,un.sibling),un=Ct(un,Cn.children||[]),un.return=Tn,Tn=un;break e}else{Et(Tn,un);break}else dt(Tn,un);un=un.sibling}un=cp(Cn,Tn.mode,tr),un.return=Tn,Tn=un}return Zt(Tn);case xt:return Er=Cn._init,No(Tn,un,Er(Cn._payload),tr)}if(jt(Cn))return cr(Tn,un,Cn,tr);if(Mt(Cn))return po(Tn,un,Cn,tr);Gl(Tn,Cn)}return typeof Cn=="string"&&Cn!==""||typeof Cn=="number"?(Cn=""+Cn,un!==null&&un.tag===6?(Et(Tn,un.sibling),un=Ct(un,Cn),un.return=Tn,Tn=un):(Et(Tn,un),un=lp(Cn,Tn.mode,tr),un.return=Tn,Tn=un),Zt(Tn)):Et(Tn,un)}return No}var Ns=Tp(!0),Mp=Tp(!1),xa={},Oo=qn(xa),ba=qn(xa),$s=qn(xa);function Xo(ft){if(ft===xa)throw Error(ot(174));return ft}function Ru(ft,dt){rr($s,dt),rr(ba,ft),rr(Oo,xa),ft=qt(dt),fr(Oo),rr(Oo,ft)}function Gs(){fr(Oo),fr(ba),fr($s)}function Cp(ft){var dt=Xo($s.current),Et=Xo(Oo.current);dt=Gt(Et,ft.type,dt),Et!==dt&&(rr(ba,ft),rr(Oo,dt))}function Pu(ft){ba.current===ft&&(fr(Oo),fr(ba))}var Xr=qn(0);function zl(ft){for(var dt=ft;dt!==null;){if(dt.tag===13){var Et=dt.memoizedState;if(Et!==null&&(Et=Et.dehydrated,Et===null||Cr(Et)||Nr(Et)))return dt}else if(dt.tag===19&&dt.memoizedProps.revealOrder!==void 0){if(dt.flags&128)return dt}else if(dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===ft)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===ft)return null;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}return null}var Bu=[];function Lu(){for(var ft=0;ft<Bu.length;ft++){var dt=Bu[ft];Nn?dt._workInProgressVersionPrimary=null:dt._workInProgressVersionSecondary=null}Bu.length=0}var Hl=st.ReactCurrentDispatcher,Fo=st.ReactCurrentBatchConfig,zs=0,Yr=null,uo=null,so=null,Vl=!1,$a=!1,yl=0,Nm=0;function fo(){throw Error(ot(321))}function Iu(ft,dt){if(dt===null)return!1;for(var Et=0;Et<dt.length&&Et<ft.length;Et++)if(!bo(ft[Et],dt[Et]))return!1;return!0}function Du(ft,dt,Et,At,Ct,Lt){if(zs=Lt,Yr=dt,dt.memoizedState=null,dt.updateQueue=null,dt.lanes=0,Hl.current=ft===null||ft.memoizedState===null?Hm:Vm,ft=Et(At,Ct),$a){Lt=0;do{if($a=!1,yl=0,25<=Lt)throw Error(ot(301));Lt+=1,so=uo=null,dt.updateQueue=null,Hl.current=Wm,ft=Et(At,Ct)}while($a)}if(Hl.current=Jl,dt=uo!==null&&uo.next!==null,zs=0,so=uo=Yr=null,Vl=!1,dt)throw Error(ot(300));return ft}function Ou(){var ft=yl!==0;return yl=0,ft}function os(){var ft={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return so===null?Yr.memoizedState=so=ft:so=so.next=ft,so}function Ko(){if(uo===null){var ft=Yr.alternate;ft=ft!==null?ft.memoizedState:null}else ft=uo.next;var dt=so===null?Yr.memoizedState:so.next;if(dt!==null)so=dt,uo=ft;else{if(ft===null)throw Error(ot(310));uo=ft,ft={memoizedState:uo.memoizedState,baseState:uo.baseState,baseQueue:uo.baseQueue,queue:uo.queue,next:null},so===null?Yr.memoizedState=so=ft:so=so.next=ft}return so}function Ts(ft,dt){return typeof dt=="function"?dt(ft):dt}function Wl(ft){var dt=Ko(),Et=dt.queue;if(Et===null)throw Error(ot(311));Et.lastRenderedReducer=ft;var At=uo,Ct=At.baseQueue,Lt=Et.pending;if(Lt!==null){if(Ct!==null){var Zt=Ct.next;Ct.next=Lt.next,Lt.next=Zt}At.baseQueue=Ct=Lt,Et.pending=null}if(Ct!==null){Lt=Ct.next,At=At.baseState;var ln=Zt=null,In=null,Kn=Lt;do{var ir=Kn.lane;if((zs&ir)===ir)In!==null&&(In=In.next={lane:0,action:Kn.action,hasEagerState:Kn.hasEagerState,eagerState:Kn.eagerState,next:null}),At=Kn.hasEagerState?Kn.eagerState:ft(At,Kn.action);else{var vr={lane:ir,action:Kn.action,hasEagerState:Kn.hasEagerState,eagerState:Kn.eagerState,next:null};In===null?(ln=In=vr,Zt=At):In=In.next=vr,Yr.lanes|=ir,Vs|=ir}Kn=Kn.next}while(Kn!==null&&Kn!==Lt);In===null?Zt=At:In.next=ln,bo(At,dt.memoizedState)||(Po=!0),dt.memoizedState=At,dt.baseState=Zt,dt.baseQueue=In,Et.lastRenderedState=At}if(ft=Et.interleaved,ft!==null){Ct=ft;do Lt=Ct.lane,Yr.lanes|=Lt,Vs|=Lt,Ct=Ct.next;while(Ct!==ft)}else Ct===null&&(Et.lanes=0);return[dt.memoizedState,Et.dispatch]}function Xl(ft){var dt=Ko(),Et=dt.queue;if(Et===null)throw Error(ot(311));Et.lastRenderedReducer=ft;var At=Et.dispatch,Ct=Et.pending,Lt=dt.memoizedState;if(Ct!==null){Et.pending=null;var Zt=Ct=Ct.next;do Lt=ft(Lt,Zt.action),Zt=Zt.next;while(Zt!==Ct);bo(Lt,dt.memoizedState)||(Po=!0),dt.memoizedState=Lt,dt.baseQueue===null&&(dt.baseState=Lt),Et.lastRenderedState=Lt}return[Lt,At]}function bp(){}function wp(ft,dt){var Et=Yr,At=Ko(),Ct=dt(),Lt=!bo(At.memoizedState,Ct);if(Lt&&(At.memoizedState=Ct,Po=!0),At=At.queue,xl(Bp.bind(null,Et,At,ft),[ft]),At.getSnapshot!==dt||Lt||so!==null&&so.memoizedState.tag&1){if(Et.flags|=2048,_l(9,Pp.bind(null,Et,At,Ct,dt),void 0,null),_i===null)throw Error(ot(349));zs&30||Rp(Et,dt,Ct)}return Ct}function Rp(ft,dt,Et){ft.flags|=16384,ft={getSnapshot:dt,value:Et},dt=Yr.updateQueue,dt===null?(dt={lastEffect:null,stores:null},Yr.updateQueue=dt,dt.stores=[ft]):(Et=dt.stores,Et===null?dt.stores=[ft]:Et.push(ft))}function Pp(ft,dt,Et,At){dt.value=Et,dt.getSnapshot=At,Lp(dt)&&Uo(ft,1,-1)}function Bp(ft,dt,Et){return Et(function(){Lp(dt)&&Uo(ft,1,-1)})}function Lp(ft){var dt=ft.getSnapshot;ft=ft.value;try{var Et=dt();return!bo(ft,Et)}catch{return!0}}function Fu(ft){var dt=os();return typeof ft=="function"&&(ft=ft()),dt.memoizedState=dt.baseState=ft,ft={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:ft},dt.queue=ft,ft=ft.dispatch=zm.bind(null,Yr,ft),[dt.memoizedState,ft]}function _l(ft,dt,Et,At){return ft={tag:ft,create:dt,destroy:Et,deps:At,next:null},dt=Yr.updateQueue,dt===null?(dt={lastEffect:null,stores:null},Yr.updateQueue=dt,dt.lastEffect=ft.next=ft):(Et=dt.lastEffect,Et===null?dt.lastEffect=ft.next=ft:(At=Et.next,Et.next=ft,ft.next=At,dt.lastEffect=ft)),ft}function Ip(){return Ko().memoizedState}function Kl(ft,dt,Et,At){var Ct=os();Yr.flags|=ft,Ct.memoizedState=_l(1|dt,Et,void 0,At===void 0?null:At)}function Yl(ft,dt,Et,At){var Ct=Ko();At=At===void 0?null:At;var Lt=void 0;if(uo!==null){var Zt=uo.memoizedState;if(Lt=Zt.destroy,At!==null&&Iu(At,Zt.deps)){Ct.memoizedState=_l(dt,Et,Lt,At);return}}Yr.flags|=ft,Ct.memoizedState=_l(1|dt,Et,Lt,At)}function Uu(ft,dt){return Kl(8390656,8,ft,dt)}function xl(ft,dt){return Yl(2048,8,ft,dt)}function Dp(ft,dt){return Yl(4,2,ft,dt)}function Op(ft,dt){return Yl(4,4,ft,dt)}function Fp(ft,dt){if(typeof dt=="function")return ft=ft(),dt(ft),function(){dt(null)};if(dt!=null)return ft=ft(),dt.current=ft,function(){dt.current=null}}function Up(ft,dt,Et){return Et=Et!=null?Et.concat([ft]):null,Yl(4,4,Fp.bind(null,dt,ft),Et)}function ku(){}function kp(ft,dt){var Et=Ko();dt=dt===void 0?null:dt;var At=Et.memoizedState;return At!==null&&dt!==null&&Iu(dt,At[1])?At[0]:(Et.memoizedState=[ft,dt],ft)}function Np(ft,dt){var Et=Ko();dt=dt===void 0?null:dt;var At=Et.memoizedState;return At!==null&&dt!==null&&Iu(dt,At[1])?At[0]:(ft=ft(),Et.memoizedState=[ft,dt],ft)}function $m(ft,dt){var Et=Tr;Tr=Et!==0&&4>Et?Et:4,ft(!0);var At=Fo.transition;Fo.transition={};try{ft(!1),dt()}finally{Tr=Et,Fo.transition=At}}function $p(){return Ko().memoizedState}function Gm(ft,dt,Et){var At=ps(ft);Et={lane:At,action:Et,hasEagerState:!1,eagerState:null,next:null},Gp(ft)?zp(dt,Et):(Hp(ft,dt,Et),Et=yo(),ft=Uo(ft,At,Et),ft!==null&&Vp(ft,dt,At))}function zm(ft,dt,Et){var At=ps(ft),Ct={lane:At,action:Et,hasEagerState:!1,eagerState:null,next:null};if(Gp(ft))zp(dt,Ct);else{Hp(ft,dt,Ct);var Lt=ft.alternate;if(ft.lanes===0&&(Lt===null||Lt.lanes===0)&&(Lt=dt.lastRenderedReducer,Lt!==null))try{var Zt=dt.lastRenderedState,ln=Lt(Zt,Et);if(Ct.hasEagerState=!0,Ct.eagerState=ln,bo(ln,Zt))return}catch{}finally{}Et=yo(),ft=Uo(ft,At,Et),ft!==null&&Vp(ft,dt,At)}}function Gp(ft){var dt=ft.alternate;return ft===Yr||dt!==null&&dt===Yr}function zp(ft,dt){$a=Vl=!0;var Et=ft.pending;Et===null?dt.next=dt:(dt.next=Et.next,Et.next=dt),ft.pending=dt}function Hp(ft,dt,Et){_i!==null&&ft.mode&1&&!(Sr&2)?(ft=dt.interleaved,ft===null?(Et.next=Et,to===null?to=[dt]:to.push(dt)):(Et.next=ft.next,ft.next=Et),dt.interleaved=Et):(ft=dt.pending,ft===null?Et.next=Et:(Et.next=ft.next,ft.next=Et),dt.pending=Et)}function Vp(ft,dt,Et){if(Et&4194240){var At=dt.lanes;At&=ft.pendingLanes,Et|=At,dt.lanes=Et,Vo(ft,Et)}}var Jl={readContext:Gr,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},Hm={readContext:Gr,useCallback:function(ft,dt){return os().memoizedState=[ft,dt===void 0?null:dt],ft},useContext:Gr,useEffect:Uu,useImperativeHandle:function(ft,dt,Et){return Et=Et!=null?Et.concat([ft]):null,Kl(4194308,4,Fp.bind(null,dt,ft),Et)},useLayoutEffect:function(ft,dt){return Kl(4194308,4,ft,dt)},useInsertionEffect:function(ft,dt){return Kl(4,2,ft,dt)},useMemo:function(ft,dt){var Et=os();return dt=dt===void 0?null:dt,ft=ft(),Et.memoizedState=[ft,dt],ft},useReducer:function(ft,dt,Et){var At=os();return dt=Et!==void 0?Et(dt):dt,At.memoizedState=At.baseState=dt,ft={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:dt},At.queue=ft,ft=ft.dispatch=Gm.bind(null,Yr,ft),[At.memoizedState,ft]},useRef:function(ft){var dt=os();return ft={current:ft},dt.memoizedState=ft},useState:Fu,useDebugValue:ku,useDeferredValue:function(ft){var dt=Fu(ft),Et=dt[0],At=dt[1];return Uu(function(){var Ct=Fo.transition;Fo.transition={};try{At(ft)}finally{Fo.transition=Ct}},[ft]),Et},useTransition:function(){var ft=Fu(!1),dt=ft[0];return ft=$m.bind(null,ft[1]),os().memoizedState=ft,[dt,ft]},useMutableSource:function(){},useSyncExternalStore:function(ft,dt,Et){var At=Yr,Ct=os();if(Wr){if(Et===void 0)throw Error(ot(407));Et=Et()}else{if(Et=dt(),_i===null)throw Error(ot(349));zs&30||Rp(At,dt,Et)}Ct.memoizedState=Et;var Lt={value:Et,getSnapshot:dt};return Ct.queue=Lt,Uu(Bp.bind(null,At,Lt,ft),[ft]),At.flags|=2048,_l(9,Pp.bind(null,At,Lt,Et,dt),void 0,null),Et},useId:function(){var ft=os(),dt=_i.identifierPrefix;if(Wr){var Et=rs,At=ns;Et=(At&~(1<<32-kr(At)-1)).toString(32)+Et,dt=":"+dt+"R"+Et,Et=yl++,0<Et&&(dt+="H"+Et.toString(32)),dt+=":"}else Et=Nm++,dt=":"+dt+"r"+Et.toString(32)+":";return ft.memoizedState=dt},unstable_isNewReconciler:!1},Vm={readContext:Gr,useCallback:kp,useContext:Gr,useEffect:xl,useImperativeHandle:Up,useInsertionEffect:Dp,useLayoutEffect:Op,useMemo:Np,useReducer:Wl,useRef:Ip,useState:function(){return Wl(Ts)},useDebugValue:ku,useDeferredValue:function(ft){var dt=Wl(Ts),Et=dt[0],At=dt[1];return xl(function(){var Ct=Fo.transition;Fo.transition={};try{At(ft)}finally{Fo.transition=Ct}},[ft]),Et},useTransition:function(){var ft=Wl(Ts)[0],dt=Ko().memoizedState;return[ft,dt]},useMutableSource:bp,useSyncExternalStore:wp,useId:$p,unstable_isNewReconciler:!1},Wm={readContext:Gr,useCallback:kp,useContext:Gr,useEffect:xl,useImperativeHandle:Up,useInsertionEffect:Dp,useLayoutEffect:Op,useMemo:Np,useReducer:Xl,useRef:Ip,useState:function(){return Xl(Ts)},useDebugValue:ku,useDeferredValue:function(ft){var dt=Xl(Ts),Et=dt[0],At=dt[1];return xl(function(){var Ct=Fo.transition;Fo.transition={};try{At(ft)}finally{Fo.transition=Ct}},[ft]),Et},useTransition:function(){var ft=Xl(Ts)[0],dt=Ko().memoizedState;return[ft,dt]},useMutableSource:bp,useSyncExternalStore:wp,useId:$p,unstable_isNewReconciler:!1};function Nu(ft,dt){try{var Et="",At=dt;do Et+=Es(At),At=At.return;while(At);var Ct=Et}catch(Lt){Ct=`
Error generating stack: `+Lt.message+`
`+Lt.stack}return{value:ft,source:dt,stack:Ct}}function $u(ft,dt){try{console.error(dt.value)}catch(Et){setTimeout(function(){throw Et})}}var jm=typeof WeakMap=="function"?WeakMap:Map;function Wp(ft,dt,Et){Et=ts(-1,Et),Et.tag=3,Et.payload={element:null};var At=dt.value;return Et.callback=function(){du||(du=!0,tp=At),$u(ft,dt)},Et}function jp(ft,dt,Et){Et=ts(-1,Et),Et.tag=3;var At=ft.type.getDerivedStateFromError;if(typeof At=="function"){var Ct=dt.value;Et.payload=function(){return At(Ct)},Et.callback=function(){$u(ft,dt)}}var Lt=ft.stateNode;return Lt!==null&&typeof Lt.componentDidCatch=="function"&&(Et.callback=function(){$u(ft,dt),typeof At!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var Zt=dt.stack;this.componentDidCatch(dt.value,{componentStack:Zt!==null?Zt:""})}),Et}function Xp(ft,dt,Et){var At=ft.pingCache;if(At===null){At=ft.pingCache=new jm;var Ct=new Set;At.set(dt,Ct)}else Ct=At.get(dt),Ct===void 0&&(Ct=new Set,At.set(dt,Ct));Ct.has(Et)||(Ct.add(Et),ft=ov.bind(null,ft,dt,Et),dt.then(ft,ft))}function Kp(ft){do{var dt;if((dt=ft.tag===13)&&(dt=ft.memoizedState,dt=dt!==null?dt.dehydrated!==null:!0),dt)return ft;ft=ft.return}while(ft!==null);return null}function Yp(ft,dt,Et,At,Ct){return ft.mode&1?(ft.flags|=65536,ft.lanes=Ct,ft):(ft===dt?ft.flags|=65536:(ft.flags|=128,Et.flags|=131072,Et.flags&=-52805,Et.tag===1&&(Et.alternate===null?Et.tag=17:(dt=ts(-1,1),dt.tag=2,fs(Et,dt))),Et.lanes|=1),ft)}function Yo(ft){ft.flags|=4}function Jp(ft,dt){if(ft!==null&&ft.child===dt.child)return!0;if(dt.flags&16)return!1;for(ft=dt.child;ft!==null;){if(ft.flags&12854||ft.subtreeFlags&12854)return!1;ft=ft.sibling}return!0}var El,Sl,Zl,Ql;if(gn)El=function(ft,dt){for(var Et=dt.child;Et!==null;){if(Et.tag===5||Et.tag===6)$t(ft,Et.stateNode);else if(Et.tag!==4&&Et.child!==null){Et.child.return=Et,Et=Et.child;continue}if(Et===dt)break;for(;Et.sibling===null;){if(Et.return===null||Et.return===dt)return;Et=Et.return}Et.sibling.return=Et.return,Et=Et.sibling}},Sl=function(){},Zl=function(ft,dt,Et,At,Ct){if(ft=ft.memoizedProps,ft!==At){var Lt=dt.stateNode,Zt=Xo(Oo.current);Et=en(Lt,Et,ft,At,Ct,Zt),(dt.updateQueue=Et)&&Yo(dt)}},Ql=function(ft,dt,Et,At){Et!==At&&Yo(dt)};else if(Ht){El=function(ft,dt,Et,At){for(var Ct=dt.child;Ct!==null;){if(Ct.tag===5){var Lt=Ct.stateNode;Et&&At&&(Lt=Dr(Lt,Ct.type,Ct.memoizedProps,Ct)),$t(ft,Lt)}else if(Ct.tag===6)Lt=Ct.stateNode,Et&&At&&(Lt=Mr(Lt,Ct.memoizedProps,Ct)),$t(ft,Lt);else if(Ct.tag!==4){if(Ct.tag===22&&Ct.memoizedState!==null)Lt=Ct.child,Lt!==null&&(Lt.return=Ct),El(ft,Ct,!0,!0);else if(Ct.child!==null){Ct.child.return=Ct,Ct=Ct.child;continue}}if(Ct===dt)break;for(;Ct.sibling===null;){if(Ct.return===null||Ct.return===dt)return;Ct=Ct.return}Ct.sibling.return=Ct.return,Ct=Ct.sibling}};var Zp=function(ft,dt,Et,At){for(var Ct=dt.child;Ct!==null;){if(Ct.tag===5){var Lt=Ct.stateNode;Et&&At&&(Lt=Dr(Lt,Ct.type,Ct.memoizedProps,Ct)),xr(ft,Lt)}else if(Ct.tag===6)Lt=Ct.stateNode,Et&&At&&(Lt=Mr(Lt,Ct.memoizedProps,Ct)),xr(ft,Lt);else if(Ct.tag!==4){if(Ct.tag===22&&Ct.memoizedState!==null)Lt=Ct.child,Lt!==null&&(Lt.return=Ct),Zp(ft,Ct,!0,!0);else if(Ct.child!==null){Ct.child.return=Ct,Ct=Ct.child;continue}}if(Ct===dt)break;for(;Ct.sibling===null;){if(Ct.return===null||Ct.return===dt)return;Ct=Ct.return}Ct.sibling.return=Ct.return,Ct=Ct.sibling}};Sl=function(ft,dt){var Et=dt.stateNode;if(!Jp(ft,dt)){ft=Et.containerInfo;var At=mr(ft);Zp(At,dt,!1,!1),Et.pendingChildren=At,Yo(dt),Ar(ft,At)}},Zl=function(ft,dt,Et,At,Ct){var Lt=ft.stateNode,Zt=ft.memoizedProps;if((ft=Jp(ft,dt))&&Zt===At)dt.stateNode=Lt;else{var ln=dt.stateNode,In=Xo(Oo.current),Kn=null;Zt!==At&&(Kn=en(ln,Et,Zt,At,Ct,In)),ft&&Kn===null?dt.stateNode=Lt:(Lt=Zn(Lt,Kn,Et,Zt,At,dt,ft,ln),nn(Lt,Et,At,Ct,In)&&Yo(dt),dt.stateNode=Lt,ft?Yo(dt):El(Lt,dt,!1,!1))}},Ql=function(ft,dt,Et,At){Et!==At?(ft=Xo($s.current),Et=Xo(Oo.current),dt.stateNode=rn(At,ft,Et,dt),Yo(dt)):dt.stateNode=ft.stateNode}}else Sl=function(){},Zl=function(){},Ql=function(){};function Al(ft,dt){if(!Wr)switch(ft.tailMode){case"hidden":dt=ft.tail;for(var Et=null;dt!==null;)dt.alternate!==null&&(Et=dt),dt=dt.sibling;Et===null?ft.tail=null:Et.sibling=null;break;case"collapsed":Et=ft.tail;for(var At=null;Et!==null;)Et.alternate!==null&&(At=Et),Et=Et.sibling;At===null?dt||ft.tail===null?ft.tail=null:ft.tail.sibling=null:At.sibling=null}}function ho(ft){var dt=ft.alternate!==null&&ft.alternate.child===ft.child,Et=0,At=0;if(dt)for(var Ct=ft.child;Ct!==null;)Et|=Ct.lanes|Ct.childLanes,At|=Ct.subtreeFlags&14680064,At|=Ct.flags&14680064,Ct.return=ft,Ct=Ct.sibling;else for(Ct=ft.child;Ct!==null;)Et|=Ct.lanes|Ct.childLanes,At|=Ct.subtreeFlags,At|=Ct.flags,Ct.return=ft,Ct=Ct.sibling;return ft.subtreeFlags|=At,ft.childLanes=Et,dt}function Xm(ft,dt,Et){var At=dt.pendingProps;switch(Mu(dt),dt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ho(dt),null;case 1:return Lr(dt.type)&&Hr(),ho(dt),null;case 3:return At=dt.stateNode,Gs(),fr(hr),fr(Ir),Lu(),At.pendingContext&&(At.context=At.pendingContext,At.pendingContext=null),(ft===null||ft.child===null)&&(na(dt)?Yo(dt):ft===null||ft.memoizedState.isDehydrated&&!(dt.flags&256)||(dt.flags|=1024,zo!==null&&(ip(zo),zo=null))),Sl(ft,dt),ho(dt),null;case 5:Pu(dt),Et=Xo($s.current);var Ct=dt.type;if(ft!==null&&dt.stateNode!=null)Zl(ft,dt,Ct,At,Et),ft.ref!==dt.ref&&(dt.flags|=512,dt.flags|=2097152);else{if(!At){if(dt.stateNode===null)throw Error(ot(166));return ho(dt),null}if(ft=Xo(Oo.current),na(dt)){if(!xn)throw Error(ot(175));ft=It(dt.stateNode,dt.type,dt.memoizedProps,Et,ft,dt,!qs),dt.updateQueue=ft,ft!==null&&Yo(dt)}else{var Lt=Wt(Ct,At,Et,ft,dt);El(Lt,dt,!1,!1),dt.stateNode=Lt,nn(Lt,Ct,At,Et,ft)&&Yo(dt)}dt.ref!==null&&(dt.flags|=512,dt.flags|=2097152)}return ho(dt),null;case 6:if(ft&&dt.stateNode!=null)Ql(ft,dt,ft.memoizedProps,At);else{if(typeof At!="string"&&dt.stateNode===null)throw Error(ot(166));if(ft=Xo($s.current),Et=Xo(Oo.current),na(dt)){if(!xn)throw Error(ot(176));if(ft=dt.stateNode,At=dt.memoizedProps,(Et=Rt(ft,At,dt,!qs))&&(Ct=wo,Ct!==null))switch(Lt=(Ct.mode&1)!==0,Ct.tag){case 3:Pn(Ct.stateNode.containerInfo,ft,At,Lt);break;case 5:Dn(Ct.type,Ct.memoizedProps,Ct.stateNode,ft,At,Lt)}Et&&Yo(dt)}else dt.stateNode=rn(At,ft,Et,dt)}return ho(dt),null;case 13:if(fr(Xr),At=dt.memoizedState,Wr&&Ro!==null&&dt.mode&1&&!(dt.flags&128)){for(ft=Ro;ft;)ft=Or(ft);return ks(),dt.flags|=98560,dt}if(At!==null&&At.dehydrated!==null){if(At=na(dt),ft===null){if(!At)throw Error(ot(318));if(!xn)throw Error(ot(344));if(ft=dt.memoizedState,ft=ft!==null?ft.dehydrated:null,!ft)throw Error(ot(317));kt(ft,dt)}else ks(),!(dt.flags&128)&&(dt.memoizedState=null),dt.flags|=4;return ho(dt),null}return zo!==null&&(ip(zo),zo=null),dt.flags&128?(dt.lanes=Et,dt):(At=At!==null,Et=!1,ft===null?na(dt):Et=ft.memoizedState!==null,At&&!Et&&(dt.child.flags|=8192,dt.mode&1&&(ft===null||Xr.current&1?no===0&&(no=3):sp())),dt.updateQueue!==null&&(dt.flags|=4),ho(dt),null);case 4:return Gs(),Sl(ft,dt),ft===null&&vn(dt.stateNode.containerInfo),ho(dt),null;case 10:return jo(dt.type._context),ho(dt),null;case 17:return Lr(dt.type)&&Hr(),ho(dt),null;case 19:if(fr(Xr),Ct=dt.memoizedState,Ct===null)return ho(dt),null;if(At=(dt.flags&128)!==0,Lt=Ct.rendering,Lt===null)if(At)Al(Ct,!1);else{if(no!==0||ft!==null&&ft.flags&128)for(ft=dt.child;ft!==null;){if(Lt=zl(ft),Lt!==null){for(dt.flags|=128,Al(Ct,!1),ft=Lt.updateQueue,ft!==null&&(dt.updateQueue=ft,dt.flags|=4),dt.subtreeFlags=0,ft=Et,At=dt.child;At!==null;)Et=At,Ct=ft,Et.flags&=14680066,Lt=Et.alternate,Lt===null?(Et.childLanes=0,Et.lanes=Ct,Et.child=null,Et.subtreeFlags=0,Et.memoizedProps=null,Et.memoizedState=null,Et.updateQueue=null,Et.dependencies=null,Et.stateNode=null):(Et.childLanes=Lt.childLanes,Et.lanes=Lt.lanes,Et.child=Lt.child,Et.subtreeFlags=0,Et.deletions=null,Et.memoizedProps=Lt.memoizedProps,Et.memoizedState=Lt.memoizedState,Et.updateQueue=Lt.updateQueue,Et.type=Lt.type,Ct=Lt.dependencies,Et.dependencies=Ct===null?null:{lanes:Ct.lanes,firstContext:Ct.firstContext}),At=At.sibling;return rr(Xr,Xr.current&1|2),dt.child}ft=ft.sibling}Ct.tail!==null&&Vr()>ep&&(dt.flags|=128,At=!0,Al(Ct,!1),dt.lanes=4194304)}else{if(!At)if(ft=zl(Lt),ft!==null){if(dt.flags|=128,At=!0,ft=ft.updateQueue,ft!==null&&(dt.updateQueue=ft,dt.flags|=4),Al(Ct,!0),Ct.tail===null&&Ct.tailMode==="hidden"&&!Lt.alternate&&!Wr)return ho(dt),null}else 2*Vr()-Ct.renderingStartTime>ep&&Et!==1073741824&&(dt.flags|=128,At=!0,Al(Ct,!1),dt.lanes=4194304);Ct.isBackwards?(Lt.sibling=dt.child,dt.child=Lt):(ft=Ct.last,ft!==null?ft.sibling=Lt:dt.child=Lt,Ct.last=Lt)}return Ct.tail!==null?(dt=Ct.tail,Ct.rendering=dt,Ct.tail=dt.sibling,Ct.renderingStartTime=Vr(),dt.sibling=null,ft=Xr.current,rr(Xr,At?ft&1|2:ft&1),dt):(ho(dt),null);case 22:case 23:return op(),At=dt.memoizedState!==null,ft!==null&&ft.memoizedState!==null!==At&&(dt.flags|=8192),At&&dt.mode&1?Bo&1073741824&&(ho(dt),gn&&dt.subtreeFlags&6&&(dt.flags|=8192)):ho(dt),null;case 24:return null;case 25:return null}throw Error(ot(156,dt.tag))}var Km=st.ReactCurrentOwner,Po=!1;function vo(ft,dt,Et,At){dt.child=ft===null?Mp(dt,null,Et,At):Ns(dt,ft.child,Et,At)}function Qp(ft,dt,Et,At,Ct){Et=Et.render;var Lt=dt.ref;return oo(dt,Ct),At=Du(ft,dt,Et,At,Lt,Ct),Et=Ou(),ft!==null&&!Po?(dt.updateQueue=ft.updateQueue,dt.flags&=-2053,ft.lanes&=~Ct,ss(ft,dt,Ct)):(Wr&&Et&&Tu(dt),dt.flags|=1,vo(ft,dt,At,Ct),dt.child)}function qp(ft,dt,Et,At,Ct){if(ft===null){var Lt=Et.type;return typeof Lt=="function"&&!ap(Lt)&&Lt.defaultProps===void 0&&Et.compare===null&&Et.defaultProps===void 0?(dt.tag=15,dt.type=Lt,em(ft,dt,Lt,At,Ct)):(ft=_u(Et.type,null,At,dt,dt.mode,Ct),ft.ref=dt.ref,ft.return=dt,dt.child=ft)}if(Lt=ft.child,!(ft.lanes&Ct)){var Zt=Lt.memoizedProps;if(Et=Et.compare,Et=Et!==null?Et:xs,Et(Zt,At)&&ft.ref===dt.ref)return ss(ft,dt,Ct)}return dt.flags|=1,ft=gs(Lt,At),ft.ref=dt.ref,ft.return=dt,dt.child=ft}function em(ft,dt,Et,At,Ct){if(ft!==null&&xs(ft.memoizedProps,At)&&ft.ref===dt.ref)if(Po=!1,(ft.lanes&Ct)!==0)ft.flags&131072&&(Po=!0);else return dt.lanes=ft.lanes,ss(ft,dt,Ct);return Gu(ft,dt,Et,At,Ct)}function tm(ft,dt,Et){var At=dt.pendingProps,Ct=At.children,Lt=ft!==null?ft.memoizedState:null;if(At.mode==="hidden")if(!(dt.mode&1))dt.memoizedState={baseLanes:0,cachePool:null},rr(Hs,Bo),Bo|=Et;else if(Et&1073741824)dt.memoizedState={baseLanes:0,cachePool:null},At=Lt!==null?Lt.baseLanes:Et,rr(Hs,Bo),Bo|=At;else return ft=Lt!==null?Lt.baseLanes|Et:Et,dt.lanes=dt.childLanes=1073741824,dt.memoizedState={baseLanes:ft,cachePool:null},dt.updateQueue=null,rr(Hs,Bo),Bo|=ft,null;else Lt!==null?(At=Lt.baseLanes|Et,dt.memoizedState=null):At=Et,rr(Hs,Bo),Bo|=At;return vo(ft,dt,Ct,Et),dt.child}function nm(ft,dt){var Et=dt.ref;(ft===null&&Et!==null||ft!==null&&ft.ref!==Et)&&(dt.flags|=512,dt.flags|=2097152)}function Gu(ft,dt,Et,At,Ct){var Lt=Lr(Et)?Rr:Ir.current;return Lt=Pr(dt,Lt),oo(dt,Ct),Et=Du(ft,dt,Et,At,Lt,Ct),At=Ou(),ft!==null&&!Po?(dt.updateQueue=ft.updateQueue,dt.flags&=-2053,ft.lanes&=~Ct,ss(ft,dt,Ct)):(Wr&&At&&Tu(dt),dt.flags|=1,vo(ft,dt,Et,Ct),dt.child)}function rm(ft,dt,Et,At,Ct){if(Lr(Et)){var Lt=!0;br(dt)}else Lt=!1;if(oo(dt,Ct),dt.stateNode===null)ft!==null&&(ft.alternate=null,dt.alternate=null,dt.flags|=2),vp(dt,Et,At),Au(dt,Et,At,Ct),At=!0;else if(ft===null){var Zt=dt.stateNode,ln=dt.memoizedProps;Zt.props=ln;var In=Zt.context,Kn=Et.contextType;typeof Kn=="object"&&Kn!==null?Kn=Gr(Kn):(Kn=Lr(Et)?Rr:Ir.current,Kn=Pr(dt,Kn));var ir=Et.getDerivedStateFromProps,vr=typeof ir=="function"||typeof Zt.getSnapshotBeforeUpdate=="function";vr||typeof Zt.UNSAFE_componentWillReceiveProps!="function"&&typeof Zt.componentWillReceiveProps!="function"||(ln!==At||In!==Kn)&&yp(dt,Zt,At,Kn),Go=!1;var dr=dt.memoizedState;Zt.state=dr,Fl(dt,At,Zt,Ct),In=dt.memoizedState,ln!==At||dr!==In||hr.current||Go?(typeof ir=="function"&&(Su(dt,Et,ir,At),In=dt.memoizedState),(ln=Go||gp(dt,Et,ln,At,dr,In,Kn))?(vr||typeof Zt.UNSAFE_componentWillMount!="function"&&typeof Zt.componentWillMount!="function"||(typeof Zt.componentWillMount=="function"&&Zt.componentWillMount(),typeof Zt.UNSAFE_componentWillMount=="function"&&Zt.UNSAFE_componentWillMount()),typeof Zt.componentDidMount=="function"&&(dt.flags|=4194308)):(typeof Zt.componentDidMount=="function"&&(dt.flags|=4194308),dt.memoizedProps=At,dt.memoizedState=In),Zt.props=At,Zt.state=In,Zt.context=Kn,At=ln):(typeof Zt.componentDidMount=="function"&&(dt.flags|=4194308),At=!1)}else{Zt=dt.stateNode,dp(ft,dt),ln=dt.memoizedProps,Kn=dt.type===dt.elementType?ln:co(dt.type,ln),Zt.props=Kn,vr=dt.pendingProps,dr=Zt.context,In=Et.contextType,typeof In=="object"&&In!==null?In=Gr(In):(In=Lr(Et)?Rr:Ir.current,In=Pr(dt,In));var zr=Et.getDerivedStateFromProps;(ir=typeof zr=="function"||typeof Zt.getSnapshotBeforeUpdate=="function")||typeof Zt.UNSAFE_componentWillReceiveProps!="function"&&typeof Zt.componentWillReceiveProps!="function"||(ln!==vr||dr!==In)&&yp(dt,Zt,At,In),Go=!1,dr=dt.memoizedState,Zt.state=dr,Fl(dt,At,Zt,Ct);var cr=dt.memoizedState;ln!==vr||dr!==cr||hr.current||Go?(typeof zr=="function"&&(Su(dt,Et,zr,At),cr=dt.memoizedState),(Kn=Go||gp(dt,Et,Kn,At,dr,cr,In)||!1)?(ir||typeof Zt.UNSAFE_componentWillUpdate!="function"&&typeof Zt.componentWillUpdate!="function"||(typeof Zt.componentWillUpdate=="function"&&Zt.componentWillUpdate(At,cr,In),typeof Zt.UNSAFE_componentWillUpdate=="function"&&Zt.UNSAFE_componentWillUpdate(At,cr,In)),typeof Zt.componentDidUpdate=="function"&&(dt.flags|=4),typeof Zt.getSnapshotBeforeUpdate=="function"&&(dt.flags|=1024)):(typeof Zt.componentDidUpdate!="function"||ln===ft.memoizedProps&&dr===ft.memoizedState||(dt.flags|=4),typeof Zt.getSnapshotBeforeUpdate!="function"||ln===ft.memoizedProps&&dr===ft.memoizedState||(dt.flags|=1024),dt.memoizedProps=At,dt.memoizedState=cr),Zt.props=At,Zt.state=cr,Zt.context=In,At=Kn):(typeof Zt.componentDidUpdate!="function"||ln===ft.memoizedProps&&dr===ft.memoizedState||(dt.flags|=4),typeof Zt.getSnapshotBeforeUpdate!="function"||ln===ft.memoizedProps&&dr===ft.memoizedState||(dt.flags|=1024),At=!1)}return zu(ft,dt,Et,At,Lt,Ct)}function zu(ft,dt,Et,At,Ct,Lt){nm(ft,dt);var Zt=(dt.flags&128)!==0;if(!At&&!Zt)return Ct&&wr(dt,Et,!1),ss(ft,dt,Lt);At=dt.stateNode,Km.current=dt;var ln=Zt&&typeof Et.getDerivedStateFromError!="function"?null:At.render();return dt.flags|=1,ft!==null&&Zt?(dt.child=Ns(dt,ft.child,null,Lt),dt.child=Ns(dt,null,ln,Lt)):vo(ft,dt,ln,Lt),dt.memoizedState=At.state,Ct&&wr(dt,Et,!0),dt.child}function im(ft){var dt=ft.stateNode;dt.pendingContext?pr(ft,dt.pendingContext,dt.pendingContext!==dt.context):dt.context&&pr(ft,dt.context,!1),Ru(ft,dt.containerInfo)}function om(ft,dt,Et,At,Ct){return ks(),wu(Ct),dt.flags|=256,vo(ft,dt,Et,At),dt.child}var _c={dehydrated:null,treeContext:null,retryLane:0};function eu(ft){return{baseLanes:ft,cachePool:null}}function sm(ft,dt,Et){var At=dt.pendingProps,Ct=Xr.current,Lt=!1,Zt=(dt.flags&128)!==0,ln;if((ln=Zt)||(ln=ft!==null&&ft.memoizedState===null?!1:(Ct&2)!==0),ln?(Lt=!0,dt.flags&=-129):(ft===null||ft.memoizedState!==null)&&(Ct|=1),rr(Xr,Ct&1),ft===null)return bu(dt),ft=dt.memoizedState,ft!==null&&(ft=ft.dehydrated,ft!==null)?(dt.mode&1?Nr(ft)?dt.lanes=8:dt.lanes=1073741824:dt.lanes=1,null):(Ct=At.children,ft=At.fallback,Lt?(At=dt.mode,Lt=dt.child,Ct={mode:"hidden",children:Ct},!(At&1)&&Lt!==null?(Lt.childLanes=0,Lt.pendingProps=Ct):Lt=xu(Ct,At,0,null),ft=Ps(ft,At,Et,null),Lt.return=dt,ft.return=dt,Lt.sibling=ft,dt.child=Lt,dt.child.memoizedState=eu(Et),dt.memoizedState=_c,ft):Hu(dt,Ct));if(Ct=ft.memoizedState,Ct!==null){if(ln=Ct.dehydrated,ln!==null){if(Zt)return dt.flags&256?(dt.flags&=-257,tu(ft,dt,Et,Error(ot(422)))):dt.memoizedState!==null?(dt.child=ft.child,dt.flags|=128,null):(Lt=At.fallback,Ct=dt.mode,At=xu({mode:"visible",children:At.children},Ct,0,null),Lt=Ps(Lt,Ct,Et,null),Lt.flags|=2,At.return=dt,Lt.return=dt,At.sibling=Lt,dt.child=At,dt.mode&1&&Ns(dt,ft.child,null,Et),dt.child.memoizedState=eu(Et),dt.memoizedState=_c,Lt);if(!(dt.mode&1))dt=tu(ft,dt,Et,null);else if(Nr(ln))dt=tu(ft,dt,Et,Error(ot(419)));else if(At=(Et&ft.childLanes)!==0,Po||At){if(At=_i,At!==null){switch(Et&-Et){case 4:Lt=2;break;case 16:Lt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Lt=32;break;case 536870912:Lt=268435456;break;default:Lt=0}At=Lt&(At.suspendedLanes|Et)?0:Lt,At!==0&&At!==Ct.retryLane&&(Ct.retryLane=At,Uo(ft,At,-1))}sp(),dt=tu(ft,dt,Et,Error(ot(421)))}else Cr(ln)?(dt.flags|=128,dt.child=ft.child,dt=sv.bind(null,ft),jr(ln,dt),dt=null):(Et=Ct.treeContext,xn&&(Ro=_o(ln),wo=dt,Wr=!0,zo=null,qs=!1,Et!==null&&(Io[Do++]=ns,Io[Do++]=rs,Io[Do++]=Ss,ns=Et.id,rs=Et.overflow,Ss=dt)),dt=Hu(dt,dt.pendingProps.children),dt.flags|=4096);return dt}return Lt?(At=lm(ft,dt,At.children,At.fallback,Et),Lt=dt.child,Ct=ft.child.memoizedState,Lt.memoizedState=Ct===null?eu(Et):{baseLanes:Ct.baseLanes|Et,cachePool:null},Lt.childLanes=ft.childLanes&~Et,dt.memoizedState=_c,At):(Et=am(ft,dt,At.children,Et),dt.memoizedState=null,Et)}return Lt?(At=lm(ft,dt,At.children,At.fallback,Et),Lt=dt.child,Ct=ft.child.memoizedState,Lt.memoizedState=Ct===null?eu(Et):{baseLanes:Ct.baseLanes|Et,cachePool:null},Lt.childLanes=ft.childLanes&~Et,dt.memoizedState=_c,At):(Et=am(ft,dt,At.children,Et),dt.memoizedState=null,Et)}function Hu(ft,dt){return dt=xu({mode:"visible",children:dt},ft.mode,0,null),dt.return=ft,ft.child=dt}function am(ft,dt,Et,At){var Ct=ft.child;return ft=Ct.sibling,Et=gs(Ct,{mode:"visible",children:Et}),!(dt.mode&1)&&(Et.lanes=At),Et.return=dt,Et.sibling=null,ft!==null&&(At=dt.deletions,At===null?(dt.deletions=[ft],dt.flags|=16):At.push(ft)),dt.child=Et}function lm(ft,dt,Et,At,Ct){var Lt=dt.mode;ft=ft.child;var Zt=ft.sibling,ln={mode:"hidden",children:Et};return!(Lt&1)&&dt.child!==ft?(Et=dt.child,Et.childLanes=0,Et.pendingProps=ln,dt.deletions=null):(Et=gs(ft,ln),Et.subtreeFlags=ft.subtreeFlags&14680064),Zt!==null?At=gs(Zt,At):(At=Ps(At,Lt,Ct,null),At.flags|=2),At.return=dt,Et.return=dt,Et.sibling=At,dt.child=Et,At}function tu(ft,dt,Et,At){return At!==null&&wu(At),Ns(dt,ft.child,null,Et),ft=Hu(dt,dt.pendingProps.children),ft.flags|=2,dt.memoizedState=null,ft}function cm(ft,dt,Et){ft.lanes|=dt;var At=ft.alternate;At!==null&&(At.lanes|=dt),qr(ft.return,dt,Et)}function Vu(ft,dt,Et,At,Ct){var Lt=ft.memoizedState;Lt===null?ft.memoizedState={isBackwards:dt,rendering:null,renderingStartTime:0,last:At,tail:Et,tailMode:Ct}:(Lt.isBackwards=dt,Lt.rendering=null,Lt.renderingStartTime=0,Lt.last=At,Lt.tail=Et,Lt.tailMode=Ct)}function um(ft,dt,Et){var At=dt.pendingProps,Ct=At.revealOrder,Lt=At.tail;if(vo(ft,dt,At.children,Et),At=Xr.current,At&2)At=At&1|2,dt.flags|=128;else{if(ft!==null&&ft.flags&128)e:for(ft=dt.child;ft!==null;){if(ft.tag===13)ft.memoizedState!==null&&cm(ft,Et,dt);else if(ft.tag===19)cm(ft,Et,dt);else if(ft.child!==null){ft.child.return=ft,ft=ft.child;continue}if(ft===dt)break e;for(;ft.sibling===null;){if(ft.return===null||ft.return===dt)break e;ft=ft.return}ft.sibling.return=ft.return,ft=ft.sibling}At&=1}if(rr(Xr,At),!(dt.mode&1))dt.memoizedState=null;else switch(Ct){case"forwards":for(Et=dt.child,Ct=null;Et!==null;)ft=Et.alternate,ft!==null&&zl(ft)===null&&(Ct=Et),Et=Et.sibling;Et=Ct,Et===null?(Ct=dt.child,dt.child=null):(Ct=Et.sibling,Et.sibling=null),Vu(dt,!1,Ct,Et,Lt);break;case"backwards":for(Et=null,Ct=dt.child,dt.child=null;Ct!==null;){if(ft=Ct.alternate,ft!==null&&zl(ft)===null){dt.child=Ct;break}ft=Ct.sibling,Ct.sibling=Et,Et=Ct,Ct=ft}Vu(dt,!0,Et,null,Lt);break;case"together":Vu(dt,!1,null,null,void 0);break;default:dt.memoizedState=null}return dt.child}function ss(ft,dt,Et){if(ft!==null&&(dt.dependencies=ft.dependencies),Vs|=dt.lanes,!(Et&dt.childLanes))return null;if(ft!==null&&dt.child!==ft.child)throw Error(ot(153));if(dt.child!==null){for(ft=dt.child,Et=gs(ft,ft.pendingProps),dt.child=Et,Et.return=dt;ft.sibling!==null;)ft=ft.sibling,Et=Et.sibling=gs(ft,ft.pendingProps),Et.return=dt;Et.sibling=null}return dt.child}function Ym(ft,dt,Et){switch(dt.tag){case 3:im(dt),ks();break;case 5:Cp(dt);break;case 1:Lr(dt.type)&&br(dt);break;case 4:Ru(dt,dt.stateNode.containerInfo);break;case 10:Dl(dt,dt.type._context,dt.memoizedProps.value);break;case 13:var At=dt.memoizedState;if(At!==null)return At.dehydrated!==null?(rr(Xr,Xr.current&1),dt.flags|=128,null):Et&dt.child.childLanes?sm(ft,dt,Et):(rr(Xr,Xr.current&1),ft=ss(ft,dt,Et),ft!==null?ft.sibling:null);rr(Xr,Xr.current&1);break;case 19:if(At=(Et&dt.childLanes)!==0,ft.flags&128){if(At)return um(ft,dt,Et);dt.flags|=128}var Ct=dt.memoizedState;if(Ct!==null&&(Ct.rendering=null,Ct.tail=null,Ct.lastEffect=null),rr(Xr,Xr.current),At)break;return null;case 22:case 23:return dt.lanes=0,tm(ft,dt,Et)}return ss(ft,dt,Et)}function Jm(ft,dt){switch(Mu(dt),dt.tag){case 1:return Lr(dt.type)&&Hr(),ft=dt.flags,ft&65536?(dt.flags=ft&-65537|128,dt):null;case 3:return Gs(),fr(hr),fr(Ir),Lu(),ft=dt.flags,ft&65536&&!(ft&128)?(dt.flags=ft&-65537|128,dt):null;case 5:return Pu(dt),null;case 13:if(fr(Xr),ft=dt.memoizedState,ft!==null&&ft.dehydrated!==null){if(dt.alternate===null)throw Error(ot(340));ks()}return ft=dt.flags,ft&65536?(dt.flags=ft&-65537|128,dt):null;case 19:return fr(Xr),null;case 4:return Gs(),null;case 10:return jo(dt.type._context),null;case 22:case 23:return op(),null;case 24:return null;default:return null}}var nu=!1,Ms=!1,Zm=typeof WeakSet=="function"?WeakSet:Set,er=null;function ru(ft,dt){var Et=ft.ref;if(Et!==null)if(typeof Et=="function")try{Et(null)}catch(At){To(ft,dt,At)}else Et.current=null}function Wu(ft,dt,Et){try{Et()}catch(At){To(ft,dt,At)}}var fm=!1;function Qm(ft,dt){for(Xt(ft.containerInfo),er=dt;er!==null;)if(ft=er,dt=ft.child,(ft.subtreeFlags&1028)!==0&&dt!==null)dt.return=ft,er=dt;else for(;er!==null;){ft=er;try{var Et=ft.alternate;if(ft.flags&1024)switch(ft.tag){case 0:case 11:case 15:break;case 1:if(Et!==null){var At=Et.memoizedProps,Ct=Et.memoizedState,Lt=ft.stateNode,Zt=Lt.getSnapshotBeforeUpdate(ft.elementType===ft.type?At:co(ft.type,At),Ct);Lt.__reactInternalSnapshotBeforeUpdate=Zt}break;case 3:gn&&Wn(ft.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(ot(163))}}catch(ln){To(ft,ft.return,ln)}if(dt=ft.sibling,dt!==null){dt.return=ft.return,er=dt;break}er=ft.return}return Et=fm,fm=!1,Et}function Cs(ft,dt,Et){var At=dt.updateQueue;if(At=At!==null?At.lastEffect:null,At!==null){var Ct=At=At.next;do{if((Ct.tag&ft)===ft){var Lt=Ct.destroy;Ct.destroy=void 0,Lt!==void 0&&Wu(dt,Et,Lt)}Ct=Ct.next}while(Ct!==At)}}function Tl(ft,dt){if(dt=dt.updateQueue,dt=dt!==null?dt.lastEffect:null,dt!==null){var Et=dt=dt.next;do{if((Et.tag&ft)===ft){var At=Et.create;Et.destroy=At()}Et=Et.next}while(Et!==dt)}}function ju(ft){var dt=ft.ref;if(dt!==null){var Et=ft.stateNode;switch(ft.tag){case 5:ft=Yt(Et);break;default:ft=Et}typeof dt=="function"?dt(ft):dt.current=ft}}function dm(ft,dt,Et){if(Co&&typeof Co.onCommitFiberUnmount=="function")try{Co.onCommitFiberUnmount(cs,dt)}catch{}switch(dt.tag){case 0:case 11:case 14:case 15:if(ft=dt.updateQueue,ft!==null&&(ft=ft.lastEffect,ft!==null)){var At=ft=ft.next;do{var Ct=At,Lt=Ct.destroy;Ct=Ct.tag,Lt!==void 0&&(Ct&2||Ct&4)&&Wu(dt,Et,Lt),At=At.next}while(At!==ft)}break;case 1:if(ru(dt,Et),ft=dt.stateNode,typeof ft.componentWillUnmount=="function")try{ft.props=dt.memoizedProps,ft.state=dt.memoizedState,ft.componentWillUnmount()}catch(Zt){To(dt,Et,Zt)}break;case 5:ru(dt,Et);break;case 4:gn?ym(ft,dt,Et):Ht&&Ht&&(dt=dt.stateNode.containerInfo,Et=mr(dt),Br(dt,Et))}}function hm(ft,dt,Et){for(var At=dt;;)if(dm(ft,At,Et),At.child===null||gn&&At.tag===4){if(At===dt)break;for(;At.sibling===null;){if(At.return===null||At.return===dt)return;At=At.return}At.sibling.return=At.return,At=At.sibling}else At.child.return=At,At=At.child}function pm(ft){var dt=ft.alternate;dt!==null&&(ft.alternate=null,pm(dt)),ft.child=null,ft.deletions=null,ft.sibling=null,ft.tag===5&&(dt=ft.stateNode,dt!==null&&Hn(dt)),ft.stateNode=null,ft.return=null,ft.dependencies=null,ft.memoizedProps=null,ft.memoizedState=null,ft.pendingProps=null,ft.stateNode=null,ft.updateQueue=null}function mm(ft){return ft.tag===5||ft.tag===3||ft.tag===4}function gm(ft){e:for(;;){for(;ft.sibling===null;){if(ft.return===null||mm(ft.return))return null;ft=ft.return}for(ft.sibling.return=ft.return,ft=ft.sibling;ft.tag!==5&&ft.tag!==6&&ft.tag!==18;){if(ft.flags&2||ft.child===null||ft.tag===4)continue e;ft.child.return=ft,ft=ft.child}if(!(ft.flags&2))return ft.stateNode}}function vm(ft){if(gn){e:{for(var dt=ft.return;dt!==null;){if(mm(dt))break e;dt=dt.return}throw Error(ot(160))}var Et=dt;switch(Et.tag){case 5:dt=Et.stateNode,Et.flags&32&&(Yn(dt),Et.flags&=-33),Et=gm(ft),Ku(ft,Et,dt);break;case 3:case 4:dt=Et.stateNode.containerInfo,Et=gm(ft),Xu(ft,Et,dt);break;default:throw Error(ot(161))}}}function Xu(ft,dt,Et){var At=ft.tag;if(At===5||At===6)ft=ft.stateNode,dt?Un(Et,ft,dt):$n(Et,ft);else if(At!==4&&(ft=ft.child,ft!==null))for(Xu(ft,dt,Et),ft=ft.sibling;ft!==null;)Xu(ft,dt,Et),ft=ft.sibling}function Ku(ft,dt,Et){var At=ft.tag;if(At===5||At===6)ft=ft.stateNode,dt?Vn(Et,ft,dt):wn(Et,ft);else if(At!==4&&(ft=ft.child,ft!==null))for(Ku(ft,dt,Et),ft=ft.sibling;ft!==null;)Ku(ft,dt,Et),ft=ft.sibling}function ym(ft,dt,Et){for(var At=dt,Ct=!1,Lt,Zt;;){if(!Ct){Ct=At.return;e:for(;;){if(Ct===null)throw Error(ot(160));switch(Lt=Ct.stateNode,Ct.tag){case 5:Zt=!1;break e;case 3:Lt=Lt.containerInfo,Zt=!0;break e;case 4:Lt=Lt.containerInfo,Zt=!0;break e}Ct=Ct.return}Ct=!0}if(At.tag===5||At.tag===6)hm(ft,At,Et),Zt?kn(Lt,At.stateNode):Fn(Lt,At.stateNode);else if(At.tag===18)Zt?An(Lt,At.stateNode):_n(Lt,At.stateNode);else if(At.tag===4){if(At.child!==null){Lt=At.stateNode.containerInfo,Zt=!0,At.child.return=At,At=At.child;continue}}else if(dm(ft,At,Et),At.child!==null){At.child.return=At,At=At.child;continue}if(At===dt)break;for(;At.sibling===null;){if(At.return===null||At.return===dt)return;At=At.return,At.tag===4&&(Ct=!1)}At.sibling.return=At.return,At=At.sibling}}function Yu(ft,dt){if(gn){switch(dt.tag){case 0:case 11:case 14:case 15:Cs(3,dt,dt.return),Tl(3,dt),Cs(5,dt,dt.return);return;case 1:return;case 5:var Et=dt.stateNode;if(Et!=null){var At=dt.memoizedProps;ft=ft!==null?ft.memoizedProps:At;var Ct=dt.type,Lt=dt.updateQueue;dt.updateQueue=null,Lt!==null&&zn(Et,Lt,Ct,ft,At,dt)}return;case 6:if(dt.stateNode===null)throw Error(ot(162));Et=dt.memoizedProps,Gn(dt.stateNode,ft!==null?ft.memoizedProps:Et,Et);return;case 3:xn&&ft!==null&&ft.memoizedState.isDehydrated&&Kt(dt.stateNode.containerInfo);return;case 12:return;case 13:iu(dt);return;case 19:iu(dt);return;case 17:return}throw Error(ot(163))}switch(dt.tag){case 0:case 11:case 14:case 15:Cs(3,dt,dt.return),Tl(3,dt),Cs(5,dt,dt.return);return;case 12:return;case 13:iu(dt);return;case 19:iu(dt);return;case 3:xn&&ft!==null&&ft.memoizedState.isDehydrated&&Kt(dt.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ht){switch(dt.tag){case 1:case 5:case 6:break e;case 3:case 4:dt=dt.stateNode,Br(dt.containerInfo,dt.pendingChildren);break e}throw Error(ot(163))}}function iu(ft){var dt=ft.updateQueue;if(dt!==null){ft.updateQueue=null;var Et=ft.stateNode;Et===null&&(Et=ft.stateNode=new Zm),dt.forEach(function(At){var Ct=av.bind(null,ft,At);Et.has(At)||(Et.add(At),At.then(Ct,Ct))})}}function qm(ft,dt){for(er=dt;er!==null;){dt=er;var Et=dt.deletions;if(Et!==null)for(var At=0;At<Et.length;At++){var Ct=Et[At];try{var Lt=ft;gn?ym(Lt,Ct,dt):hm(Lt,Ct,dt);var Zt=Ct.alternate;Zt!==null&&(Zt.return=null),Ct.return=null}catch(lr){To(Ct,dt,lr)}}if(Et=dt.child,dt.subtreeFlags&12854&&Et!==null)Et.return=dt,er=Et;else for(;er!==null;){dt=er;try{var ln=dt.flags;if(ln&32&&gn&&Yn(dt.stateNode),ln&512){var In=dt.alternate;if(In!==null){var Kn=In.ref;Kn!==null&&(typeof Kn=="function"?Kn(null):Kn.current=null)}}if(ln&8192)switch(dt.tag){case 13:if(dt.memoizedState!==null){var ir=dt.alternate;(ir===null||ir.memoizedState===null)&&(_h=Vr())}break;case 22:var vr=dt.memoizedState!==null,dr=dt.alternate,zr=dr!==null&&dr.memoizedState!==null;if(Et=dt,gn){e:if(At=Et,Ct=vr,Lt=null,gn)for(var cr=At;;){if(cr.tag===5){if(Lt===null){Lt=cr;var po=cr.stateNode;Ct?nr(po):fn(cr.stateNode,cr.memoizedProps)}}else if(cr.tag===6){if(Lt===null){var No=cr.stateNode;Ct?tn(No):mn(No,cr.memoizedProps)}}else if((cr.tag!==22&&cr.tag!==23||cr.memoizedState===null||cr===At)&&cr.child!==null){cr.child.return=cr,cr=cr.child;continue}if(cr===At)break;for(;cr.sibling===null;){if(cr.return===null||cr.return===At)break e;Lt===cr&&(Lt=null),cr=cr.return}Lt===cr&&(Lt=null),cr.sibling.return=cr.return,cr=cr.sibling}}if(vr&&!zr&&Et.mode&1){er=Et;for(var Tn=Et.child;Tn!==null;){for(Et=er=Tn;er!==null;){At=er;var un=At.child;switch(At.tag){case 0:case 11:case 14:case 15:Cs(4,At,At.return);break;case 1:ru(At,At.return);var Cn=At.stateNode;if(typeof Cn.componentWillUnmount=="function"){var tr=At.return;try{Cn.props=At.memoizedProps,Cn.state=At.memoizedState,Cn.componentWillUnmount()}catch(lr){To(At,tr,lr)}}break;case 5:ru(At,At.return);break;case 22:if(At.memoizedState!==null){Em(Et);continue}}un!==null?(un.return=At,er=un):Em(Et)}Tn=Tn.sibling}}}switch(ln&4102){case 2:vm(dt),dt.flags&=-3;break;case 6:vm(dt),dt.flags&=-3,Yu(dt.alternate,dt);break;case 4096:dt.flags&=-4097;break;case 4100:dt.flags&=-4097,Yu(dt.alternate,dt);break;case 4:Yu(dt.alternate,dt)}}catch(lr){To(dt,dt.return,lr)}if(Et=dt.sibling,Et!==null){Et.return=dt.return,er=Et;break}er=dt.return}}}function _g(ft,dt,Et){er=ft,_m(ft)}function _m(ft,dt,Et){for(var At=(ft.mode&1)!==0;er!==null;){var Ct=er,Lt=Ct.child;if(Ct.tag===22&&At){var Zt=Ct.memoizedState!==null||nu;if(!Zt){var ln=Ct.alternate,In=ln!==null&&ln.memoizedState!==null||Ms;ln=nu;var Kn=Ms;if(nu=Zt,(Ms=In)&&!Kn)for(er=Ct;er!==null;)Zt=er,In=Zt.child,Zt.tag===22&&Zt.memoizedState!==null?Sm(Ct):In!==null?(In.return=Zt,er=In):Sm(Ct);for(;Lt!==null;)er=Lt,_m(Lt),Lt=Lt.sibling;er=Ct,nu=ln,Ms=Kn}xm(ft)}else Ct.subtreeFlags&8772&&Lt!==null?(Lt.return=Ct,er=Lt):xm(ft)}}function xm(ft){for(;er!==null;){var dt=er;if(dt.flags&8772){var Et=dt.alternate;try{if(dt.flags&8772)switch(dt.tag){case 0:case 11:case 15:Ms||Tl(5,dt);break;case 1:var At=dt.stateNode;if(dt.flags&4&&!Ms)if(Et===null)At.componentDidMount();else{var Ct=dt.elementType===dt.type?Et.memoizedProps:co(dt.type,Et.memoizedProps);At.componentDidUpdate(Ct,Et.memoizedState,At.__reactInternalSnapshotBeforeUpdate)}var Lt=dt.updateQueue;Lt!==null&&pp(dt,Lt,At);break;case 3:var Zt=dt.updateQueue;if(Zt!==null){if(Et=null,dt.child!==null)switch(dt.child.tag){case 5:Et=Yt(dt.child.stateNode);break;case 1:Et=dt.child.stateNode}pp(dt,Zt,Et)}break;case 5:var ln=dt.stateNode;Et===null&&dt.flags&4&&En(ln,dt.type,dt.memoizedProps,dt);break;case 6:break;case 4:break;case 12:break;case 13:if(xn&&dt.memoizedState===null){var In=dt.alternate;if(In!==null){var Kn=In.memoizedState;if(Kn!==null){var ir=Kn.dehydrated;ir!==null&&Qt(ir)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(ot(163))}Ms||dt.flags&512&&ju(dt)}catch(vr){To(dt,dt.return,vr)}}if(dt===ft){er=null;break}if(Et=dt.sibling,Et!==null){Et.return=dt.return,er=Et;break}er=dt.return}}function Em(ft){for(;er!==null;){var dt=er;if(dt===ft){er=null;break}var Et=dt.sibling;if(Et!==null){Et.return=dt.return,er=Et;break}er=dt.return}}function Sm(ft){for(;er!==null;){var dt=er;try{switch(dt.tag){case 0:case 11:case 15:var Et=dt.return;try{Tl(4,dt)}catch(In){To(dt,Et,In)}break;case 1:var At=dt.stateNode;if(typeof At.componentDidMount=="function"){var Ct=dt.return;try{At.componentDidMount()}catch(In){To(dt,Ct,In)}}var Lt=dt.return;try{ju(dt)}catch(In){To(dt,Lt,In)}break;case 5:var Zt=dt.return;try{ju(dt)}catch(In){To(dt,Zt,In)}}}catch(In){To(dt,dt.return,In)}if(dt===ft){er=null;break}var ln=dt.sibling;if(ln!==null){ln.return=dt.return,er=ln;break}er=dt.return}}var ou=0,su=1,au=2,lu=3,cu=4;if(typeof Symbol=="function"&&Symbol.for){var Ml=Symbol.for;ou=Ml("selector.component"),su=Ml("selector.has_pseudo_class"),au=Ml("selector.role"),lu=Ml("selector.test_id"),cu=Ml("selector.text")}function Ju(ft){var dt=hn(ft);if(dt!=null){if(typeof dt.memoizedProps["data-testname"]!="string")throw Error(ot(364));return dt}if(ft=Sn(ft),ft===null)throw Error(ot(362));return ft.stateNode.current}function Zu(ft,dt){switch(dt.$$typeof){case ou:if(ft.type===dt.value)return!0;break;case su:e:{dt=dt.value,ft=[ft,0];for(var Et=0;Et<ft.length;){var At=ft[Et++],Ct=ft[Et++],Lt=dt[Ct];if(At.tag!==5||!Dt(At)){for(;Lt!=null&&Zu(At,Lt);)Ct++,Lt=dt[Ct];if(Ct===dt.length){dt=!0;break e}else for(At=At.child;At!==null;)ft.push(At,Ct),At=At.sibling}}dt=!1}return dt;case au:if(ft.tag===5&&on(ft.stateNode,dt.value))return!0;break;case cu:if((ft.tag===5||ft.tag===6)&&(ft=Ft(ft),ft!==null&&0<=ft.indexOf(dt.value)))return!0;break;case lu:if(ft.tag===5&&(ft=ft.memoizedProps["data-testname"],typeof ft=="string"&&ft.toLowerCase()===dt.value.toLowerCase()))return!0;break;default:throw Error(ot(365))}return!1}function Qu(ft){switch(ft.$$typeof){case ou:return"<"+(bt(ft.value)||"Unknown")+">";case su:return":has("+(Qu(ft)||"")+")";case au:return'[role="'+ft.value+'"]';case cu:return'"'+ft.value+'"';case lu:return'[data-testname="'+ft.value+'"]';default:throw Error(ot(365))}}function Am(ft,dt){var Et=[];ft=[ft,0];for(var At=0;At<ft.length;){var Ct=ft[At++],Lt=ft[At++],Zt=dt[Lt];if(Ct.tag!==5||!Dt(Ct)){for(;Zt!=null&&Zu(Ct,Zt);)Lt++,Zt=dt[Lt];if(Lt===dt.length)Et.push(Ct);else for(Ct=Ct.child;Ct!==null;)ft.push(Ct,Lt),Ct=Ct.sibling}}return Et}function qu(ft,dt){if(!On)throw Error(ot(363));ft=Ju(ft),ft=Am(ft,dt),dt=[],ft=Array.from(ft);for(var Et=0;Et<ft.length;){var At=ft[Et++];if(At.tag===5)Dt(At)||dt.push(At.stateNode);else for(At=At.child;At!==null;)ft.push(At),At=At.sibling}return dt}var ev=Math.ceil,uu=st.ReactCurrentDispatcher,_f=st.ReactCurrentOwner,Zr=st.ReactCurrentBatchConfig,Sr=0,_i=null,eo=null,lo=0,Bo=0,Hs=qn(0),no=0,Cl=null,Vs=0,fu=0,_d=0,Rl=null,So=null,_h=0,ep=1/0;function Ws(){ep=Vr()+500}var du=!1,tp=null,ds=null,hu=!1,hs=null,pu=0,Pl=0,np=null,mu=-1,gu=0;function yo(){return Sr&6?Vr():mu!==-1?mu:mu=Vr()}function ps(ft){return ft.mode&1?Sr&2&&lo!==0?lo&-lo:_s.transition!==null?(gu===0&&(ft=Jo,Jo<<=1,!(Jo&4194240)&&(Jo=64),gu=ft),gu):(ft=Tr,ft!==0?ft:pn()):1}function Uo(ft,dt,Et){if(50<Pl)throw Pl=0,np=null,Error(ot(185));var At=vu(ft,dt);return At===null?null:(Ho(At,dt,Et),(!(Sr&2)||At!==_i)&&(At===_i&&(!(Sr&2)&&(fu|=dt),no===4&&ms(At,lo)),Ao(At,Et),dt===1&&Sr===0&&!(ft.mode&1)&&(Ws(),Wo&&Eo())),At)}function vu(ft,dt){ft.lanes|=dt;var Et=ft.alternate;for(Et!==null&&(Et.lanes|=dt),Et=ft,ft=ft.return;ft!==null;)ft.childLanes|=dt,Et=ft.alternate,Et!==null&&(Et.childLanes|=dt),Et=ft,ft=ft.return;return Et.tag===3?Et.stateNode:null}function Ao(ft,dt){var Et=ft.callbackNode;js(ft,dt);var At=ys(ft,ft===_i?lo:0);if(At===0)Et!==null&&Ls(Et),ft.callbackNode=null,ft.callbackPriority=0;else if(dt=At&-At,ft.callbackPriority!==dt){if(Et!=null&&Ls(Et),dt===1)ft.tag===0?Qs(Mm.bind(null,ft)):Zs(Mm.bind(null,ft)),yn?Ln(function(){Sr===0&&Eo()}):es(ls,Eo),Et=null;else{switch(Xs(At)){case 1:Et=ls;break;case 4:Et=Il;break;case 16:Et=mo;break;case 536870912:Et=Ys;break;default:Et=mo}Et=Dm(Et,Tm.bind(null,ft))}ft.callbackPriority=dt,ft.callbackNode=Et}}function Tm(ft,dt){if(mu=-1,gu=0,Sr&6)throw Error(ot(327));var Et=ft.callbackNode;if(Rs()&&ft.callbackNode!==Et)return null;var At=ys(ft,ft===_i?lo:0);if(At===0)return null;if(At&30||At&ft.expiredLanes||dt)dt=yu(ft,At);else{dt=At;var Ct=Sr;Sr|=2;var Lt=wm();(_i!==ft||lo!==dt)&&(Ws(),bs(ft,dt));do try{rv();break}catch(ln){bm(ft,ln)}while(1);Os(),uu.current=Lt,Sr=Ct,eo!==null?dt=0:(_i=null,lo=0,dt=no)}if(dt!==0){if(dt===2&&(Ct=qo(ft),Ct!==0&&(At=Ct,dt=rp(ft,Ct))),dt===1)throw Et=Cl,bs(ft,0),ms(ft,At),Ao(ft,Vr()),Et;if(dt===6)ms(ft,At);else{if(Ct=ft.current.alternate,!(At&30)&&!tv(Ct)&&(dt=yu(ft,At),dt===2&&(Lt=qo(ft),Lt!==0&&(At=Lt,dt=rp(ft,Lt))),dt===1))throw Et=Cl,bs(ft,0),ms(ft,At),Ao(ft,Vr()),Et;switch(ft.finishedWork=Ct,ft.finishedLanes=At,dt){case 0:case 1:throw Error(ot(345));case 2:ws(ft,So);break;case 3:if(ms(ft,At),(At&130023424)===At&&(dt=_h+500-Vr(),10<dt)){if(ys(ft,0)!==0)break;if(Ct=ft.suspendedLanes,(Ct&At)!==At){yo(),ft.pingedLanes|=ft.suspendedLanes&Ct;break}ft.timeoutHandle=an(ws.bind(null,ft,So),dt);break}ws(ft,So);break;case 4:if(ms(ft,At),(At&4194240)===At)break;for(dt=ft.eventTimes,Ct=-1;0<At;){var Zt=31-kr(At);Lt=1<<Zt,Zt=dt[Zt],Zt>Ct&&(Ct=Zt),At&=~Lt}if(At=Ct,At=Vr()-At,At=(120>At?120:480>At?480:1080>At?1080:1920>At?1920:3e3>At?3e3:4320>At?4320:1960*ev(At/1960))-At,10<At){ft.timeoutHandle=an(ws.bind(null,ft,So),At);break}ws(ft,So);break;case 5:ws(ft,So);break;default:throw Error(ot(329))}}}return Ao(ft,Vr()),ft.callbackNode===Et?Tm.bind(null,ft):null}function rp(ft,dt){var Et=Rl;return ft.current.memoizedState.isDehydrated&&(bs(ft,dt).flags|=256),ft=yu(ft,dt),ft!==2&&(dt=So,So=Et,dt!==null&&ip(dt)),ft}function ip(ft){So===null?So=ft:So.push.apply(So,ft)}function tv(ft){for(var dt=ft;;){if(dt.flags&16384){var Et=dt.updateQueue;if(Et!==null&&(Et=Et.stores,Et!==null))for(var At=0;At<Et.length;At++){var Ct=Et[At],Lt=Ct.getSnapshot;Ct=Ct.value;try{if(!bo(Lt(),Ct))return!1}catch{return!1}}}if(Et=dt.child,dt.subtreeFlags&16384&&Et!==null)Et.return=dt,dt=Et;else{if(dt===ft)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===ft)return!0;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}}return!0}function ms(ft,dt){for(dt&=~_d,dt&=~fu,ft.suspendedLanes|=dt,ft.pingedLanes&=~dt,ft=ft.expirationTimes;0<dt;){var Et=31-kr(dt),At=1<<Et;ft[Et]=-1,dt&=~At}}function Mm(ft){if(Sr&6)throw Error(ot(327));Rs();var dt=ys(ft,0);if(!(dt&1))return Ao(ft,Vr()),null;var Et=yu(ft,dt);if(ft.tag!==0&&Et===2){var At=qo(ft);At!==0&&(dt=At,Et=rp(ft,At))}if(Et===1)throw Et=Cl,bs(ft,0),ms(ft,dt),Ao(ft,Vr()),Et;if(Et===6)throw Error(ot(345));return ft.finishedWork=ft.current.alternate,ft.finishedLanes=dt,ws(ft,So),Ao(ft,Vr()),null}function Cm(ft){hs!==null&&hs.tag===0&&!(Sr&6)&&Rs();var dt=Sr;Sr|=1;var Et=Zr.transition,At=Tr;try{if(Zr.transition=null,Tr=1,ft)return ft()}finally{Tr=At,Zr.transition=Et,Sr=dt,!(Sr&6)&&Eo()}}function op(){Bo=Hs.current,fr(Hs)}function bs(ft,dt){ft.finishedWork=null,ft.finishedLanes=0;var Et=ft.timeoutHandle;if(Et!==Bn&&(ft.timeoutHandle=Bn,dn(Et)),eo!==null)for(Et=eo.return;Et!==null;){var At=Et;switch(Mu(At),At.tag){case 1:At=At.type.childContextTypes,At!=null&&Hr();break;case 3:Gs(),fr(hr),fr(Ir),Lu();break;case 5:Pu(At);break;case 4:Gs();break;case 13:fr(Xr);break;case 19:fr(Xr);break;case 10:jo(At.type._context);break;case 22:case 23:op()}Et=Et.return}if(_i=ft,eo=ft=gs(ft.current,null),lo=Bo=dt,no=0,Cl=null,_d=fu=Vs=0,So=Rl=null,to!==null){for(dt=0;dt<to.length;dt++)if(Et=to[dt],At=Et.interleaved,At!==null){Et.interleaved=null;var Ct=At.next,Lt=Et.pending;if(Lt!==null){var Zt=Lt.next;Lt.next=Ct,At.next=Zt}Et.pending=At}to=null}return ft}function bm(ft,dt){do{var Et=eo;try{if(Os(),Hl.current=Jl,Vl){for(var At=Yr.memoizedState;At!==null;){var Ct=At.queue;Ct!==null&&(Ct.pending=null),At=At.next}Vl=!1}if(zs=0,so=uo=Yr=null,$a=!1,yl=0,_f.current=null,Et===null||Et.return===null){no=1,Cl=dt,eo=null;break}e:{var Lt=ft,Zt=Et.return,ln=Et,In=dt;if(dt=lo,ln.flags|=32768,In!==null&&typeof In=="object"&&typeof In.then=="function"){var Kn=In,ir=ln,vr=ir.tag;if(!(ir.mode&1)&&(vr===0||vr===11||vr===15)){var dr=ir.alternate;dr?(ir.updateQueue=dr.updateQueue,ir.memoizedState=dr.memoizedState,ir.lanes=dr.lanes):(ir.updateQueue=null,ir.memoizedState=null)}var zr=Kp(Zt);if(zr!==null){zr.flags&=-257,Yp(zr,Zt,ln,Lt,dt),zr.mode&1&&Xp(Lt,Kn,dt),dt=zr,In=Kn;var cr=dt.updateQueue;if(cr===null){var po=new Set;po.add(In),dt.updateQueue=po}else cr.add(In);break e}else{if(!(dt&1)){Xp(Lt,Kn,dt),sp();break e}In=Error(ot(426))}}else if(Wr&&ln.mode&1){var No=Kp(Zt);if(No!==null){!(No.flags&65536)&&(No.flags|=256),Yp(No,Zt,ln,Lt,dt),wu(In);break e}}Lt=In,no!==4&&(no=2),Rl===null?Rl=[Lt]:Rl.push(Lt),In=Nu(In,ln),ln=Zt;do{switch(ln.tag){case 3:ln.flags|=65536,dt&=-dt,ln.lanes|=dt;var Tn=Wp(ln,In,dt);hp(ln,Tn);break e;case 1:Lt=In;var un=ln.type,Cn=ln.stateNode;if(!(ln.flags&128)&&(typeof un.getDerivedStateFromError=="function"||Cn!==null&&typeof Cn.componentDidCatch=="function"&&(ds===null||!ds.has(Cn)))){ln.flags|=65536,dt&=-dt,ln.lanes|=dt;var tr=jp(ln,Lt,dt);hp(ln,tr);break e}}ln=ln.return}while(ln!==null)}Pm(Et)}catch(lr){dt=lr,eo===Et&&Et!==null&&(eo=Et=Et.return);continue}break}while(1)}function wm(){var ft=uu.current;return uu.current=Jl,ft===null?Jl:ft}function sp(){(no===0||no===3||no===2)&&(no=4),_i===null||!(Vs&268435455)&&!(fu&268435455)||ms(_i,lo)}function yu(ft,dt){var Et=Sr;Sr|=2;var At=wm();_i===ft&&lo===dt||bs(ft,dt);do try{nv();break}catch(Ct){bm(ft,Ct)}while(1);if(Os(),Sr=Et,uu.current=At,eo!==null)throw Error(ot(261));return _i=null,lo=0,no}function nv(){for(;eo!==null;)Rm(eo)}function rv(){for(;eo!==null&&!Ks();)Rm(eo)}function Rm(ft){var dt=Im(ft.alternate,ft,Bo);ft.memoizedProps=ft.pendingProps,dt===null?Pm(ft):eo=dt,_f.current=null}function Pm(ft){var dt=ft;do{var Et=dt.alternate;if(ft=dt.return,dt.flags&32768){if(Et=Jm(Et,dt),Et!==null){Et.flags&=32767,eo=Et;return}if(ft!==null)ft.flags|=32768,ft.subtreeFlags=0,ft.deletions=null;else{no=6,eo=null;return}}else if(Et=Xm(Et,dt,Bo),Et!==null){eo=Et;return}if(dt=dt.sibling,dt!==null){eo=dt;return}eo=dt=ft}while(dt!==null);no===0&&(no=5)}function ws(ft,dt){var Et=Tr,At=Zr.transition;try{Zr.transition=null,Tr=1,iv(ft,dt,Et)}finally{Zr.transition=At,Tr=Et}return null}function iv(ft,dt,Et){do Rs();while(hs!==null);if(Sr&6)throw Error(ot(327));var At=ft.finishedWork,Ct=ft.finishedLanes;if(At===null)return null;if(ft.finishedWork=null,ft.finishedLanes=0,At===ft.current)throw Error(ot(177));ft.callbackNode=null,ft.callbackPriority=0;var Lt=At.lanes|At.childLanes;if(as(ft,Lt),ft===_i&&(eo=_i=null,lo=0),!(At.subtreeFlags&2064)&&!(At.flags&2064)||hu||(hu=!0,Dm(mo,function(){return Rs(),null})),Lt=(At.flags&15990)!==0,At.subtreeFlags&15990||Lt){Lt=Zr.transition,Zr.transition=null;var Zt=Tr;Tr=1;var ln=Sr;Sr|=4,_f.current=null,Qm(ft,At),qm(ft,At),Vt(ft.containerInfo),ft.current=At,_g(At),Ll(),Sr=ln,Tr=Zt,Zr.transition=Lt}else ft.current=At;if(hu&&(hu=!1,hs=ft,pu=Ct),Lt=ft.pendingLanes,Lt===0&&(ds=null),Js(At.stateNode),Ao(ft,Vr()),dt!==null)for(Et=ft.onRecoverableError,At=0;At<dt.length;At++)Et(dt[At]);if(du)throw du=!1,ft=tp,tp=null,ft;return pu&1&&ft.tag!==0&&Rs(),Lt=ft.pendingLanes,Lt&1?ft===np?Pl++:(Pl=0,np=ft):Pl=0,Eo(),null}function Rs(){if(hs!==null){var ft=Xs(pu),dt=Zr.transition,Et=Tr;try{if(Zr.transition=null,Tr=16>ft?16:ft,hs===null)var At=!1;else{if(ft=hs,hs=null,pu=0,Sr&6)throw Error(ot(331));var Ct=Sr;for(Sr|=4,er=ft.current;er!==null;){var Lt=er,Zt=Lt.child;if(er.flags&16){var ln=Lt.deletions;if(ln!==null){for(var In=0;In<ln.length;In++){var Kn=ln[In];for(er=Kn;er!==null;){var ir=er;switch(ir.tag){case 0:case 11:case 15:Cs(8,ir,Lt)}var vr=ir.child;if(vr!==null)vr.return=ir,er=vr;else for(;er!==null;){ir=er;var dr=ir.sibling,zr=ir.return;if(pm(ir),ir===Kn){er=null;break}if(dr!==null){dr.return=zr,er=dr;break}er=zr}}}var cr=Lt.alternate;if(cr!==null){var po=cr.child;if(po!==null){cr.child=null;do{var No=po.sibling;po.sibling=null,po=No}while(po!==null)}}er=Lt}}if(Lt.subtreeFlags&2064&&Zt!==null)Zt.return=Lt,er=Zt;else e:for(;er!==null;){if(Lt=er,Lt.flags&2048)switch(Lt.tag){case 0:case 11:case 15:Cs(9,Lt,Lt.return)}var Tn=Lt.sibling;if(Tn!==null){Tn.return=Lt.return,er=Tn;break e}er=Lt.return}}var un=ft.current;for(er=un;er!==null;){Zt=er;var Cn=Zt.child;if(Zt.subtreeFlags&2064&&Cn!==null)Cn.return=Zt,er=Cn;else e:for(Zt=un;er!==null;){if(ln=er,ln.flags&2048)try{switch(ln.tag){case 0:case 11:case 15:Tl(9,ln)}}catch(lr){To(ln,ln.return,lr)}if(ln===Zt){er=null;break e}var tr=ln.sibling;if(tr!==null){tr.return=ln.return,er=tr;break e}er=ln.return}}if(Sr=Ct,Eo(),Co&&typeof Co.onPostCommitFiberRoot=="function")try{Co.onPostCommitFiberRoot(cs,ft)}catch{}At=!0}return At}finally{Tr=Et,Zr.transition=dt}}return!1}function Bm(ft,dt,Et){dt=Nu(Et,dt),dt=Wp(ft,dt,1),fs(ft,dt),dt=yo(),ft=vu(ft,1),ft!==null&&(Ho(ft,1,dt),Ao(ft,dt))}function To(ft,dt,Et){if(ft.tag===3)Bm(ft,ft,Et);else for(;dt!==null;){if(dt.tag===3){Bm(dt,ft,Et);break}else if(dt.tag===1){var At=dt.stateNode;if(typeof dt.type.getDerivedStateFromError=="function"||typeof At.componentDidCatch=="function"&&(ds===null||!ds.has(At))){ft=Nu(Et,ft),ft=jp(dt,ft,1),fs(dt,ft),ft=yo(),dt=vu(dt,1),dt!==null&&(Ho(dt,1,ft),Ao(dt,ft));break}}dt=dt.return}}function ov(ft,dt,Et){var At=ft.pingCache;At!==null&&At.delete(dt),dt=yo(),ft.pingedLanes|=ft.suspendedLanes&Et,_i===ft&&(lo&Et)===Et&&(no===4||no===3&&(lo&130023424)===lo&&500>Vr()-_h?bs(ft,0):_d|=Et),Ao(ft,dt)}function Lm(ft,dt){dt===0&&(ft.mode&1?(dt=Zo,Zo<<=1,!(Zo&130023424)&&(Zo=4194304)):dt=1);var Et=yo();ft=vu(ft,dt),ft!==null&&(Ho(ft,dt,Et),Ao(ft,Et))}function sv(ft){var dt=ft.memoizedState,Et=0;dt!==null&&(Et=dt.retryLane),Lm(ft,Et)}function av(ft,dt){var Et=0;switch(ft.tag){case 13:var At=ft.stateNode,Ct=ft.memoizedState;Ct!==null&&(Et=Ct.retryLane);break;case 19:At=ft.stateNode;break;default:throw Error(ot(314))}At!==null&&At.delete(dt),Lm(ft,Et)}var Im;Im=function(ft,dt,Et){if(ft!==null)if(ft.memoizedProps!==dt.pendingProps||hr.current)Po=!0;else{if(!(ft.lanes&Et)&&!(dt.flags&128))return Po=!1,Ym(ft,dt,Et);Po=!!(ft.flags&131072)}else Po=!1,Wr&&dt.flags&1048576&&_p(dt,$l,dt.index);switch(dt.lanes=0,dt.tag){case 2:var At=dt.type;ft!==null&&(ft.alternate=null,dt.alternate=null,dt.flags|=2),ft=dt.pendingProps;var Ct=Pr(dt,Ir.current);oo(dt,Et),Ct=Du(null,dt,At,ft,Ct,Et);var Lt=Ou();return dt.flags|=1,typeof Ct=="object"&&Ct!==null&&typeof Ct.render=="function"&&Ct.$$typeof===void 0?(dt.tag=1,dt.memoizedState=null,dt.updateQueue=null,Lr(At)?(Lt=!0,br(dt)):Lt=!1,dt.memoizedState=Ct.state!==null&&Ct.state!==void 0?Ct.state:null,Eu(dt),Ct.updater=Ul,dt.stateNode=Ct,Ct._reactInternals=dt,Au(dt,At,ft,Et),dt=zu(null,dt,At,!0,Lt,Et)):(dt.tag=0,Wr&&Lt&&Tu(dt),vo(null,dt,Ct,Et),dt=dt.child),dt;case 16:At=dt.elementType;e:{switch(ft!==null&&(ft.alternate=null,dt.alternate=null,dt.flags|=2),ft=dt.pendingProps,Ct=At._init,At=Ct(At._payload),dt.type=At,Ct=dt.tag=cv(At),ft=co(At,ft),Ct){case 0:dt=Gu(null,dt,At,ft,Et);break e;case 1:dt=rm(null,dt,At,ft,Et);break e;case 11:dt=Qp(null,dt,At,ft,Et);break e;case 14:dt=qp(null,dt,At,co(At.type,ft),Et);break e}throw Error(ot(306,At,""))}return dt;case 0:return At=dt.type,Ct=dt.pendingProps,Ct=dt.elementType===At?Ct:co(At,Ct),Gu(ft,dt,At,Ct,Et);case 1:return At=dt.type,Ct=dt.pendingProps,Ct=dt.elementType===At?Ct:co(At,Ct),rm(ft,dt,At,Ct,Et);case 3:e:{if(im(dt),ft===null)throw Error(ot(387));At=dt.pendingProps,Lt=dt.memoizedState,Ct=Lt.element,dp(ft,dt),Fl(dt,At,null,Et);var Zt=dt.memoizedState;if(At=Zt.element,xn&&Lt.isDehydrated)if(Lt={element:At,isDehydrated:!1,cache:Zt.cache,transitions:Zt.transitions},dt.updateQueue.baseState=Lt,dt.memoizedState=Lt,dt.flags&256){Ct=Error(ot(423)),dt=om(ft,dt,At,Et,Ct);break e}else if(At!==Ct){Ct=Error(ot(424)),dt=om(ft,dt,At,Et,Ct);break e}else for(xn&&(Ro=Kr(dt.stateNode.containerInfo),wo=dt,Wr=!0,zo=null,qs=!1),Et=Mp(dt,null,At,Et),dt.child=Et;Et;)Et.flags=Et.flags&-3|4096,Et=Et.sibling;else{if(ks(),At===Ct){dt=ss(ft,dt,Et);break e}vo(ft,dt,At,Et)}dt=dt.child}return dt;case 5:return Cp(dt),ft===null&&bu(dt),At=dt.type,Ct=dt.pendingProps,Lt=ft!==null?ft.memoizedProps:null,Zt=Ct.children,sn(At,Ct)?Zt=null:Lt!==null&&sn(At,Lt)&&(dt.flags|=32),nm(ft,dt),vo(ft,dt,Zt,Et),dt.child;case 6:return ft===null&&bu(dt),null;case 13:return sm(ft,dt,Et);case 4:return Ru(dt,dt.stateNode.containerInfo),At=dt.pendingProps,ft===null?dt.child=Ns(dt,null,At,Et):vo(ft,dt,At,Et),dt.child;case 11:return At=dt.type,Ct=dt.pendingProps,Ct=dt.elementType===At?Ct:co(At,Ct),Qp(ft,dt,At,Ct,Et);case 7:return vo(ft,dt,dt.pendingProps,Et),dt.child;case 8:return vo(ft,dt,dt.pendingProps.children,Et),dt.child;case 12:return vo(ft,dt,dt.pendingProps.children,Et),dt.child;case 10:e:{if(At=dt.type._context,Ct=dt.pendingProps,Lt=dt.memoizedProps,Zt=Ct.value,Dl(dt,At,Zt),Lt!==null)if(bo(Lt.value,Zt)){if(Lt.children===Ct.children&&!hr.current){dt=ss(ft,dt,Et);break e}}else for(Lt=dt.child,Lt!==null&&(Lt.return=dt);Lt!==null;){var ln=Lt.dependencies;if(ln!==null){Zt=Lt.child;for(var In=ln.firstContext;In!==null;){if(In.context===At){if(Lt.tag===1){In=ts(-1,Et&-Et),In.tag=2;var Kn=Lt.updateQueue;if(Kn!==null){Kn=Kn.shared;var ir=Kn.pending;ir===null?In.next=In:(In.next=ir.next,ir.next=In),Kn.pending=In}}Lt.lanes|=Et,In=Lt.alternate,In!==null&&(In.lanes|=Et),qr(Lt.return,Et,dt),ln.lanes|=Et;break}In=In.next}}else if(Lt.tag===10)Zt=Lt.type===dt.type?null:Lt.child;else if(Lt.tag===18){if(Zt=Lt.return,Zt===null)throw Error(ot(341));Zt.lanes|=Et,ln=Zt.alternate,ln!==null&&(ln.lanes|=Et),qr(Zt,Et,dt),Zt=Lt.sibling}else Zt=Lt.child;if(Zt!==null)Zt.return=Lt;else for(Zt=Lt;Zt!==null;){if(Zt===dt){Zt=null;break}if(Lt=Zt.sibling,Lt!==null){Lt.return=Zt.return,Zt=Lt;break}Zt=Zt.return}Lt=Zt}vo(ft,dt,Ct.children,Et),dt=dt.child}return dt;case 9:return Ct=dt.type,At=dt.pendingProps.children,oo(dt,Et),Ct=Gr(Ct),At=At(Ct),dt.flags|=1,vo(ft,dt,At,Et),dt.child;case 14:return At=dt.type,Ct=co(At,dt.pendingProps),Ct=co(At.type,Ct),qp(ft,dt,At,Ct,Et);case 15:return em(ft,dt,dt.type,dt.pendingProps,Et);case 17:return At=dt.type,Ct=dt.pendingProps,Ct=dt.elementType===At?Ct:co(At,Ct),ft!==null&&(ft.alternate=null,dt.alternate=null,dt.flags|=2),dt.tag=1,Lr(At)?(ft=!0,br(dt)):ft=!1,oo(dt,Et),vp(dt,At,Ct),Au(dt,At,Ct,Et),zu(null,dt,At,!0,ft,Et);case 19:return um(ft,dt,Et);case 22:return tm(ft,dt,Et)}throw Error(ot(156,dt.tag))};function Dm(ft,dt){return es(ft,dt)}function lv(ft,dt,Et,At){this.tag=ft,this.key=Et,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=dt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=At,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ko(ft,dt,Et,At){return new lv(ft,dt,Et,At)}function ap(ft){return ft=ft.prototype,!(!ft||!ft.isReactComponent)}function cv(ft){if(typeof ft=="function")return ap(ft)?1:0;if(ft!=null){if(ft=ft.$$typeof,ft===yt)return 11;if(ft===_t)return 14}return 2}function gs(ft,dt){var Et=ft.alternate;return Et===null?(Et=ko(ft.tag,dt,ft.key,ft.mode),Et.elementType=ft.elementType,Et.type=ft.type,Et.stateNode=ft.stateNode,Et.alternate=ft,ft.alternate=Et):(Et.pendingProps=dt,Et.type=ft.type,Et.flags=0,Et.subtreeFlags=0,Et.deletions=null),Et.flags=ft.flags&14680064,Et.childLanes=ft.childLanes,Et.lanes=ft.lanes,Et.child=ft.child,Et.memoizedProps=ft.memoizedProps,Et.memoizedState=ft.memoizedState,Et.updateQueue=ft.updateQueue,dt=ft.dependencies,Et.dependencies=dt===null?null:{lanes:dt.lanes,firstContext:dt.firstContext},Et.sibling=ft.sibling,Et.index=ft.index,Et.ref=ft.ref,Et}function _u(ft,dt,Et,At,Ct,Lt){var Zt=2;if(At=ft,typeof ft=="function")ap(ft)&&(Zt=1);else if(typeof ft=="string")Zt=5;else e:switch(ft){case ct:return Ps(Et.children,Ct,Lt,dt);case ut:Zt=8,Ct|=8;break;case ht:return ft=ko(12,Et,dt,Ct|2),ft.elementType=ht,ft.lanes=Lt,ft;case vt:return ft=ko(13,Et,dt,Ct),ft.elementType=vt,ft.lanes=Lt,ft;case mt:return ft=ko(19,Et,dt,Ct),ft.elementType=mt,ft.lanes=Lt,ft;case St:return xu(Et,Ct,Lt,dt);default:if(typeof ft=="object"&&ft!==null)switch(ft.$$typeof){case pt:Zt=10;break e;case gt:Zt=9;break e;case yt:Zt=11;break e;case _t:Zt=14;break e;case xt:Zt=16,At=null;break e}throw Error(ot(130,ft==null?ft:typeof ft,""))}return dt=ko(Zt,Et,dt,Ct),dt.elementType=ft,dt.type=At,dt.lanes=Lt,dt}function Ps(ft,dt,Et,At){return ft=ko(7,ft,At,dt),ft.lanes=Et,ft}function xu(ft,dt,Et,At){return ft=ko(22,ft,At,dt),ft.elementType=St,ft.lanes=Et,ft.stateNode={},ft}function lp(ft,dt,Et){return ft=ko(6,ft,null,dt),ft.lanes=Et,ft}function cp(ft,dt,Et){return dt=ko(4,ft.children!==null?ft.children:[],ft.key,dt),dt.lanes=Et,dt.stateNode={containerInfo:ft.containerInfo,pendingChildren:null,implementation:ft.implementation},dt}function uv(ft,dt,Et,At,Ct){this.tag=dt,this.containerInfo=ft,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Bn,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bs(0),this.expirationTimes=Bs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bs(0),this.identifierPrefix=At,this.onRecoverableError=Ct,xn&&(this.mutableSourceEagerHydrationData=null)}function Om(ft,dt,Et,At,Ct,Lt,Zt,ln,In){return ft=new uv(ft,dt,Et,ln,In),dt===1?(dt=1,Lt===!0&&(dt|=8)):dt=0,Lt=ko(3,null,null,dt),ft.current=Lt,Lt.stateNode=ft,Lt.memoizedState={element:At,isDehydrated:Et,cache:null,transitions:null},Eu(Lt),ft}function Fm(ft){if(!ft)return gr;ft=ft._reactInternals;e:{if(wt(ft)!==ft||ft.tag!==1)throw Error(ot(170));var dt=ft;do{switch(dt.tag){case 3:dt=dt.stateNode.context;break e;case 1:if(Lr(dt.type)){dt=dt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}dt=dt.return}while(dt!==null);throw Error(ot(171))}if(ft.tag===1){var Et=ft.type;if(Lr(Et))return $r(ft,Et,dt)}return dt}function Um(ft){var dt=ft._reactInternals;if(dt===void 0)throw typeof ft.render=="function"?Error(ot(188)):(ft=Object.keys(ft).join(","),Error(ot(268,ft)));return ft=Ut(dt),ft===null?null:ft.stateNode}function km(ft,dt){if(ft=ft.memoizedState,ft!==null&&ft.dehydrated!==null){var Et=ft.retryLane;ft.retryLane=Et!==0&&Et<dt?Et:dt}}function up(ft,dt){km(ft,dt),(ft=ft.alternate)&&km(ft,dt)}function fv(ft){return ft=Ut(ft),ft===null?null:ft.stateNode}function dv(){return null}return _e.attemptContinuousHydration=function(ft){if(ft.tag===13){var dt=yo();Uo(ft,134217728,dt),up(ft,134217728)}},_e.attemptHydrationAtCurrentPriority=function(ft){if(ft.tag===13){var dt=yo(),Et=ps(ft);Uo(ft,Et,dt),up(ft,Et)}},_e.attemptSynchronousHydration=function(ft){switch(ft.tag){case 3:var dt=ft.stateNode;if(dt.current.memoizedState.isDehydrated){var Et=Qo(dt.pendingLanes);Et!==0&&(Vo(dt,Et|1),Ao(dt,Vr()),!(Sr&6)&&(Ws(),Eo()))}break;case 13:var At=yo();Cm(function(){return Uo(ft,1,At)}),up(ft,1)}},_e.batchedUpdates=function(ft,dt){var Et=Sr;Sr|=1;try{return ft(dt)}finally{Sr=Et,Sr===0&&(Ws(),Wo&&Eo())}},_e.createComponentSelector=function(ft){return{$$typeof:ou,value:ft}},_e.createContainer=function(ft,dt,Et,At,Ct,Lt,Zt){return Om(ft,dt,!1,null,Et,At,Ct,Lt,Zt)},_e.createHasPseudoClassSelector=function(ft){return{$$typeof:su,value:ft}},_e.createHydrationContainer=function(ft,dt,Et,At,Ct,Lt,Zt,ln,In){return ft=Om(Et,At,!0,ft,Ct,Lt,Zt,ln,In),ft.context=Fm(null),Et=ft.current,At=yo(),Ct=ps(Et),Lt=ts(At,Ct),Lt.callback=dt??null,fs(Et,Lt),ft.current.lanes=Ct,Ho(ft,Ct,At),Ao(ft,At),ft},_e.createPortal=function(ft,dt,Et){var At=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lt,key:At==null?null:""+At,children:ft,containerInfo:dt,implementation:Et}},_e.createRoleSelector=function(ft){return{$$typeof:au,value:ft}},_e.createTestNameSelector=function(ft){return{$$typeof:lu,value:ft}},_e.createTextSelector=function(ft){return{$$typeof:cu,value:ft}},_e.deferredUpdates=function(ft){var dt=Tr,Et=Zr.transition;try{return Zr.transition=null,Tr=16,ft()}finally{Tr=dt,Zr.transition=Et}},_e.discreteUpdates=function(ft,dt,Et,At,Ct){var Lt=Tr,Zt=Zr.transition;try{return Zr.transition=null,Tr=1,ft(dt,Et,At,Ct)}finally{Tr=Lt,Zr.transition=Zt,Sr===0&&Ws()}},_e.findAllNodes=qu,_e.findBoundingRects=function(ft,dt){if(!On)throw Error(ot(363));dt=qu(ft,dt),ft=[];for(var Et=0;Et<dt.length;Et++)ft.push(jn(dt[Et]));for(dt=ft.length-1;0<dt;dt--){Et=ft[dt];for(var At=Et.x,Ct=At+Et.width,Lt=Et.y,Zt=Lt+Et.height,ln=dt-1;0<=ln;ln--)if(dt!==ln){var In=ft[ln],Kn=In.x,ir=Kn+In.width,vr=In.y,dr=vr+In.height;if(At>=Kn&&Lt>=vr&&Ct<=ir&&Zt<=dr){ft.splice(dt,1);break}else if(At!==Kn||Et.width!==In.width||dr<Lt||vr>Zt){if(!(Lt!==vr||Et.height!==In.height||ir<At||Kn>Ct)){Kn>At&&(In.width+=Kn-At,In.x=At),ir<Ct&&(In.width=Ct-Kn),ft.splice(dt,1);break}}else{vr>Lt&&(In.height+=vr-Lt,In.y=Lt),dr<Zt&&(In.height=Zt-vr),ft.splice(dt,1);break}}}return ft},_e.findHostInstance=Um,_e.findHostInstanceWithNoPortals=function(ft){return ft=Ot(ft),ft=ft!==null?zt(ft):null,ft===null?null:ft.stateNode},_e.findHostInstanceWithWarning=function(ft){return Um(ft)},_e.flushControlled=function(ft){var dt=Sr;Sr|=1;var Et=Zr.transition,At=Tr;try{Zr.transition=null,Tr=1,ft()}finally{Tr=At,Zr.transition=Et,Sr=dt,Sr===0&&(Ws(),Eo())}},_e.flushPassiveEffects=Rs,_e.flushSync=Cm,_e.focusWithin=function(ft,dt){if(!On)throw Error(ot(363));for(ft=Ju(ft),dt=Am(ft,dt),dt=Array.from(dt),ft=0;ft<dt.length;){var Et=dt[ft++];if(!Dt(Et)){if(Et.tag===5&&bn(Et.stateNode))return!0;for(Et=Et.child;Et!==null;)dt.push(Et),Et=Et.sibling}}return!1},_e.getCurrentUpdatePriority=function(){return Tr},_e.getFindAllNodesFailureDescription=function(ft,dt){if(!On)throw Error(ot(363));var Et=0,At=[];ft=[Ju(ft),0];for(var Ct=0;Ct<ft.length;){var Lt=ft[Ct++],Zt=ft[Ct++],ln=dt[Zt];if((Lt.tag!==5||!Dt(Lt))&&(Zu(Lt,ln)&&(At.push(Qu(ln)),Zt++,Zt>Et&&(Et=Zt)),Zt<dt.length))for(Lt=Lt.child;Lt!==null;)ft.push(Lt,Zt),Lt=Lt.sibling}if(Et<dt.length){for(ft=[];Et<dt.length;Et++)ft.push(Qu(dt[Et]));return`findAllNodes was able to match part of the selector:
  `+(At.join(" > ")+`

No matching component was found for:
  `)+ft.join(" > ")}return null},_e.getPublicRootInstance=function(ft){if(ft=ft.current,!ft.child)return null;switch(ft.child.tag){case 5:return Yt(ft.child.stateNode);default:return ft.child.stateNode}},_e.injectIntoDevTools=function(ft){if(ft={bundleType:ft.bundleType,version:ft.version,rendererPackageName:ft.rendererPackageName,rendererConfig:ft.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:st.ReactCurrentDispatcher,findHostInstanceByFiber:fv,findFiberByHostInstance:ft.findFiberByHostInstance||dv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")ft=!1;else{var dt=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(dt.isDisabled||!dt.supportsFiber)ft=!0;else{try{cs=dt.inject(ft),Co=dt}catch{}ft=!!dt.checkDCE}}return ft},_e.isAlreadyRendering=function(){return!1},_e.observeVisibleRects=function(ft,dt,Et,At){if(!On)throw Error(ot(363));ft=qu(ft,dt);var Ct=Mn(ft,Et,At).disconnect;return{disconnect:function(){Ct()}}},_e.registerMutableSourceForHydration=function(ft,dt){var Et=dt._getVersion;Et=Et(dt._source),ft.mutableSourceEagerHydrationData==null?ft.mutableSourceEagerHydrationData=[dt,Et]:ft.mutableSourceEagerHydrationData.push(dt,Et)},_e.runWithPriority=function(ft,dt){var Et=Tr;try{return Tr=ft,dt()}finally{Tr=Et}},_e.shouldError=function(){return null},_e.shouldSuspend=function(){return!1},_e.updateContainer=function(ft,dt,Et,At){var Ct=dt.current,Lt=yo(),Zt=ps(Ct);return Et=Fm(Et),dt.context===null?dt.context=Et:dt.pendingContext=Et,dt=ts(Lt,Zt),dt.payload={element:ft},At=At===void 0?null:At,At!==null&&(dt.callback=At),fs(Ct,dt),ft=Uo(Ct,Zt,Lt),ft!==null&&Ol(ft,Ct,Zt),Zt},_e};(function(tt){tt.exports=reactReconciler_production_min})(reactReconciler);const Reconciler=getDefaultExportFromCjs(reactReconcilerExports),isPromise=tt=>typeof tt=="object"&&typeof tt.then=="function",globalCache=[];function shallowEqualArrays(tt,_,_e=(nt,rt)=>nt===rt){if(tt===_)return!0;if(!tt||!_)return!1;const nt=tt.length;if(_.length!==nt)return!1;for(let rt=0;rt<nt;rt++)if(!_e(tt[rt],_[rt]))return!1;return!0}function query(tt,_=null,_e=!1,nt={}){_===null&&(_=[tt]);for(const it of globalCache)if(shallowEqualArrays(_,it.keys,it.equal)){if(_e)return;if(Object.prototype.hasOwnProperty.call(it,"error"))throw it.error;if(Object.prototype.hasOwnProperty.call(it,"response"))return nt.lifespan&&nt.lifespan>0&&(it.timeout&&clearTimeout(it.timeout),it.timeout=setTimeout(it.remove,nt.lifespan)),it.response;if(!_e)throw it.promise}const rt={keys:_,equal:nt.equal,remove:()=>{const it=globalCache.indexOf(rt);it!==-1&&globalCache.splice(it,1)},promise:(isPromise(tt)?tt:tt(..._)).then(it=>{rt.response=it,nt.lifespan&&nt.lifespan>0&&(rt.timeout=setTimeout(rt.remove,nt.lifespan))}).catch(it=>rt.error=it)};if(globalCache.push(rt),!_e)throw rt.promise}const suspend=(tt,_,_e)=>query(tt,_,!1,_e),preload=(tt,_,_e)=>void query(tt,_,!0,_e),clear=tt=>{if(tt===void 0||tt.length===0)globalCache.splice(0,globalCache.length);else{const _=globalCache.find(_e=>shallowEqualArrays(tt,_e.keys,_e.equal));_&&_.remove()}},catalogue={},extend$2=tt=>void Object.assign(catalogue,tt);function createRenderer(tt,_){function _e(ct,{args:ut=[],attach:ht,...pt},gt){let yt=`${ct[0].toUpperCase()}${ct.slice(1)}`,vt;if(ct==="primitive"){if(pt.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const mt=pt.object;vt=prepare(mt,{type:ct,root:gt,attach:ht,primitive:!0})}else{const mt=catalogue[yt];if(!mt)throw new Error(`R3F: ${yt} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(ut))throw new Error("R3F: The args prop must be an array!");vt=prepare(new mt(...ut),{type:ct,root:gt,attach:ht,memoizedProps:{args:ut}})}return vt.__r3f.attach===void 0&&(vt instanceof BufferGeometry?vt.__r3f.attach="geometry":vt instanceof Material&&(vt.__r3f.attach="material")),yt!=="inject"&&applyProps$1(vt,pt),vt}function nt(ct,ut){let ht=!1;if(ut){var pt,gt;(pt=ut.__r3f)!=null&&pt.attach?attach(ct,ut,ut.__r3f.attach):ut.isObject3D&&ct.isObject3D&&(ct.add(ut),ht=!0),ht||(gt=ct.__r3f)==null||gt.objects.push(ut),ut.__r3f||prepare(ut,{}),ut.__r3f.parent=ct,updateInstance(ut),invalidateInstance(ut)}}function rt(ct,ut,ht){let pt=!1;if(ut){var gt,yt;if((gt=ut.__r3f)!=null&&gt.attach)attach(ct,ut,ut.__r3f.attach);else if(ut.isObject3D&&ct.isObject3D){ut.parent=ct,ut.dispatchEvent({type:"added"});const vt=ct.children.filter(_t=>_t!==ut),mt=vt.indexOf(ht);ct.children=[...vt.slice(0,mt),ut,...vt.slice(mt)],pt=!0}pt||(yt=ct.__r3f)==null||yt.objects.push(ut),ut.__r3f||prepare(ut,{}),ut.__r3f.parent=ct,updateInstance(ut),invalidateInstance(ut)}}function it(ct,ut,ht=!1){ct&&[...ct].forEach(pt=>ot(ut,pt,ht))}function ot(ct,ut,ht){if(ut){var pt,gt,yt;if(ut.__r3f&&(ut.__r3f.parent=null),(pt=ct.__r3f)!=null&&pt.objects&&(ct.__r3f.objects=ct.__r3f.objects.filter(St=>St!==ut)),(gt=ut.__r3f)!=null&&gt.attach)detach(ct,ut,ut.__r3f.attach);else if(ut.isObject3D&&ct.isObject3D){var vt;ct.remove(ut),(vt=ut.__r3f)!=null&&vt.root&&removeInteractivity(ut.__r3f.root,ut)}const _t=(yt=ut.__r3f)==null?void 0:yt.primitive,xt=ht===void 0?ut.dispose!==null&&!_t:ht;if(!_t){var mt;it((mt=ut.__r3f)==null?void 0:mt.objects,ut,xt),it(ut.children,ut,xt)}delete ut.__r3f,xt&&ut.dispose&&ut.type!=="Scene"&&schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,()=>{try{ut.dispose()}catch{}}),invalidateInstance(ct)}}function st(ct,ut,ht,pt){var gt;const yt=(gt=ct.__r3f)==null?void 0:gt.parent;if(!yt)return;const vt=_e(ut,ht,ct.__r3f.root);if(ct.children){for(const mt of ct.children)mt.__r3f&&nt(vt,mt);ct.children=ct.children.filter(mt=>!mt.__r3f)}ct.__r3f.objects.forEach(mt=>nt(vt,mt)),ct.__r3f.objects=[],ct.__r3f.autoRemovedBeforeAppend||ot(yt,ct),vt.parent&&(vt.__r3f.autoRemovedBeforeAppend=!0),nt(yt,vt),vt.raycast&&vt.__r3f.eventCount&&vt.__r3f.root.getState().internal.interaction.push(vt),[pt,pt.alternate].forEach(mt=>{mt!==null&&(mt.stateNode=vt,mt.ref&&(typeof mt.ref=="function"?mt.ref(vt):mt.ref.current=vt))})}const at=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Reconciler({createInstance:_e,removeChild:ot,appendChild:nt,appendInitialChild:nt,insertBefore:rt,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(ct,ut)=>{if(!ut)return;const ht=ct.getState().scene;ht.__r3f&&(ht.__r3f.root=ct,nt(ht,ut))},removeChildFromContainer:(ct,ut)=>{ut&&ot(ct.getState().scene,ut)},insertInContainerBefore:(ct,ut,ht)=>{if(!ut||!ht)return;const pt=ct.getState().scene;pt.__r3f&&rt(pt,ut,ht)},getRootHostContext:()=>null,getChildHostContext:ct=>ct,finalizeInitialChildren(ct){var ut;const ht=(ut=ct==null?void 0:ct.__r3f)!=null?ut:{};return Boolean(ht.handlers)},prepareUpdate(ct,ut,ht,pt){if(ct.__r3f.primitive&&pt.object&&pt.object!==ct)return[!0];{const{args:gt=[],children:yt,...vt}=pt,{args:mt=[],children:_t,...xt}=ht;if(!Array.isArray(gt))throw new Error("R3F: the args prop must be an array!");if(gt.some((Tt,Mt)=>Tt!==mt[Mt]))return[!0];const St=diffProps(ct,vt,xt,!0);return St.changes.length?[!1,St]:null}},commitUpdate(ct,[ut,ht],pt,gt,yt,vt){ut?st(ct,pt,yt,vt):applyProps$1(ct,ht)},commitMount(ct,ut,ht,pt){var gt;const yt=(gt=ct.__r3f)!=null?gt:{};ct.raycast&&yt.handlers&&yt.eventCount&&ct.__r3f.root.getState().internal.interaction.push(ct)},getPublicInstance:ct=>ct,prepareForCommit:()=>null,preparePortalMount:ct=>prepare(ct.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(ct){var ut;const{attach:ht,parent:pt}=(ut=ct.__r3f)!=null?ut:{};ht&&pt&&detach(pt,ct,ht),ct.isObject3D&&(ct.visible=!1),invalidateInstance(ct)},unhideInstance(ct,ut){var ht;const{attach:pt,parent:gt}=(ht=ct.__r3f)!=null?ht:{};pt&&gt&&attach(gt,ct,pt),(ct.isObject3D&&ut.visible==null||ut.visible)&&(ct.visible=!0),invalidateInstance(ct)},createTextInstance:at,hideTextInstance:at,unhideTextInstance:at,getCurrentEventPriority:()=>_?_():constantsExports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&is.fun(performance.now)?performance.now:is.fun(Date.now)?Date.now:()=>0,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0}),applyProps:applyProps$1}}var _window$document,_window$navigator;const hasColorSpace$1=tt=>"colorSpace"in tt||"outputColorSpace"in tt,getColorManagement=()=>{var tt;return(tt=catalogue.ColorManagement)!=null?tt:null},isOrthographicCamera$1=tt=>tt&&tt.isOrthographicCamera,isRef$1=tt=>tt&&tt.hasOwnProperty("current"),useIsomorphicLayoutEffect=typeof window<"u"&&((_window$document=window.document)!=null&&_window$document.createElement||((_window$navigator=window.navigator)==null?void 0:_window$navigator.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(tt){const _=reactExports.useRef(tt);return useIsomorphicLayoutEffect(()=>void(_.current=tt),[tt]),_}function Block({set:tt}){return useIsomorphicLayoutEffect(()=>(tt(new Promise(()=>null)),()=>tt(!1)),[tt]),null}class ErrorBoundary extends reactExports.Component{constructor(..._){super(..._),this.state={error:!1}}componentDidCatch(_){this.props.set(_)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});const DEFAULT="__default",DEFAULTS=new Map,isDiffSet=tt=>tt&&!!tt.memoized&&!!tt.changes;function calculateDpr(tt){var _;const _e=typeof window<"u"?(_=window.devicePixelRatio)!=null?_:2:1;return Array.isArray(tt)?Math.min(Math.max(tt[0],_e),tt[1]):tt}const getRootState=tt=>{var _;return(_=tt.__r3f)==null?void 0:_.root.getState()},is={obj:tt=>tt===Object(tt)&&!is.arr(tt)&&typeof tt!="function",fun:tt=>typeof tt=="function",str:tt=>typeof tt=="string",num:tt=>typeof tt=="number",boo:tt=>typeof tt=="boolean",und:tt=>tt===void 0,arr:tt=>Array.isArray(tt),equ(tt,_,{arrays:_e="shallow",objects:nt="reference",strict:rt=!0}={}){if(typeof tt!=typeof _||!!tt!=!!_)return!1;if(is.str(tt)||is.num(tt))return tt===_;const it=is.obj(tt);if(it&&nt==="reference")return tt===_;const ot=is.arr(tt);if(ot&&_e==="reference")return tt===_;if((ot||it)&&tt===_)return!0;let st;for(st in tt)if(!(st in _))return!1;if(it&&_e==="shallow"&&nt==="shallow"){for(st in rt?_:tt)if(!is.equ(tt[st],_[st],{strict:rt,objects:"reference"}))return!1}else for(st in rt?_:tt)if(tt[st]!==_[st])return!1;if(is.und(st)){if(ot&&tt.length===0&&_.length===0||it&&Object.keys(tt).length===0&&Object.keys(_).length===0)return!0;if(tt!==_)return!1}return!0}};function buildGraph(tt){const _={nodes:{},materials:{}};return tt&&tt.traverse(_e=>{_e.name&&(_.nodes[_e.name]=_e),_e.material&&!_.materials[_e.material.name]&&(_.materials[_e.material.name]=_e.material)}),_}function dispose(tt){tt.dispose&&tt.type!=="Scene"&&tt.dispose();for(const _ in tt)_.dispose==null||_.dispose(),delete tt[_]}function prepare(tt,_){const _e=tt;return(_!=null&&_.primitive||!_e.__r3f)&&(_e.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,..._}),tt}function resolve(tt,_){let _e=tt;if(_.includes("-")){const nt=_.split("-"),rt=nt.pop();return _e=nt.reduce((it,ot)=>it[ot],tt),{target:_e,key:rt}}else return{target:_e,key:_}}const INDEX_REGEX=/-\d+$/;function attach(tt,_,_e){if(is.str(_e)){if(INDEX_REGEX.test(_e)){const it=_e.replace(INDEX_REGEX,""),{target:ot,key:st}=resolve(tt,it);Array.isArray(ot[st])||(ot[st]=[])}const{target:nt,key:rt}=resolve(tt,_e);_.__r3f.previousAttach=nt[rt],nt[rt]=_}else _.__r3f.previousAttach=_e(tt,_)}function detach(tt,_,_e){var nt,rt;if(is.str(_e)){const{target:it,key:ot}=resolve(tt,_e),st=_.__r3f.previousAttach;st===void 0?delete it[ot]:it[ot]=st}else(nt=_.__r3f)==null||nt.previousAttach==null||nt.previousAttach(tt,_);(rt=_.__r3f)==null||delete rt.previousAttach}function diffProps(tt,{children:_,key:_e,ref:nt,...rt},{children:it,key:ot,ref:st,...at}={},lt=!1){var ct;const ut=(ct=tt==null?void 0:tt.__r3f)!=null?ct:{},ht=Object.entries(rt),pt=[];if(lt){const yt=Object.keys(at);for(let vt=0;vt<yt.length;vt++)rt.hasOwnProperty(yt[vt])||ht.unshift([yt[vt],DEFAULT+"remove"])}ht.forEach(([yt,vt])=>{var mt;if((mt=tt.__r3f)!=null&&mt.primitive&&yt==="object"||is.equ(vt,at[yt]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(yt))return pt.push([yt,vt,!0,[]]);let _t=[];yt.includes("-")&&(_t=yt.split("-")),pt.push([yt,vt,!1,_t]);for(const xt in rt){const St=rt[xt];xt.startsWith(`${yt}-`)&&pt.push([xt,St,!1,xt.split("-")])}});const gt={...rt};return ut.memoizedProps&&ut.memoizedProps.args&&(gt.args=ut.memoizedProps.args),ut.memoizedProps&&ut.memoizedProps.attach&&(gt.attach=ut.memoizedProps.attach),{memoized:gt,changes:pt}}function applyProps$1(tt,_){var _e,nt,rt;const it=(_e=tt.__r3f)!=null?_e:{},ot=it.root,st=(nt=ot==null||ot.getState==null?void 0:ot.getState())!=null?nt:{},{memoized:at,changes:lt}=isDiffSet(_)?_:diffProps(tt,_),ct=it.eventCount;tt.__r3f&&(tt.__r3f.memoizedProps=at);for(let ht=0;ht<lt.length;ht++){let[pt,gt,yt,vt]=lt[ht];if(hasColorSpace$1(tt)){const St="srgb",Tt="srgb-linear";pt==="encoding"?(pt="colorSpace",gt=gt===3001?St:Tt):pt==="outputEncoding"&&(pt="outputColorSpace",gt=gt===3001?St:Tt)}let mt=tt,_t=mt[pt];if(vt.length&&(_t=vt.reduce((xt,St)=>xt[St],tt),!(_t&&_t.set))){const[xt,...St]=vt.reverse();mt=St.reverse().reduce((Tt,Mt)=>Tt[Mt],tt),pt=xt}if(gt===DEFAULT+"remove")if(mt.constructor){let xt=DEFAULTS.get(mt.constructor);xt||(xt=new mt.constructor,DEFAULTS.set(mt.constructor,xt)),gt=xt[pt]}else gt=0;if(yt)gt?it.handlers[pt]=gt:delete it.handlers[pt],it.eventCount=Object.keys(it.handlers).length;else if(_t&&_t.set&&(_t.copy||_t instanceof Layers)){if(Array.isArray(gt))_t.fromArray?_t.fromArray(gt):_t.set(...gt);else if(_t.copy&&gt&&gt.constructor&&_t.constructor===gt.constructor)_t.copy(gt);else if(gt!==void 0){const xt=_t instanceof Color$1;!xt&&_t.setScalar?_t.setScalar(gt):_t instanceof Layers&&gt instanceof Layers?_t.mask=gt.mask:_t.set(gt),!getColorManagement()&&!st.linear&&xt&&_t.convertSRGBToLinear()}}else if(mt[pt]=gt,mt[pt]instanceof Texture&&mt[pt].format===RGBAFormat&&mt[pt].type===UnsignedByteType){const xt=mt[pt];hasColorSpace$1(xt)&&hasColorSpace$1(st.gl)?xt.colorSpace=st.gl.outputColorSpace:xt.encoding=st.gl.outputEncoding}invalidateInstance(tt)}if(it.parent&&st.internal&&tt.raycast&&ct!==it.eventCount){const ht=st.internal.interaction.indexOf(tt);ht>-1&&st.internal.interaction.splice(ht,1),it.eventCount&&st.internal.interaction.push(tt)}return!(lt.length===1&&lt[0][0]==="onUpdate")&&lt.length&&(rt=tt.__r3f)!=null&&rt.parent&&updateInstance(tt),tt}function invalidateInstance(tt){var _,_e;const nt=(_=tt.__r3f)==null||(_e=_.root)==null||_e.getState==null?void 0:_e.getState();nt&&nt.internal.frames===0&&nt.invalidate()}function updateInstance(tt){tt.onUpdate==null||tt.onUpdate(tt)}function updateCamera(tt,_){tt.manual||(isOrthographicCamera$1(tt)?(tt.left=_.width/-2,tt.right=_.width/2,tt.top=_.height/2,tt.bottom=_.height/-2):tt.aspect=_.width/_.height,tt.updateProjectionMatrix(),tt.updateMatrixWorld())}function makeId(tt){return(tt.eventObject||tt.object).uuid+"/"+tt.index+tt.instanceId}function getEventPriority(){var tt;const _=typeof self<"u"&&self||typeof window<"u"&&window;if(!_)return constantsExports.DefaultEventPriority;switch((tt=_.event)==null?void 0:tt.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}}function releaseInternalPointerCapture(tt,_,_e,nt){const rt=_e.get(_);rt&&(_e.delete(_),_e.size===0&&(tt.delete(nt),rt.target.releasePointerCapture(nt)))}function removeInteractivity(tt,_){const{internal:_e}=tt.getState();_e.interaction=_e.interaction.filter(nt=>nt!==_),_e.initialHits=_e.initialHits.filter(nt=>nt!==_),_e.hovered.forEach((nt,rt)=>{(nt.eventObject===_||nt.object===_)&&_e.hovered.delete(rt)}),_e.capturedMap.forEach((nt,rt)=>{releaseInternalPointerCapture(_e.capturedMap,_,nt,rt)})}function createEvents(tt){function _(at){const{internal:lt}=tt.getState(),ct=at.offsetX-lt.initialClick[0],ut=at.offsetY-lt.initialClick[1];return Math.round(Math.sqrt(ct*ct+ut*ut))}function _e(at){return at.filter(lt=>["Move","Over","Enter","Out","Leave"].some(ct=>{var ut;return(ut=lt.__r3f)==null?void 0:ut.handlers["onPointer"+ct]}))}function nt(at,lt){const ct=tt.getState(),ut=new Set,ht=[],pt=lt?lt(ct.internal.interaction):ct.internal.interaction;for(let mt=0;mt<pt.length;mt++){const _t=getRootState(pt[mt]);_t&&(_t.raycaster.camera=void 0)}ct.previousRoot||ct.events.compute==null||ct.events.compute(at,ct);function gt(mt){const _t=getRootState(mt);if(!_t||!_t.events.enabled||_t.raycaster.camera===null)return[];if(_t.raycaster.camera===void 0){var xt;_t.events.compute==null||_t.events.compute(at,_t,(xt=_t.previousRoot)==null?void 0:xt.getState()),_t.raycaster.camera===void 0&&(_t.raycaster.camera=null)}return _t.raycaster.camera?_t.raycaster.intersectObject(mt,!0):[]}let yt=pt.flatMap(gt).sort((mt,_t)=>{const xt=getRootState(mt.object),St=getRootState(_t.object);return!xt||!St?mt.distance-_t.distance:St.events.priority-xt.events.priority||mt.distance-_t.distance}).filter(mt=>{const _t=makeId(mt);return ut.has(_t)?!1:(ut.add(_t),!0)});ct.events.filter&&(yt=ct.events.filter(yt,ct));for(const mt of yt){let _t=mt.object;for(;_t;){var vt;(vt=_t.__r3f)!=null&&vt.eventCount&&ht.push({...mt,eventObject:_t}),_t=_t.parent}}if("pointerId"in at&&ct.internal.capturedMap.has(at.pointerId))for(let mt of ct.internal.capturedMap.get(at.pointerId).values())ut.has(makeId(mt.intersection))||ht.push(mt.intersection);return ht}function rt(at,lt,ct,ut){const ht=tt.getState();if(at.length){const pt={stopped:!1};for(const gt of at){const yt=getRootState(gt.object)||ht,{raycaster:vt,pointer:mt,camera:_t,internal:xt}=yt,St=new Vector3(mt.x,mt.y,0).unproject(_t),Tt=Bt=>{var Ot,Ut;return(Ot=(Ut=xt.capturedMap.get(Bt))==null?void 0:Ut.has(gt.eventObject))!=null?Ot:!1},Mt=Bt=>{const Ot={intersection:gt,target:lt.target};xt.capturedMap.has(Bt)?xt.capturedMap.get(Bt).set(gt.eventObject,Ot):xt.capturedMap.set(Bt,new Map([[gt.eventObject,Ot]])),lt.target.setPointerCapture(Bt)},bt=Bt=>{const Ot=xt.capturedMap.get(Bt);Ot&&releaseInternalPointerCapture(xt.capturedMap,gt.eventObject,Ot,Bt)};let Pt={};for(let Bt in lt){let Ot=lt[Bt];typeof Ot!="function"&&(Pt[Bt]=Ot)}let wt={...gt,...Pt,pointer:mt,intersections:at,stopped:pt.stopped,delta:ct,unprojectedPoint:St,ray:vt.ray,camera:_t,stopPropagation(){const Bt="pointerId"in lt&&xt.capturedMap.get(lt.pointerId);if((!Bt||Bt.has(gt.eventObject))&&(wt.stopped=pt.stopped=!0,xt.hovered.size&&Array.from(xt.hovered.values()).find(Ot=>Ot.eventObject===gt.eventObject))){const Ot=at.slice(0,at.indexOf(gt));it([...Ot,gt])}},target:{hasPointerCapture:Tt,setPointerCapture:Mt,releasePointerCapture:bt},currentTarget:{hasPointerCapture:Tt,setPointerCapture:Mt,releasePointerCapture:bt},nativeEvent:lt};if(ut(wt),pt.stopped===!0)break}}return at}function it(at){const{internal:lt}=tt.getState();for(const ct of lt.hovered.values())if(!at.length||!at.find(ut=>ut.object===ct.object&&ut.index===ct.index&&ut.instanceId===ct.instanceId)){const ht=ct.eventObject.__r3f,pt=ht==null?void 0:ht.handlers;if(lt.hovered.delete(makeId(ct)),ht!=null&&ht.eventCount){const gt={...ct,intersections:at};pt.onPointerOut==null||pt.onPointerOut(gt),pt.onPointerLeave==null||pt.onPointerLeave(gt)}}}function ot(at,lt){for(let ct=0;ct<lt.length;ct++){const ut=lt[ct].__r3f;ut==null||ut.handlers.onPointerMissed==null||ut.handlers.onPointerMissed(at)}}function st(at){switch(at){case"onPointerLeave":case"onPointerCancel":return()=>it([]);case"onLostPointerCapture":return lt=>{const{internal:ct}=tt.getState();"pointerId"in lt&&ct.capturedMap.has(lt.pointerId)&&requestAnimationFrame(()=>{ct.capturedMap.has(lt.pointerId)&&(ct.capturedMap.delete(lt.pointerId),it([]))})}}return function(ct){const{onPointerMissed:ut,internal:ht}=tt.getState();ht.lastEvent.current=ct;const pt=at==="onPointerMove",gt=at==="onClick"||at==="onContextMenu"||at==="onDoubleClick",vt=nt(ct,pt?_e:void 0),mt=gt?_(ct):0;at==="onPointerDown"&&(ht.initialClick=[ct.offsetX,ct.offsetY],ht.initialHits=vt.map(xt=>xt.eventObject)),gt&&!vt.length&&mt<=2&&(ot(ct,ht.interaction),ut&&ut(ct)),pt&&it(vt);function _t(xt){const St=xt.eventObject,Tt=St.__r3f,Mt=Tt==null?void 0:Tt.handlers;if(Tt!=null&&Tt.eventCount)if(pt){if(Mt.onPointerOver||Mt.onPointerEnter||Mt.onPointerOut||Mt.onPointerLeave){const bt=makeId(xt),Pt=ht.hovered.get(bt);Pt?Pt.stopped&&xt.stopPropagation():(ht.hovered.set(bt,xt),Mt.onPointerOver==null||Mt.onPointerOver(xt),Mt.onPointerEnter==null||Mt.onPointerEnter(xt))}Mt.onPointerMove==null||Mt.onPointerMove(xt)}else{const bt=Mt[at];bt?(!gt||ht.initialHits.includes(St))&&(ot(ct,ht.interaction.filter(Pt=>!ht.initialHits.includes(Pt))),bt(xt)):gt&&ht.initialHits.includes(St)&&ot(ct,ht.interaction.filter(Pt=>!ht.initialHits.includes(Pt)))}}rt(vt,ct,mt,_t)}}return{handlePointer:st}}const privateKeys=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],isRenderer=tt=>!!(tt!=null&&tt.render),context=reactExports.createContext(null),createStore=(tt,_)=>{const _e=create((st,at)=>{const lt=new Vector3,ct=new Vector3,ut=new Vector3;function ht(mt=at().camera,_t=ct,xt=at().size){const{width:St,height:Tt,top:Mt,left:bt}=xt,Pt=St/Tt;_t instanceof Vector3?ut.copy(_t):ut.set(..._t);const wt=mt.getWorldPosition(lt).distanceTo(ut);if(isOrthographicCamera$1(mt))return{width:St/mt.zoom,height:Tt/mt.zoom,top:Mt,left:bt,factor:1,distance:wt,aspect:Pt};{const Bt=mt.fov*Math.PI/180,Ot=2*Math.tan(Bt/2)*wt,Ut=Ot*(St/Tt);return{width:Ut,height:Ot,top:Mt,left:bt,factor:St/Ut,distance:wt,aspect:Pt}}}let pt;const gt=mt=>st(_t=>({performance:{..._t.performance,current:mt}})),yt=new Vector2;return{set:st,get:at,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(mt=1)=>tt(at(),mt),advance:(mt,_t)=>_(mt,_t,at()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:yt,mouse:yt,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const mt=at();pt&&clearTimeout(pt),mt.performance.current!==mt.performance.min&&gt(mt.performance.min),pt=setTimeout(()=>gt(at().performance.max),mt.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:ht},setEvents:mt=>st(_t=>({..._t,events:{..._t.events,...mt}})),setSize:(mt,_t,xt,St,Tt)=>{const Mt=at().camera,bt={width:mt,height:_t,top:St||0,left:Tt||0,updateStyle:xt};st(Pt=>({size:bt,viewport:{...Pt.viewport,...ht(Mt,ct,bt)}}))},setDpr:mt=>st(_t=>{const xt=calculateDpr(mt);return{viewport:{..._t.viewport,dpr:xt,initialDpr:_t.viewport.initialDpr||xt}}}),setFrameloop:(mt="always")=>{const _t=at().clock;_t.stop(),_t.elapsedTime=0,mt!=="never"&&(_t.start(),_t.elapsedTime=0),st(()=>({frameloop:mt}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:reactExports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(mt,_t,xt)=>{const St=at().internal;return St.priority=St.priority+(_t>0?1:0),St.subscribers.push({ref:mt,priority:_t,store:xt}),St.subscribers=St.subscribers.sort((Tt,Mt)=>Tt.priority-Mt.priority),()=>{const Tt=at().internal;Tt!=null&&Tt.subscribers&&(Tt.priority=Tt.priority-(_t>0?1:0),Tt.subscribers=Tt.subscribers.filter(Mt=>Mt.ref!==mt))}}}}}),nt=_e.getState();let rt=nt.size,it=nt.viewport.dpr,ot=nt.camera;return _e.subscribe(()=>{const{camera:st,size:at,viewport:lt,gl:ct,set:ut}=_e.getState();if(at!==rt||lt.dpr!==it){var ht;rt=at,it=lt.dpr,updateCamera(st,at),ct.setPixelRatio(lt.dpr);const pt=(ht=at.updateStyle)!=null?ht:typeof HTMLCanvasElement<"u"&&ct.domElement instanceof HTMLCanvasElement;ct.setSize(at.width,at.height,pt)}st!==ot&&(ot=st,ut(pt=>({viewport:{...pt.viewport,...pt.viewport.getCurrentViewport(st)}})))}),_e.subscribe(st=>tt(st)),_e};let i$5,globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;function run(tt,_){if(tt.size)for(const{callback:_e}of tt.values())_e(_)}function flushGlobalEffects(tt,_){switch(tt){case"before":return run(globalEffects,_);case"after":return run(globalAfterEffects,_);case"tail":return run(globalTailEffects,_)}}let subscribers,subscription;function render$1(tt,_,_e){let nt=_.clock.getDelta();for(_.frameloop==="never"&&typeof tt=="number"&&(nt=tt-_.clock.elapsedTime,_.clock.oldTime=_.clock.elapsedTime,_.clock.elapsedTime=tt),subscribers=_.internal.subscribers,i$5=0;i$5<subscribers.length;i$5++)subscription=subscribers[i$5],subscription.ref.current(subscription.store.getState(),nt,_e);return!_.internal.priority&&_.gl.render&&_.gl.render(_.scene,_.camera),_.internal.frames=Math.max(0,_.internal.frames-1),_.frameloop==="always"?1:_.internal.frames}function createLoop(tt){let _=!1,_e,nt,rt;function it(at){nt=requestAnimationFrame(it),_=!0,_e=0,flushGlobalEffects("before",at);for(const ct of tt.values()){var lt;rt=ct.store.getState(),rt.internal.active&&(rt.frameloop==="always"||rt.internal.frames>0)&&!((lt=rt.gl.xr)!=null&&lt.isPresenting)&&(_e+=render$1(at,rt))}if(flushGlobalEffects("after",at),_e===0)return flushGlobalEffects("tail",at),_=!1,cancelAnimationFrame(nt)}function ot(at,lt=1){var ct;if(!at)return tt.forEach(ut=>ot(ut.store.getState()),lt);(ct=at.gl.xr)!=null&&ct.isPresenting||!at.internal.active||at.frameloop==="never"||(at.internal.frames=Math.min(60,at.internal.frames+lt),_||(_=!0,requestAnimationFrame(it)))}function st(at,lt=!0,ct,ut){if(lt&&flushGlobalEffects("before",at),ct)render$1(at,ct,ut);else for(const ht of tt.values())render$1(at,ht.store.getState());lt&&flushGlobalEffects("after",at)}return{loop:it,invalidate:ot,advance:st}}function useStore(){const tt=reactExports.useContext(context);if(!tt)throw new Error("R3F: Hooks can only be used within the Canvas component!");return tt}function useThree(tt=_e=>_e,_){return useStore()(tt,_)}function useFrame(tt,_=0){const _e=useStore(),nt=_e.getState().internal.subscribe,rt=useMutableCallback(tt);return useIsomorphicLayoutEffect(()=>nt(rt,_,_e),[_,nt,_e]),null}function loadingFn(tt,_){return function(_e,...nt){const rt=new _e;return tt&&tt(rt),Promise.all(nt.map(it=>new Promise((ot,st)=>rt.load(it,at=>{at.scene&&Object.assign(at,buildGraph(at.scene)),ot(at)},_,at=>st(new Error(`Could not load ${it}: ${at.message})`))))))}}function useLoader(tt,_,_e,nt){const rt=Array.isArray(_)?_:[_],it=suspend(loadingFn(_e,nt),[tt,...rt],{equal:is.equ});return Array.isArray(_)?it:it[0]}useLoader.preload=function(tt,_,_e){const nt=Array.isArray(_)?_:[_];return preload(loadingFn(_e),[tt,...nt])};useLoader.clear=function(tt,_){const _e=Array.isArray(_)?_:[_];return clear([tt,..._e])};const roots=new Map,{invalidate,advance}=createLoop(roots),{reconciler,applyProps}=createRenderer(roots,getEventPriority),shallowLoose={objects:"shallow",strict:!1},createRendererInstance=(tt,_)=>{const _e=typeof tt=="function"?tt(_):tt;return isRenderer(_e)?_e:new WebGLRenderer({powerPreference:"high-performance",canvas:_,antialias:!0,alpha:!0,...tt})};function computeInitialSize(tt,_){if(_)return _;if(typeof HTMLCanvasElement<"u"&&tt instanceof HTMLCanvasElement&&tt.parentElement){const{width:_e,height:nt,top:rt,left:it}=tt.parentElement.getBoundingClientRect();return{width:_e,height:nt,top:rt,left:it}}else if(typeof OffscreenCanvas<"u"&&tt instanceof OffscreenCanvas)return{width:tt.width,height:tt.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function createRoot(tt){const _=roots.get(tt),_e=_==null?void 0:_.fiber,nt=_==null?void 0:_.store;_&&console.warn("R3F.createRoot should only be called once!");const rt=typeof reportError=="function"?reportError:console.error,it=nt||createStore(invalidate,advance),ot=_e||reconciler.createContainer(it,constantsExports.ConcurrentRoot,null,!1,null,"",rt,null);_||roots.set(tt,{fiber:ot,store:it});let st,at=!1,lt;return{configure(ct={}){let{gl:ut,size:ht,scene:pt,events:gt,onCreated:yt,shadows:vt=!1,linear:mt=!1,flat:_t=!1,legacy:xt=!1,orthographic:St=!1,frameloop:Tt="always",dpr:Mt=[1,2],performance:bt,raycaster:Pt,camera:wt,onPointerMissed:Bt}=ct,Ot=it.getState(),Ut=Ot.gl;Ot.gl||Ot.set({gl:Ut=createRendererInstance(ut,tt)});let Nt=Ot.raycaster;Nt||Ot.set({raycaster:Nt=new Raycaster});const{params:zt,...jt}=Pt||{};if(is.equ(jt,Nt,shallowLoose)||applyProps(Nt,{...jt}),is.equ(zt,Nt.params,shallowLoose)||applyProps(Nt,{params:{...Nt.params,...zt}}),!Ot.camera||Ot.camera===lt&&!is.equ(lt,wt,shallowLoose)){lt=wt;const Wt=wt instanceof Camera,$t=Wt?wt:St?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);Wt||($t.position.z=5,wt&&applyProps($t,wt),!Ot.camera&&!(wt!=null&&wt.rotation)&&$t.lookAt(0,0,0)),Ot.set({camera:$t})}if(!Ot.scene){let Wt;pt instanceof Scene?Wt=pt:(Wt=new Scene,pt&&applyProps(Wt,pt)),Ot.set({scene:prepare(Wt)})}if(!Ot.xr){const Wt=(en,sn)=>{const rn=it.getState();rn.frameloop!=="never"&&advance(en,!0,rn,sn)},$t=()=>{const en=it.getState();en.gl.xr.enabled=en.gl.xr.isPresenting,en.gl.xr.setAnimationLoop(en.gl.xr.isPresenting?Wt:null),en.gl.xr.isPresenting||invalidate(en)},nn={connect(){const en=it.getState().gl;en.xr.addEventListener("sessionstart",$t),en.xr.addEventListener("sessionend",$t)},disconnect(){const en=it.getState().gl;en.xr.removeEventListener("sessionstart",$t),en.xr.removeEventListener("sessionend",$t)}};Ut.xr&&nn.connect(),Ot.set({xr:nn})}if(Ut.shadowMap){const Wt=Ut.shadowMap.enabled,$t=Ut.shadowMap.type;if(Ut.shadowMap.enabled=!!vt,is.boo(vt))Ut.shadowMap.type=PCFSoftShadowMap;else if(is.str(vt)){var Yt;const nn={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Ut.shadowMap.type=(Yt=nn[vt])!=null?Yt:PCFSoftShadowMap}else is.obj(vt)&&Object.assign(Ut.shadowMap,vt);(Wt!==Ut.shadowMap.enabled||$t!==Ut.shadowMap.type)&&(Ut.shadowMap.needsUpdate=!0)}const qt=getColorManagement();qt&&("enabled"in qt?qt.enabled=!xt:"legacyMode"in qt&&(qt.legacyMode=xt)),applyProps(Ut,{outputEncoding:mt?3e3:3001,toneMapping:_t?NoToneMapping:ACESFilmicToneMapping}),Ot.legacy!==xt&&Ot.set(()=>({legacy:xt})),Ot.linear!==mt&&Ot.set(()=>({linear:mt})),Ot.flat!==_t&&Ot.set(()=>({flat:_t})),ut&&!is.fun(ut)&&!isRenderer(ut)&&!is.equ(ut,Ut,shallowLoose)&&applyProps(Ut,ut),gt&&!Ot.events.handlers&&Ot.set({events:gt(it)});const Vt=computeInitialSize(tt,ht);return is.equ(Vt,Ot.size,shallowLoose)||Ot.setSize(Vt.width,Vt.height,Vt.updateStyle,Vt.top,Vt.left),Mt&&Ot.viewport.dpr!==calculateDpr(Mt)&&Ot.setDpr(Mt),Ot.frameloop!==Tt&&Ot.setFrameloop(Tt),Ot.onPointerMissed||Ot.set({onPointerMissed:Bt}),bt&&!is.equ(bt,Ot.performance,shallowLoose)&&Ot.set(Wt=>({performance:{...Wt.performance,...bt}})),st=yt,at=!0,this},render(ct){return at||this.configure(),reconciler.updateContainer(reactExports.createElement(Provider,{store:it,children:ct,onCreated:st,rootElement:tt}),ot,null,()=>{}),it},unmount(){unmountComponentAtNode(tt)}}}function Provider({store:tt,children:_,onCreated:_e,rootElement:nt}){return useIsomorphicLayoutEffect(()=>{const rt=tt.getState();rt.set(it=>({internal:{...it.internal,active:!0}})),_e&&_e(rt),tt.getState().events.connected||rt.events.connect==null||rt.events.connect(nt)},[]),reactExports.createElement(context.Provider,{value:tt},_)}function unmountComponentAtNode(tt,_){const _e=roots.get(tt),nt=_e==null?void 0:_e.fiber;if(nt){const rt=_e==null?void 0:_e.store.getState();rt&&(rt.internal.active=!1),reconciler.updateContainer(null,nt,null,()=>{rt&&setTimeout(()=>{try{var it,ot,st,at;rt.events.disconnect==null||rt.events.disconnect(),(it=rt.gl)==null||(ot=it.renderLists)==null||ot.dispose==null||ot.dispose(),(st=rt.gl)==null||st.forceContextLoss==null||st.forceContextLoss(),(at=rt.gl)!=null&&at.xr&&rt.xr.disconnect(),dispose(rt),roots.delete(tt),_&&_(tt)}catch{}},500)})}}function createPortal(tt,_,_e){return reactExports.createElement(Portal$1,{key:_.uuid,children:tt,container:_,state:_e})}function Portal$1({state:tt={},children:_,container:_e}){const{events:nt,size:rt,...it}=tt,ot=useStore(),[st]=reactExports.useState(()=>new Raycaster),[at]=reactExports.useState(()=>new Vector2),lt=reactExports.useCallback((ut,ht)=>{const pt={...ut};Object.keys(ut).forEach(yt=>{(privateKeys.includes(yt)||ut[yt]!==ht[yt]&&ht[yt])&&delete pt[yt]});let gt;if(ht&&rt){const yt=ht.camera;gt=ut.viewport.getCurrentViewport(yt,new Vector3,rt),yt!==ut.camera&&updateCamera(yt,rt)}return{...pt,scene:_e,raycaster:st,pointer:at,mouse:at,previousRoot:ot,events:{...ut.events,...ht==null?void 0:ht.events,...nt},size:{...ut.size,...rt},viewport:{...ut.viewport,...gt},...it}},[tt]),[ct]=reactExports.useState(()=>{const ut=ot.getState();return create((pt,gt)=>({...ut,scene:_e,raycaster:st,pointer:at,mouse:at,previousRoot:ot,events:{...ut.events,...nt},size:{...ut.size,...rt},...it,set:pt,get:gt,setEvents:yt=>pt(vt=>({...vt,events:{...vt.events,...yt}}))}))});return reactExports.useEffect(()=>{const ut=ot.subscribe(ht=>ct.setState(pt=>lt(ht,pt)));return()=>{ut(),ct.destroy()}},[]),reactExports.useEffect(()=>{ct.setState(ut=>lt(ot.getState(),ut))},[lt]),reactExports.createElement(reactExports.Fragment,null,reconciler.createPortal(reactExports.createElement(context.Provider,{value:ct},_),ct,null))}reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version});function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(tt){for(var _=1;_<arguments.length;_++){var _e=arguments[_];for(var nt in _e)Object.prototype.hasOwnProperty.call(_e,nt)&&(tt[nt]=_e[nt])}return tt},_extends$2.apply(this,arguments)}function debounce$1(tt,_,_e){var nt,rt,it,ot,st;_==null&&(_=100);function at(){var ct=Date.now()-ot;ct<_&&ct>=0?nt=setTimeout(at,_-ct):(nt=null,_e||(st=tt.apply(it,rt),it=rt=null))}var lt=function(){it=this,rt=arguments,ot=Date.now();var ct=_e&&!nt;return nt||(nt=setTimeout(at,_)),ct&&(st=tt.apply(it,rt),it=rt=null),st};return lt.clear=function(){nt&&(clearTimeout(nt),nt=null)},lt.flush=function(){nt&&(st=tt.apply(it,rt),it=rt=null,clearTimeout(nt),nt=null)},lt}debounce$1.debounce=debounce$1;var debounce_1=debounce$1;function useMeasure(tt){let{debounce:_,scroll:_e,polyfill:nt,offsetSize:rt}=tt===void 0?{debounce:0,scroll:!1,offsetSize:!1}:tt;const it=nt||(typeof window>"u"?class{}:window.ResizeObserver);if(!it)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[ot,st]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),at=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:ot}),lt=_?typeof _=="number"?_:_.scroll:null,ct=_?typeof _=="number"?_:_.resize:null,ut=reactExports.useRef(!1);reactExports.useEffect(()=>(ut.current=!0,()=>void(ut.current=!1)));const[ht,pt,gt]=reactExports.useMemo(()=>{const _t=()=>{if(!at.current.element)return;const{left:xt,top:St,width:Tt,height:Mt,bottom:bt,right:Pt,x:wt,y:Bt}=at.current.element.getBoundingClientRect(),Ot={left:xt,top:St,width:Tt,height:Mt,bottom:bt,right:Pt,x:wt,y:Bt};at.current.element instanceof HTMLElement&&rt&&(Ot.height=at.current.element.offsetHeight,Ot.width=at.current.element.offsetWidth),Object.freeze(Ot),ut.current&&!areBoundsEqual(at.current.lastBounds,Ot)&&st(at.current.lastBounds=Ot)};return[_t,ct?debounce_1(_t,ct):_t,lt?debounce_1(_t,lt):_t]},[st,rt,lt,ct]);function yt(){at.current.scrollContainers&&(at.current.scrollContainers.forEach(_t=>_t.removeEventListener("scroll",gt,!0)),at.current.scrollContainers=null),at.current.resizeObserver&&(at.current.resizeObserver.disconnect(),at.current.resizeObserver=null)}function vt(){at.current.element&&(at.current.resizeObserver=new it(gt),at.current.resizeObserver.observe(at.current.element),_e&&at.current.scrollContainers&&at.current.scrollContainers.forEach(_t=>_t.addEventListener("scroll",gt,{capture:!0,passive:!0})))}const mt=_t=>{!_t||_t===at.current.element||(yt(),at.current.element=_t,at.current.scrollContainers=findScrollContainers(_t),vt())};return useOnWindowScroll(gt,Boolean(_e)),useOnWindowResize(pt),reactExports.useEffect(()=>{yt(),vt()},[_e,gt,pt]),reactExports.useEffect(()=>yt,[]),[mt,ot,ht]}function useOnWindowResize(tt){reactExports.useEffect(()=>{const _=tt;return window.addEventListener("resize",_),()=>void window.removeEventListener("resize",_)},[tt])}function useOnWindowScroll(tt,_){reactExports.useEffect(()=>{if(_){const _e=tt;return window.addEventListener("scroll",_e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",_e,!0)}},[tt,_])}function findScrollContainers(tt){const _=[];if(!tt||tt===document.body)return _;const{overflow:_e,overflowX:nt,overflowY:rt}=window.getComputedStyle(tt);return[_e,nt,rt].some(it=>it==="auto"||it==="scroll")&&_.push(tt),[..._,...findScrollContainers(tt.parentElement)]}const keys=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(tt,_)=>keys.every(_e=>tt[_e]===_[_e]);var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(tt,_,_e)=>_ in tt?__defProp(tt,_,{enumerable:!0,configurable:!0,writable:!0,value:_e}):tt[_]=_e,__spreadValues=(tt,_)=>{for(var _e in _||(_={}))__hasOwnProp.call(_,_e)&&__defNormalProp(tt,_e,_[_e]);if(__getOwnPropSymbols)for(var _e of __getOwnPropSymbols(_))__propIsEnum.call(_,_e)&&__defNormalProp(tt,_e,_[_e]);return tt},__spreadProps=(tt,_)=>__defProps(tt,__getOwnPropDescs(_));function traverseFiber(tt,_,_e){if(!tt)return;if(_e(tt)===!0)return tt;let nt=_?tt.return:tt.child;for(;nt;){const rt=traverseFiber(nt,_,_e);if(rt)return rt;nt=_?null:nt.sibling}}function wrapContext(tt){try{return Object.defineProperties(tt,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return tt}}const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner,ReactCurrentDispatcher}=reactExports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function useFiber(){const tt=reactExports.useContext(FiberContext);if(tt===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const _=reactExports.useId();return reactExports.useMemo(()=>{for(const nt of[ReactCurrentOwner==null?void 0:ReactCurrentOwner.current,tt,tt==null?void 0:tt.alternate]){if(!nt)continue;const rt=traverseFiber(nt,!1,it=>{let ot=it.memoizedState;for(;ot;){if(ot.memoizedState===_)return!0;ot=ot.next}});if(rt)return rt}},[tt,_])}function useContextMap(){var tt,_;const _e=useFiber(),[nt]=reactExports.useState(()=>new Map);nt.clear();let rt=_e;for(;rt;){const it=(tt=rt.type)==null?void 0:tt._context;it&&it!==FiberContext&&!nt.has(it)&&nt.set(it,(_=ReactCurrentDispatcher==null?void 0:ReactCurrentDispatcher.current)==null?void 0:_.readContext(wrapContext(it))),rt=rt.return}return nt}function useContextBridge(){const tt=useContextMap();return reactExports.useMemo(()=>Array.from(tt.keys()).reduce((_,_e)=>nt=>reactExports.createElement(_,null,reactExports.createElement(_e.Provider,__spreadProps(__spreadValues({},nt),{value:tt.get(_e)}))),_=>reactExports.createElement(FiberProvider,__spreadValues({},_))),[tt])}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(tt){const{handlePointer:_}=createEvents(tt);return{priority:1,enabled:!0,compute(_e,nt,rt){nt.pointer.set(_e.offsetX/nt.size.width*2-1,-(_e.offsetY/nt.size.height)*2+1),nt.raycaster.setFromCamera(nt.pointer,nt.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((_e,nt)=>({..._e,[nt]:_(nt)}),{}),update:()=>{var _e;const{events:nt,internal:rt}=tt.getState();(_e=rt.lastEvent)!=null&&_e.current&&nt.handlers&&nt.handlers.onPointerMove(rt.lastEvent.current)},connect:_e=>{var nt;const{set:rt,events:it}=tt.getState();it.disconnect==null||it.disconnect(),rt(ot=>({events:{...ot.events,connected:_e}})),Object.entries((nt=it.handlers)!=null?nt:[]).forEach(([ot,st])=>{const[at,lt]=DOM_EVENTS[ot];_e.addEventListener(at,st,{passive:lt})})},disconnect:()=>{const{set:_e,events:nt}=tt.getState();if(nt.connected){var rt;Object.entries((rt=nt.handlers)!=null?rt:[]).forEach(([it,ot])=>{if(nt&&nt.connected instanceof HTMLElement){const[st]=DOM_EVENTS[it];nt.connected.removeEventListener(st,ot)}}),_e(it=>({events:{...it.events,connected:void 0}}))}}}}const CanvasImpl=reactExports.forwardRef(function({children:_,fallback:_e,resize:nt,style:rt,gl:it,events:ot=createPointerEvents,eventSource:st,eventPrefix:at,shadows:lt,linear:ct,flat:ut,legacy:ht,orthographic:pt,frameloop:gt,dpr:yt,performance:vt,raycaster:mt,camera:_t,onPointerMissed:xt,onCreated:St,...Tt},Mt){reactExports.useMemo(()=>extend$2(THREE$1),[]);const bt=useContextBridge(),[Pt,wt]=useMeasure({scroll:!0,debounce:{scroll:50,resize:0},...nt}),Bt=reactExports.useRef(null),Ot=reactExports.useRef(null);reactExports.useImperativeHandle(Mt,()=>Bt.current);const Ut=useMutableCallback(xt),[Nt,zt]=reactExports.useState(!1),[jt,Yt]=reactExports.useState(!1);if(Nt)throw Nt;if(jt)throw jt;const qt=reactExports.useRef(null);useIsomorphicLayoutEffect(()=>{const Xt=Bt.current;wt.width>0&&wt.height>0&&Xt&&(qt.current||(qt.current=createRoot(Xt)),qt.current.configure({gl:it,events:ot,shadows:lt,linear:ct,flat:ut,legacy:ht,orthographic:pt,frameloop:gt,dpr:yt,performance:vt,raycaster:mt,camera:_t,size:wt,onPointerMissed:(...Vt)=>Ut.current==null?void 0:Ut.current(...Vt),onCreated:Vt=>{Vt.events.connect==null||Vt.events.connect(st?isRef$1(st)?st.current:st:Ot.current),at&&Vt.setEvents({compute:(Wt,$t)=>{const nn=Wt[at+"X"],en=Wt[at+"Y"];$t.pointer.set(nn/$t.size.width*2-1,-(en/$t.size.height)*2+1),$t.raycaster.setFromCamera($t.pointer,$t.camera)}}),St==null||St(Vt)}}),qt.current.render(reactExports.createElement(bt,null,reactExports.createElement(ErrorBoundary,{set:Yt},reactExports.createElement(reactExports.Suspense,{fallback:reactExports.createElement(Block,{set:zt})},_)))))}),reactExports.useEffect(()=>{const Xt=Bt.current;if(Xt)return()=>unmountComponentAtNode(Xt)},[]);const Gt=st?"none":"auto";return reactExports.createElement("div",_extends$2({ref:Ot,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Gt,...rt}},Tt),reactExports.createElement("div",{ref:Pt,style:{width:"100%",height:"100%"}},reactExports.createElement("canvas",{ref:Bt,style:{display:"block"}},_e)))}),Canvas$1=reactExports.forwardRef(function(_,_e){return reactExports.createElement(FiberProvider,null,reactExports.createElement(CanvasImpl,_extends$2({},_,{ref:_e})))}),v1=new Vector3,v2=new Vector3,v3=new Vector3;function defaultCalculatePosition(tt,_,_e){const nt=v1.setFromMatrixPosition(tt.matrixWorld);nt.project(_);const rt=_e.width/2,it=_e.height/2;return[nt.x*rt+rt,-(nt.y*it)+it]}function isObjectBehindCamera(tt,_){const _e=v1.setFromMatrixPosition(tt.matrixWorld),nt=v2.setFromMatrixPosition(_.matrixWorld),rt=_e.sub(nt),it=_.getWorldDirection(v3);return rt.angleTo(it)>Math.PI/2}function isObjectVisible(tt,_,_e,nt){const rt=v1.setFromMatrixPosition(tt.matrixWorld),it=rt.clone();it.project(_),_e.setFromCamera(it,_);const ot=_e.intersectObjects(nt,!0);if(ot.length){const st=ot[0].distance;return rt.distanceTo(_e.ray.origin)<st}return!0}function objectScale(tt,_){if(_ instanceof OrthographicCamera)return _.zoom;if(_ instanceof PerspectiveCamera){const _e=v1.setFromMatrixPosition(tt.matrixWorld),nt=v2.setFromMatrixPosition(_.matrixWorld),rt=_.fov*Math.PI/180,it=_e.distanceTo(nt);return 1/(2*Math.tan(rt/2)*it)}else return 1}function objectZIndex(tt,_,_e){if(_ instanceof PerspectiveCamera||_ instanceof OrthographicCamera){const nt=v1.setFromMatrixPosition(tt.matrixWorld),rt=v2.setFromMatrixPosition(_.matrixWorld),it=nt.distanceTo(rt),ot=(_e[1]-_e[0])/(_.far-_.near),st=_e[1]-ot*_.far;return Math.round(ot*it+st)}}const epsilon=tt=>Math.abs(tt)<1e-10?0:tt;function getCSSMatrix(tt,_,_e=""){let nt="matrix3d(";for(let rt=0;rt!==16;rt++)nt+=epsilon(_[rt]*tt.elements[rt])+(rt!==15?",":")");return _e+nt}const getCameraCSSMatrix=(tt=>_=>getCSSMatrix(_,tt))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),getObjectCSSMatrix=(tt=>(_,_e)=>getCSSMatrix(_,tt(_e),"translate(-50%,-50%)"))(tt=>[1/tt,1/tt,1/tt,1,-1/tt,-1/tt,-1/tt,-1,1/tt,1/tt,1/tt,1,1,1,1,1]);function isRefObject(tt){return tt&&typeof tt=="object"&&"current"in tt}const Html=reactExports.forwardRef(({children:tt,eps:_=.001,style:_e,className:nt,prepend:rt,center:it,fullscreen:ot,portal:st,distanceFactor:at,sprite:lt=!1,transform:ct=!1,occlude:ut,onOcclude:ht,castShadow:pt,receiveShadow:gt,material:yt,geometry:vt,zIndexRange:mt=[16777271,0],calculatePosition:_t=defaultCalculatePosition,as:xt="div",wrapperClass:St,pointerEvents:Tt="auto",...Mt},bt)=>{const{gl:Pt,camera:wt,scene:Bt,size:Ot,raycaster:Ut,events:Nt,viewport:zt}=useThree(),[jt]=reactExports.useState(()=>document.createElement(xt)),Yt=reactExports.useRef(),qt=reactExports.useRef(null),Gt=reactExports.useRef(0),Xt=reactExports.useRef([0,0]),Vt=reactExports.useRef(null),Wt=reactExports.useRef(null),$t=(st==null?void 0:st.current)||Nt.connected||Pt.domElement.parentNode,nn=reactExports.useRef(null),en=reactExports.useRef(!1),sn=reactExports.useMemo(()=>ut&&ut!=="blending"||Array.isArray(ut)&&ut.length&&isRefObject(ut[0]),[ut]);reactExports.useLayoutEffect(()=>{const Nn=Pt.domElement;ut&&ut==="blending"?(Nn.style.zIndex=`${Math.floor(mt[0]/2)}`,Nn.style.position="absolute",Nn.style.pointerEvents="none"):(Nn.style.zIndex=null,Nn.style.position=null,Nn.style.pointerEvents=null)},[ut]),reactExports.useLayoutEffect(()=>{if(qt.current){const Nn=Yt.current=createRoot$1(jt);if(Bt.updateMatrixWorld(),ct)jt.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const gn=_t(qt.current,wt,Ot);jt.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${gn[0]}px,${gn[1]}px,0);transform-origin:0 0;`}return $t&&(rt?$t.prepend(jt):$t.appendChild(jt)),()=>{$t&&$t.removeChild(jt),Nn.unmount()}}},[$t,ct]),reactExports.useLayoutEffect(()=>{St&&(jt.className=St)},[St]);const rn=reactExports.useMemo(()=>ct?{position:"absolute",top:0,left:0,width:Ot.width,height:Ot.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:it?"translate3d(-50%,-50%,0)":"none",...ot&&{top:-Ot.height/2,left:-Ot.width/2,width:Ot.width,height:Ot.height},..._e},[_e,it,ot,Ot,ct]),an=reactExports.useMemo(()=>({position:"absolute",pointerEvents:Tt}),[Tt]);reactExports.useLayoutEffect(()=>{if(en.current=!1,ct){var Nn;(Nn=Yt.current)==null||Nn.render(reactExports.createElement("div",{ref:Vt,style:rn},reactExports.createElement("div",{ref:Wt,style:an},reactExports.createElement("div",{ref:bt,className:nt,style:_e,children:tt}))))}else{var gn;(gn=Yt.current)==null||gn.render(reactExports.createElement("div",{ref:bt,style:rn,className:nt,children:tt}))}});const dn=reactExports.useRef(!0);useFrame(Nn=>{if(qt.current){wt.updateMatrixWorld(),qt.current.updateWorldMatrix(!0,!1);const gn=ct?Xt.current:_t(qt.current,wt,Ot);if(ct||Math.abs(Gt.current-wt.zoom)>_||Math.abs(Xt.current[0]-gn[0])>_||Math.abs(Xt.current[1]-gn[1])>_){const Ht=isObjectBehindCamera(qt.current,wt);let xn=!1;sn&&(ut!=="blending"?xn=[Bt]:Array.isArray(ut)&&(xn=ut.map(Hn=>Hn.current)));const hn=dn.current;if(xn){const Hn=isObjectVisible(qt.current,wt,Ut,xn);dn.current=Hn&&!Ht}else dn.current=!Ht;hn!==dn.current&&(ht?ht(!dn.current):jt.style.display=dn.current?"block":"none");const vn=Math.floor(mt[0]/2),pn=ut?sn?[mt[0],vn]:[vn-1,0]:mt;if(jt.style.zIndex=`${objectZIndex(qt.current,wt,pn)}`,ct){const[Hn,yn]=[Ot.width/2,Ot.height/2],Ln=wt.projectionMatrix.elements[5]*yn,{isOrthographicCamera:On,top:Sn,left:jn,bottom:Ft,right:Dt}=wt,on=getCameraCSSMatrix(wt.matrixWorldInverse),bn=On?`scale(${Ln})translate(${epsilon(-(Dt+jn)/2)}px,${epsilon((Sn+Ft)/2)}px)`:`translateZ(${Ln}px)`;let Mn=qt.current.matrixWorld;lt&&(Mn=wt.matrixWorldInverse.clone().transpose().copyPosition(Mn).scale(qt.current.scale),Mn.elements[3]=Mn.elements[7]=Mn.elements[11]=0,Mn.elements[15]=1),jt.style.width=Ot.width+"px",jt.style.height=Ot.height+"px",jt.style.perspective=On?"":`${Ln}px`,Vt.current&&Wt.current&&(Vt.current.style.transform=`${bn}${on}translate(${Hn}px,${yn}px)`,Wt.current.style.transform=getObjectCSSMatrix(Mn,1/((at||10)/400)))}else{const Hn=at===void 0?1:objectScale(qt.current,wt)*at;jt.style.transform=`translate3d(${gn[0]}px,${gn[1]}px,0) scale(${Hn})`}Xt.current=gn,Gt.current=wt.zoom}}if(!sn&&nn.current&&!en.current)if(ct){if(Vt.current){const gn=Vt.current.children[0];if(gn!=null&&gn.clientWidth&&gn!=null&&gn.clientHeight){const{isOrthographicCamera:Ht}=wt;if(Ht||vt)Mt.scale&&(Array.isArray(Mt.scale)?Mt.scale instanceof Vector3?nn.current.scale.copy(Mt.scale.clone().divideScalar(1)):nn.current.scale.set(1/Mt.scale[0],1/Mt.scale[1],1/Mt.scale[2]):nn.current.scale.setScalar(1/Mt.scale));else{const xn=(at||10)/400,hn=gn.clientWidth*xn,vn=gn.clientHeight*xn;nn.current.scale.set(hn,vn,1)}en.current=!0}}}else{const gn=jt.children[0];if(gn!=null&&gn.clientWidth&&gn!=null&&gn.clientHeight){const Ht=1/zt.factor,xn=gn.clientWidth*Ht,hn=gn.clientHeight*Ht;nn.current.scale.set(xn,hn,1),en.current=!0}nn.current.lookAt(Nn.camera.position)}});const Bn=reactExports.useMemo(()=>({vertexShader:ct?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[ct]);return reactExports.createElement("group",_extends$3({},Mt,{ref:qt}),ut&&!sn&&reactExports.createElement("mesh",{castShadow:pt,receiveShadow:gt,ref:nn},vt||reactExports.createElement("planeGeometry",null),yt||reactExports.createElement("shaderMaterial",{side:DoubleSide,vertexShader:Bn.vertexShader,fragmentShader:Bn.fragmentShader})))});let saveLastTotalLoaded=0;const useProgress=create(tt=>(DefaultLoadingManager.onStart=(_,_e,nt)=>{tt({active:!0,item:_,loaded:_e,total:nt,progress:(_e-saveLastTotalLoaded)/(nt-saveLastTotalLoaded)*100})},DefaultLoadingManager.onLoad=()=>{tt({active:!1})},DefaultLoadingManager.onError=_=>tt(_e=>({errors:[..._e.errors,_]})),DefaultLoadingManager.onProgress=(_,_e,nt)=>{_e===nt&&(saveLastTotalLoaded=nt),tt({active:!0,item:_,loaded:_e,total:nt,progress:(_e-saveLastTotalLoaded)/(nt-saveLastTotalLoaded)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),defaultDataInterpolation=tt=>`Loading ${tt.toFixed(2)}%`;function Loader({containerStyles:tt,innerStyles:_,barStyles:_e,dataStyles:nt,dataInterpolation:rt=defaultDataInterpolation,initialState:it=ot=>ot}){const{active:ot,progress:st}=useProgress(),at=reactExports.useRef(0),lt=reactExports.useRef(0),ct=reactExports.useRef(null),[ut,ht]=reactExports.useState(it(ot));reactExports.useEffect(()=>{let gt;return ot!==ut&&(gt=setTimeout(()=>ht(ot),300)),()=>clearTimeout(gt)},[ut,ot]);const pt=reactExports.useCallback(()=>{ct.current&&(at.current+=(st-at.current)/2,(at.current>.95*st||st===100)&&(at.current=st),ct.current.innerText=rt(at.current),at.current<st&&(lt.current=requestAnimationFrame(pt)))},[rt,st]);return reactExports.useEffect(()=>(pt(),()=>cancelAnimationFrame(lt.current)),[pt]),ut?reactExports.createElement("div",{style:{...styles.container,opacity:ot?1:0,...tt}},reactExports.createElement("div",null,reactExports.createElement("div",{style:{...styles.inner,..._}},reactExports.createElement("div",{style:{...styles.bar,transform:`scaleX(${st/100})`,..._e}}),reactExports.createElement("span",{ref:ct,style:{...styles.data,...nt}})))):null}const styles={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}},subscribeWithSelector=tt=>(_,_e,nt)=>{const rt=nt.subscribe;return nt.subscribe=(ot,st,at)=>{let lt=ot;if(st){const ct=(at==null?void 0:at.equalityFn)||Object.is;let ut=ot(nt.getState());lt=ht=>{const pt=ot(ht);if(!ct(ut,pt)){const gt=ut;st(ut=pt,gt)}},at!=null&&at.fireImmediately&&st(ut,ut)}return rt(lt)},tt(_,_e,nt)};var u8$1=Uint8Array,u16$1=Uint16Array,u32$1=Uint32Array,fleb$1=new u8$1([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb$1=new u8$1([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim$1=new u8$1([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb$1=function(tt,_){for(var _e=new u16$1(31),nt=0;nt<31;++nt)_e[nt]=_+=1<<tt[nt-1];for(var rt=new u32$1(_e[30]),nt=1;nt<30;++nt)for(var it=_e[nt];it<_e[nt+1];++it)rt[it]=it-_e[nt]<<5|nt;return[_e,rt]},_a$1=freb$1(fleb$1,2),fl$1=_a$1[0],revfl$1=_a$1[1];fl$1[28]=258,revfl$1[258]=28;var _b$1=freb$1(fdeb$1,0),fd$1=_b$1[0],rev$1=new u16$1(32768);for(var i$4=0;i$4<32768;++i$4){var x$3=(i$4&43690)>>>1|(i$4&21845)<<1;x$3=(x$3&52428)>>>2|(x$3&13107)<<2,x$3=(x$3&61680)>>>4|(x$3&3855)<<4,rev$1[i$4]=((x$3&65280)>>>8|(x$3&255)<<8)>>>1}var hMap$1=function(tt,_,_e){for(var nt=tt.length,rt=0,it=new u16$1(_);rt<nt;++rt)++it[tt[rt]-1];var ot=new u16$1(_);for(rt=0;rt<_;++rt)ot[rt]=ot[rt-1]+it[rt-1]<<1;var st;if(_e){st=new u16$1(1<<_);var at=15-_;for(rt=0;rt<nt;++rt)if(tt[rt])for(var lt=rt<<4|tt[rt],ct=_-tt[rt],ut=ot[tt[rt]-1]++<<ct,ht=ut|(1<<ct)-1;ut<=ht;++ut)st[rev$1[ut]>>>at]=lt}else for(st=new u16$1(nt),rt=0;rt<nt;++rt)tt[rt]&&(st[rt]=rev$1[ot[tt[rt]-1]++]>>>15-tt[rt]);return st},flt$1=new u8$1(288);for(var i$4=0;i$4<144;++i$4)flt$1[i$4]=8;for(var i$4=144;i$4<256;++i$4)flt$1[i$4]=9;for(var i$4=256;i$4<280;++i$4)flt$1[i$4]=7;for(var i$4=280;i$4<288;++i$4)flt$1[i$4]=8;var fdt$1=new u8$1(32);for(var i$4=0;i$4<32;++i$4)fdt$1[i$4]=5;var flrm$1=hMap$1(flt$1,9,1),fdrm$1=hMap$1(fdt$1,5,1),max$2=function(tt){for(var _=tt[0],_e=1;_e<tt.length;++_e)tt[_e]>_&&(_=tt[_e]);return _},bits$1=function(tt,_,_e){var nt=_/8|0;return(tt[nt]|tt[nt+1]<<8)>>(_&7)&_e},bits16$1=function(tt,_){var _e=_/8|0;return(tt[_e]|tt[_e+1]<<8|tt[_e+2]<<16)>>(_&7)},shft$1=function(tt){return(tt/8|0)+(tt&7&&1)},slc$1=function(tt,_,_e){(_==null||_<0)&&(_=0),(_e==null||_e>tt.length)&&(_e=tt.length);var nt=new(tt instanceof u16$1?u16$1:tt instanceof u32$1?u32$1:u8$1)(_e-_);return nt.set(tt.subarray(_,_e)),nt},inflt$1=function(tt,_,_e){var nt=tt.length;if(!nt||_e&&!_e.l&&nt<5)return _||new u8$1(0);var rt=!_||_e,it=!_e||_e.i;_e||(_e={}),_||(_=new u8$1(nt*3));var ot=function(rn){var an=_.length;if(rn>an){var dn=new u8$1(Math.max(an*2,rn));dn.set(_),_=dn}},st=_e.f||0,at=_e.p||0,lt=_e.b||0,ct=_e.l,ut=_e.d,ht=_e.m,pt=_e.n,gt=nt*8;do{if(!ct){_e.f=st=bits$1(tt,at,1);var yt=bits$1(tt,at+1,3);if(at+=3,yt)if(yt==1)ct=flrm$1,ut=fdrm$1,ht=9,pt=5;else if(yt==2){var xt=bits$1(tt,at,31)+257,St=bits$1(tt,at+10,15)+4,Tt=xt+bits$1(tt,at+5,31)+1;at+=14;for(var Mt=new u8$1(Tt),bt=new u8$1(19),Pt=0;Pt<St;++Pt)bt[clim$1[Pt]]=bits$1(tt,at+Pt*3,7);at+=St*3;for(var wt=max$2(bt),Bt=(1<<wt)-1,Ot=hMap$1(bt,wt,1),Pt=0;Pt<Tt;){var Ut=Ot[bits$1(tt,at,Bt)];at+=Ut&15;var vt=Ut>>>4;if(vt<16)Mt[Pt++]=vt;else{var Nt=0,zt=0;for(vt==16?(zt=3+bits$1(tt,at,3),at+=2,Nt=Mt[Pt-1]):vt==17?(zt=3+bits$1(tt,at,7),at+=3):vt==18&&(zt=11+bits$1(tt,at,127),at+=7);zt--;)Mt[Pt++]=Nt}}var jt=Mt.subarray(0,xt),Yt=Mt.subarray(xt);ht=max$2(jt),pt=max$2(Yt),ct=hMap$1(jt,ht,1),ut=hMap$1(Yt,pt,1)}else throw"invalid block type";else{var vt=shft$1(at)+4,mt=tt[vt-4]|tt[vt-3]<<8,_t=vt+mt;if(_t>nt){if(it)throw"unexpected EOF";break}rt&&ot(lt+mt),_.set(tt.subarray(vt,_t),lt),_e.b=lt+=mt,_e.p=at=_t*8;continue}if(at>gt){if(it)throw"unexpected EOF";break}}rt&&ot(lt+131072);for(var qt=(1<<ht)-1,Gt=(1<<pt)-1,Xt=at;;Xt=at){var Nt=ct[bits16$1(tt,at)&qt],Vt=Nt>>>4;if(at+=Nt&15,at>gt){if(it)throw"unexpected EOF";break}if(!Nt)throw"invalid length/literal";if(Vt<256)_[lt++]=Vt;else if(Vt==256){Xt=at,ct=null;break}else{var Wt=Vt-254;if(Vt>264){var Pt=Vt-257,$t=fleb$1[Pt];Wt=bits$1(tt,at,(1<<$t)-1)+fl$1[Pt],at+=$t}var nn=ut[bits16$1(tt,at)&Gt],en=nn>>>4;if(!nn)throw"invalid distance";at+=nn&15;var Yt=fd$1[en];if(en>3){var $t=fdeb$1[en];Yt+=bits16$1(tt,at)&(1<<$t)-1,at+=$t}if(at>gt){if(it)throw"unexpected EOF";break}rt&&ot(lt+131072);for(var sn=lt+Wt;lt<sn;lt+=4)_[lt]=_[lt-Yt],_[lt+1]=_[lt+1-Yt],_[lt+2]=_[lt+2-Yt],_[lt+3]=_[lt+3-Yt];lt=sn}}_e.l=ct,_e.p=Xt,_e.b=lt,ct&&(st=1,_e.m=ht,_e.d=ut,_e.n=pt)}while(!st);return lt==_.length?_:slc$1(_,0,lt)},et$1=new u8$1(0),zlv$1=function(tt){if((tt[0]&15)!=8||tt[0]>>>4>7||(tt[0]<<8|tt[1])%31)throw"invalid zlib data";if(tt[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function unzlibSync$1(tt,_){return inflt$1((zlv$1(tt),tt.subarray(2,-4)),_)}var td$1=typeof TextDecoder<"u"&&new TextDecoder,tds$1=0;try{td$1.decode(et$1,{stream:!0}),tds$1=1}catch{}function toTrianglesDrawMode(tt,_){if(_===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),tt;if(_===TriangleFanDrawMode||_===TriangleStripDrawMode){let _e=tt.getIndex();if(_e===null){const ot=[],st=tt.getAttribute("position");if(st!==void 0){for(let at=0;at<st.count;at++)ot.push(at);tt.setIndex(ot),_e=tt.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),tt}const nt=_e.count-2,rt=[];if(_e)if(_===TriangleFanDrawMode)for(let ot=1;ot<=nt;ot++)rt.push(_e.getX(0)),rt.push(_e.getX(ot)),rt.push(_e.getX(ot+1));else for(let ot=0;ot<nt;ot++)ot%2===0?(rt.push(_e.getX(ot)),rt.push(_e.getX(ot+1)),rt.push(_e.getX(ot+2))):(rt.push(_e.getX(ot+2)),rt.push(_e.getX(ot+1)),rt.push(_e.getX(ot)));rt.length/3!==nt&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const it=tt.clone();return it.setIndex(rt),it.clearGroups(),it}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",_),tt}const version=parseInt(REVISION.replace(/\D+/g,"")),SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Vector3},up:{value:new Vector3(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${version>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `};SkyShader.fragmentShader,SkyShader.vertexShader,SkyShader.uniforms;const isCubeTexture=tt=>tt&&tt.isCubeTexture;class GroundProjectedEnv extends Mesh{constructor(_,_e){var nt,rt;const it=isCubeTexture(_),st=((rt=it?(nt=_.image[0])==null?void 0:nt.width:_.image.width)!=null?rt:1024)/4,at=Math.floor(Math.log2(st)),lt=Math.pow(2,at),ct=3*Math.max(lt,16*7),ut=4*lt,ht=[it?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/ct}`,`#define CUBEUV_TEXEL_HEIGHT ${1/ut}`,`#define CUBEUV_MAX_MIP ${at}.0`],pt=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,gt=ht.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,yt={map:{value:_},height:{value:(_e==null?void 0:_e.height)||15},radius:{value:(_e==null?void 0:_e.radius)||100}},vt=new IcosahedronGeometry(1,16),mt=new ShaderMaterial({uniforms:yt,fragmentShader:gt,vertexShader:pt,side:DoubleSide});super(vt,mt)}set radius(_){this.material.uniforms.radius.value=_}get radius(){return this.material.uniforms.radius.value}set height(_){this.material.uniforms.height.value=_}get height(){return this.material.uniforms.height.value}}class GLTFLoader extends Loader$1{constructor(_){super(_),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(_e){return new GLTFMaterialsClearcoatExtension(_e)}),this.register(function(_e){return new GLTFTextureBasisUExtension(_e)}),this.register(function(_e){return new GLTFTextureWebPExtension(_e)}),this.register(function(_e){return new GLTFTextureAVIFExtension(_e)}),this.register(function(_e){return new GLTFMaterialsSheenExtension(_e)}),this.register(function(_e){return new GLTFMaterialsTransmissionExtension(_e)}),this.register(function(_e){return new GLTFMaterialsVolumeExtension(_e)}),this.register(function(_e){return new GLTFMaterialsIorExtension(_e)}),this.register(function(_e){return new GLTFMaterialsEmissiveStrengthExtension(_e)}),this.register(function(_e){return new GLTFMaterialsSpecularExtension(_e)}),this.register(function(_e){return new GLTFMaterialsIridescenceExtension(_e)}),this.register(function(_e){return new GLTFMaterialsAnisotropyExtension(_e)}),this.register(function(_e){return new GLTFLightsExtension(_e)}),this.register(function(_e){return new GLTFMeshoptCompression(_e)}),this.register(function(_e){return new GLTFMeshGpuInstancing(_e)})}load(_,_e,nt,rt){const it=this;let ot;this.resourcePath!==""?ot=this.resourcePath:this.path!==""?ot=this.path:ot=LoaderUtils.extractUrlBase(_),this.manager.itemStart(_);const st=function(lt){rt?rt(lt):console.error(lt),it.manager.itemError(_),it.manager.itemEnd(_)},at=new FileLoader(this.manager);at.setPath(this.path),at.setResponseType("arraybuffer"),at.setRequestHeader(this.requestHeader),at.setWithCredentials(this.withCredentials),at.load(_,function(lt){try{it.parse(lt,ot,function(ct){_e(ct),it.manager.itemEnd(_)},st)}catch(ct){st(ct)}},nt,st)}setDRACOLoader(_){return this.dracoLoader=_,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(_){return this.ktx2Loader=_,this}setMeshoptDecoder(_){return this.meshoptDecoder=_,this}register(_){return this.pluginCallbacks.indexOf(_)===-1&&this.pluginCallbacks.push(_),this}unregister(_){return this.pluginCallbacks.indexOf(_)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(_),1),this}parse(_,_e,nt,rt){let it;const ot={},st={};if(typeof _=="string")it=JSON.parse(_);else if(_ instanceof ArrayBuffer)if(LoaderUtils.decodeText(new Uint8Array(_.slice(0,4)))===BINARY_EXTENSION_HEADER_MAGIC){try{ot[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(_)}catch(ct){rt&&rt(ct);return}it=JSON.parse(ot[EXTENSIONS.KHR_BINARY_GLTF].content)}else it=JSON.parse(LoaderUtils.decodeText(new Uint8Array(_)));else it=_;if(it.asset===void 0||it.asset.version[0]<2){rt&&rt(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const at=new GLTFParser(it,{path:_e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});at.fileLoader.setRequestHeader(this.requestHeader);for(let lt=0;lt<this.pluginCallbacks.length;lt++){const ct=this.pluginCallbacks[lt](at);st[ct.name]=ct,ot[ct.name]=!0}if(it.extensionsUsed)for(let lt=0;lt<it.extensionsUsed.length;++lt){const ct=it.extensionsUsed[lt],ut=it.extensionsRequired||[];switch(ct){case EXTENSIONS.KHR_MATERIALS_UNLIT:ot[ct]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:ot[ct]=new GLTFDracoMeshCompressionExtension(it,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:ot[ct]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:ot[ct]=new GLTFMeshQuantizationExtension;break;default:ut.indexOf(ct)>=0&&st[ct]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+ct+'".')}}at.setExtensions(ot),at.setPlugins(st),at.parse(nt,rt)}parseAsync(_,_e){const nt=this;return new Promise(function(rt,it){nt.parse(_,_e,rt,it)})}}function GLTFRegistry(){let tt={};return{get:function(_){return tt[_]},add:function(_,_e){tt[_]=_e},remove:function(_){delete tt[_]},removeAll:function(){tt={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const _=this.parser,_e=this.parser.json.nodes||[];for(let nt=0,rt=_e.length;nt<rt;nt++){const it=_e[nt];it.extensions&&it.extensions[this.name]&&it.extensions[this.name].light!==void 0&&_._addNodeRef(this.cache,it.extensions[this.name].light)}}_loadLight(_){const _e=this.parser,nt="light:"+_;let rt=_e.cache.get(nt);if(rt)return rt;const it=_e.json,at=((it.extensions&&it.extensions[this.name]||{}).lights||[])[_];let lt;const ct=new Color$1(16777215);at.color!==void 0&&ct.fromArray(at.color);const ut=at.range!==void 0?at.range:0;switch(at.type){case"directional":lt=new DirectionalLight(ct),lt.target.position.set(0,0,-1),lt.add(lt.target);break;case"point":lt=new PointLight(ct),lt.distance=ut;break;case"spot":lt=new SpotLight(ct),lt.distance=ut,at.spot=at.spot||{},at.spot.innerConeAngle=at.spot.innerConeAngle!==void 0?at.spot.innerConeAngle:0,at.spot.outerConeAngle=at.spot.outerConeAngle!==void 0?at.spot.outerConeAngle:Math.PI/4,lt.angle=at.spot.outerConeAngle,lt.penumbra=1-at.spot.innerConeAngle/at.spot.outerConeAngle,lt.target.position.set(0,0,-1),lt.add(lt.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+at.type)}return lt.position.set(0,0,0),lt.decay=2,assignExtrasToUserData(lt,at),at.intensity!==void 0&&(lt.intensity=at.intensity),lt.name=_e.createUniqueName(at.name||"light_"+_),rt=Promise.resolve(lt),_e.cache.add(nt,rt),rt}getDependency(_,_e){if(_==="light")return this._loadLight(_e)}createNodeAttachment(_){const _e=this,nt=this.parser,it=nt.json.nodes[_],st=(it.extensions&&it.extensions[this.name]||{}).light;return st===void 0?null:this._loadLight(st).then(function(at){return nt._getNodeRef(_e.cache,st,at)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(_,_e,nt){const rt=[];_.color=new Color$1(1,1,1),_.opacity=1;const it=_e.pbrMetallicRoughness;if(it){if(Array.isArray(it.baseColorFactor)){const ot=it.baseColorFactor;_.color.fromArray(ot),_.opacity=ot[3]}it.baseColorTexture!==void 0&&rt.push(nt.assignTexture(_,"map",it.baseColorTexture,3001))}return Promise.all(rt)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(_,_e){const rt=this.parser.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=rt.extensions[this.name].emissiveStrength;return it!==void 0&&(_e.emissiveIntensity=it),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[],ot=rt.extensions[this.name];if(ot.clearcoatFactor!==void 0&&(_e.clearcoat=ot.clearcoatFactor),ot.clearcoatTexture!==void 0&&it.push(nt.assignTexture(_e,"clearcoatMap",ot.clearcoatTexture)),ot.clearcoatRoughnessFactor!==void 0&&(_e.clearcoatRoughness=ot.clearcoatRoughnessFactor),ot.clearcoatRoughnessTexture!==void 0&&it.push(nt.assignTexture(_e,"clearcoatRoughnessMap",ot.clearcoatRoughnessTexture)),ot.clearcoatNormalTexture!==void 0&&(it.push(nt.assignTexture(_e,"clearcoatNormalMap",ot.clearcoatNormalTexture)),ot.clearcoatNormalTexture.scale!==void 0)){const st=ot.clearcoatNormalTexture.scale;_e.clearcoatNormalScale=new Vector2(st,st)}return Promise.all(it)}}class GLTFMaterialsIridescenceExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[],ot=rt.extensions[this.name];return ot.iridescenceFactor!==void 0&&(_e.iridescence=ot.iridescenceFactor),ot.iridescenceTexture!==void 0&&it.push(nt.assignTexture(_e,"iridescenceMap",ot.iridescenceTexture)),ot.iridescenceIor!==void 0&&(_e.iridescenceIOR=ot.iridescenceIor),_e.iridescenceThicknessRange===void 0&&(_e.iridescenceThicknessRange=[100,400]),ot.iridescenceThicknessMinimum!==void 0&&(_e.iridescenceThicknessRange[0]=ot.iridescenceThicknessMinimum),ot.iridescenceThicknessMaximum!==void 0&&(_e.iridescenceThicknessRange[1]=ot.iridescenceThicknessMaximum),ot.iridescenceThicknessTexture!==void 0&&it.push(nt.assignTexture(_e,"iridescenceThicknessMap",ot.iridescenceThicknessTexture)),Promise.all(it)}}class GLTFMaterialsSheenExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[];_e.sheenColor=new Color$1(0,0,0),_e.sheenRoughness=0,_e.sheen=1;const ot=rt.extensions[this.name];return ot.sheenColorFactor!==void 0&&_e.sheenColor.fromArray(ot.sheenColorFactor),ot.sheenRoughnessFactor!==void 0&&(_e.sheenRoughness=ot.sheenRoughnessFactor),ot.sheenColorTexture!==void 0&&it.push(nt.assignTexture(_e,"sheenColorMap",ot.sheenColorTexture,3001)),ot.sheenRoughnessTexture!==void 0&&it.push(nt.assignTexture(_e,"sheenRoughnessMap",ot.sheenRoughnessTexture)),Promise.all(it)}}class GLTFMaterialsTransmissionExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[],ot=rt.extensions[this.name];return ot.transmissionFactor!==void 0&&(_e.transmission=ot.transmissionFactor),ot.transmissionTexture!==void 0&&it.push(nt.assignTexture(_e,"transmissionMap",ot.transmissionTexture)),Promise.all(it)}}class GLTFMaterialsVolumeExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[],ot=rt.extensions[this.name];_e.thickness=ot.thicknessFactor!==void 0?ot.thicknessFactor:0,ot.thicknessTexture!==void 0&&it.push(nt.assignTexture(_e,"thicknessMap",ot.thicknessTexture)),_e.attenuationDistance=ot.attenuationDistance||1/0;const st=ot.attenuationColor||[1,1,1];return _e.attenuationColor=new Color$1(st[0],st[1],st[2]),Promise.all(it)}}class GLTFMaterialsIorExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const rt=this.parser.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=rt.extensions[this.name];return _e.ior=it.ior!==void 0?it.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[],ot=rt.extensions[this.name];_e.specularIntensity=ot.specularFactor!==void 0?ot.specularFactor:1,ot.specularTexture!==void 0&&it.push(nt.assignTexture(_e,"specularIntensityMap",ot.specularTexture));const st=ot.specularColorFactor||[1,1,1];return _e.specularColor=new Color$1(st[0],st[1],st[2]),ot.specularColorTexture!==void 0&&it.push(nt.assignTexture(_e,"specularColorMap",ot.specularColorTexture,3001)),Promise.all(it)}}class GLTFMaterialsAnisotropyExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_ANISOTROPY}getMaterialType(_){const nt=this.parser.json.materials[_];return!nt.extensions||!nt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const nt=this.parser,rt=nt.json.materials[_];if(!rt.extensions||!rt.extensions[this.name])return Promise.resolve();const it=[],ot=rt.extensions[this.name];return ot.anisotropyStrength!==void 0&&(_e.anisotropy=ot.anisotropyStrength),ot.anisotropyRotation!==void 0&&(_e.anisotropyRotation=ot.anisotropyRotation),ot.anisotropyTexture!==void 0&&it.push(nt.assignTexture(_e,"anisotropyMap",ot.anisotropyTexture)),Promise.all(it)}}class GLTFTextureBasisUExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(_){const _e=this.parser,nt=_e.json,rt=nt.textures[_];if(!rt.extensions||!rt.extensions[this.name])return null;const it=rt.extensions[this.name],ot=_e.options.ktx2Loader;if(!ot){if(nt.extensionsRequired&&nt.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return _e.loadTextureImage(_,it.source,ot)}}class GLTFTextureWebPExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(_){const _e=this.name,nt=this.parser,rt=nt.json,it=rt.textures[_];if(!it.extensions||!it.extensions[_e])return null;const ot=it.extensions[_e],st=rt.images[ot.source];let at=nt.textureLoader;if(st.uri){const lt=nt.options.manager.getHandler(st.uri);lt!==null&&(at=lt)}return this.detectSupport().then(function(lt){if(lt)return nt.loadTextureImage(_,ot.source,at);if(rt.extensionsRequired&&rt.extensionsRequired.indexOf(_e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return nt.loadTexture(_)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(_){const _e=new Image;_e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",_e.onload=_e.onerror=function(){_(_e.height===1)}})),this.isSupported}}class GLTFTextureAVIFExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(_){const _e=this.name,nt=this.parser,rt=nt.json,it=rt.textures[_];if(!it.extensions||!it.extensions[_e])return null;const ot=it.extensions[_e],st=rt.images[ot.source];let at=nt.textureLoader;if(st.uri){const lt=nt.options.manager.getHandler(st.uri);lt!==null&&(at=lt)}return this.detectSupport().then(function(lt){if(lt)return nt.loadTextureImage(_,ot.source,at);if(rt.extensionsRequired&&rt.extensionsRequired.indexOf(_e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return nt.loadTexture(_)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(_){const _e=new Image;_e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",_e.onload=_e.onerror=function(){_(_e.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(_){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=_}loadBufferView(_){const _e=this.parser.json,nt=_e.bufferViews[_];if(nt.extensions&&nt.extensions[this.name]){const rt=nt.extensions[this.name],it=this.parser.getDependency("buffer",rt.buffer),ot=this.parser.options.meshoptDecoder;if(!ot||!ot.supported){if(_e.extensionsRequired&&_e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return it.then(function(st){const at=rt.byteOffset||0,lt=rt.byteLength||0,ct=rt.count,ut=rt.byteStride,ht=new Uint8Array(st,at,lt);return ot.decodeGltfBufferAsync?ot.decodeGltfBufferAsync(ct,ut,ht,rt.mode,rt.filter).then(function(pt){return pt.buffer}):ot.ready.then(function(){const pt=new ArrayBuffer(ct*ut);return ot.decodeGltfBuffer(new Uint8Array(pt),ct,ut,ht,rt.mode,rt.filter),pt})})}else return null}}class GLTFMeshGpuInstancing{constructor(_){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=_}createNodeMesh(_){const _e=this.parser.json,nt=_e.nodes[_];if(!nt.extensions||!nt.extensions[this.name]||nt.mesh===void 0)return null;const rt=_e.meshes[nt.mesh];for(const lt of rt.primitives)if(lt.mode!==WEBGL_CONSTANTS.TRIANGLES&&lt.mode!==WEBGL_CONSTANTS.TRIANGLE_STRIP&&lt.mode!==WEBGL_CONSTANTS.TRIANGLE_FAN&&lt.mode!==void 0)return null;const ot=nt.extensions[this.name].attributes,st=[],at={};for(const lt in ot)st.push(this.parser.getDependency("accessor",ot[lt]).then(ct=>(at[lt]=ct,at[lt])));return st.length<1?null:(st.push(this.parser.createNodeMesh(_)),Promise.all(st).then(lt=>{const ct=lt.pop(),ut=ct.isGroup?ct.children:[ct],ht=lt[0].count,pt=[];for(const gt of ut){const yt=new Matrix4,vt=new Vector3,mt=new Quaternion,_t=new Vector3(1,1,1),xt=new InstancedMesh(gt.geometry,gt.material,ht);for(let St=0;St<ht;St++)at.TRANSLATION&&vt.fromBufferAttribute(at.TRANSLATION,St),at.ROTATION&&mt.fromBufferAttribute(at.ROTATION,St),at.SCALE&&_t.fromBufferAttribute(at.SCALE,St),xt.setMatrixAt(St,yt.compose(vt,mt,_t));for(const St in at)St!=="TRANSLATION"&&St!=="ROTATION"&&St!=="SCALE"&&gt.geometry.setAttribute(St,at[St]);Object3D.prototype.copy.call(xt,gt),this.parser.assignFinalMaterial(xt),pt.push(xt)}return ct.isGroup?(ct.clear(),ct.add(...pt),ct):pt[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(_){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const _e=new DataView(_,0,BINARY_EXTENSION_HEADER_LENGTH);if(this.header={magic:LoaderUtils.decodeText(new Uint8Array(_.slice(0,4))),version:_e.getUint32(4,!0),length:_e.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const nt=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,rt=new DataView(_,BINARY_EXTENSION_HEADER_LENGTH);let it=0;for(;it<nt;){const ot=rt.getUint32(it,!0);it+=4;const st=rt.getUint32(it,!0);if(it+=4,st===BINARY_EXTENSION_CHUNK_TYPES.JSON){const at=new Uint8Array(_,BINARY_EXTENSION_HEADER_LENGTH+it,ot);this.content=LoaderUtils.decodeText(at)}else if(st===BINARY_EXTENSION_CHUNK_TYPES.BIN){const at=BINARY_EXTENSION_HEADER_LENGTH+it;this.body=_.slice(at,at+ot)}it+=ot}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(_,_e){if(!_e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=_,this.dracoLoader=_e,this.dracoLoader.preload()}decodePrimitive(_,_e){const nt=this.json,rt=this.dracoLoader,it=_.extensions[this.name].bufferView,ot=_.extensions[this.name].attributes,st={},at={},lt={};for(const ct in ot){const ut=ATTRIBUTES[ct]||ct.toLowerCase();st[ut]=ot[ct]}for(const ct in _.attributes){const ut=ATTRIBUTES[ct]||ct.toLowerCase();if(ot[ct]!==void 0){const ht=nt.accessors[_.attributes[ct]],pt=WEBGL_COMPONENT_TYPES[ht.componentType];lt[ut]=pt.name,at[ut]=ht.normalized===!0}}return _e.getDependency("bufferView",it).then(function(ct){return new Promise(function(ut){rt.decodeDracoFile(ct,function(ht){for(const pt in ht.attributes){const gt=ht.attributes[pt],yt=at[pt];yt!==void 0&&(gt.normalized=yt)}ut(ht)},st,lt)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(_,_e){return(_e.texCoord===void 0||_e.texCoord===_.channel)&&_e.offset===void 0&&_e.rotation===void 0&&_e.scale===void 0||(_=_.clone(),_e.texCoord!==void 0&&(_.channel=_e.texCoord),_e.offset!==void 0&&_.offset.fromArray(_e.offset),_e.rotation!==void 0&&(_.rotation=_e.rotation),_e.scale!==void 0&&_.repeat.fromArray(_e.scale),_.needsUpdate=!0),_}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(_,_e,nt,rt){super(_,_e,nt,rt)}copySampleValue_(_){const _e=this.resultBuffer,nt=this.sampleValues,rt=this.valueSize,it=_*rt*3+rt;for(let ot=0;ot!==rt;ot++)_e[ot]=nt[it+ot];return _e}interpolate_(_,_e,nt,rt){const it=this.resultBuffer,ot=this.sampleValues,st=this.valueSize,at=st*2,lt=st*3,ct=rt-_e,ut=(nt-_e)/ct,ht=ut*ut,pt=ht*ut,gt=_*lt,yt=gt-lt,vt=-2*pt+3*ht,mt=pt-ht,_t=1-vt,xt=mt-ht+ut;for(let St=0;St!==st;St++){const Tt=ot[yt+St+st],Mt=ot[yt+St+at]*ct,bt=ot[gt+St+st],Pt=ot[gt+St]*ct;it[St]=_t*Tt+xt*Mt+vt*bt+mt*Pt}return it}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(_,_e,nt,rt){const it=super.interpolate_(_,_e,nt,rt);return _q.fromArray(it).normalize().toArray(it),it}}const WEBGL_CONSTANTS={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...version>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(tt){return tt.DefaultMaterial===void 0&&(tt.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),tt.DefaultMaterial}function addUnknownExtensionsToUserData(tt,_,_e){for(const nt in _e.extensions)tt[nt]===void 0&&(_.userData.gltfExtensions=_.userData.gltfExtensions||{},_.userData.gltfExtensions[nt]=_e.extensions[nt])}function assignExtrasToUserData(tt,_){_.extras!==void 0&&(typeof _.extras=="object"?Object.assign(tt.userData,_.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+_.extras))}function addMorphTargets(tt,_,_e){let nt=!1,rt=!1,it=!1;for(let lt=0,ct=_.length;lt<ct;lt++){const ut=_[lt];if(ut.POSITION!==void 0&&(nt=!0),ut.NORMAL!==void 0&&(rt=!0),ut.COLOR_0!==void 0&&(it=!0),nt&&rt&&it)break}if(!nt&&!rt&&!it)return Promise.resolve(tt);const ot=[],st=[],at=[];for(let lt=0,ct=_.length;lt<ct;lt++){const ut=_[lt];if(nt){const ht=ut.POSITION!==void 0?_e.getDependency("accessor",ut.POSITION):tt.attributes.position;ot.push(ht)}if(rt){const ht=ut.NORMAL!==void 0?_e.getDependency("accessor",ut.NORMAL):tt.attributes.normal;st.push(ht)}if(it){const ht=ut.COLOR_0!==void 0?_e.getDependency("accessor",ut.COLOR_0):tt.attributes.color;at.push(ht)}}return Promise.all([Promise.all(ot),Promise.all(st),Promise.all(at)]).then(function(lt){const ct=lt[0],ut=lt[1],ht=lt[2];return nt&&(tt.morphAttributes.position=ct),rt&&(tt.morphAttributes.normal=ut),it&&(tt.morphAttributes.color=ht),tt.morphTargetsRelative=!0,tt})}function updateMorphTargets(tt,_){if(tt.updateMorphTargets(),_.weights!==void 0)for(let _e=0,nt=_.weights.length;_e<nt;_e++)tt.morphTargetInfluences[_e]=_.weights[_e];if(_.extras&&Array.isArray(_.extras.targetNames)){const _e=_.extras.targetNames;if(tt.morphTargetInfluences.length===_e.length){tt.morphTargetDictionary={};for(let nt=0,rt=_e.length;nt<rt;nt++)tt.morphTargetDictionary[_e[nt]]=nt}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(tt){let _;const _e=tt.extensions&&tt.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];if(_e?_="draco:"+_e.bufferView+":"+_e.indices+":"+createAttributesKey(_e.attributes):_=tt.indices+":"+createAttributesKey(tt.attributes)+":"+tt.mode,tt.targets!==void 0)for(let nt=0,rt=tt.targets.length;nt<rt;nt++)_+=":"+createAttributesKey(tt.targets[nt]);return _}function createAttributesKey(tt){let _="";const _e=Object.keys(tt).sort();for(let nt=0,rt=_e.length;nt<rt;nt++)_+=_e[nt]+":"+tt[_e[nt]]+";";return _}function getNormalizedComponentScale(tt){switch(tt){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(tt){return tt.search(/\.jpe?g($|\?)/i)>0||tt.search(/^data\:image\/jpeg/)===0?"image/jpeg":tt.search(/\.webp($|\?)/i)>0||tt.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(_={},_e={}){this.json=_,this.extensions={},this.plugins={},this.options=_e,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let nt=!1,rt=!1,it=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(nt=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,rt=navigator.userAgent.indexOf("Firefox")>-1,it=rt?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||nt||rt&&it<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(_){this.extensions=_}setPlugins(_){this.plugins=_}parse(_,_e){const nt=this,rt=this.json,it=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(ot){return ot._markDefs&&ot._markDefs()}),Promise.all(this._invokeAll(function(ot){return ot.beforeRoot&&ot.beforeRoot()})).then(function(){return Promise.all([nt.getDependencies("scene"),nt.getDependencies("animation"),nt.getDependencies("camera")])}).then(function(ot){const st={scene:ot[0][rt.scene||0],scenes:ot[0],animations:ot[1],cameras:ot[2],asset:rt.asset,parser:nt,userData:{}};addUnknownExtensionsToUserData(it,st,rt),assignExtrasToUserData(st,rt),Promise.all(nt._invokeAll(function(at){return at.afterRoot&&at.afterRoot(st)})).then(function(){_(st)})}).catch(_e)}_markDefs(){const _=this.json.nodes||[],_e=this.json.skins||[],nt=this.json.meshes||[];for(let rt=0,it=_e.length;rt<it;rt++){const ot=_e[rt].joints;for(let st=0,at=ot.length;st<at;st++)_[ot[st]].isBone=!0}for(let rt=0,it=_.length;rt<it;rt++){const ot=_[rt];ot.mesh!==void 0&&(this._addNodeRef(this.meshCache,ot.mesh),ot.skin!==void 0&&(nt[ot.mesh].isSkinnedMesh=!0)),ot.camera!==void 0&&this._addNodeRef(this.cameraCache,ot.camera)}}_addNodeRef(_,_e){_e!==void 0&&(_.refs[_e]===void 0&&(_.refs[_e]=_.uses[_e]=0),_.refs[_e]++)}_getNodeRef(_,_e,nt){if(_.refs[_e]<=1)return nt;const rt=nt.clone(),it=(ot,st)=>{const at=this.associations.get(ot);at!=null&&this.associations.set(st,at);for(const[lt,ct]of ot.children.entries())it(ct,st.children[lt])};return it(nt,rt),rt.name+="_instance_"+_.uses[_e]++,rt}_invokeOne(_){const _e=Object.values(this.plugins);_e.push(this);for(let nt=0;nt<_e.length;nt++){const rt=_(_e[nt]);if(rt)return rt}return null}_invokeAll(_){const _e=Object.values(this.plugins);_e.unshift(this);const nt=[];for(let rt=0;rt<_e.length;rt++){const it=_(_e[rt]);it&&nt.push(it)}return nt}getDependency(_,_e){const nt=_+":"+_e;let rt=this.cache.get(nt);if(!rt){switch(_){case"scene":rt=this.loadScene(_e);break;case"node":rt=this._invokeOne(function(it){return it.loadNode&&it.loadNode(_e)});break;case"mesh":rt=this._invokeOne(function(it){return it.loadMesh&&it.loadMesh(_e)});break;case"accessor":rt=this.loadAccessor(_e);break;case"bufferView":rt=this._invokeOne(function(it){return it.loadBufferView&&it.loadBufferView(_e)});break;case"buffer":rt=this.loadBuffer(_e);break;case"material":rt=this._invokeOne(function(it){return it.loadMaterial&&it.loadMaterial(_e)});break;case"texture":rt=this._invokeOne(function(it){return it.loadTexture&&it.loadTexture(_e)});break;case"skin":rt=this.loadSkin(_e);break;case"animation":rt=this._invokeOne(function(it){return it.loadAnimation&&it.loadAnimation(_e)});break;case"camera":rt=this.loadCamera(_e);break;default:if(rt=this._invokeOne(function(it){return it!=this&&it.getDependency&&it.getDependency(_,_e)}),!rt)throw new Error("Unknown type: "+_);break}this.cache.add(nt,rt)}return rt}getDependencies(_){let _e=this.cache.get(_);if(!_e){const nt=this,rt=this.json[_+(_==="mesh"?"es":"s")]||[];_e=Promise.all(rt.map(function(it,ot){return nt.getDependency(_,ot)})),this.cache.add(_,_e)}return _e}loadBuffer(_){const _e=this.json.buffers[_],nt=this.fileLoader;if(_e.type&&_e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+_e.type+" buffer type is not supported.");if(_e.uri===void 0&&_===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const rt=this.options;return new Promise(function(it,ot){nt.load(LoaderUtils.resolveURL(_e.uri,rt.path),it,void 0,function(){ot(new Error('THREE.GLTFLoader: Failed to load buffer "'+_e.uri+'".'))})})}loadBufferView(_){const _e=this.json.bufferViews[_];return this.getDependency("buffer",_e.buffer).then(function(nt){const rt=_e.byteLength||0,it=_e.byteOffset||0;return nt.slice(it,it+rt)})}loadAccessor(_){const _e=this,nt=this.json,rt=this.json.accessors[_];if(rt.bufferView===void 0&&rt.sparse===void 0){const ot=WEBGL_TYPE_SIZES[rt.type],st=WEBGL_COMPONENT_TYPES[rt.componentType],at=rt.normalized===!0,lt=new st(rt.count*ot);return Promise.resolve(new BufferAttribute(lt,ot,at))}const it=[];return rt.bufferView!==void 0?it.push(this.getDependency("bufferView",rt.bufferView)):it.push(null),rt.sparse!==void 0&&(it.push(this.getDependency("bufferView",rt.sparse.indices.bufferView)),it.push(this.getDependency("bufferView",rt.sparse.values.bufferView))),Promise.all(it).then(function(ot){const st=ot[0],at=WEBGL_TYPE_SIZES[rt.type],lt=WEBGL_COMPONENT_TYPES[rt.componentType],ct=lt.BYTES_PER_ELEMENT,ut=ct*at,ht=rt.byteOffset||0,pt=rt.bufferView!==void 0?nt.bufferViews[rt.bufferView].byteStride:void 0,gt=rt.normalized===!0;let yt,vt;if(pt&&pt!==ut){const mt=Math.floor(ht/pt),_t="InterleavedBuffer:"+rt.bufferView+":"+rt.componentType+":"+mt+":"+rt.count;let xt=_e.cache.get(_t);xt||(yt=new lt(st,mt*pt,rt.count*pt/ct),xt=new InterleavedBuffer(yt,pt/ct),_e.cache.add(_t,xt)),vt=new InterleavedBufferAttribute(xt,at,ht%pt/ct,gt)}else st===null?yt=new lt(rt.count*at):yt=new lt(st,ht,rt.count*at),vt=new BufferAttribute(yt,at,gt);if(rt.sparse!==void 0){const mt=WEBGL_TYPE_SIZES.SCALAR,_t=WEBGL_COMPONENT_TYPES[rt.sparse.indices.componentType],xt=rt.sparse.indices.byteOffset||0,St=rt.sparse.values.byteOffset||0,Tt=new _t(ot[1],xt,rt.sparse.count*mt),Mt=new lt(ot[2],St,rt.sparse.count*at);st!==null&&(vt=new BufferAttribute(vt.array.slice(),vt.itemSize,vt.normalized));for(let bt=0,Pt=Tt.length;bt<Pt;bt++){const wt=Tt[bt];if(vt.setX(wt,Mt[bt*at]),at>=2&&vt.setY(wt,Mt[bt*at+1]),at>=3&&vt.setZ(wt,Mt[bt*at+2]),at>=4&&vt.setW(wt,Mt[bt*at+3]),at>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return vt})}loadTexture(_){const _e=this.json,nt=this.options,it=_e.textures[_].source,ot=_e.images[it];let st=this.textureLoader;if(ot.uri){const at=nt.manager.getHandler(ot.uri);at!==null&&(st=at)}return this.loadTextureImage(_,it,st)}loadTextureImage(_,_e,nt){const rt=this,it=this.json,ot=it.textures[_],st=it.images[_e],at=(st.uri||st.bufferView)+":"+ot.sampler;if(this.textureCache[at])return this.textureCache[at];const lt=this.loadImageSource(_e,nt).then(function(ct){ct.flipY=!1,ct.name=ot.name||st.name||"",ct.name===""&&typeof st.uri=="string"&&st.uri.startsWith("data:image/")===!1&&(ct.name=st.uri);const ht=(it.samplers||{})[ot.sampler]||{};return ct.magFilter=WEBGL_FILTERS[ht.magFilter]||LinearFilter,ct.minFilter=WEBGL_FILTERS[ht.minFilter]||LinearMipmapLinearFilter,ct.wrapS=WEBGL_WRAPPINGS[ht.wrapS]||RepeatWrapping,ct.wrapT=WEBGL_WRAPPINGS[ht.wrapT]||RepeatWrapping,rt.associations.set(ct,{textures:_}),ct}).catch(function(){return null});return this.textureCache[at]=lt,lt}loadImageSource(_,_e){const nt=this,rt=this.json,it=this.options;if(this.sourceCache[_]!==void 0)return this.sourceCache[_].then(ut=>ut.clone());const ot=rt.images[_],st=self.URL||self.webkitURL;let at=ot.uri||"",lt=!1;if(ot.bufferView!==void 0)at=nt.getDependency("bufferView",ot.bufferView).then(function(ut){lt=!0;const ht=new Blob([ut],{type:ot.mimeType});return at=st.createObjectURL(ht),at});else if(ot.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+_+" is missing URI and bufferView");const ct=Promise.resolve(at).then(function(ut){return new Promise(function(ht,pt){let gt=ht;_e.isImageBitmapLoader===!0&&(gt=function(yt){const vt=new Texture(yt);vt.needsUpdate=!0,ht(vt)}),_e.load(LoaderUtils.resolveURL(ut,it.path),gt,void 0,pt)})}).then(function(ut){return lt===!0&&st.revokeObjectURL(at),ut.userData.mimeType=ot.mimeType||getImageURIMimeType(ot.uri),ut}).catch(function(ut){throw console.error("THREE.GLTFLoader: Couldn't load texture",at),ut});return this.sourceCache[_]=ct,ct}assignTexture(_,_e,nt,rt){const it=this;return this.getDependency("texture",nt.index).then(function(ot){if(!ot)return null;if(nt.texCoord!==void 0&&nt.texCoord>0&&(ot=ot.clone(),ot.channel=nt.texCoord),it.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const st=nt.extensions!==void 0?nt.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(st){const at=it.associations.get(ot);ot=it.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(ot,st),it.associations.set(ot,at)}}return rt!==void 0&&("colorSpace"in ot?ot.colorSpace=rt===3001?"srgb":"srgb-linear":ot.encoding=rt),_[_e]=ot,ot})}assignFinalMaterial(_){const _e=_.geometry;let nt=_.material;const rt=_e.attributes.tangent===void 0,it=_e.attributes.color!==void 0,ot=_e.attributes.normal===void 0;if(_.isPoints){const st="PointsMaterial:"+nt.uuid;let at=this.cache.get(st);at||(at=new PointsMaterial,Material.prototype.copy.call(at,nt),at.color.copy(nt.color),at.map=nt.map,at.sizeAttenuation=!1,this.cache.add(st,at)),nt=at}else if(_.isLine){const st="LineBasicMaterial:"+nt.uuid;let at=this.cache.get(st);at||(at=new LineBasicMaterial,Material.prototype.copy.call(at,nt),at.color.copy(nt.color),at.map=nt.map,this.cache.add(st,at)),nt=at}if(rt||it||ot){let st="ClonedMaterial:"+nt.uuid+":";rt&&(st+="derivative-tangents:"),it&&(st+="vertex-colors:"),ot&&(st+="flat-shading:");let at=this.cache.get(st);at||(at=nt.clone(),it&&(at.vertexColors=!0),ot&&(at.flatShading=!0),rt&&(at.normalScale&&(at.normalScale.y*=-1),at.clearcoatNormalScale&&(at.clearcoatNormalScale.y*=-1)),this.cache.add(st,at),this.associations.set(at,this.associations.get(nt))),nt=at}_.material=nt}getMaterialType(){return MeshStandardMaterial}loadMaterial(_){const _e=this,nt=this.json,rt=this.extensions,it=nt.materials[_];let ot;const st={},at=it.extensions||{},lt=[];if(at[EXTENSIONS.KHR_MATERIALS_UNLIT]){const ut=rt[EXTENSIONS.KHR_MATERIALS_UNLIT];ot=ut.getMaterialType(),lt.push(ut.extendParams(st,it,_e))}else{const ut=it.pbrMetallicRoughness||{};if(st.color=new Color$1(1,1,1),st.opacity=1,Array.isArray(ut.baseColorFactor)){const ht=ut.baseColorFactor;st.color.fromArray(ht),st.opacity=ht[3]}ut.baseColorTexture!==void 0&&lt.push(_e.assignTexture(st,"map",ut.baseColorTexture,3001)),st.metalness=ut.metallicFactor!==void 0?ut.metallicFactor:1,st.roughness=ut.roughnessFactor!==void 0?ut.roughnessFactor:1,ut.metallicRoughnessTexture!==void 0&&(lt.push(_e.assignTexture(st,"metalnessMap",ut.metallicRoughnessTexture)),lt.push(_e.assignTexture(st,"roughnessMap",ut.metallicRoughnessTexture))),ot=this._invokeOne(function(ht){return ht.getMaterialType&&ht.getMaterialType(_)}),lt.push(Promise.all(this._invokeAll(function(ht){return ht.extendMaterialParams&&ht.extendMaterialParams(_,st)})))}it.doubleSided===!0&&(st.side=DoubleSide);const ct=it.alphaMode||ALPHA_MODES.OPAQUE;if(ct===ALPHA_MODES.BLEND?(st.transparent=!0,st.depthWrite=!1):(st.transparent=!1,ct===ALPHA_MODES.MASK&&(st.alphaTest=it.alphaCutoff!==void 0?it.alphaCutoff:.5)),it.normalTexture!==void 0&&ot!==MeshBasicMaterial&&(lt.push(_e.assignTexture(st,"normalMap",it.normalTexture)),st.normalScale=new Vector2(1,1),it.normalTexture.scale!==void 0)){const ut=it.normalTexture.scale;st.normalScale.set(ut,ut)}return it.occlusionTexture!==void 0&&ot!==MeshBasicMaterial&&(lt.push(_e.assignTexture(st,"aoMap",it.occlusionTexture)),it.occlusionTexture.strength!==void 0&&(st.aoMapIntensity=it.occlusionTexture.strength)),it.emissiveFactor!==void 0&&ot!==MeshBasicMaterial&&(st.emissive=new Color$1().fromArray(it.emissiveFactor)),it.emissiveTexture!==void 0&&ot!==MeshBasicMaterial&&lt.push(_e.assignTexture(st,"emissiveMap",it.emissiveTexture,3001)),Promise.all(lt).then(function(){const ut=new ot(st);return it.name&&(ut.name=it.name),assignExtrasToUserData(ut,it),_e.associations.set(ut,{materials:_}),it.extensions&&addUnknownExtensionsToUserData(rt,ut,it),ut})}createUniqueName(_){const _e=PropertyBinding.sanitizeNodeName(_||"");return _e in this.nodeNamesUsed?_e+"_"+ ++this.nodeNamesUsed[_e]:(this.nodeNamesUsed[_e]=0,_e)}loadGeometries(_){const _e=this,nt=this.extensions,rt=this.primitiveCache;function it(st){return nt[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(st,_e).then(function(at){return addPrimitiveAttributes(at,st,_e)})}const ot=[];for(let st=0,at=_.length;st<at;st++){const lt=_[st],ct=createPrimitiveKey(lt),ut=rt[ct];if(ut)ot.push(ut.promise);else{let ht;lt.extensions&&lt.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?ht=it(lt):ht=addPrimitiveAttributes(new BufferGeometry,lt,_e),rt[ct]={primitive:lt,promise:ht},ot.push(ht)}}return Promise.all(ot)}loadMesh(_){const _e=this,nt=this.json,rt=this.extensions,it=nt.meshes[_],ot=it.primitives,st=[];for(let at=0,lt=ot.length;at<lt;at++){const ct=ot[at].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",ot[at].material);st.push(ct)}return st.push(_e.loadGeometries(ot)),Promise.all(st).then(function(at){const lt=at.slice(0,at.length-1),ct=at[at.length-1],ut=[];for(let pt=0,gt=ct.length;pt<gt;pt++){const yt=ct[pt],vt=ot[pt];let mt;const _t=lt[pt];if(vt.mode===WEBGL_CONSTANTS.TRIANGLES||vt.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||vt.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||vt.mode===void 0)mt=it.isSkinnedMesh===!0?new SkinnedMesh(yt,_t):new Mesh(yt,_t),mt.isSkinnedMesh===!0&&mt.normalizeSkinWeights(),vt.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?mt.geometry=toTrianglesDrawMode(mt.geometry,TriangleStripDrawMode):vt.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(mt.geometry=toTrianglesDrawMode(mt.geometry,TriangleFanDrawMode));else if(vt.mode===WEBGL_CONSTANTS.LINES)mt=new LineSegments(yt,_t);else if(vt.mode===WEBGL_CONSTANTS.LINE_STRIP)mt=new Line(yt,_t);else if(vt.mode===WEBGL_CONSTANTS.LINE_LOOP)mt=new LineLoop(yt,_t);else if(vt.mode===WEBGL_CONSTANTS.POINTS)mt=new Points(yt,_t);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+vt.mode);Object.keys(mt.geometry.morphAttributes).length>0&&updateMorphTargets(mt,it),mt.name=_e.createUniqueName(it.name||"mesh_"+_),assignExtrasToUserData(mt,it),vt.extensions&&addUnknownExtensionsToUserData(rt,mt,vt),_e.assignFinalMaterial(mt),ut.push(mt)}for(let pt=0,gt=ut.length;pt<gt;pt++)_e.associations.set(ut[pt],{meshes:_,primitives:pt});if(ut.length===1)return it.extensions&&addUnknownExtensionsToUserData(rt,ut[0],it),ut[0];const ht=new Group;it.extensions&&addUnknownExtensionsToUserData(rt,ht,it),_e.associations.set(ht,{meshes:_});for(let pt=0,gt=ut.length;pt<gt;pt++)ht.add(ut[pt]);return ht})}loadCamera(_){let _e;const nt=this.json.cameras[_],rt=nt[nt.type];if(!rt){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return nt.type==="perspective"?_e=new PerspectiveCamera(MathUtils.radToDeg(rt.yfov),rt.aspectRatio||1,rt.znear||1,rt.zfar||2e6):nt.type==="orthographic"&&(_e=new OrthographicCamera(-rt.xmag,rt.xmag,rt.ymag,-rt.ymag,rt.znear,rt.zfar)),nt.name&&(_e.name=this.createUniqueName(nt.name)),assignExtrasToUserData(_e,nt),Promise.resolve(_e)}loadSkin(_){const _e=this.json.skins[_],nt=[];for(let rt=0,it=_e.joints.length;rt<it;rt++)nt.push(this._loadNodeShallow(_e.joints[rt]));return _e.inverseBindMatrices!==void 0?nt.push(this.getDependency("accessor",_e.inverseBindMatrices)):nt.push(null),Promise.all(nt).then(function(rt){const it=rt.pop(),ot=rt,st=[],at=[];for(let lt=0,ct=ot.length;lt<ct;lt++){const ut=ot[lt];if(ut){st.push(ut);const ht=new Matrix4;it!==null&&ht.fromArray(it.array,lt*16),at.push(ht)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',_e.joints[lt])}return new Skeleton(st,at)})}loadAnimation(_){const nt=this.json.animations[_],rt=nt.name?nt.name:"animation_"+_,it=[],ot=[],st=[],at=[],lt=[];for(let ct=0,ut=nt.channels.length;ct<ut;ct++){const ht=nt.channels[ct],pt=nt.samplers[ht.sampler],gt=ht.target,yt=gt.node,vt=nt.parameters!==void 0?nt.parameters[pt.input]:pt.input,mt=nt.parameters!==void 0?nt.parameters[pt.output]:pt.output;gt.node!==void 0&&(it.push(this.getDependency("node",yt)),ot.push(this.getDependency("accessor",vt)),st.push(this.getDependency("accessor",mt)),at.push(pt),lt.push(gt))}return Promise.all([Promise.all(it),Promise.all(ot),Promise.all(st),Promise.all(at),Promise.all(lt)]).then(function(ct){const ut=ct[0],ht=ct[1],pt=ct[2],gt=ct[3],yt=ct[4],vt=[];for(let mt=0,_t=ut.length;mt<_t;mt++){const xt=ut[mt],St=ht[mt],Tt=pt[mt],Mt=gt[mt],bt=yt[mt];if(xt===void 0)continue;xt.updateMatrix();let Pt;switch(PATH_PROPERTIES[bt.path]){case PATH_PROPERTIES.weights:Pt=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:Pt=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:default:Pt=VectorKeyframeTrack;break}const wt=xt.name?xt.name:xt.uuid,Bt=Mt.interpolation!==void 0?INTERPOLATION[Mt.interpolation]:InterpolateLinear,Ot=[];PATH_PROPERTIES[bt.path]===PATH_PROPERTIES.weights?xt.traverse(function(Nt){Nt.morphTargetInfluences&&Ot.push(Nt.name?Nt.name:Nt.uuid)}):Ot.push(wt);let Ut=Tt.array;if(Tt.normalized){const Nt=getNormalizedComponentScale(Ut.constructor),zt=new Float32Array(Ut.length);for(let jt=0,Yt=Ut.length;jt<Yt;jt++)zt[jt]=Ut[jt]*Nt;Ut=zt}for(let Nt=0,zt=Ot.length;Nt<zt;Nt++){const jt=new Pt(Ot[Nt]+"."+PATH_PROPERTIES[bt.path],St.array,Ut,Bt);Mt.interpolation==="CUBICSPLINE"&&(jt.createInterpolant=function(qt){const Gt=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new Gt(this.times,this.values,this.getValueSize()/3,qt)},jt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),vt.push(jt)}}return new AnimationClip(rt,void 0,vt)})}createNodeMesh(_){const _e=this.json,nt=this,rt=_e.nodes[_];return rt.mesh===void 0?null:nt.getDependency("mesh",rt.mesh).then(function(it){const ot=nt._getNodeRef(nt.meshCache,rt.mesh,it);return rt.weights!==void 0&&ot.traverse(function(st){if(st.isMesh)for(let at=0,lt=rt.weights.length;at<lt;at++)st.morphTargetInfluences[at]=rt.weights[at]}),ot})}loadNode(_){const _e=this.json,nt=this,rt=_e.nodes[_],it=nt._loadNodeShallow(_),ot=[],st=rt.children||[];for(let lt=0,ct=st.length;lt<ct;lt++)ot.push(nt.getDependency("node",st[lt]));const at=rt.skin===void 0?Promise.resolve(null):nt.getDependency("skin",rt.skin);return Promise.all([it,Promise.all(ot),at]).then(function(lt){const ct=lt[0],ut=lt[1],ht=lt[2];ht!==null&&ct.traverse(function(pt){pt.isSkinnedMesh&&pt.bind(ht,_identityMatrix)});for(let pt=0,gt=ut.length;pt<gt;pt++)ct.add(ut[pt]);return ct})}_loadNodeShallow(_){const _e=this.json,nt=this.extensions,rt=this;if(this.nodeCache[_]!==void 0)return this.nodeCache[_];const it=_e.nodes[_],ot=it.name?rt.createUniqueName(it.name):"",st=[],at=rt._invokeOne(function(lt){return lt.createNodeMesh&&lt.createNodeMesh(_)});return at&&st.push(at),it.camera!==void 0&&st.push(rt.getDependency("camera",it.camera).then(function(lt){return rt._getNodeRef(rt.cameraCache,it.camera,lt)})),rt._invokeAll(function(lt){return lt.createNodeAttachment&&lt.createNodeAttachment(_)}).forEach(function(lt){st.push(lt)}),this.nodeCache[_]=Promise.all(st).then(function(lt){let ct;if(it.isBone===!0?ct=new Bone:lt.length>1?ct=new Group:lt.length===1?ct=lt[0]:ct=new Object3D,ct!==lt[0])for(let ut=0,ht=lt.length;ut<ht;ut++)ct.add(lt[ut]);if(it.name&&(ct.userData.name=it.name,ct.name=ot),assignExtrasToUserData(ct,it),it.extensions&&addUnknownExtensionsToUserData(nt,ct,it),it.matrix!==void 0){const ut=new Matrix4;ut.fromArray(it.matrix),ct.applyMatrix4(ut)}else it.translation!==void 0&&ct.position.fromArray(it.translation),it.rotation!==void 0&&ct.quaternion.fromArray(it.rotation),it.scale!==void 0&&ct.scale.fromArray(it.scale);return rt.associations.has(ct)||rt.associations.set(ct,{}),rt.associations.get(ct).nodes=_,ct}),this.nodeCache[_]}loadScene(_){const _e=this.extensions,nt=this.json.scenes[_],rt=this,it=new Group;nt.name&&(it.name=rt.createUniqueName(nt.name)),assignExtrasToUserData(it,nt),nt.extensions&&addUnknownExtensionsToUserData(_e,it,nt);const ot=nt.nodes||[],st=[];for(let at=0,lt=ot.length;at<lt;at++)st.push(rt.getDependency("node",ot[at]));return Promise.all(st).then(function(at){for(let ct=0,ut=at.length;ct<ut;ct++)it.add(at[ct]);const lt=ct=>{const ut=new Map;for(const[ht,pt]of rt.associations)(ht instanceof Material||ht instanceof Texture)&&ut.set(ht,pt);return ct.traverse(ht=>{const pt=rt.associations.get(ht);pt!=null&&ut.set(ht,pt)}),ut};return rt.associations=lt(it),it})}}function computeBounds(tt,_,_e){const nt=_.attributes,rt=new Box3;if(nt.POSITION!==void 0){const st=_e.json.accessors[nt.POSITION],at=st.min,lt=st.max;if(at!==void 0&&lt!==void 0){if(rt.set(new Vector3(at[0],at[1],at[2]),new Vector3(lt[0],lt[1],lt[2])),st.normalized){const ct=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[st.componentType]);rt.min.multiplyScalar(ct),rt.max.multiplyScalar(ct)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const it=_.targets;if(it!==void 0){const st=new Vector3,at=new Vector3;for(let lt=0,ct=it.length;lt<ct;lt++){const ut=it[lt];if(ut.POSITION!==void 0){const ht=_e.json.accessors[ut.POSITION],pt=ht.min,gt=ht.max;if(pt!==void 0&&gt!==void 0){if(at.setX(Math.max(Math.abs(pt[0]),Math.abs(gt[0]))),at.setY(Math.max(Math.abs(pt[1]),Math.abs(gt[1]))),at.setZ(Math.max(Math.abs(pt[2]),Math.abs(gt[2]))),ht.normalized){const yt=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[ht.componentType]);at.multiplyScalar(yt)}st.max(at)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}rt.expandByVector(st)}tt.boundingBox=rt;const ot=new Sphere;rt.getCenter(ot.center),ot.radius=rt.min.distanceTo(rt.max)/2,tt.boundingSphere=ot}function addPrimitiveAttributes(tt,_,_e){const nt=_.attributes,rt=[];function it(ot,st){return _e.getDependency("accessor",ot).then(function(at){tt.setAttribute(st,at)})}for(const ot in nt){const st=ATTRIBUTES[ot]||ot.toLowerCase();st in tt.attributes||rt.push(it(nt[ot],st))}if(_.indices!==void 0&&!tt.index){const ot=_e.getDependency("accessor",_.indices).then(function(st){tt.setIndex(st)});rt.push(ot)}return assignExtrasToUserData(tt,_),computeBounds(tt,_,_e),Promise.all(rt).then(function(){return _.targets!==void 0?addMorphTargets(tt,_.targets,_e):tt})}const HorizontalBlurShader={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},VerticalBlurShader={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class RGBELoader extends DataTextureLoader{constructor(_){super(_),this.type=HalfFloatType}parse(_){const st=function(xt,St){switch(xt){case 1:console.error("THREE.RGBELoader Read Error: "+(St||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(St||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(St||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(St||""))}return-1},ut=`
`,ht=function(xt,St,Tt){St=St||1024;let bt=xt.pos,Pt=-1,wt=0,Bt="",Ot=String.fromCharCode.apply(null,new Uint16Array(xt.subarray(bt,bt+128)));for(;0>(Pt=Ot.indexOf(ut))&&wt<St&&bt<xt.byteLength;)Bt+=Ot,wt+=Ot.length,bt+=128,Ot+=String.fromCharCode.apply(null,new Uint16Array(xt.subarray(bt,bt+128)));return-1<Pt?(Tt!==!1&&(xt.pos+=wt+Pt+1),Bt+Ot.slice(0,Pt)):!1},pt=function(xt){const St=/^#\?(\S+)/,Tt=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Mt=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,bt=/^\s*FORMAT=(\S+)\s*$/,Pt=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,wt={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Bt,Ot;if(xt.pos>=xt.byteLength||!(Bt=ht(xt)))return st(1,"no header found");if(!(Ot=Bt.match(St)))return st(3,"bad initial token");for(wt.valid|=1,wt.programtype=Ot[1],wt.string+=Bt+`
`;Bt=ht(xt),Bt!==!1;){if(wt.string+=Bt+`
`,Bt.charAt(0)==="#"){wt.comments+=Bt+`
`;continue}if((Ot=Bt.match(Tt))&&(wt.gamma=parseFloat(Ot[1])),(Ot=Bt.match(Mt))&&(wt.exposure=parseFloat(Ot[1])),(Ot=Bt.match(bt))&&(wt.valid|=2,wt.format=Ot[1]),(Ot=Bt.match(Pt))&&(wt.valid|=4,wt.height=parseInt(Ot[1],10),wt.width=parseInt(Ot[2],10)),wt.valid&2&&wt.valid&4)break}return wt.valid&2?wt.valid&4?wt:st(3,"missing image size specifier"):st(3,"missing format specifier")},gt=function(xt,St,Tt){const Mt=St;if(Mt<8||Mt>32767||xt[0]!==2||xt[1]!==2||xt[2]&128)return new Uint8Array(xt);if(Mt!==(xt[2]<<8|xt[3]))return st(3,"wrong scanline width");const bt=new Uint8Array(4*St*Tt);if(!bt.length)return st(4,"unable to allocate buffer space");let Pt=0,wt=0;const Bt=4*Mt,Ot=new Uint8Array(4),Ut=new Uint8Array(Bt);let Nt=Tt;for(;Nt>0&&wt<xt.byteLength;){if(wt+4>xt.byteLength)return st(1);if(Ot[0]=xt[wt++],Ot[1]=xt[wt++],Ot[2]=xt[wt++],Ot[3]=xt[wt++],Ot[0]!=2||Ot[1]!=2||(Ot[2]<<8|Ot[3])!=Mt)return st(3,"bad rgbe scanline format");let zt=0,jt;for(;zt<Bt&&wt<xt.byteLength;){jt=xt[wt++];const qt=jt>128;if(qt&&(jt-=128),jt===0||zt+jt>Bt)return st(3,"bad scanline data");if(qt){const Gt=xt[wt++];for(let Xt=0;Xt<jt;Xt++)Ut[zt++]=Gt}else Ut.set(xt.subarray(wt,wt+jt),zt),zt+=jt,wt+=jt}const Yt=Mt;for(let qt=0;qt<Yt;qt++){let Gt=0;bt[Pt]=Ut[qt+Gt],Gt+=Mt,bt[Pt+1]=Ut[qt+Gt],Gt+=Mt,bt[Pt+2]=Ut[qt+Gt],Gt+=Mt,bt[Pt+3]=Ut[qt+Gt],Pt+=4}Nt--}return bt},yt=function(xt,St,Tt,Mt){const bt=xt[St+3],Pt=Math.pow(2,bt-128)/255;Tt[Mt+0]=xt[St+0]*Pt,Tt[Mt+1]=xt[St+1]*Pt,Tt[Mt+2]=xt[St+2]*Pt,Tt[Mt+3]=1},vt=function(xt,St,Tt,Mt){const bt=xt[St+3],Pt=Math.pow(2,bt-128)/255;Tt[Mt+0]=DataUtils.toHalfFloat(Math.min(xt[St+0]*Pt,65504)),Tt[Mt+1]=DataUtils.toHalfFloat(Math.min(xt[St+1]*Pt,65504)),Tt[Mt+2]=DataUtils.toHalfFloat(Math.min(xt[St+2]*Pt,65504)),Tt[Mt+3]=DataUtils.toHalfFloat(1)},mt=new Uint8Array(_);mt.pos=0;const _t=pt(mt);if(_t!==-1){const xt=_t.width,St=_t.height,Tt=gt(mt.subarray(mt.pos),xt,St);if(Tt!==-1){let Mt,bt,Pt;switch(this.type){case FloatType:Pt=Tt.length/4;const wt=new Float32Array(Pt*4);for(let Ot=0;Ot<Pt;Ot++)yt(Tt,Ot*4,wt,Ot*4);Mt=wt,bt=FloatType;break;case HalfFloatType:Pt=Tt.length/4;const Bt=new Uint16Array(Pt*4);for(let Ot=0;Ot<Pt;Ot++)vt(Tt,Ot*4,Bt,Ot*4);Mt=Bt,bt=HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:xt,height:St,data:Mt,header:_t.string,gamma:_t.gamma,exposure:_t.exposure,type:bt}}}return null}setDataType(_){return this.type=_,this}load(_,_e,nt,rt){function it(ot,st){switch(ot.type){case FloatType:case HalfFloatType:"colorSpace"in ot?ot.colorSpace="srgb-linear":ot.encoding=3e3,ot.minFilter=LinearFilter,ot.magFilter=LinearFilter,ot.generateMipmaps=!1,ot.flipY=!0;break}_e&&_e(ot,st)}return super.load(_,it,nt,rt)}}const hasColorSpace="colorSpace"in new Texture;class EXRLoader extends DataTextureLoader{constructor(_){super(_),this.type=HalfFloatType}parse(_){const wt=Math.pow(2.7182818,2.2);function Bt(It,Rt){for(var kt=0,Jt=0;Jt<65536;++Jt)(Jt==0||It[Jt>>3]&1<<(Jt&7))&&(Rt[kt++]=Jt);for(var Kt=kt-1;kt<65536;)Rt[kt++]=0;return Kt}function Ot(It){for(var Rt=0;Rt<16384;Rt++)It[Rt]={},It[Rt].len=0,It[Rt].lit=0,It[Rt].p=null}const Ut={l:0,c:0,lc:0};function Nt(It,Rt,kt,Jt,Kt){for(;kt<It;)Rt=Rt<<8|Fn(Jt,Kt),kt+=8;kt-=It,Ut.l=Rt>>kt&(1<<It)-1,Ut.c=Rt,Ut.lc=kt}const zt=new Array(59);function jt(It){for(var Rt=0;Rt<=58;++Rt)zt[Rt]=0;for(var Rt=0;Rt<65537;++Rt)zt[It[Rt]]+=1;for(var kt=0,Rt=58;Rt>0;--Rt){var Jt=kt+zt[Rt]>>1;zt[Rt]=kt,kt=Jt}for(var Rt=0;Rt<65537;++Rt){var Kt=It[Rt];Kt>0&&(It[Rt]=Kt|zt[Kt]++<<6)}}function Yt(It,Rt,kt,Jt,Kt,Qt,_n){for(var An=kt,Rn=0,Pn=0;Kt<=Qt;Kt++){if(An.value-kt.value>Jt)return!1;Nt(6,Rn,Pn,It,An);var Dn=Ut.l;if(Rn=Ut.c,Pn=Ut.lc,_n[Kt]=Dn,Dn==63){if(An.value-kt.value>Jt)throw"Something wrong with hufUnpackEncTable";Nt(8,Rn,Pn,It,An);var cn=Ut.l+6;if(Rn=Ut.c,Pn=Ut.lc,Kt+cn>Qt+1)throw"Something wrong with hufUnpackEncTable";for(;cn--;)_n[Kt++]=0;Kt--}else if(Dn>=59){var cn=Dn-59+2;if(Kt+cn>Qt+1)throw"Something wrong with hufUnpackEncTable";for(;cn--;)_n[Kt++]=0;Kt--}}jt(_n)}function qt(It){return It&63}function Gt(It){return It>>6}function Xt(It,Rt,kt,Jt){for(;Rt<=kt;Rt++){var Kt=Gt(It[Rt]),Qt=qt(It[Rt]);if(Kt>>Qt)throw"Invalid table entry";if(Qt>14){var _n=Jt[Kt>>Qt-14];if(_n.len)throw"Invalid table entry";if(_n.lit++,_n.p){var An=_n.p;_n.p=new Array(_n.lit);for(var Rn=0;Rn<_n.lit-1;++Rn)_n.p[Rn]=An[Rn]}else _n.p=new Array(1);_n.p[_n.lit-1]=Rt}else if(Qt)for(var Pn=0,Rn=1<<14-Qt;Rn>0;Rn--){var _n=Jt[(Kt<<14-Qt)+Pn];if(_n.len||_n.p)throw"Invalid table entry";_n.len=Qt,_n.lit=Rt,Pn++}}return!0}const Vt={c:0,lc:0};function Wt(It,Rt,kt,Jt){It=It<<8|Fn(kt,Jt),Rt+=8,Vt.c=It,Vt.lc=Rt}const $t={c:0,lc:0};function nn(It,Rt,kt,Jt,Kt,Qt,_n,An,Rn,Pn){if(It==Rt){Jt<8&&(Wt(kt,Jt,Kt,_n),kt=Vt.c,Jt=Vt.lc),Jt-=8;var Dn=kt>>Jt,Dn=new Uint8Array([Dn])[0];if(Rn.value+Dn>Pn)return!1;for(var cn=An[Rn.value-1];Dn-- >0;)An[Rn.value++]=cn}else if(Rn.value<Pn)An[Rn.value++]=It;else return!1;$t.c=kt,$t.lc=Jt}function en(It){return It&65535}function sn(It){var Rt=en(It);return Rt>32767?Rt-65536:Rt}const rn={a:0,b:0};function an(It,Rt){var kt=sn(It),Jt=sn(Rt),Kt=Jt,Qt=kt+(Kt&1)+(Kt>>1),_n=Qt,An=Qt-Kt;rn.a=_n,rn.b=An}function dn(It,Rt){var kt=en(It),Jt=en(Rt),Kt=kt-(Jt>>1)&65535,Qt=Jt+Kt-32768&65535;rn.a=Qt,rn.b=Kt}function Bn(It,Rt,kt,Jt,Kt,Qt,_n){for(var An=_n<16384,Rn=kt>Kt?Kt:kt,Pn=1,Dn;Pn<=Rn;)Pn<<=1;for(Pn>>=1,Dn=Pn,Pn>>=1;Pn>=1;){for(var cn=0,Qn=cn+Qt*(Kt-Dn),Xn=Qt*Pn,Jn=Qt*Dn,ar=Jt*Pn,ur=Jt*Dn,or,qn,fr,rr;cn<=Qn;cn+=Jn){for(var gr=cn,Ir=cn+Jt*(kt-Dn);gr<=Ir;gr+=ur){var hr=gr+ar,Rr=gr+Xn,Pr=Rr+ar;An?(an(It[gr+Rt],It[Rr+Rt]),or=rn.a,fr=rn.b,an(It[hr+Rt],It[Pr+Rt]),qn=rn.a,rr=rn.b,an(or,qn),It[gr+Rt]=rn.a,It[hr+Rt]=rn.b,an(fr,rr),It[Rr+Rt]=rn.a,It[Pr+Rt]=rn.b):(dn(It[gr+Rt],It[Rr+Rt]),or=rn.a,fr=rn.b,dn(It[hr+Rt],It[Pr+Rt]),qn=rn.a,rr=rn.b,dn(or,qn),It[gr+Rt]=rn.a,It[hr+Rt]=rn.b,dn(fr,rr),It[Rr+Rt]=rn.a,It[Pr+Rt]=rn.b)}if(kt&Pn){var Rr=gr+Xn;An?an(It[gr+Rt],It[Rr+Rt]):dn(It[gr+Rt],It[Rr+Rt]),or=rn.a,It[Rr+Rt]=rn.b,It[gr+Rt]=or}}if(Kt&Pn)for(var gr=cn,Ir=cn+Jt*(kt-Dn);gr<=Ir;gr+=ur){var hr=gr+ar;An?an(It[gr+Rt],It[hr+Rt]):dn(It[gr+Rt],It[hr+Rt]),or=rn.a,It[hr+Rt]=rn.b,It[gr+Rt]=or}Dn=Pn,Pn>>=1}return cn}function Nn(It,Rt,kt,Jt,Kt,Qt,_n,An,Rn,Pn){for(var Dn=0,cn=0,Qn=An,Xn=Math.trunc(Kt.value+(Qt+7)/8);Kt.value<Xn;)for(Wt(Dn,cn,kt,Kt),Dn=Vt.c,cn=Vt.lc;cn>=14;){var Jn=Dn>>cn-14&16383,ar=Rt[Jn];if(ar.len)cn-=ar.len,nn(ar.lit,_n,Dn,cn,kt,Jt,Kt,Rn,Pn,Qn),Dn=$t.c,cn=$t.lc;else{if(!ar.p)throw"hufDecode issues";var ur;for(ur=0;ur<ar.lit;ur++){for(var or=qt(It[ar.p[ur]]);cn<or&&Kt.value<Xn;)Wt(Dn,cn,kt,Kt),Dn=Vt.c,cn=Vt.lc;if(cn>=or&&Gt(It[ar.p[ur]])==(Dn>>cn-or&(1<<or)-1)){cn-=or,nn(ar.p[ur],_n,Dn,cn,kt,Jt,Kt,Rn,Pn,Qn),Dn=$t.c,cn=$t.lc;break}}if(ur==ar.lit)throw"hufDecode issues"}}var qn=8-Qt&7;for(Dn>>=qn,cn-=qn;cn>0;){var ar=Rt[Dn<<14-cn&16383];if(ar.len)cn-=ar.len,nn(ar.lit,_n,Dn,cn,kt,Jt,Kt,Rn,Pn,Qn),Dn=$t.c,cn=$t.lc;else throw"hufDecode issues"}return!0}function gn(It,Rt,kt,Jt,Kt,Qt){var _n={value:0},An=kt.value,Rn=Un(Rt,kt),Pn=Un(Rt,kt);kt.value+=4;var Dn=Un(Rt,kt);if(kt.value+=4,Rn<0||Rn>=65537||Pn<0||Pn>=65537)throw"Something wrong with HUF_ENCSIZE";var cn=new Array(65537),Qn=new Array(16384);Ot(Qn);var Xn=Jt-(kt.value-An);if(Yt(It,Rt,kt,Xn,Rn,Pn,cn),Dn>8*(Jt-(kt.value-An)))throw"Something wrong with hufUncompress";Xt(cn,Rn,Pn,Qn),Nn(cn,Qn,It,Rt,kt,Dn,Pn,Qt,Kt,_n)}function Ht(It,Rt,kt){for(var Jt=0;Jt<kt;++Jt)Rt[Jt]=It[Rt[Jt]]}function xn(It){for(var Rt=1;Rt<It.length;Rt++){var kt=It[Rt-1]+It[Rt]-128;It[Rt]=kt}}function hn(It,Rt){for(var kt=0,Jt=Math.floor((It.length+1)/2),Kt=0,Qt=It.length-1;!(Kt>Qt||(Rt[Kt++]=It[kt++],Kt>Qt));)Rt[Kt++]=It[Jt++]}function vn(It){for(var Rt=It.byteLength,kt=new Array,Jt=0,Kt=new DataView(It);Rt>0;){var Qt=Kt.getInt8(Jt++);if(Qt<0){var _n=-Qt;Rt-=_n+1;for(var An=0;An<_n;An++)kt.push(Kt.getUint8(Jt++))}else{var _n=Qt;Rt-=2;for(var Rn=Kt.getUint8(Jt++),An=0;An<_n+1;An++)kt.push(Rn)}}return kt}function pn(It,Rt,kt,Jt,Kt,Qt){var hr=new DataView(Qt.buffer),_n=kt[It.idx[0]].width,An=kt[It.idx[0]].height,Rn=3,Pn=Math.floor(_n/8),Dn=Math.ceil(_n/8),cn=Math.ceil(An/8),Qn=_n-(Dn-1)*8,Xn=An-(cn-1)*8,Jn={value:0},ar=new Array(Rn),ur=new Array(Rn),or=new Array(Rn),qn=new Array(Rn),fr=new Array(Rn);for(let pr=0;pr<Rn;++pr)fr[pr]=Rt[It.idx[pr]],ar[pr]=pr<1?0:ar[pr-1]+Dn*cn,ur[pr]=new Float32Array(64),or[pr]=new Uint16Array(64),qn[pr]=new Uint16Array(Dn*64);for(let pr=0;pr<cn;++pr){var rr=8;pr==cn-1&&(rr=Xn);var gr=8;for(let br=0;br<Dn;++br){br==Dn-1&&(gr=Qn);for(let wr=0;wr<Rn;++wr)or[wr].fill(0),or[wr][0]=Kt[ar[wr]++],Hn(Jn,Jt,or[wr]),yn(or[wr],ur[wr]),Ln(ur[wr]);On(ur);for(let wr=0;wr<Rn;++wr)Sn(ur[wr],qn[wr],br*64)}let $r=0;for(let br=0;br<Rn;++br){const wr=kt[It.idx[br]].type;for(let kr=8*pr;kr<8*pr+rr;++kr){$r=fr[br][kr];for(let xo=0;xo<Pn;++xo){const Jr=xo*64+(kr&7)*8;hr.setUint16($r+0*2*wr,qn[br][Jr+0],!0),hr.setUint16($r+1*2*wr,qn[br][Jr+1],!0),hr.setUint16($r+2*2*wr,qn[br][Jr+2],!0),hr.setUint16($r+3*2*wr,qn[br][Jr+3],!0),hr.setUint16($r+4*2*wr,qn[br][Jr+4],!0),hr.setUint16($r+5*2*wr,qn[br][Jr+5],!0),hr.setUint16($r+6*2*wr,qn[br][Jr+6],!0),hr.setUint16($r+7*2*wr,qn[br][Jr+7],!0),$r+=8*2*wr}}if(Pn!=Dn)for(let kr=8*pr;kr<8*pr+rr;++kr){const xo=fr[br][kr]+8*Pn*2*wr,Jr=Pn*64+(kr&7)*8;for(let Mo=0;Mo<gr;++Mo)hr.setUint16(xo+Mo*2*wr,qn[br][Jr+Mo],!0)}}}for(var Ir=new Uint16Array(_n),hr=new DataView(Qt.buffer),Rr=0;Rr<Rn;++Rr){kt[It.idx[Rr]].decoded=!0;var Pr=kt[It.idx[Rr]].type;if(kt[Rr].type==2)for(var Lr=0;Lr<An;++Lr){const pr=fr[Rr][Lr];for(var Hr=0;Hr<_n;++Hr)Ir[Hr]=hr.getUint16(pr+Hr*2*Pr,!0);for(var Hr=0;Hr<_n;++Hr)hr.setFloat32(pr+Hr*2*Pr,fn(Ir[Hr]),!0)}}}function Hn(It,Rt,kt){for(var Jt,Kt=1;Kt<64;)Jt=Rt[It.value],Jt==65280?Kt=64:Jt>>8==255?Kt+=Jt&255:(kt[Kt]=Jt,Kt++),It.value++}function yn(It,Rt){Rt[0]=fn(It[0]),Rt[1]=fn(It[1]),Rt[2]=fn(It[5]),Rt[3]=fn(It[6]),Rt[4]=fn(It[14]),Rt[5]=fn(It[15]),Rt[6]=fn(It[27]),Rt[7]=fn(It[28]),Rt[8]=fn(It[2]),Rt[9]=fn(It[4]),Rt[10]=fn(It[7]),Rt[11]=fn(It[13]),Rt[12]=fn(It[16]),Rt[13]=fn(It[26]),Rt[14]=fn(It[29]),Rt[15]=fn(It[42]),Rt[16]=fn(It[3]),Rt[17]=fn(It[8]),Rt[18]=fn(It[12]),Rt[19]=fn(It[17]),Rt[20]=fn(It[25]),Rt[21]=fn(It[30]),Rt[22]=fn(It[41]),Rt[23]=fn(It[43]),Rt[24]=fn(It[9]),Rt[25]=fn(It[11]),Rt[26]=fn(It[18]),Rt[27]=fn(It[24]),Rt[28]=fn(It[31]),Rt[29]=fn(It[40]),Rt[30]=fn(It[44]),Rt[31]=fn(It[53]),Rt[32]=fn(It[10]),Rt[33]=fn(It[19]),Rt[34]=fn(It[23]),Rt[35]=fn(It[32]),Rt[36]=fn(It[39]),Rt[37]=fn(It[45]),Rt[38]=fn(It[52]),Rt[39]=fn(It[54]),Rt[40]=fn(It[20]),Rt[41]=fn(It[22]),Rt[42]=fn(It[33]),Rt[43]=fn(It[38]),Rt[44]=fn(It[46]),Rt[45]=fn(It[51]),Rt[46]=fn(It[55]),Rt[47]=fn(It[60]),Rt[48]=fn(It[21]),Rt[49]=fn(It[34]),Rt[50]=fn(It[37]),Rt[51]=fn(It[47]),Rt[52]=fn(It[50]),Rt[53]=fn(It[56]),Rt[54]=fn(It[59]),Rt[55]=fn(It[61]),Rt[56]=fn(It[35]),Rt[57]=fn(It[36]),Rt[58]=fn(It[48]),Rt[59]=fn(It[49]),Rt[60]=fn(It[57]),Rt[61]=fn(It[58]),Rt[62]=fn(It[62]),Rt[63]=fn(It[63])}function Ln(It){const Rt=.5*Math.cos(.7853975),kt=.5*Math.cos(3.14159/16),Jt=.5*Math.cos(3.14159/8),Kt=.5*Math.cos(3*3.14159/16),Qt=.5*Math.cos(5*3.14159/16),_n=.5*Math.cos(3*3.14159/8),An=.5*Math.cos(7*3.14159/16);for(var Rn=new Array(4),Pn=new Array(4),Dn=new Array(4),cn=new Array(4),Qn=0;Qn<8;++Qn){var Xn=Qn*8;Rn[0]=Jt*It[Xn+2],Rn[1]=_n*It[Xn+2],Rn[2]=Jt*It[Xn+6],Rn[3]=_n*It[Xn+6],Pn[0]=kt*It[Xn+1]+Kt*It[Xn+3]+Qt*It[Xn+5]+An*It[Xn+7],Pn[1]=Kt*It[Xn+1]-An*It[Xn+3]-kt*It[Xn+5]-Qt*It[Xn+7],Pn[2]=Qt*It[Xn+1]-kt*It[Xn+3]+An*It[Xn+5]+Kt*It[Xn+7],Pn[3]=An*It[Xn+1]-Qt*It[Xn+3]+Kt*It[Xn+5]-kt*It[Xn+7],Dn[0]=Rt*(It[Xn+0]+It[Xn+4]),Dn[3]=Rt*(It[Xn+0]-It[Xn+4]),Dn[1]=Rn[0]+Rn[3],Dn[2]=Rn[1]-Rn[2],cn[0]=Dn[0]+Dn[1],cn[1]=Dn[3]+Dn[2],cn[2]=Dn[3]-Dn[2],cn[3]=Dn[0]-Dn[1],It[Xn+0]=cn[0]+Pn[0],It[Xn+1]=cn[1]+Pn[1],It[Xn+2]=cn[2]+Pn[2],It[Xn+3]=cn[3]+Pn[3],It[Xn+4]=cn[3]-Pn[3],It[Xn+5]=cn[2]-Pn[2],It[Xn+6]=cn[1]-Pn[1],It[Xn+7]=cn[0]-Pn[0]}for(var Jn=0;Jn<8;++Jn)Rn[0]=Jt*It[16+Jn],Rn[1]=_n*It[16+Jn],Rn[2]=Jt*It[48+Jn],Rn[3]=_n*It[48+Jn],Pn[0]=kt*It[8+Jn]+Kt*It[24+Jn]+Qt*It[40+Jn]+An*It[56+Jn],Pn[1]=Kt*It[8+Jn]-An*It[24+Jn]-kt*It[40+Jn]-Qt*It[56+Jn],Pn[2]=Qt*It[8+Jn]-kt*It[24+Jn]+An*It[40+Jn]+Kt*It[56+Jn],Pn[3]=An*It[8+Jn]-Qt*It[24+Jn]+Kt*It[40+Jn]-kt*It[56+Jn],Dn[0]=Rt*(It[Jn]+It[32+Jn]),Dn[3]=Rt*(It[Jn]-It[32+Jn]),Dn[1]=Rn[0]+Rn[3],Dn[2]=Rn[1]-Rn[2],cn[0]=Dn[0]+Dn[1],cn[1]=Dn[3]+Dn[2],cn[2]=Dn[3]-Dn[2],cn[3]=Dn[0]-Dn[1],It[0+Jn]=cn[0]+Pn[0],It[8+Jn]=cn[1]+Pn[1],It[16+Jn]=cn[2]+Pn[2],It[24+Jn]=cn[3]+Pn[3],It[32+Jn]=cn[3]-Pn[3],It[40+Jn]=cn[2]-Pn[2],It[48+Jn]=cn[1]-Pn[1],It[56+Jn]=cn[0]-Pn[0]}function On(It){for(var Rt=0;Rt<64;++Rt){var kt=It[0][Rt],Jt=It[1][Rt],Kt=It[2][Rt];It[0][Rt]=kt+1.5747*Kt,It[1][Rt]=kt-.1873*Jt-.4682*Kt,It[2][Rt]=kt+1.8556*Jt}}function Sn(It,Rt,kt){for(var Jt=0;Jt<64;++Jt)Rt[kt+Jt]=DataUtils.toHalfFloat(jn(It[Jt]))}function jn(It){return It<=1?Math.sign(It)*Math.pow(Math.abs(It),2.2):Math.sign(It)*Math.pow(wt,Math.abs(It)-1)}function Ft(It){return new DataView(It.array.buffer,It.offset.value,It.size)}function Dt(It){var Rt=It.viewer.buffer.slice(It.offset.value,It.offset.value+It.size),kt=new Uint8Array(vn(Rt)),Jt=new Uint8Array(kt.length);return xn(kt),hn(kt,Jt),new DataView(Jt.buffer)}function on(It){var Rt=It.array.slice(It.offset.value,It.offset.value+It.size),kt=unzlibSync$1(Rt),Jt=new Uint8Array(kt.length);return xn(kt),hn(kt,Jt),new DataView(Jt.buffer)}function bn(It){for(var Rt=It.viewer,kt={value:It.offset.value},Jt=new Uint16Array(It.width*It.scanlineBlockSize*(It.channels*It.type)),Kt=new Uint8Array(8192),Qt=0,_n=new Array(It.channels),An=0;An<It.channels;An++)_n[An]={},_n[An].start=Qt,_n[An].end=_n[An].start,_n[An].nx=It.width,_n[An].ny=It.lines,_n[An].size=It.type,Qt+=_n[An].nx*_n[An].ny*_n[An].size;var Rn=mn(Rt,kt),Pn=mn(Rt,kt);if(Pn>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Rn<=Pn)for(var An=0;An<Pn-Rn+1;An++)Kt[An+Rn]=kn(Rt,kt);var Dn=new Uint16Array(65536),cn=Bt(Kt,Dn),Qn=Un(Rt,kt);gn(It.array,Rt,kt,Qn,Jt,Qt);for(var An=0;An<It.channels;++An)for(var Xn=_n[An],Jn=0;Jn<_n[An].size;++Jn)Bn(Jt,Xn.start+Jn,Xn.nx,Xn.size,Xn.ny,Xn.nx*Xn.size,cn);Ht(Dn,Jt,Qt);for(var ar=0,ur=new Uint8Array(Jt.buffer.byteLength),or=0;or<It.lines;or++)for(var qn=0;qn<It.channels;qn++){var Xn=_n[qn],fr=Xn.nx*Xn.size,rr=new Uint8Array(Jt.buffer,Xn.end*2,fr*2);ur.set(rr,ar),ar+=fr*2,Xn.end+=fr}return new DataView(ur.buffer)}function Mn(It){var Rt=It.array.slice(It.offset.value,It.offset.value+It.size),kt=unzlibSync$1(Rt);const Jt=It.lines*It.channels*It.width,Kt=It.type==1?new Uint16Array(Jt):new Uint32Array(Jt);let Qt=0,_n=0;const An=new Array(4);for(let Rn=0;Rn<It.lines;Rn++)for(let Pn=0;Pn<It.channels;Pn++){let Dn=0;switch(It.type){case 1:An[0]=Qt,An[1]=An[0]+It.width,Qt=An[1]+It.width;for(let cn=0;cn<It.width;++cn){const Qn=kt[An[0]++]<<8|kt[An[1]++];Dn+=Qn,Kt[_n]=Dn,_n++}break;case 2:An[0]=Qt,An[1]=An[0]+It.width,An[2]=An[1]+It.width,Qt=An[2]+It.width;for(let cn=0;cn<It.width;++cn){const Qn=kt[An[0]++]<<24|kt[An[1]++]<<16|kt[An[2]++]<<8;Dn+=Qn,Kt[_n]=Dn,_n++}break}}return new DataView(Kt.buffer)}function wn(It){var Rt=It.viewer,kt={value:It.offset.value},Jt=new Uint8Array(It.width*It.lines*(It.channels*It.type*2)),Kt={version:Yn(Rt,kt),unknownUncompressedSize:Yn(Rt,kt),unknownCompressedSize:Yn(Rt,kt),acCompressedSize:Yn(Rt,kt),dcCompressedSize:Yn(Rt,kt),rleCompressedSize:Yn(Rt,kt),rleUncompressedSize:Yn(Rt,kt),rleRawSize:Yn(Rt,kt),totalAcUncompressedCount:Yn(Rt,kt),totalDcUncompressedCount:Yn(Rt,kt),acCompression:Yn(Rt,kt)};if(Kt.version<2)throw"EXRLoader.parse: "+Or.compression+" version "+Kt.version+" is unsupported";for(var Qt=new Array,_n=mn(Rt,kt)-2;_n>0;){var An=$n(Rt.buffer,kt),Rn=kn(Rt,kt),Pn=Rn>>2&3,Dn=(Rn>>4)-1,cn=new Int8Array([Dn])[0],Qn=kn(Rt,kt);Qt.push({name:An,index:cn,type:Qn,compression:Pn}),_n-=An.length+3}for(var Xn=Or.channels,Jn=new Array(It.channels),ar=0;ar<It.channels;++ar){var ur=Jn[ar]={},or=Xn[ar];ur.name=or.name,ur.compression=0,ur.decoded=!1,ur.type=or.pixelType,ur.pLinear=or.pLinear,ur.width=It.width,ur.height=It.lines}for(var qn={idx:new Array(3)},fr=0;fr<It.channels;++fr)for(var ur=Jn[fr],ar=0;ar<Qt.length;++ar){var rr=Qt[ar];ur.name==rr.name&&(ur.compression=rr.compression,rr.index>=0&&(qn.idx[rr.index]=fr),ur.offset=fr)}if(Kt.acCompressedSize>0)switch(Kt.acCompression){case 0:var hr=new Uint16Array(Kt.totalAcUncompressedCount);gn(It.array,Rt,kt,Kt.acCompressedSize,hr,Kt.totalAcUncompressedCount);break;case 1:var gr=It.array.slice(kt.value,kt.value+Kt.totalAcUncompressedCount),Ir=unzlibSync$1(gr),hr=new Uint16Array(Ir.buffer);kt.value+=Kt.totalAcUncompressedCount;break}if(Kt.dcCompressedSize>0){var Rr={array:It.array,offset:kt,size:Kt.dcCompressedSize},Pr=new Uint16Array(on(Rr).buffer);kt.value+=Kt.dcCompressedSize}if(Kt.rleRawSize>0){var gr=It.array.slice(kt.value,kt.value+Kt.rleCompressedSize),Ir=unzlibSync$1(gr),Lr=vn(Ir.buffer);kt.value+=Kt.rleCompressedSize}for(var Hr=0,pr=new Array(Jn.length),ar=0;ar<pr.length;++ar)pr[ar]=new Array;for(var $r=0;$r<It.lines;++$r)for(var br=0;br<Jn.length;++br)pr[br].push(Hr),Hr+=Jn[br].width*It.type*2;pn(qn,pr,Jn,hr,Pr,Jt);for(var ar=0;ar<Jn.length;++ar){var ur=Jn[ar];if(!ur.decoded)switch(ur.compression){case 2:for(var wr=0,kr=0,$r=0;$r<It.lines;++$r){for(var xo=pr[ar][wr],Jr=0;Jr<ur.width;++Jr){for(var Mo=0;Mo<2*ur.type;++Mo)Jt[xo++]=Lr[kr+Mo*ur.width*ur.height];kr++}wr++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Jt.buffer)}function $n(It,Rt){for(var kt=new Uint8Array(It),Jt=0;kt[Rt.value+Jt]!=0;)Jt+=1;var Kt=new TextDecoder().decode(kt.slice(Rt.value,Rt.value+Jt));return Rt.value=Rt.value+Jt+1,Kt}function Gn(It,Rt,kt){var Jt=new TextDecoder().decode(new Uint8Array(It).slice(Rt.value,Rt.value+kt));return Rt.value=Rt.value+kt,Jt}function En(It,Rt){var kt=Vn(It,Rt),Jt=Un(It,Rt);return[kt,Jt]}function zn(It,Rt){var kt=Un(It,Rt),Jt=Un(It,Rt);return[kt,Jt]}function Vn(It,Rt){var kt=It.getInt32(Rt.value,!0);return Rt.value=Rt.value+4,kt}function Un(It,Rt){var kt=It.getUint32(Rt.value,!0);return Rt.value=Rt.value+4,kt}function Fn(It,Rt){var kt=It[Rt.value];return Rt.value=Rt.value+1,kt}function kn(It,Rt){var kt=It.getUint8(Rt.value);return Rt.value=Rt.value+1,kt}const Yn=function(It,Rt){let kt;return"getBigInt64"in DataView.prototype?kt=Number(It.getBigInt64(Rt.value,!0)):kt=It.getUint32(Rt.value+4,!0)+Number(It.getUint32(Rt.value,!0)<<32),Rt.value+=8,kt};function nr(It,Rt){var kt=It.getFloat32(Rt.value,!0);return Rt.value+=4,kt}function tn(It,Rt){return DataUtils.toHalfFloat(nr(It,Rt))}function fn(It){var Rt=(It&31744)>>10,kt=It&1023;return(It>>15?-1:1)*(Rt?Rt===31?kt?NaN:1/0:Math.pow(2,Rt-15)*(1+kt/1024):6103515625e-14*(kt/1024))}function mn(It,Rt){var kt=It.getUint16(Rt.value,!0);return Rt.value+=2,kt}function Wn(It,Rt){return fn(mn(It,Rt))}function Zn(It,Rt,kt,Jt){for(var Kt=kt.value,Qt=[];kt.value<Kt+Jt-1;){var _n=$n(Rt,kt),An=Vn(It,kt),Rn=kn(It,kt);kt.value+=3;var Pn=Vn(It,kt),Dn=Vn(It,kt);Qt.push({name:_n,pixelType:An,pLinear:Rn,xSampling:Pn,ySampling:Dn})}return kt.value+=1,Qt}function mr(It,Rt){var kt=nr(It,Rt),Jt=nr(It,Rt),Kt=nr(It,Rt),Qt=nr(It,Rt),_n=nr(It,Rt),An=nr(It,Rt),Rn=nr(It,Rt),Pn=nr(It,Rt);return{redX:kt,redY:Jt,greenX:Kt,greenY:Qt,blueX:_n,blueY:An,whiteX:Rn,whiteY:Pn}}function xr(It,Rt){var kt=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Jt=kn(It,Rt);return kt[Jt]}function Ar(It,Rt){var kt=Un(It,Rt),Jt=Un(It,Rt),Kt=Un(It,Rt),Qt=Un(It,Rt);return{xMin:kt,yMin:Jt,xMax:Kt,yMax:Qt}}function Br(It,Rt){var kt=["INCREASING_Y"],Jt=kn(It,Rt);return kt[Jt]}function Dr(It,Rt){var kt=nr(It,Rt),Jt=nr(It,Rt);return[kt,Jt]}function Mr(It,Rt){var kt=nr(It,Rt),Jt=nr(It,Rt),Kt=nr(It,Rt);return[kt,Jt,Kt]}function _r(It,Rt,kt,Jt,Kt){if(Jt==="string"||Jt==="stringvector"||Jt==="iccProfile")return Gn(Rt,kt,Kt);if(Jt==="chlist")return Zn(It,Rt,kt,Kt);if(Jt==="chromaticities")return mr(It,kt);if(Jt==="compression")return xr(It,kt);if(Jt==="box2i")return Ar(It,kt);if(Jt==="lineOrder")return Br(It,kt);if(Jt==="float")return nr(It,kt);if(Jt==="v2f")return Dr(It,kt);if(Jt==="v3f")return Mr(It,kt);if(Jt==="int")return Vn(It,kt);if(Jt==="rational")return En(It,kt);if(Jt==="timecode")return zn(It,kt);if(Jt==="preview")return kt.value+=Kt,"skipped";kt.value+=Kt}function ro(It,Rt,kt){const Jt={};if(It.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Jt.version=It.getUint8(4);const Kt=It.getUint8(5);Jt.spec={singleTile:!!(Kt&2),longName:!!(Kt&4),deepFormat:!!(Kt&8),multiPart:!!(Kt&16)},kt.value=8;for(var Qt=!0;Qt;){var _n=$n(Rt,kt);if(_n==0)Qt=!1;else{var An=$n(Rt,kt),Rn=Un(It,kt),Pn=_r(It,Rt,kt,An,Rn);Pn===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${An}'.`):Jt[_n]=Pn}}if(Kt!=0)throw console.error("EXRHeader:",Jt),"THREE.EXRLoader: provided file is currently unsupported.";return Jt}function Qr(It,Rt,kt,Jt,Kt){const Qt={size:0,viewer:Rt,array:kt,offset:Jt,width:It.dataWindow.xMax-It.dataWindow.xMin+1,height:It.dataWindow.yMax-It.dataWindow.yMin+1,channels:It.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:It.channels[0].pixelType,uncompress:null,getter:null,format:null,[hasColorSpace?"colorSpace":"encoding"]:null};switch(It.compression){case"NO_COMPRESSION":Qt.lines=1,Qt.uncompress=Ft;break;case"RLE_COMPRESSION":Qt.lines=1,Qt.uncompress=Dt;break;case"ZIPS_COMPRESSION":Qt.lines=1,Qt.uncompress=on;break;case"ZIP_COMPRESSION":Qt.lines=16,Qt.uncompress=on;break;case"PIZ_COMPRESSION":Qt.lines=32,Qt.uncompress=bn;break;case"PXR24_COMPRESSION":Qt.lines=16,Qt.uncompress=Mn;break;case"DWAA_COMPRESSION":Qt.lines=32,Qt.uncompress=wn;break;case"DWAB_COMPRESSION":Qt.lines=256,Qt.uncompress=wn;break;default:throw"EXRLoader.parse: "+It.compression+" is unsupported"}if(Qt.scanlineBlockSize=Qt.lines,Qt.type==1)switch(Kt){case FloatType:Qt.getter=Wn,Qt.inputSize=2;break;case HalfFloatType:Qt.getter=mn,Qt.inputSize=2;break}else if(Qt.type==2)switch(Kt){case FloatType:Qt.getter=nr,Qt.inputSize=4;break;case HalfFloatType:Qt.getter=tn,Qt.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Qt.type+" for "+It.compression+".";Qt.blockCount=(It.dataWindow.yMax+1)/Qt.scanlineBlockSize;for(var _n=0;_n<Qt.blockCount;_n++)Yn(Rt,Jt);Qt.outputChannels=Qt.channels==3?4:Qt.channels;const An=Qt.width*Qt.height*Qt.outputChannels;switch(Kt){case FloatType:Qt.byteArray=new Float32Array(An),Qt.channels<Qt.outputChannels&&Qt.byteArray.fill(1,0,An);break;case HalfFloatType:Qt.byteArray=new Uint16Array(An),Qt.channels<Qt.outputChannels&&Qt.byteArray.fill(15360,0,An);break;default:console.error("THREE.EXRLoader: unsupported type: ",Kt);break}return Qt.bytesPerLine=Qt.width*Qt.inputSize*Qt.channels,Qt.outputChannels==4?Qt.format=RGBAFormat:Qt.format=RedFormat,hasColorSpace?Qt.colorSpace="srgb-linear":Qt.encoding=3e3,Qt}const Cr=new DataView(_),Nr=new Uint8Array(_),jr={value:0},Or=ro(Cr,_,jr),sr=Qr(Or,Cr,Nr,jr,this.type),Kr={value:0},_o={R:0,G:1,B:2,A:3,Y:0};for(let It=0;It<sr.height/sr.scanlineBlockSize;It++){const Rt=Un(Cr,jr);sr.size=Un(Cr,jr),sr.lines=Rt+sr.scanlineBlockSize>sr.height?sr.height-Rt:sr.scanlineBlockSize;const Jt=sr.size<sr.lines*sr.bytesPerLine?sr.uncompress(sr):Ft(sr);jr.value+=sr.size;for(let Kt=0;Kt<sr.scanlineBlockSize;Kt++){const Qt=Kt+It*sr.scanlineBlockSize;if(Qt>=sr.height)break;for(let _n=0;_n<sr.channels;_n++){const An=_o[Or.channels[_n].name];for(let Rn=0;Rn<sr.width;Rn++){Kr.value=(Kt*(sr.channels*sr.width)+_n*sr.width+Rn)*sr.inputSize;const Pn=(sr.height-1-Qt)*(sr.width*sr.outputChannels)+Rn*sr.outputChannels+An;sr.byteArray[Pn]=sr.getter(Jt,Kr)}}}}return{header:Or,width:sr.width,height:sr.height,data:sr.byteArray,format:sr.format,[hasColorSpace?"colorSpace":"encoding"]:sr[hasColorSpace?"colorSpace":"encoding"],type:this.type}}setDataType(_){return this.type=_,this}load(_,_e,nt,rt){function it(ot,st){hasColorSpace?ot.colorSpace=st.colorSpace:ot.encoding=st.encoding,ot.minFilter=LinearFilter,ot.magFilter=LinearFilter,ot.generateMipmaps=!1,ot.flipY=!1,_e&&_e(ot,st)}return super.load(_,it,nt,rt)}}const _taskCache=new WeakMap;class DRACOLoader extends Loader$1{constructor(_){super(_),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(_){return this.decoderPath=_,this}setDecoderConfig(_){return this.decoderConfig=_,this}setWorkerLimit(_){return this.workerLimit=_,this}load(_,_e,nt,rt){const it=new FileLoader(this.manager);it.setPath(this.path),it.setResponseType("arraybuffer"),it.setRequestHeader(this.requestHeader),it.setWithCredentials(this.withCredentials),it.load(_,ot=>{const st={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(ot,st).then(_e).catch(rt)},nt,rt)}decodeDracoFile(_,_e,nt,rt){const it={attributeIDs:nt||this.defaultAttributeIDs,attributeTypes:rt||this.defaultAttributeTypes,useUniqueIDs:!!nt};this.decodeGeometry(_,it).then(_e)}decodeGeometry(_,_e){for(const at in _e.attributeTypes){const lt=_e.attributeTypes[at];lt.BYTES_PER_ELEMENT!==void 0&&(_e.attributeTypes[at]=lt.name)}const nt=JSON.stringify(_e);if(_taskCache.has(_)){const at=_taskCache.get(_);if(at.key===nt)return at.promise;if(_.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let rt;const it=this.workerNextTaskID++,ot=_.byteLength,st=this._getWorker(it,ot).then(at=>(rt=at,new Promise((lt,ct)=>{rt._callbacks[it]={resolve:lt,reject:ct},rt.postMessage({type:"decode",id:it,taskConfig:_e,buffer:_},[_])}))).then(at=>this._createGeometry(at.geometry));return st.catch(()=>!0).then(()=>{rt&&it&&this._releaseTask(rt,it)}),_taskCache.set(_,{key:nt,promise:st}),st}_createGeometry(_){const _e=new BufferGeometry;_.index&&_e.setIndex(new BufferAttribute(_.index.array,1));for(let nt=0;nt<_.attributes.length;nt++){const rt=_.attributes[nt],it=rt.name,ot=rt.array,st=rt.itemSize;_e.setAttribute(it,new BufferAttribute(ot,st))}return _e}_loadLibrary(_,_e){const nt=new FileLoader(this.manager);return nt.setPath(this.decoderPath),nt.setResponseType(_e),nt.setWithCredentials(this.withCredentials),new Promise((rt,it)=>{nt.load(_,rt,void 0,it)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const _=typeof WebAssembly!="object"||this.decoderConfig.type==="js",_e=[];return _?_e.push(this._loadLibrary("draco_decoder.js","text")):(_e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),_e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(_e).then(nt=>{const rt=nt[0];_||(this.decoderConfig.wasmBinary=nt[1]);const it=DRACOWorker.toString(),ot=["/* draco decoder */",rt,"","/* worker */",it.substring(it.indexOf("{")+1,it.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([ot]))}),this.decoderPending}_getWorker(_,_e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const rt=new Worker(this.workerSourceURL);rt._callbacks={},rt._taskCosts={},rt._taskLoad=0,rt.postMessage({type:"init",decoderConfig:this.decoderConfig}),rt.onmessage=function(it){const ot=it.data;switch(ot.type){case"decode":rt._callbacks[ot.id].resolve(ot);break;case"error":rt._callbacks[ot.id].reject(ot);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+ot.type+'"')}},this.workerPool.push(rt)}else this.workerPool.sort(function(rt,it){return rt._taskLoad>it._taskLoad?-1:1});const nt=this.workerPool[this.workerPool.length-1];return nt._taskCosts[_]=_e,nt._taskLoad+=_e,nt})}_releaseTask(_,_e){_._taskLoad-=_._taskCosts[_e],delete _._callbacks[_e],delete _._taskCosts[_e]}debug(){console.log("Task load: ",this.workerPool.map(_=>_._taskLoad))}dispose(){for(let _=0;_<this.workerPool.length;++_)this.workerPool[_].terminate();return this.workerPool.length=0,this}}function DRACOWorker(){let tt,_;onmessage=function(ot){const st=ot.data;switch(st.type){case"init":tt=st.decoderConfig,_=new Promise(function(ct){tt.onModuleLoaded=function(ut){ct({draco:ut})},DracoDecoderModule(tt)});break;case"decode":const at=st.buffer,lt=st.taskConfig;_.then(ct=>{const ut=ct.draco,ht=new ut.Decoder,pt=new ut.DecoderBuffer;pt.Init(new Int8Array(at),at.byteLength);try{const gt=_e(ut,ht,pt,lt),yt=gt.attributes.map(vt=>vt.array.buffer);gt.index&&yt.push(gt.index.array.buffer),self.postMessage({type:"decode",id:st.id,geometry:gt},yt)}catch(gt){console.error(gt),self.postMessage({type:"error",id:st.id,error:gt.message})}finally{ut.destroy(pt),ut.destroy(ht)}});break}};function _e(ot,st,at,lt){const ct=lt.attributeIDs,ut=lt.attributeTypes;let ht,pt;const gt=st.GetEncodedGeometryType(at);if(gt===ot.TRIANGULAR_MESH)ht=new ot.Mesh,pt=st.DecodeBufferToMesh(at,ht);else if(gt===ot.POINT_CLOUD)ht=new ot.PointCloud,pt=st.DecodeBufferToPointCloud(at,ht);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!pt.ok()||ht.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+pt.error_msg());const yt={index:null,attributes:[]};for(const vt in ct){const mt=self[ut[vt]];let _t,xt;if(lt.useUniqueIDs)xt=ct[vt],_t=st.GetAttributeByUniqueId(ht,xt);else{if(xt=st.GetAttributeId(ht,ot[ct[vt]]),xt===-1)continue;_t=st.GetAttribute(ht,xt)}yt.attributes.push(rt(ot,st,ht,vt,mt,_t))}return gt===ot.TRIANGULAR_MESH&&(yt.index=nt(ot,st,ht)),ot.destroy(ht),yt}function nt(ot,st,at){const ct=at.num_faces()*3,ut=ct*4,ht=ot._malloc(ut);st.GetTrianglesUInt32Array(at,ut,ht);const pt=new Uint32Array(ot.HEAPF32.buffer,ht,ct).slice();return ot._free(ht),{array:pt,itemSize:1}}function rt(ot,st,at,lt,ct,ut){const ht=ut.num_components(),gt=at.num_points()*ht,yt=gt*ct.BYTES_PER_ELEMENT,vt=it(ot,ct),mt=ot._malloc(yt);st.GetAttributeDataArrayForAllPoints(at,ut,vt,yt,mt);const _t=new ct(ot.HEAPF32.buffer,mt,gt).slice();return ot._free(mt),{name:lt,array:_t,itemSize:ht}}function it(ot,st){switch(st){case Float32Array:return ot.DT_FLOAT32;case Int8Array:return ot.DT_INT8;case Int16Array:return ot.DT_INT16;case Int32Array:return ot.DT_INT32;case Uint8Array:return ot.DT_UINT8;case Uint16Array:return ot.DT_UINT16;case Uint32Array:return ot.DT_UINT32}}}let generated;const MeshoptDecoder=()=>{if(generated)return generated;const tt="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",_="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",_e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),nt=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let rt=tt;WebAssembly.validate(_e)&&(rt=_);let it;const ot=WebAssembly.instantiate(st(rt),{}).then(ut=>{it=ut.instance,it.exports.__wasm_call_ctors()});function st(ut){const ht=new Uint8Array(ut.length);for(let gt=0;gt<ut.length;++gt){const yt=ut.charCodeAt(gt);ht[gt]=yt>96?yt-71:yt>64?yt-65:yt>47?yt+4:yt>46?63:62}let pt=0;for(let gt=0;gt<ut.length;++gt)ht[pt++]=ht[gt]<60?nt[ht[gt]]:(ht[gt]-60)*64+ht[++gt];return ht.buffer.slice(0,pt)}function at(ut,ht,pt,gt,yt,vt){const mt=it.exports.sbrk,_t=pt+3&-4,xt=mt(_t*gt),St=mt(yt.length),Tt=new Uint8Array(it.exports.memory.buffer);Tt.set(yt,St);const Mt=ut(xt,pt,gt,St,yt.length);if(Mt===0&&vt&&vt(xt,_t,gt),ht.set(Tt.subarray(xt,xt+pt*gt)),mt(xt-mt(0)),Mt!==0)throw new Error(`Malformed buffer data: ${Mt}`)}const lt={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ct={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return generated={ready:ot,supported:!0,decodeVertexBuffer(ut,ht,pt,gt,yt){at(it.exports.meshopt_decodeVertexBuffer,ut,ht,pt,gt,it.exports[lt[yt]])},decodeIndexBuffer(ut,ht,pt,gt){at(it.exports.meshopt_decodeIndexBuffer,ut,ht,pt,gt)},decodeIndexSequence(ut,ht,pt,gt){at(it.exports.meshopt_decodeIndexSequence,ut,ht,pt,gt)},decodeGltfBuffer(ut,ht,pt,gt,yt,vt){at(it.exports[ct[yt]],ut,ht,pt,gt,it.exports[lt[vt]])}},generated};function shallow(tt,_){if(Object.is(tt,_))return!0;if(typeof tt!="object"||tt===null||typeof _!="object"||_===null)return!1;const _e=Object.keys(tt);if(_e.length!==Object.keys(_).length)return!1;for(let nt=0;nt<_e.length;nt++)if(!Object.prototype.hasOwnProperty.call(_,_e[nt])||!Object.is(tt[_e[nt]],_[_e[nt]]))return!1;return!0}function workerBootstrap(){var tt=Object.create(null);function _(rt,it){var ot=rt.id,st=rt.name,at=rt.dependencies;at===void 0&&(at=[]);var lt=rt.init;lt===void 0&&(lt=function(){});var ct=rt.getTransferables;if(ct===void 0&&(ct=null),!tt[ot])try{at=at.map(function(ht){return ht&&ht.isWorkerModule&&(_(ht,function(pt){if(pt instanceof Error)throw pt}),ht=tt[ht.id].value),ht}),lt=nt("<"+st+">.init",lt),ct&&(ct=nt("<"+st+">.getTransferables",ct));var ut=null;typeof lt=="function"?ut=lt.apply(void 0,at):console.error("worker module init function failed to rehydrate"),tt[ot]={id:ot,value:ut,getTransferables:ct},it(ut)}catch(ht){ht&&ht.noLog||console.error(ht),it(ht)}}function _e(rt,it){var ot,st=rt.id,at=rt.args;(!tt[st]||typeof tt[st].value!="function")&&it(new Error("Worker module "+st+": not found or its 'init' did not return a function"));try{var lt=(ot=tt[st]).value.apply(ot,at);lt&&typeof lt.then=="function"?lt.then(ct,function(ut){return it(ut instanceof Error?ut:new Error(""+ut))}):ct(lt)}catch(ut){it(ut)}function ct(ut){try{var ht=tt[st].getTransferables&&tt[st].getTransferables(ut);(!ht||!Array.isArray(ht)||!ht.length)&&(ht=void 0),it(ut,ht)}catch(pt){console.error(pt),it(pt)}}}function nt(rt,it){var ot=void 0;self.troikaDefine=function(at){return ot=at};var st=URL.createObjectURL(new Blob(["/** "+rt.replace(/\*/g,"")+` **/

troikaDefine(
`+it+`
)`],{type:"application/javascript"}));try{importScripts(st)}catch(at){console.error(at)}return URL.revokeObjectURL(st),delete self.troikaDefine,ot}self.addEventListener("message",function(rt){var it=rt.data,ot=it.messageId,st=it.action,at=it.data;try{st==="registerModule"&&_(at,function(lt){lt instanceof Error?postMessage({messageId:ot,success:!1,error:lt.message}):postMessage({messageId:ot,success:!0,result:{isCallable:typeof lt=="function"}})}),st==="callModule"&&_e(at,function(lt,ct){lt instanceof Error?postMessage({messageId:ot,success:!1,error:lt.message}):postMessage({messageId:ot,success:!0,result:lt},ct||void 0)})}catch(lt){postMessage({messageId:ot,success:!1,error:lt.stack})}})}function defineMainThreadModule(tt){var _=function(){for(var _e=[],nt=arguments.length;nt--;)_e[nt]=arguments[nt];return _._getInitResult().then(function(rt){if(typeof rt=="function")return rt.apply(void 0,_e);throw new Error("Worker module function was called but `init` did not return a callable function")})};return _._getInitResult=function(){var _e=tt.dependencies,nt=tt.init;_e=Array.isArray(_e)?_e.map(function(it){return it&&it._getInitResult?it._getInitResult():it}):[];var rt=Promise.all(_e).then(function(it){return nt.apply(null,it)});return _._getInitResult=function(){return rt},rt},_}var supportsWorkers=function(){var tt=!1;if(typeof window<"u"&&typeof window.document<"u")try{var _=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));_.terminate(),tt=!0}catch(_e){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+_e.message+"]")}return supportsWorkers=function(){return tt},tt},_workerModuleId=0,_messageId=0,_allowInitAsString=!1,workers=Object.create(null),registeredModules=Object.create(null),openRequests=Object.create(null);function defineWorkerModule(tt){if((!tt||typeof tt.init!="function")&&!_allowInitAsString)throw new Error("requires `options.init` function");var _=tt.dependencies,_e=tt.init,nt=tt.getTransferables,rt=tt.workerId;if(!supportsWorkers())return defineMainThreadModule(tt);rt==null&&(rt="#default");var it="workerModule"+ ++_workerModuleId,ot=tt.name||it,st=null;_=_&&_.map(function(lt){return typeof lt=="function"&&!lt.workerModuleData&&(_allowInitAsString=!0,lt=defineWorkerModule({workerId:rt,name:"<"+ot+"> function dependency: "+lt.name,init:`function(){return (
`+stringifyFunction(lt)+`
)}`}),_allowInitAsString=!1),lt&&lt.workerModuleData&&(lt=lt.workerModuleData),lt});function at(){for(var lt=[],ct=arguments.length;ct--;)lt[ct]=arguments[ct];if(!st){st=callWorker(rt,"registerModule",at.workerModuleData);var ut=function(){st=null,registeredModules[rt].delete(ut)};(registeredModules[rt]||(registeredModules[rt]=new Set)).add(ut)}return st.then(function(ht){var pt=ht.isCallable;if(pt)return callWorker(rt,"callModule",{id:it,args:lt});throw new Error("Worker module function was called but `init` did not return a callable function")})}return at.workerModuleData={isWorkerModule:!0,id:it,name:ot,dependencies:_,init:stringifyFunction(_e),getTransferables:nt&&stringifyFunction(nt)},at}function terminateWorker(tt){registeredModules[tt]&&registeredModules[tt].forEach(function(_){_()}),workers[tt]&&(workers[tt].terminate(),delete workers[tt])}function stringifyFunction(tt){var _=tt.toString();return!/^function/.test(_)&&/^\w+\s*\(/.test(_)&&(_="function "+_),_}function getWorker(tt){var _=workers[tt];if(!_){var _e=stringifyFunction(workerBootstrap);_=workers[tt]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+tt.replace(/\*/g,"")+` **/

;(`+_e+")()"],{type:"application/javascript"}))),_.onmessage=function(nt){var rt=nt.data,it=rt.messageId,ot=openRequests[it];if(!ot)throw new Error("WorkerModule response with empty or unknown messageId");delete openRequests[it],ot(rt)}}return _}function callWorker(tt,_,_e){return new Promise(function(nt,rt){var it=++_messageId;openRequests[it]=function(ot){ot.success?nt(ot.result):rt(new Error("Error in worker "+_+" call: "+ot.error))},getWorker(tt).postMessage({messageId:it,action:_,data:_e})})}function SDFGenerator(){var tt=function(_){function _e(Xt,Vt,Wt,$t,nn,en,sn,rn){var an=1-sn;rn.x=an*an*Xt+2*an*sn*Wt+sn*sn*nn,rn.y=an*an*Vt+2*an*sn*$t+sn*sn*en}function nt(Xt,Vt,Wt,$t,nn,en,sn,rn,an,dn){var Bn=1-an;dn.x=Bn*Bn*Bn*Xt+3*Bn*Bn*an*Wt+3*Bn*an*an*nn+an*an*an*sn,dn.y=Bn*Bn*Bn*Vt+3*Bn*Bn*an*$t+3*Bn*an*an*en+an*an*an*rn}function rt(Xt,Vt){for(var Wt=/([MLQCZ])([^MLQCZ]*)/g,$t,nn,en,sn,rn;$t=Wt.exec(Xt);){var an=$t[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(dn){return parseFloat(dn)});switch($t[1]){case"M":sn=nn=an[0],rn=en=an[1];break;case"L":(an[0]!==sn||an[1]!==rn)&&Vt("L",sn,rn,sn=an[0],rn=an[1]);break;case"Q":{Vt("Q",sn,rn,sn=an[2],rn=an[3],an[0],an[1]);break}case"C":{Vt("C",sn,rn,sn=an[4],rn=an[5],an[0],an[1],an[2],an[3]);break}case"Z":(sn!==nn||rn!==en)&&Vt("L",sn,rn,nn,en);break}}}function it(Xt,Vt,Wt){Wt===void 0&&(Wt=16);var $t={x:0,y:0};rt(Xt,function(nn,en,sn,rn,an,dn,Bn,Nn,gn){switch(nn){case"L":Vt(en,sn,rn,an);break;case"Q":{for(var Ht=en,xn=sn,hn=1;hn<Wt;hn++)_e(en,sn,dn,Bn,rn,an,hn/(Wt-1),$t),Vt(Ht,xn,$t.x,$t.y),Ht=$t.x,xn=$t.y;break}case"C":{for(var vn=en,pn=sn,Hn=1;Hn<Wt;Hn++)nt(en,sn,dn,Bn,Nn,gn,rn,an,Hn/(Wt-1),$t),Vt(vn,pn,$t.x,$t.y),vn=$t.x,pn=$t.y;break}}})}var ot="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",st="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",at=new WeakMap,lt={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function ct(Xt,Vt){var Wt=Xt.getContext?Xt.getContext("webgl",lt):Xt,$t=at.get(Wt);if(!$t){let vn=function(Sn){var jn=en[Sn];if(!jn&&(jn=en[Sn]=Wt.getExtension(Sn),!jn))throw new Error(Sn+" not supported");return jn},pn=function(Sn,jn){var Ft=Wt.createShader(jn);return Wt.shaderSource(Ft,Sn),Wt.compileShader(Ft),Ft},Hn=function(Sn,jn,Ft,Dt){if(!sn[Sn]){var on={},bn={},Mn=Wt.createProgram();Wt.attachShader(Mn,pn(jn,Wt.VERTEX_SHADER)),Wt.attachShader(Mn,pn(Ft,Wt.FRAGMENT_SHADER)),Wt.linkProgram(Mn),sn[Sn]={program:Mn,transaction:function($n){Wt.useProgram(Mn),$n({setUniform:function(En,zn){for(var Vn=[],Un=arguments.length-2;Un-- >0;)Vn[Un]=arguments[Un+2];var Fn=bn[zn]||(bn[zn]=Wt.getUniformLocation(Mn,zn));Wt["uniform"+En].apply(Wt,[Fn].concat(Vn))},setAttribute:function(En,zn,Vn,Un,Fn){var kn=on[En];kn||(kn=on[En]={buf:Wt.createBuffer(),loc:Wt.getAttribLocation(Mn,En),data:null}),Wt.bindBuffer(Wt.ARRAY_BUFFER,kn.buf),Wt.vertexAttribPointer(kn.loc,zn,Wt.FLOAT,!1,0,0),Wt.enableVertexAttribArray(kn.loc),nn?Wt.vertexAttribDivisor(kn.loc,Un):vn("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(kn.loc,Un),Fn!==kn.data&&(Wt.bufferData(Wt.ARRAY_BUFFER,Fn,Vn),kn.data=Fn)}})}}}sn[Sn].transaction(Dt)},yn=function(Sn,jn){an++;try{Wt.activeTexture(Wt.TEXTURE0+an);var Ft=rn[Sn];Ft||(Ft=rn[Sn]=Wt.createTexture(),Wt.bindTexture(Wt.TEXTURE_2D,Ft),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_MIN_FILTER,Wt.NEAREST),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_MAG_FILTER,Wt.NEAREST)),Wt.bindTexture(Wt.TEXTURE_2D,Ft),jn(Ft,an)}finally{an--}},Ln=function(Sn,jn,Ft){var Dt=Wt.createFramebuffer();dn.push(Dt),Wt.bindFramebuffer(Wt.FRAMEBUFFER,Dt),Wt.activeTexture(Wt.TEXTURE0+jn),Wt.bindTexture(Wt.TEXTURE_2D,Sn),Wt.framebufferTexture2D(Wt.FRAMEBUFFER,Wt.COLOR_ATTACHMENT0,Wt.TEXTURE_2D,Sn,0);try{Ft(Dt)}finally{Wt.deleteFramebuffer(Dt),Wt.bindFramebuffer(Wt.FRAMEBUFFER,dn[--dn.length-1]||null)}},On=function(){en={},sn={},rn={},an=-1,dn.length=0};var Bn=vn,Nn=pn,gn=Hn,Ht=yn,xn=Ln,hn=On,nn=typeof WebGL2RenderingContext<"u"&&Wt instanceof WebGL2RenderingContext,en={},sn={},rn={},an=-1,dn=[];Wt.canvas.addEventListener("webglcontextlost",function(Sn){On(),Sn.preventDefault()},!1),at.set(Wt,$t={gl:Wt,isWebGL2:nn,getExtension:vn,withProgram:Hn,withTexture:yn,withTextureFramebuffer:Ln,handleContextLoss:On})}Vt($t)}function ut(Xt,Vt,Wt,$t,nn,en,sn,rn){sn===void 0&&(sn=15),rn===void 0&&(rn=null),ct(Xt,function(an){var dn=an.gl,Bn=an.withProgram,Nn=an.withTexture;Nn("copy",function(gn,Ht){dn.texImage2D(dn.TEXTURE_2D,0,dn.RGBA,nn,en,0,dn.RGBA,dn.UNSIGNED_BYTE,Vt),Bn("copy",ot,st,function(xn){var hn=xn.setUniform,vn=xn.setAttribute;vn("aUV",2,dn.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),hn("1i","image",Ht),dn.bindFramebuffer(dn.FRAMEBUFFER,rn||null),dn.disable(dn.BLEND),dn.colorMask(sn&8,sn&4,sn&2,sn&1),dn.viewport(Wt,$t,nn,en),dn.scissor(Wt,$t,nn,en),dn.drawArrays(dn.TRIANGLES,0,3)})})})}function ht(Xt,Vt,Wt){var $t=Xt.width,nn=Xt.height;ct(Xt,function(en){var sn=en.gl,rn=new Uint8Array($t*nn*4);sn.readPixels(0,0,$t,nn,sn.RGBA,sn.UNSIGNED_BYTE,rn),Xt.width=Vt,Xt.height=Wt,ut(sn,rn,0,0,$t,nn)})}var pt=Object.freeze({__proto__:null,withWebGLContext:ct,renderImageData:ut,resizeWebGLCanvasWithoutClearing:ht});function gt(Xt,Vt,Wt,$t,nn,en){en===void 0&&(en=1);var sn=new Uint8Array(Xt*Vt),rn=$t[2]-$t[0],an=$t[3]-$t[1],dn=[];it(Wt,function(vn,pn,Hn,yn){dn.push({x1:vn,y1:pn,x2:Hn,y2:yn,minX:Math.min(vn,Hn),minY:Math.min(pn,yn),maxX:Math.max(vn,Hn),maxY:Math.max(pn,yn)})}),dn.sort(function(vn,pn){return vn.maxX-pn.maxX});for(var Bn=0;Bn<Xt;Bn++)for(var Nn=0;Nn<Vt;Nn++){var gn=xn($t[0]+rn*(Bn+.5)/Xt,$t[1]+an*(Nn+.5)/Vt),Ht=Math.pow(1-Math.abs(gn)/nn,en)/2;gn<0&&(Ht=1-Ht),Ht=Math.max(0,Math.min(255,Math.round(Ht*255))),sn[Nn*Xt+Bn]=Ht}return sn;function xn(vn,pn){for(var Hn=1/0,yn=1/0,Ln=dn.length;Ln--;){var On=dn[Ln];if(On.maxX+yn<=vn)break;if(vn+yn>On.minX&&pn-yn<On.maxY&&pn+yn>On.minY){var Sn=mt(vn,pn,On.x1,On.y1,On.x2,On.y2);Sn<Hn&&(Hn=Sn,yn=Math.sqrt(Hn))}}return hn(vn,pn)&&(yn=-yn),yn}function hn(vn,pn){for(var Hn=0,yn=dn.length;yn--;){var Ln=dn[yn];if(Ln.maxX<=vn)break;var On=Ln.y1>pn!=Ln.y2>pn&&vn<(Ln.x2-Ln.x1)*(pn-Ln.y1)/(Ln.y2-Ln.y1)+Ln.x1;On&&(Hn+=Ln.y1<Ln.y2?1:-1)}return Hn!==0}}function yt(Xt,Vt,Wt,$t,nn,en,sn,rn,an,dn){en===void 0&&(en=1),rn===void 0&&(rn=0),an===void 0&&(an=0),dn===void 0&&(dn=0),vt(Xt,Vt,Wt,$t,nn,en,sn,null,rn,an,dn)}function vt(Xt,Vt,Wt,$t,nn,en,sn,rn,an,dn,Bn){en===void 0&&(en=1),an===void 0&&(an=0),dn===void 0&&(dn=0),Bn===void 0&&(Bn=0);for(var Nn=gt(Xt,Vt,Wt,$t,nn,en),gn=new Uint8Array(Nn.length*4),Ht=0;Ht<Nn.length;Ht++)gn[Ht*4+Bn]=Nn[Ht];ut(sn,gn,an,dn,Xt,Vt,1<<3-Bn,rn)}function mt(Xt,Vt,Wt,$t,nn,en){var sn=nn-Wt,rn=en-$t,an=sn*sn+rn*rn,dn=an?Math.max(0,Math.min(1,((Xt-Wt)*sn+(Vt-$t)*rn)/an)):0,Bn=Xt-(Wt+dn*sn),Nn=Vt-($t+dn*rn);return Bn*Bn+Nn*Nn}var _t=Object.freeze({__proto__:null,generate:gt,generateIntoCanvas:yt,generateIntoFramebuffer:vt}),xt="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",St="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",Tt="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",Mt=new Float32Array([0,0,2,0,0,2]),bt=null,Pt=!1,wt={},Bt=new WeakMap;function Ot(Xt){if(!Pt&&!jt(Xt))throw new Error("WebGL generation not supported")}function Ut(Xt,Vt,Wt,$t,nn,en,sn){if(en===void 0&&(en=1),sn===void 0&&(sn=null),!sn&&(sn=bt,!sn)){var rn=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!rn)throw new Error("OffscreenCanvas or DOM canvas not supported");sn=bt=rn.getContext("webgl",{depth:!1})}Ot(sn);var an=new Uint8Array(Xt*Vt*4);ct(sn,function(gn){var Ht=gn.gl,xn=gn.withTexture,hn=gn.withTextureFramebuffer;xn("readable",function(vn,pn){Ht.texImage2D(Ht.TEXTURE_2D,0,Ht.RGBA,Xt,Vt,0,Ht.RGBA,Ht.UNSIGNED_BYTE,null),hn(vn,pn,function(Hn){zt(Xt,Vt,Wt,$t,nn,en,Ht,Hn,0,0,0),Ht.readPixels(0,0,Xt,Vt,Ht.RGBA,Ht.UNSIGNED_BYTE,an)})})});for(var dn=new Uint8Array(Xt*Vt),Bn=0,Nn=0;Bn<an.length;Bn+=4)dn[Nn++]=an[Bn];return dn}function Nt(Xt,Vt,Wt,$t,nn,en,sn,rn,an,dn){en===void 0&&(en=1),rn===void 0&&(rn=0),an===void 0&&(an=0),dn===void 0&&(dn=0),zt(Xt,Vt,Wt,$t,nn,en,sn,null,rn,an,dn)}function zt(Xt,Vt,Wt,$t,nn,en,sn,rn,an,dn,Bn){en===void 0&&(en=1),an===void 0&&(an=0),dn===void 0&&(dn=0),Bn===void 0&&(Bn=0),Ot(sn);var Nn=[];it(Wt,function(gn,Ht,xn,hn){Nn.push(gn,Ht,xn,hn)}),Nn=new Float32Array(Nn),ct(sn,function(gn){var Ht=gn.gl,xn=gn.isWebGL2,hn=gn.getExtension,vn=gn.withProgram,pn=gn.withTexture,Hn=gn.withTextureFramebuffer,yn=gn.handleContextLoss;if(pn("rawDistances",function(Ln,On){(Xt!==Ln._lastWidth||Vt!==Ln._lastHeight)&&Ht.texImage2D(Ht.TEXTURE_2D,0,Ht.RGBA,Ln._lastWidth=Xt,Ln._lastHeight=Vt,0,Ht.RGBA,Ht.UNSIGNED_BYTE,null),vn("main",xt,St,function(Sn){var jn=Sn.setAttribute,Ft=Sn.setUniform,Dt=!xn&&hn("ANGLE_instanced_arrays"),on=!xn&&hn("EXT_blend_minmax");jn("aUV",2,Ht.STATIC_DRAW,0,Mt),jn("aLineSegment",4,Ht.DYNAMIC_DRAW,1,Nn),Ft.apply(void 0,["4f","uGlyphBounds"].concat($t)),Ft("1f","uMaxDistance",nn),Ft("1f","uExponent",en),Hn(Ln,On,function(bn){Ht.enable(Ht.BLEND),Ht.colorMask(!0,!0,!0,!0),Ht.viewport(0,0,Xt,Vt),Ht.scissor(0,0,Xt,Vt),Ht.blendFunc(Ht.ONE,Ht.ONE),Ht.blendEquationSeparate(Ht.FUNC_ADD,xn?Ht.MAX:on.MAX_EXT),Ht.clear(Ht.COLOR_BUFFER_BIT),xn?Ht.drawArraysInstanced(Ht.TRIANGLES,0,3,Nn.length/4):Dt.drawArraysInstancedANGLE(Ht.TRIANGLES,0,3,Nn.length/4)})}),vn("post",ot,Tt,function(Sn){Sn.setAttribute("aUV",2,Ht.STATIC_DRAW,0,Mt),Sn.setUniform("1i","tex",On),Ht.bindFramebuffer(Ht.FRAMEBUFFER,rn),Ht.disable(Ht.BLEND),Ht.colorMask(Bn===0,Bn===1,Bn===2,Bn===3),Ht.viewport(an,dn,Xt,Vt),Ht.scissor(an,dn,Xt,Vt),Ht.drawArrays(Ht.TRIANGLES,0,3)})}),Ht.isContextLost())throw yn(),new Error("webgl context lost")})}function jt(Xt){var Vt=!Xt||Xt===bt?wt:Xt.canvas||Xt,Wt=Bt.get(Vt);if(Wt===void 0){Pt=!0;var $t=null;try{var nn=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],en=Ut(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,Xt);Wt=en&&nn.length===en.length&&en.every(function(sn,rn){return sn===nn[rn]}),Wt||($t="bad trial run results",console.info(nn,en))}catch(sn){Wt=!1,$t=sn.message}$t&&console.warn("WebGL SDF generation not supported:",$t),Pt=!1,Bt.set(Vt,Wt)}return Wt}var Yt=Object.freeze({__proto__:null,generate:Ut,generateIntoCanvas:Nt,generateIntoFramebuffer:zt,isSupported:jt});function qt(Xt,Vt,Wt,$t,nn,en){nn===void 0&&(nn=Math.max($t[2]-$t[0],$t[3]-$t[1])/2),en===void 0&&(en=1);try{return Ut.apply(Yt,arguments)}catch(sn){return console.info("WebGL SDF generation failed, falling back to JS",sn),gt.apply(_t,arguments)}}function Gt(Xt,Vt,Wt,$t,nn,en,sn,rn,an,dn){nn===void 0&&(nn=Math.max($t[2]-$t[0],$t[3]-$t[1])/2),en===void 0&&(en=1),rn===void 0&&(rn=0),an===void 0&&(an=0),dn===void 0&&(dn=0);try{return Nt.apply(Yt,arguments)}catch(Bn){return console.info("WebGL SDF generation failed, falling back to JS",Bn),yt.apply(_t,arguments)}}return _.forEachPathCommand=rt,_.generate=qt,_.generateIntoCanvas=Gt,_.javascript=_t,_.pathToLineSegments=it,_.webgl=Yt,_.webglUtils=pt,Object.defineProperty(_,"__esModule",{value:!0}),_}({});return tt}function bidiFactory(){var tt=function(_){var _e={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},nt={},rt={};nt.L=1,rt[1]="L",Object.keys(_e).forEach(function(yn,Ln){nt[yn]=1<<Ln+1,rt[nt[yn]]=yn}),Object.freeze(nt);var it=nt.LRI|nt.RLI|nt.FSI,ot=nt.L|nt.R|nt.AL,st=nt.B|nt.S|nt.WS|nt.ON|nt.FSI|nt.LRI|nt.RLI|nt.PDI,at=nt.BN|nt.RLE|nt.LRE|nt.RLO|nt.LRO|nt.PDF,lt=nt.S|nt.WS|nt.B|it|nt.PDI|at,ct=null;function ut(){if(!ct){ct=new Map;var yn=function(On){if(_e.hasOwnProperty(On)){var Sn=0;_e[On].split(",").forEach(function(jn){var Ft=jn.split("+"),Dt=Ft[0],on=Ft[1];Dt=parseInt(Dt,36),on=on?parseInt(on,36):0,ct.set(Sn+=Dt,nt[On]);for(var bn=0;bn<on;bn++)ct.set(++Sn,nt[On])})}};for(var Ln in _e)yn(Ln)}}function ht(yn){return ut(),ct.get(yn.codePointAt(0))||nt.L}function pt(yn){return rt[ht(yn)]}var gt={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function yt(yn,Ln){var On=36,Sn=0,jn=new Map,Ft=Ln&&new Map,Dt;return yn.split(",").forEach(function on(bn){if(bn.indexOf("+")!==-1)for(var Mn=+bn;Mn--;)on(Dt);else{Dt=bn;var wn=bn.split(">"),$n=wn[0],Gn=wn[1];$n=String.fromCodePoint(Sn+=parseInt($n,On)),Gn=String.fromCodePoint(Sn+=parseInt(Gn,On)),jn.set($n,Gn),Ln&&Ft.set(Gn,$n)}}),{map:jn,reverseMap:Ft}}var vt,mt,_t;function xt(){if(!vt){var yn=yt(gt.pairs,!0),Ln=yn.map,On=yn.reverseMap;vt=Ln,mt=On,_t=yt(gt.canonical,!1).map}}function St(yn){return xt(),vt.get(yn)||null}function Tt(yn){return xt(),mt.get(yn)||null}function Mt(yn){return xt(),_t.get(yn)||null}var bt=nt.L,Pt=nt.R,wt=nt.EN,Bt=nt.ES,Ot=nt.ET,Ut=nt.AN,Nt=nt.CS,zt=nt.B,jt=nt.S,Yt=nt.ON,qt=nt.BN,Gt=nt.NSM,Xt=nt.AL,Vt=nt.LRO,Wt=nt.RLO,$t=nt.LRE,nn=nt.RLE,en=nt.PDF,sn=nt.LRI,rn=nt.RLI,an=nt.FSI,dn=nt.PDI;function Bn(yn,Ln){for(var On=125,Sn=new Uint32Array(yn.length),jn=0;jn<yn.length;jn++)Sn[jn]=ht(yn[jn]);var Ft=new Map;function Dt(qr,oo){var Gr=Sn[qr];Sn[qr]=oo,Ft.set(Gr,Ft.get(Gr)-1),Gr&st&&Ft.set(st,Ft.get(st)-1),Ft.set(oo,(Ft.get(oo)||0)+1),oo&st&&Ft.set(st,(Ft.get(st)||0)+1)}for(var on=new Uint8Array(yn.length),bn=new Map,Mn=[],wn=null,$n=0;$n<yn.length;$n++)wn||Mn.push(wn={start:$n,end:yn.length-1,level:Ln==="rtl"?1:Ln==="ltr"?0:Os($n,!1)}),Sn[$n]&zt&&(wn.end=$n,wn=null);for(var Gn=nn|$t|Wt|Vt|it|dn|en|zt,En=function(qr){return qr+(qr&1?1:2)},zn=function(qr){return qr+(qr&1?2:1)},Vn=0;Vn<Mn.length;Vn++){wn=Mn[Vn];var Un=[{_level:wn.level,_override:0,_isolate:0}],Fn=void 0,kn=0,Yn=0,nr=0;Ft.clear();for(var tn=wn.start;tn<=wn.end;tn++){var fn=Sn[tn];if(Fn=Un[Un.length-1],Ft.set(fn,(Ft.get(fn)||0)+1),fn&st&&Ft.set(st,(Ft.get(st)||0)+1),fn&Gn)if(fn&(nn|$t)){on[tn]=Fn._level;var mn=(fn===nn?zn:En)(Fn._level);mn<=On&&!kn&&!Yn?Un.push({_level:mn,_override:0,_isolate:0}):kn||Yn++}else if(fn&(Wt|Vt)){on[tn]=Fn._level;var Wn=(fn===Wt?zn:En)(Fn._level);Wn<=On&&!kn&&!Yn?Un.push({_level:Wn,_override:fn&Wt?Pt:bt,_isolate:0}):kn||Yn++}else if(fn&it){fn&an&&(fn=Os(tn+1,!0)===1?rn:sn),on[tn]=Fn._level,Fn._override&&Dt(tn,Fn._override);var Zn=(fn===rn?zn:En)(Fn._level);Zn<=On&&kn===0&&Yn===0?(nr++,Un.push({_level:Zn,_override:0,_isolate:1,_isolInitIndex:tn})):kn++}else if(fn&dn){if(kn>0)kn--;else if(nr>0){for(Yn=0;!Un[Un.length-1]._isolate;)Un.pop();var mr=Un[Un.length-1]._isolInitIndex;mr!=null&&(bn.set(mr,tn),bn.set(tn,mr)),Un.pop(),nr--}Fn=Un[Un.length-1],on[tn]=Fn._level,Fn._override&&Dt(tn,Fn._override)}else fn&en?(kn===0&&(Yn>0?Yn--:!Fn._isolate&&Un.length>1&&(Un.pop(),Fn=Un[Un.length-1])),on[tn]=Fn._level):fn&zt&&(on[tn]=wn.level);else on[tn]=Fn._level,Fn._override&&fn!==qt&&Dt(tn,Fn._override)}for(var xr=[],Ar=null,Br=wn.start;Br<=wn.end;Br++){var Dr=Sn[Br];if(!(Dr&at)){var Mr=on[Br],_r=Dr&it,ro=Dr===dn;Ar&&Mr===Ar._level?(Ar._end=Br,Ar._endsWithIsolInit=_r):xr.push(Ar={_start:Br,_end:Br,_level:Mr,_startsWithPDI:ro,_endsWithIsolInit:_r})}}for(var Qr=[],Cr=0;Cr<xr.length;Cr++){var Nr=xr[Cr];if(!Nr._startsWithPDI||Nr._startsWithPDI&&!bn.has(Nr._start)){for(var jr=[Ar=Nr],Or=void 0;Ar&&Ar._endsWithIsolInit&&(Or=bn.get(Ar._end))!=null;)for(var sr=Cr+1;sr<xr.length;sr++)if(xr[sr]._start===Or){jr.push(Ar=xr[sr]);break}for(var Kr=[],_o=0;_o<jr.length;_o++)for(var It=jr[_o],Rt=It._start;Rt<=It._end;Rt++)Kr.push(Rt);for(var kt=on[Kr[0]],Jt=wn.level,Kt=Kr[0]-1;Kt>=0;Kt--)if(!(Sn[Kt]&at)){Jt=on[Kt];break}var Qt=Kr[Kr.length-1],_n=on[Qt],An=wn.level;if(!(Sn[Qt]&it)){for(var Rn=Qt+1;Rn<=wn.end;Rn++)if(!(Sn[Rn]&at)){An=on[Rn];break}}Qr.push({_seqIndices:Kr,_sosType:Math.max(Jt,kt)%2?Pt:bt,_eosType:Math.max(An,_n)%2?Pt:bt})}}for(var Pn=0;Pn<Qr.length;Pn++){var Dn=Qr[Pn],cn=Dn._seqIndices,Qn=Dn._sosType,Xn=Dn._eosType;if(Ft.get(Gt))for(var Jn=0;Jn<cn.length;Jn++){var ar=cn[Jn];if(Sn[ar]&Gt){for(var ur=Qn,or=Jn-1;or>=0;or--)if(!(Sn[cn[or]]&at)){ur=Sn[cn[or]];break}Dt(ar,ur&(it|dn)?Yt:ur)}}if(Ft.get(wt))for(var qn=0;qn<cn.length;qn++){var fr=cn[qn];if(Sn[fr]&wt)for(var rr=qn-1;rr>=-1;rr--){var gr=rr===-1?Qn:Sn[cn[rr]];if(gr&ot){gr===Xt&&Dt(fr,Ut);break}}}if(Ft.get(Xt))for(var Ir=0;Ir<cn.length;Ir++){var hr=cn[Ir];Sn[hr]&Xt&&Dt(hr,Pt)}if(Ft.get(Bt)||Ft.get(Nt))for(var Rr=1;Rr<cn.length-1;Rr++){var Pr=cn[Rr];if(Sn[Pr]&(Bt|Nt)){for(var Lr=0,Hr=0,pr=Rr-1;pr>=0&&(Lr=Sn[cn[pr]],!!(Lr&at));pr--);for(var $r=Rr+1;$r<cn.length&&(Hr=Sn[cn[$r]],!!(Hr&at));$r++);Lr===Hr&&(Sn[Pr]===Bt?Lr===wt:Lr&(wt|Ut))&&Dt(Pr,Lr)}}if(Ft.get(wt))for(var br=0;br<cn.length;br++){var wr=cn[br];if(Sn[wr]&wt){for(var kr=br-1;kr>=0&&Sn[cn[kr]]&(Ot|at);kr--)Dt(cn[kr],wt);for(var xo=br+1;xo<cn.length&&Sn[cn[xo]]&(Ot|at);xo++)Dt(cn[xo],wt)}}if(Ft.get(Ot)||Ft.get(Bt)||Ft.get(Nt))for(var Jr=0;Jr<cn.length;Jr++){var Mo=cn[Jr];if(Sn[Mo]&(Ot|Bt|Nt)){Dt(Mo,Yt);for(var Jo=Jr-1;Jo>=0&&Sn[cn[Jo]]&at;Jo--)Dt(cn[Jo],Yt);for(var Zo=Jr+1;Zo<cn.length&&Sn[cn[Zo]]&at;Zo++)Dt(cn[Zo],Yt)}}if(Ft.get(wt))for(var Qo=0,ys=Qn;Qo<cn.length;Qo++){var Bl=cn[Qo],js=Sn[Bl];js&wt?ys===bt&&Dt(Bl,bt):js&ot&&(ys=js)}if(Ft.get(st)){var qo=Pt|wt|Ut,Bs=qo|bt,Ho=[];{for(var as=[],Vo=0;Vo<cn.length;Vo++)if(Sn[cn[Vo]]&st){var Tr=yn[cn[Vo]],Xs=void 0;if(St(Tr)!==null)if(as.length<63)as.push({char:Tr,seqIndex:Vo});else break;else if((Xs=Tt(Tr))!==null)for(var es=as.length-1;es>=0;es--){var Ls=as[es].char;if(Ls===Xs||Ls===Tt(Mt(Tr))||St(Mt(Ls))===Tr){Ho.push([as[es].seqIndex,Vo]),as.length=es;break}}}Ho.sort(function(qr,oo){return qr[0]-oo[0]})}for(var Ks=0;Ks<Ho.length;Ks++){for(var Ll=Ho[Ks],Vr=Ll[0],ls=Ll[1],Il=!1,mo=0,Ys=Vr+1;Ys<ls;Ys++){var cs=cn[Ys];if(Sn[cs]&Bs){Il=!0;var Co=Sn[cs]&qo?Pt:bt;if(Co===jo(cs)){mo=Co;break}}}if(Il&&!mo){mo=Qn;for(var Js=Vr-1;Js>=0;Js--){var Is=cn[Js];if(Sn[Is]&Bs){var bo=Sn[Is]&qo?Pt:bt;bo!==jo(Is)?mo=bo:mo=jo(Is);break}}}if(mo){if(Sn[cn[Vr]]=Sn[cn[ls]]=mo,mo!==jo(cn[Vr])){for(var go=Vr+1;go<cn.length;go++)if(!(Sn[cn[go]]&at)){ht(yn[cn[go]])&Gt&&(Sn[cn[go]]=mo);break}}if(mo!==jo(cn[ls])){for(var Wo=ls+1;Wo<cn.length;Wo++)if(!(Sn[cn[Wo]]&at)){ht(yn[cn[Wo]])&Gt&&(Sn[cn[Wo]]=mo);break}}}}for(var Lo=0;Lo<cn.length;Lo++)if(Sn[cn[Lo]]&st){for(var Zs=Lo,Qs=Lo,Eo=Qn,_s=Lo-1;_s>=0;_s--)if(Sn[cn[_s]]&at)Zs=_s;else{Eo=Sn[cn[_s]]&qo?Pt:bt;break}for(var xs=Xn,Es=Lo+1;Es<cn.length;Es++)if(Sn[cn[Es]]&(st|at))Qs=Es;else{xs=Sn[cn[Es]]&qo?Pt:bt;break}for(var co=Zs;co<=Qs;co++)Sn[cn[co]]=Eo===xs?Eo:jo(cn[co]);Lo=Qs}}}for(var io=wn.start;io<=wn.end;io++){var Ds=on[io],$o=Sn[io];if(Ds&1?$o&(bt|wt|Ut)&&on[io]++:$o&Pt?on[io]++:$o&(Ut|wt)&&(on[io]+=2),$o&at&&(on[io]=io===0?wn.level:on[io-1]),io===wn.end||ht(yn[io])&(jt|zt))for(var us=io;us>=0&&ht(yn[us])&lt;us--)on[us]=wn.level}}return{levels:on,paragraphs:Mn};function Os(qr,oo){for(var Gr=qr;Gr<yn.length;Gr++){var to=Sn[Gr];if(to&(Pt|Xt))return 1;if(to&(zt|bt)||oo&&to===dn)return 0;if(to&it){var Go=Dl(Gr);Gr=Go===-1?yn.length:Go}}return 0}function Dl(qr){for(var oo=1,Gr=qr+1;Gr<yn.length;Gr++){var to=Sn[Gr];if(to&zt)break;if(to&dn){if(--oo===0)return Gr}else to&it&&oo++}return-1}function jo(qr){return on[qr]&1?Pt:bt}}var Nn="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",gn;function Ht(){if(!gn){var yn=yt(Nn,!0),Ln=yn.map,On=yn.reverseMap;On.forEach(function(Sn,jn){Ln.set(jn,Sn)}),gn=Ln}}function xn(yn){return Ht(),gn.get(yn)||null}function hn(yn,Ln,On,Sn){var jn=yn.length;On=Math.max(0,On==null?0:+On),Sn=Math.min(jn-1,Sn==null?jn-1:+Sn);for(var Ft=new Map,Dt=On;Dt<=Sn;Dt++)if(Ln[Dt]&1){var on=xn(yn[Dt]);on!==null&&Ft.set(Dt,on)}return Ft}function vn(yn,Ln,On,Sn){var jn=yn.length;On=Math.max(0,On==null?0:+On),Sn=Math.min(jn-1,Sn==null?jn-1:+Sn);var Ft=[];return Ln.paragraphs.forEach(function(Dt){var on=Math.max(On,Dt.start),bn=Math.min(Sn,Dt.end);if(on<bn){for(var Mn=Ln.levels.slice(on,bn+1),wn=bn;wn>=on&&ht(yn[wn])&lt;wn--)Mn[wn]=Dt.level;for(var $n=Dt.level,Gn=1/0,En=0;En<Mn.length;En++){var zn=Mn[En];zn>$n&&($n=zn),zn<Gn&&(Gn=zn|1)}for(var Vn=$n;Vn>=Gn;Vn--)for(var Un=0;Un<Mn.length;Un++)if(Mn[Un]>=Vn){for(var Fn=Un;Un+1<Mn.length&&Mn[Un+1]>=Vn;)Un++;Un>Fn&&Ft.push([Fn+On,Un+On])}}}),Ft}function pn(yn,Ln,On,Sn){var jn=Hn(yn,Ln,On,Sn),Ft=[].concat(yn);return jn.forEach(function(Dt,on){Ft[on]=(Ln.levels[Dt]&1?xn(yn[Dt]):null)||yn[Dt]}),Ft.join("")}function Hn(yn,Ln,On,Sn){for(var jn=vn(yn,Ln,On,Sn),Ft=[],Dt=0;Dt<yn.length;Dt++)Ft[Dt]=Dt;return jn.forEach(function(on){for(var bn=on[0],Mn=on[1],wn=Ft.slice(bn,Mn+1),$n=wn.length;$n--;)Ft[Mn-$n]=wn[$n]}),Ft}return _.closingToOpeningBracket=Tt,_.getBidiCharType=ht,_.getBidiCharTypeName=pt,_.getCanonicalBracket=Mt,_.getEmbeddingLevels=Bn,_.getMirroredCharacter=xn,_.getMirroredCharactersMap=hn,_.getReorderSegments=vn,_.getReorderedIndices=Hn,_.getReorderedString=pn,_.openingToClosingBracket=St,Object.defineProperty(_,"__esModule",{value:!0}),_}({});return tt}const voidMainRegExp=/\bvoid\s+main\s*\(\s*\)\s*{/g;function expandShaderIncludes(tt){const _=/^[ \t]*#include +<([\w\d./]+)>/gm;function _e(nt,rt){let it=ShaderChunk[rt];return it?expandShaderIncludes(it):nt}return tt.replace(_,_e)}const _lut=[];for(let tt=0;tt<256;tt++)_lut[tt]=(tt<16?"0":"")+tt.toString(16);function generateUUID(){const tt=Math.random()*4294967295|0,_=Math.random()*4294967295|0,_e=Math.random()*4294967295|0,nt=Math.random()*4294967295|0;return(_lut[tt&255]+_lut[tt>>8&255]+_lut[tt>>16&255]+_lut[tt>>24&255]+"-"+_lut[_&255]+_lut[_>>8&255]+"-"+_lut[_>>16&15|64]+_lut[_>>24&255]+"-"+_lut[_e&63|128]+_lut[_e>>8&255]+"-"+_lut[_e>>16&255]+_lut[_e>>24&255]+_lut[nt&255]+_lut[nt>>8&255]+_lut[nt>>16&255]+_lut[nt>>24&255]).toUpperCase()}const assign$3=Object.assign||function(){let tt=arguments[0];for(let _=1,_e=arguments.length;_<_e;_++){let nt=arguments[_];if(nt)for(let rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt},epoch=Date.now(),CONSTRUCTOR_CACHE=new WeakMap,SHADER_UPGRADE_CACHE=new Map;let materialInstanceId=1e10;function createDerivedMaterial(tt,_){const _e=getKeyForOptions(_);let nt=CONSTRUCTOR_CACHE.get(tt);if(nt||CONSTRUCTOR_CACHE.set(tt,nt=Object.create(null)),nt[_e])return new nt[_e];const rt=`_onBeforeCompile${_e}`,it=function(lt,ct){tt.onBeforeCompile.call(this,lt,ct);const ut=this.customProgramCacheKey()+"|"+lt.vertexShader+"|"+lt.fragmentShader;let ht=SHADER_UPGRADE_CACHE[ut];if(!ht){const pt=upgradeShaders(this,lt,_,_e);ht=SHADER_UPGRADE_CACHE[ut]=pt}lt.vertexShader=ht.vertexShader,lt.fragmentShader=ht.fragmentShader,assign$3(lt.uniforms,this.uniforms),_.timeUniform&&(lt.uniforms[_.timeUniform]={get value(){return Date.now()-epoch}}),this[rt]&&this[rt](lt)},ot=function(){return st(_.chained?tt:tt.clone())},st=function(lt){const ct=Object.create(lt,at);return Object.defineProperty(ct,"baseMaterial",{value:tt}),Object.defineProperty(ct,"id",{value:materialInstanceId++}),ct.uuid=generateUUID(),ct.uniforms=assign$3({},lt.uniforms,_.uniforms),ct.defines=assign$3({},lt.defines,_.defines),ct.defines[`TROIKA_DERIVED_MATERIAL_${_e}`]="",ct.extensions=assign$3({},lt.extensions,_.extensions),ct._listeners=void 0,ct},at={constructor:{value:ot},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return tt.customProgramCacheKey()+"|"+_e}},onBeforeCompile:{get(){return it},set(lt){this[rt]=lt}},copy:{writable:!0,configurable:!0,value:function(lt){return tt.copy.call(this,lt),!tt.isShaderMaterial&&!tt.isDerivedMaterial&&(assign$3(this.extensions,lt.extensions),assign$3(this.defines,lt.defines),assign$3(this.uniforms,UniformsUtils.clone(lt.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const lt=new tt.constructor;return st(lt).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let lt=this._depthMaterial;return lt||(lt=this._depthMaterial=createDerivedMaterial(tt.isDerivedMaterial?tt.getDepthMaterial():new MeshDepthMaterial({depthPacking:RGBADepthPacking}),_),lt.defines.IS_DEPTH_MATERIAL="",lt.uniforms=this.uniforms),lt}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let lt=this._distanceMaterial;return lt||(lt=this._distanceMaterial=createDerivedMaterial(tt.isDerivedMaterial?tt.getDistanceMaterial():new MeshDistanceMaterial,_),lt.defines.IS_DISTANCE_MATERIAL="",lt.uniforms=this.uniforms),lt}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:lt,_distanceMaterial:ct}=this;lt&&lt.dispose(),ct&&ct.dispose(),tt.dispose.call(this)}}};return nt[_e]=ot,new ot}function upgradeShaders(tt,{vertexShader:_,fragmentShader:_e},nt,rt){let{vertexDefs:it,vertexMainIntro:ot,vertexMainOutro:st,vertexTransform:at,fragmentDefs:lt,fragmentMainIntro:ct,fragmentMainOutro:ut,fragmentColorTransform:ht,customRewriter:pt,timeUniform:gt}=nt;if(it=it||"",ot=ot||"",st=st||"",lt=lt||"",ct=ct||"",ut=ut||"",(at||pt)&&(_=expandShaderIncludes(_)),(ht||pt)&&(_e=_e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),_e=expandShaderIncludes(_e)),pt){let yt=pt({vertexShader:_,fragmentShader:_e});_=yt.vertexShader,_e=yt.fragmentShader}if(ht){let yt=[];_e=_e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,vt=>(yt.push(vt),"")),ut=`${ht}
${yt.join(`
`)}
${ut}`}if(gt){const yt=`
uniform float ${gt};
`;it=yt+it,lt=yt+lt}return at&&(_=`vec3 troika_position_${rt};
vec3 troika_normal_${rt};
vec2 troika_uv_${rt};
${_}
`,it=`${it}
void troikaVertexTransform${rt}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${at}
}
`,ot=`
troika_position_${rt} = vec3(position);
troika_normal_${rt} = vec3(normal);
troika_uv_${rt} = vec2(uv);
troikaVertexTransform${rt}(troika_position_${rt}, troika_normal_${rt}, troika_uv_${rt});
${ot}
`,_=_.replace(/\b(position|normal|uv)\b/g,(yt,vt,mt,_t)=>/\battribute\s+vec[23]\s+$/.test(_t.substr(0,mt))?vt:`troika_${vt}_${rt}`),tt.map&&tt.map.channel>0||(_=_.replace(/\bMAP_UV\b/g,`troika_uv_${rt}`))),_=injectIntoShaderCode(_,rt,it,ot,st),_e=injectIntoShaderCode(_e,rt,lt,ct,ut),{vertexShader:_,fragmentShader:_e}}function injectIntoShaderCode(tt,_,_e,nt,rt){return(nt||rt||_e)&&(tt=tt.replace(voidMainRegExp,`
${_e}
void troikaOrigMain${_}() {`),tt+=`
void main() {
  ${nt}
  troikaOrigMain${_}();
  ${rt}
}`),tt}function optionsJsonReplacer(tt,_){return tt==="uniforms"?void 0:typeof _=="function"?_.toString():_}let _idCtr=0;const optionsHashesToIds=new Map;function getKeyForOptions(tt){const _=JSON.stringify(tt,optionsJsonReplacer);let _e=optionsHashesToIds.get(_);return _e==null&&optionsHashesToIds.set(_,_e=++_idCtr),_e}function createTypesetter(tt,_,_e){const{defaultFontURL:nt}=_e,rt=Object.create(null),it=1/0,ot=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,st="[^\\S\\u00A0]",at=new RegExp(`${st}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function lt(_t,xt){function St(){const Tt=Mt=>{console.error(`Failure loading font ${_t}${_t===nt?"":"; trying fallback"}`,Mt),_t!==nt&&(_t=nt,St())};try{const Mt=new XMLHttpRequest;Mt.open("get",_t,!0),Mt.responseType="arraybuffer",Mt.onload=function(){if(Mt.status>=400)Tt(new Error(Mt.statusText));else if(Mt.status>0)try{const bt=tt(Mt.response);xt(bt)}catch(bt){Tt(bt)}},Mt.onerror=Tt,Mt.send()}catch(Mt){Tt(Mt)}}St()}function ct(_t,xt){_t||(_t=nt);let St=rt[_t];St?St.pending?St.pending.push(xt):xt(St):(rt[_t]={pending:[xt]},lt(_t,Tt=>{let Mt=rt[_t].pending;rt[_t]=Tt,Mt.forEach(bt=>bt(Tt))}))}function ut({text:_t="",font:xt=nt,sdfGlyphSize:St=64,fontSize:Tt=1,letterSpacing:Mt=0,lineHeight:bt="normal",maxWidth:Pt=it,direction:wt,textAlign:Bt="left",textIndent:Ot=0,whiteSpace:Ut="normal",overflowWrap:Nt="normal",anchorX:zt=0,anchorY:jt=0,includeCaretPositions:Yt=!1,chunkedBoundsSize:qt=8192,colorRanges:Gt=null},Xt,Vt=!1){const Wt=yt(),$t={fontLoad:0,typesetting:0};_t.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),_t=_t.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),Tt=+Tt,Mt=+Mt,Pt=+Pt,bt=bt||"normal",Ot=+Ot,ct(xt,nn=>{const en=isFinite(Pt);let sn=null,rn=null,an=null,dn=null,Bn=null,Nn=null,gn=null,Ht=0,xn=0,hn=Ut!=="nowrap";const{ascender:vn,descender:pn,unitsPerEm:Hn,lineGap:yn,capHeight:Ln,xHeight:On}=nn;$t.fontLoad=yt()-Wt;const Sn=yt(),jn=Tt/Hn;bt==="normal"&&(bt=(vn-pn+yn)/Hn),bt=bt*Tt;const Ft=(bt-(vn-pn)*jn)/2,Dt=-(vn*jn+Ft),on=Math.min(bt,(vn-pn)*jn),bn=(vn+pn)/2*jn-on/2;let Mn=Ot,wn=new vt;const $n=[wn];nn.forEachGlyph(_t,Tt,Mt,(zn,Vn,Un)=>{const Fn=_t.charAt(Un),kn=zn.advanceWidth*jn,Yn=wn.count;let nr;if("isEmpty"in zn||(zn.isWhitespace=!!Fn&&new RegExp(st).test(Fn),zn.canBreakAfter=!!Fn&&at.test(Fn),zn.isEmpty=zn.xMin===zn.xMax||zn.yMin===zn.yMax||ot.test(Fn)),!zn.isWhitespace&&!zn.isEmpty&&xn++,hn&&en&&!zn.isWhitespace&&Vn+kn+Mn>Pt&&Yn){if(wn.glyphAt(Yn-1).glyphObj.canBreakAfter)nr=new vt,Mn=-Vn;else for(let fn=Yn;fn--;)if(fn===0&&Nt==="break-word"){nr=new vt,Mn=-Vn;break}else if(wn.glyphAt(fn).glyphObj.canBreakAfter){nr=wn.splitAt(fn+1);const mn=nr.glyphAt(0).x;Mn-=mn;for(let Wn=nr.count;Wn--;)nr.glyphAt(Wn).x-=mn;break}nr&&(wn.isSoftWrapped=!0,wn=nr,$n.push(wn),Ht=Pt)}let tn=wn.glyphAt(wn.count);tn.glyphObj=zn,tn.x=Vn+Mn,tn.width=kn,tn.charIndex=Un,Fn===`
`&&(wn=new vt,$n.push(wn),Mn=-(Vn+kn+Mt*Tt)+Ot)}),$n.forEach(zn=>{for(let Vn=zn.count;Vn--;){let{glyphObj:Un,x:Fn,width:kn}=zn.glyphAt(Vn);if(!Un.isWhitespace){zn.width=Fn+kn,zn.width>Ht&&(Ht=zn.width);return}}});let Gn=0,En=0;if(zt&&(typeof zt=="number"?Gn=-zt:typeof zt=="string"&&(Gn=-Ht*(zt==="left"?0:zt==="center"?.5:zt==="right"?1:pt(zt)))),jt){if(typeof jt=="number")En=-jt;else if(typeof jt=="string"){let zn=$n.length*bt;En=jt==="top"?0:jt==="top-baseline"?-Dt:jt==="top-cap"?-Dt-Ln*jn:jt==="top-ex"?-Dt-On*jn:jt==="middle"?zn/2:jt==="bottom"?zn:jt==="bottom-baseline"?zn-Ft+pn*jn:pt(jt)*zn}}if(!Vt){const zn=_.getEmbeddingLevels(_t,wt);sn=new Uint16Array(xn),rn=new Float32Array(xn*2),an={},Nn=[it,it,-it,-it],gn=[];let Vn=Dt;Yt&&(Bn=new Float32Array(_t.length*3)),Gt&&(dn=new Uint8Array(xn*3));let Un=0,Fn=-1,kn=-1,Yn,nr;if($n.forEach((tn,fn)=>{let{count:mn,width:Wn}=tn;if(mn>0){let Zn=0;for(let Mr=mn;Mr--&&tn.glyphAt(Mr).glyphObj.isWhitespace;)Zn++;let mr=0,xr=0;if(Bt==="center")mr=(Ht-Wn)/2;else if(Bt==="right")mr=Ht-Wn;else if(Bt==="justify"&&tn.isSoftWrapped){let Mr=0;for(let _r=mn-Zn;_r--;)tn.glyphAt(_r).glyphObj.isWhitespace&&Mr++;xr=(Ht-Wn)/Mr}if(xr||mr){let Mr=0;for(let _r=0;_r<mn;_r++){let ro=tn.glyphAt(_r);const Qr=ro.glyphObj;ro.x+=mr+Mr,xr!==0&&Qr.isWhitespace&&_r<mn-Zn&&(Mr+=xr,ro.width+=xr)}}const Ar=_.getReorderSegments(_t,zn,tn.glyphAt(0).charIndex,tn.glyphAt(tn.count-1).charIndex);for(let Mr=0;Mr<Ar.length;Mr++){const[_r,ro]=Ar[Mr];let Qr=1/0,Cr=-1/0;for(let Nr=0;Nr<mn;Nr++)if(tn.glyphAt(Nr).charIndex>=_r){let jr=Nr,Or=Nr;for(;Or<mn;Or++){let sr=tn.glyphAt(Or);if(sr.charIndex>ro)break;Or<mn-Zn&&(Qr=Math.min(Qr,sr.x),Cr=Math.max(Cr,sr.x+sr.width))}for(let sr=jr;sr<Or;sr++){const Kr=tn.glyphAt(sr);Kr.x=Cr-(Kr.x+Kr.width-Qr)}break}}let Br;const Dr=Mr=>Br=Mr;for(let Mr=0;Mr<mn;Mr++){let _r=tn.glyphAt(Mr);Br=_r.glyphObj;const ro=Br.index,Qr=zn.levels[_r.charIndex]&1;if(Qr){const Cr=_.getMirroredCharacter(_t[_r.charIndex]);Cr&&nn.forEachGlyph(Cr,0,0,Dr)}if(Yt){const{charIndex:Cr}=_r,Nr=_r.x+Gn,jr=_r.x+_r.width+Gn;Bn[Cr*3]=Qr?jr:Nr,Bn[Cr*3+1]=Qr?Nr:jr,Bn[Cr*3+2]=Vn+bn+En;const Or=Cr-Fn;Or>1&&gt(Bn,Fn,Or),Fn=Cr}if(Gt){const{charIndex:Cr}=_r;for(;Cr>kn;)kn++,Gt.hasOwnProperty(kn)&&(nr=Gt[kn])}if(!Br.isWhitespace&&!Br.isEmpty){const Cr=Un++;an[ro]||(an[ro]={path:Br.path,pathBounds:[Br.xMin,Br.yMin,Br.xMax,Br.yMax]});const Nr=_r.x+Gn,jr=Vn+En;rn[Cr*2]=Nr,rn[Cr*2+1]=jr;const Or=Nr+Br.xMin*jn,sr=jr+Br.yMin*jn,Kr=Nr+Br.xMax*jn,_o=jr+Br.yMax*jn;Or<Nn[0]&&(Nn[0]=Or),sr<Nn[1]&&(Nn[1]=sr),Kr>Nn[2]&&(Nn[2]=Kr),_o>Nn[3]&&(Nn[3]=_o),Cr%qt===0&&(Yn={start:Cr,end:Cr,rect:[it,it,-it,-it]},gn.push(Yn)),Yn.end++;const It=Yn.rect;if(Or<It[0]&&(It[0]=Or),sr<It[1]&&(It[1]=sr),Kr>It[2]&&(It[2]=Kr),_o>It[3]&&(It[3]=_o),sn[Cr]=ro,Gt){const Rt=Cr*3;dn[Rt]=nr>>16&255,dn[Rt+1]=nr>>8&255,dn[Rt+2]=nr&255}}}}Vn-=bt}),Bn){const tn=_t.length-Fn;tn>1&&gt(Bn,Fn,tn)}}$t.typesetting=yt()-Sn,Xt({glyphIds:sn,glyphPositions:rn,glyphData:an,caretPositions:Bn,caretHeight:on,glyphColors:dn,chunkedBounds:gn,fontSize:Tt,unitsPerEm:Hn,ascender:vn*jn,descender:pn*jn,capHeight:Ln*jn,xHeight:On*jn,lineHeight:bt,topBaseline:Dt,blockBounds:[Gn,En-$n.length*bt,Gn+Ht,En],visibleBounds:Nn,timings:$t})})}function ht(_t,xt){ut(_t,St=>{const[Tt,Mt,bt,Pt]=St.blockBounds;xt({width:bt-Tt,height:Pt-Mt})},{metricsOnly:!0})}function pt(_t){let xt=_t.match(/^([\d.]+)%$/),St=xt?parseFloat(xt[1]):NaN;return isNaN(St)?0:St/100}function gt(_t,xt,St){const Tt=_t[xt*3],Mt=_t[xt*3+1],bt=_t[xt*3+2],Pt=(Mt-Tt)/St;for(let wt=0;wt<St;wt++){const Bt=(xt+wt)*3;_t[Bt]=Tt+Pt*wt,_t[Bt+1]=Tt+Pt*(wt+1),_t[Bt+2]=bt}}function yt(){return(self.performance||Date).now()}function vt(){this.data=[]}const mt=["glyphObj","x","width","charIndex"];return vt.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/mt.length)},glyphAt(_t){let xt=vt.flyweight;return xt.data=this.data,xt.index=_t,xt},splitAt(_t){let xt=new vt;return xt.data=this.data.splice(_t*mt.length),xt}},vt.flyweight=mt.reduce((_t,xt,St,Tt)=>(Object.defineProperty(_t,xt,{get(){return this.data[this.index*mt.length+St]},set(Mt){this.data[this.index*mt.length+St]=Mt}}),_t),{data:null,index:0}),{typeset:ut,measure:ht,loadFont:ct}}const now=()=>(self.performance||Date).now(),mainThreadGenerator=SDFGenerator();let warned;function generateSDF(tt,_,_e,nt,rt,it,ot,st,at,lt,ct=!0){return ct?generateSDF_GL(tt,_,_e,nt,rt,it,ot,st,at,lt).then(null,ut=>(warned||(console.warn("WebGL SDF generation failed, falling back to JS",ut),warned=!0),generateSDF_JS_Worker(tt,_,_e,nt,rt,it,ot,st,at,lt))):generateSDF_JS_Worker(tt,_,_e,nt,rt,it,ot,st,at,lt)}const queue=[],chunkTimeBudget=5;let timer=0;function nextChunk(){const tt=now();for(;queue.length&&now()-tt<chunkTimeBudget;)queue.shift()();timer=queue.length?setTimeout(nextChunk,0):0}const generateSDF_GL=(...tt)=>new Promise((_,_e)=>{queue.push(()=>{const nt=now();try{mainThreadGenerator.webgl.generateIntoCanvas(...tt),_({timing:now()-nt})}catch(rt){_e(rt)}}),timer||(timer=setTimeout(nextChunk,0))}),threadCount=4,idleTimeout=2e3,threads={};let callNum=0;function generateSDF_JS_Worker(tt,_,_e,nt,rt,it,ot,st,at,lt){const ct="TroikaTextSDFGenerator_JS_"+callNum++%threadCount;let ut=threads[ct];return ut||(ut=threads[ct]={workerModule:defineWorkerModule({name:ct,workerId:ct,dependencies:[SDFGenerator,now],init(ht,pt){const gt=ht().javascript.generate;return function(...yt){const vt=pt();return{textureData:gt(...yt),timing:pt()-vt}}},getTransferables(ht){return[ht.textureData.buffer]}}),requests:0,idleTimer:null}),ut.requests++,clearTimeout(ut.idleTimer),ut.workerModule(tt,_,_e,nt,rt,it).then(({textureData:ht,timing:pt})=>{const gt=now(),yt=new Uint8Array(ht.length*4);for(let vt=0;vt<ht.length;vt++)yt[vt*4+lt]=ht[vt];return mainThreadGenerator.webglUtils.renderImageData(ot,yt,st,at,tt,_,1<<3-lt),pt+=now()-gt,--ut.requests===0&&(ut.idleTimer=setTimeout(()=>{terminateWorker(ct)},idleTimeout)),{timing:pt}})}function warmUpSDFCanvas(tt){tt._warm||(mainThreadGenerator.webgl.isSupported(tt),tt._warm=!0)}const resizeWebGLCanvasWithoutClearing=mainThreadGenerator.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function typrFactory(){return typeof window>"u"&&(self.window=self),function(tt){var _={parse:function(rt){var it=_._bin,ot=new Uint8Array(rt);if(it.readASCII(ot,0,4)=="ttcf"){var st=4;it.readUshort(ot,st),st+=2,it.readUshort(ot,st),st+=2;var at=it.readUint(ot,st);st+=4;for(var lt=[],ct=0;ct<at;ct++){var ut=it.readUint(ot,st);st+=4,lt.push(_._readFont(ot,ut))}return lt}return[_._readFont(ot,0)]},_readFont:function(rt,it){var ot=_._bin,st=it;ot.readFixed(rt,it),it+=4;var at=ot.readUshort(rt,it);it+=2,ot.readUshort(rt,it),it+=2,ot.readUshort(rt,it),it+=2,ot.readUshort(rt,it),it+=2;for(var lt=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],ct={_data:rt,_offset:st},ut={},ht=0;ht<at;ht++){var pt=ot.readASCII(rt,it,4);it+=4,ot.readUint(rt,it),it+=4;var gt=ot.readUint(rt,it);it+=4;var yt=ot.readUint(rt,it);it+=4,ut[pt]={offset:gt,length:yt}}for(ht=0;ht<lt.length;ht++){var vt=lt[ht];ut[vt]&&(ct[vt.trim()]=_[vt.trim()].parse(rt,ut[vt].offset,ut[vt].length,ct))}return ct},_tabOffset:function(rt,it,ot){for(var st=_._bin,at=st.readUshort(rt,ot+4),lt=ot+12,ct=0;ct<at;ct++){var ut=st.readASCII(rt,lt,4);lt+=4,st.readUint(rt,lt),lt+=4;var ht=st.readUint(rt,lt);if(lt+=4,st.readUint(rt,lt),lt+=4,ut==it)return ht}return 0}};_._bin={readFixed:function(rt,it){return(rt[it]<<8|rt[it+1])+(rt[it+2]<<8|rt[it+3])/65540},readF2dot14:function(rt,it){return _._bin.readShort(rt,it)/16384},readInt:function(rt,it){return _._bin._view(rt).getInt32(it)},readInt8:function(rt,it){return _._bin._view(rt).getInt8(it)},readShort:function(rt,it){return _._bin._view(rt).getInt16(it)},readUshort:function(rt,it){return _._bin._view(rt).getUint16(it)},readUshorts:function(rt,it,ot){for(var st=[],at=0;at<ot;at++)st.push(_._bin.readUshort(rt,it+2*at));return st},readUint:function(rt,it){return _._bin._view(rt).getUint32(it)},readUint64:function(rt,it){return 4294967296*_._bin.readUint(rt,it)+_._bin.readUint(rt,it+4)},readASCII:function(rt,it,ot){for(var st="",at=0;at<ot;at++)st+=String.fromCharCode(rt[it+at]);return st},readUnicode:function(rt,it,ot){for(var st="",at=0;at<ot;at++){var lt=rt[it++]<<8|rt[it++];st+=String.fromCharCode(lt)}return st},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(rt,it,ot){var st=_._bin._tdec;return st&&it==0&&ot==rt.length?st.decode(rt):_._bin.readASCII(rt,it,ot)},readBytes:function(rt,it,ot){for(var st=[],at=0;at<ot;at++)st.push(rt[it+at]);return st},readASCIIArray:function(rt,it,ot){for(var st=[],at=0;at<ot;at++)st.push(String.fromCharCode(rt[it+at]));return st},_view:function(rt){return rt._dataView||(rt._dataView=rt.buffer?new DataView(rt.buffer,rt.byteOffset,rt.byteLength):new DataView(new Uint8Array(rt).buffer))}},_._lctf={},_._lctf.parse=function(rt,it,ot,st,at){var lt=_._bin,ct={},ut=it;lt.readFixed(rt,it),it+=4;var ht=lt.readUshort(rt,it);it+=2;var pt=lt.readUshort(rt,it);it+=2;var gt=lt.readUshort(rt,it);return it+=2,ct.scriptList=_._lctf.readScriptList(rt,ut+ht),ct.featureList=_._lctf.readFeatureList(rt,ut+pt),ct.lookupList=_._lctf.readLookupList(rt,ut+gt,at),ct},_._lctf.readLookupList=function(rt,it,ot){var st=_._bin,at=it,lt=[],ct=st.readUshort(rt,it);it+=2;for(var ut=0;ut<ct;ut++){var ht=st.readUshort(rt,it);it+=2;var pt=_._lctf.readLookupTable(rt,at+ht,ot);lt.push(pt)}return lt},_._lctf.readLookupTable=function(rt,it,ot){var st=_._bin,at=it,lt={tabs:[]};lt.ltype=st.readUshort(rt,it),it+=2,lt.flag=st.readUshort(rt,it),it+=2;var ct=st.readUshort(rt,it);it+=2;for(var ut=lt.ltype,ht=0;ht<ct;ht++){var pt=st.readUshort(rt,it);it+=2;var gt=ot(rt,ut,at+pt,lt);lt.tabs.push(gt)}return lt},_._lctf.numOfOnes=function(rt){for(var it=0,ot=0;ot<32;ot++)rt>>>ot&1&&it++;return it},_._lctf.readClassDef=function(rt,it){var ot=_._bin,st=[],at=ot.readUshort(rt,it);if(it+=2,at==1){var lt=ot.readUshort(rt,it);it+=2;var ct=ot.readUshort(rt,it);it+=2;for(var ut=0;ut<ct;ut++)st.push(lt+ut),st.push(lt+ut),st.push(ot.readUshort(rt,it)),it+=2}if(at==2){var ht=ot.readUshort(rt,it);for(it+=2,ut=0;ut<ht;ut++)st.push(ot.readUshort(rt,it)),it+=2,st.push(ot.readUshort(rt,it)),it+=2,st.push(ot.readUshort(rt,it)),it+=2}return st},_._lctf.getInterval=function(rt,it){for(var ot=0;ot<rt.length;ot+=3){var st=rt[ot],at=rt[ot+1];if(rt[ot+2],st<=it&&it<=at)return ot}return-1},_._lctf.readCoverage=function(rt,it){var ot=_._bin,st={};st.fmt=ot.readUshort(rt,it),it+=2;var at=ot.readUshort(rt,it);return it+=2,st.fmt==1&&(st.tab=ot.readUshorts(rt,it,at)),st.fmt==2&&(st.tab=ot.readUshorts(rt,it,3*at)),st},_._lctf.coverageIndex=function(rt,it){var ot=rt.tab;if(rt.fmt==1)return ot.indexOf(it);if(rt.fmt==2){var st=_._lctf.getInterval(ot,it);if(st!=-1)return ot[st+2]+(it-ot[st])}return-1},_._lctf.readFeatureList=function(rt,it){var ot=_._bin,st=it,at=[],lt=ot.readUshort(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=ot.readASCII(rt,it,4);it+=4;var ht=ot.readUshort(rt,it);it+=2;var pt=_._lctf.readFeatureTable(rt,st+ht);pt.tag=ut.trim(),at.push(pt)}return at},_._lctf.readFeatureTable=function(rt,it){var ot=_._bin,st=it,at={},lt=ot.readUshort(rt,it);it+=2,lt>0&&(at.featureParams=st+lt);var ct=ot.readUshort(rt,it);it+=2,at.tab=[];for(var ut=0;ut<ct;ut++)at.tab.push(ot.readUshort(rt,it+2*ut));return at},_._lctf.readScriptList=function(rt,it){var ot=_._bin,st=it,at={},lt=ot.readUshort(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=ot.readASCII(rt,it,4);it+=4;var ht=ot.readUshort(rt,it);it+=2,at[ut.trim()]=_._lctf.readScriptTable(rt,st+ht)}return at},_._lctf.readScriptTable=function(rt,it){var ot=_._bin,st=it,at={},lt=ot.readUshort(rt,it);it+=2,at.default=_._lctf.readLangSysTable(rt,st+lt);var ct=ot.readUshort(rt,it);it+=2;for(var ut=0;ut<ct;ut++){var ht=ot.readASCII(rt,it,4);it+=4;var pt=ot.readUshort(rt,it);it+=2,at[ht.trim()]=_._lctf.readLangSysTable(rt,st+pt)}return at},_._lctf.readLangSysTable=function(rt,it){var ot=_._bin,st={};ot.readUshort(rt,it),it+=2,st.reqFeature=ot.readUshort(rt,it),it+=2;var at=ot.readUshort(rt,it);return it+=2,st.features=ot.readUshorts(rt,it,at),st},_.CFF={},_.CFF.parse=function(rt,it,ot){var st=_._bin;(rt=new Uint8Array(rt.buffer,it,ot))[it=0],rt[++it],rt[++it],rt[++it],it++;var at=[];it=_.CFF.readIndex(rt,it,at);for(var lt=[],ct=0;ct<at.length-1;ct++)lt.push(st.readASCII(rt,it+at[ct],at[ct+1]-at[ct]));it+=at[at.length-1];var ut=[];it=_.CFF.readIndex(rt,it,ut);var ht=[];for(ct=0;ct<ut.length-1;ct++)ht.push(_.CFF.readDict(rt,it+ut[ct],it+ut[ct+1]));it+=ut[ut.length-1];var pt=ht[0],gt=[];it=_.CFF.readIndex(rt,it,gt);var yt=[];for(ct=0;ct<gt.length-1;ct++)yt.push(st.readASCII(rt,it+gt[ct],gt[ct+1]-gt[ct]));if(it+=gt[gt.length-1],_.CFF.readSubrs(rt,it,pt),pt.CharStrings){it=pt.CharStrings,gt=[],it=_.CFF.readIndex(rt,it,gt);var vt=[];for(ct=0;ct<gt.length-1;ct++)vt.push(st.readBytes(rt,it+gt[ct],gt[ct+1]-gt[ct]));pt.CharStrings=vt}if(pt.ROS){it=pt.FDArray;var mt=[];for(it=_.CFF.readIndex(rt,it,mt),pt.FDArray=[],ct=0;ct<mt.length-1;ct++){var _t=_.CFF.readDict(rt,it+mt[ct],it+mt[ct+1]);_.CFF._readFDict(rt,_t,yt),pt.FDArray.push(_t)}it+=mt[mt.length-1],it=pt.FDSelect,pt.FDSelect=[];var xt=rt[it];if(it++,xt!=3)throw xt;var St=st.readUshort(rt,it);for(it+=2,ct=0;ct<St+1;ct++)pt.FDSelect.push(st.readUshort(rt,it),rt[it+2]),it+=3}return pt.Encoding&&(pt.Encoding=_.CFF.readEncoding(rt,pt.Encoding,pt.CharStrings.length)),pt.charset&&(pt.charset=_.CFF.readCharset(rt,pt.charset,pt.CharStrings.length)),_.CFF._readFDict(rt,pt,yt),pt},_.CFF._readFDict=function(rt,it,ot){var st;for(var at in it.Private&&(st=it.Private[1],it.Private=_.CFF.readDict(rt,st,st+it.Private[0]),it.Private.Subrs&&_.CFF.readSubrs(rt,st+it.Private.Subrs,it.Private)),it)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(at)!=-1&&(it[at]=ot[it[at]-426+35])},_.CFF.readSubrs=function(rt,it,ot){var st=_._bin,at=[];it=_.CFF.readIndex(rt,it,at);var lt,ct=at.length;lt=ct<1240?107:ct<33900?1131:32768,ot.Bias=lt,ot.Subrs=[];for(var ut=0;ut<at.length-1;ut++)ot.Subrs.push(st.readBytes(rt,it+at[ut],at[ut+1]-at[ut]))},_.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],_.CFF.glyphByUnicode=function(rt,it){for(var ot=0;ot<rt.charset.length;ot++)if(rt.charset[ot]==it)return ot;return-1},_.CFF.glyphBySE=function(rt,it){return it<0||it>255?-1:_.CFF.glyphByUnicode(rt,_.CFF.tableSE[it])},_.CFF.readEncoding=function(rt,it,ot){_._bin;var st=[".notdef"],at=rt[it];if(it++,at!=0)throw"error: unknown encoding format: "+at;var lt=rt[it];it++;for(var ct=0;ct<lt;ct++)st.push(rt[it+ct]);return st},_.CFF.readCharset=function(rt,it,ot){var st=_._bin,at=[".notdef"],lt=rt[it];if(it++,lt==0)for(var ct=0;ct<ot;ct++){var ut=st.readUshort(rt,it);it+=2,at.push(ut)}else{if(lt!=1&&lt!=2)throw"error: format: "+lt;for(;at.length<ot;){ut=st.readUshort(rt,it),it+=2;var ht=0;for(lt==1?(ht=rt[it],it++):(ht=st.readUshort(rt,it),it+=2),ct=0;ct<=ht;ct++)at.push(ut),ut++}}return at},_.CFF.readIndex=function(rt,it,ot){var st=_._bin,at=st.readUshort(rt,it)+1,lt=rt[it+=2];if(it++,lt==1)for(var ct=0;ct<at;ct++)ot.push(rt[it+ct]);else if(lt==2)for(ct=0;ct<at;ct++)ot.push(st.readUshort(rt,it+2*ct));else if(lt==3)for(ct=0;ct<at;ct++)ot.push(16777215&st.readUint(rt,it+3*ct-1));else if(at!=1)throw"unsupported offset size: "+lt+", count: "+at;return(it+=at*lt)-1},_.CFF.getCharString=function(rt,it,ot){var st=_._bin,at=rt[it],lt=rt[it+1];rt[it+2],rt[it+3],rt[it+4];var ct=1,ut=null,ht=null;at<=20&&(ut=at,ct=1),at==12&&(ut=100*at+lt,ct=2),21<=at&&at<=27&&(ut=at,ct=1),at==28&&(ht=st.readShort(rt,it+1),ct=3),29<=at&&at<=31&&(ut=at,ct=1),32<=at&&at<=246&&(ht=at-139,ct=1),247<=at&&at<=250&&(ht=256*(at-247)+lt+108,ct=2),251<=at&&at<=254&&(ht=256*-(at-251)-lt-108,ct=2),at==255&&(ht=st.readInt(rt,it+1)/65535,ct=5),ot.val=ht??"o"+ut,ot.size=ct},_.CFF.readCharString=function(rt,it,ot){for(var st=it+ot,at=_._bin,lt=[];it<st;){var ct=rt[it],ut=rt[it+1];rt[it+2],rt[it+3],rt[it+4];var ht=1,pt=null,gt=null;ct<=20&&(pt=ct,ht=1),ct==12&&(pt=100*ct+ut,ht=2),ct!=19&&ct!=20||(pt=ct,ht=2),21<=ct&&ct<=27&&(pt=ct,ht=1),ct==28&&(gt=at.readShort(rt,it+1),ht=3),29<=ct&&ct<=31&&(pt=ct,ht=1),32<=ct&&ct<=246&&(gt=ct-139,ht=1),247<=ct&&ct<=250&&(gt=256*(ct-247)+ut+108,ht=2),251<=ct&&ct<=254&&(gt=256*-(ct-251)-ut-108,ht=2),ct==255&&(gt=at.readInt(rt,it+1)/65535,ht=5),lt.push(gt??"o"+pt),it+=ht}return lt},_.CFF.readDict=function(rt,it,ot){for(var st=_._bin,at={},lt=[];it<ot;){var ct=rt[it],ut=rt[it+1];rt[it+2],rt[it+3],rt[it+4];var ht=1,pt=null,gt=null;if(ct==28&&(gt=st.readShort(rt,it+1),ht=3),ct==29&&(gt=st.readInt(rt,it+1),ht=5),32<=ct&&ct<=246&&(gt=ct-139,ht=1),247<=ct&&ct<=250&&(gt=256*(ct-247)+ut+108,ht=2),251<=ct&&ct<=254&&(gt=256*-(ct-251)-ut-108,ht=2),ct==255)throw gt=st.readInt(rt,it+1)/65535,ht=5,"unknown number";if(ct==30){var yt=[];for(ht=1;;){var vt=rt[it+ht];ht++;var mt=vt>>4,_t=15&vt;if(mt!=15&&yt.push(mt),_t!=15&&yt.push(_t),_t==15)break}for(var xt="",St=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],Tt=0;Tt<yt.length;Tt++)xt+=St[yt[Tt]];gt=parseFloat(xt)}ct<=21&&(pt=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][ct],ht=1,ct==12&&(pt=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][ut],ht=2)),pt!=null?(at[pt]=lt.length==1?lt[0]:lt,lt=[]):lt.push(gt),it+=ht}return at},_.cmap={},_.cmap.parse=function(rt,it,ot){rt=new Uint8Array(rt.buffer,it,ot),it=0;var st=_._bin,at={};st.readUshort(rt,it),it+=2;var lt=st.readUshort(rt,it);it+=2;var ct=[];at.tables=[];for(var ut=0;ut<lt;ut++){var ht=st.readUshort(rt,it);it+=2;var pt=st.readUshort(rt,it);it+=2;var gt=st.readUint(rt,it);it+=4;var yt="p"+ht+"e"+pt,vt=ct.indexOf(gt);if(vt==-1){var mt;vt=at.tables.length,ct.push(gt);var _t=st.readUshort(rt,gt);_t==0?mt=_.cmap.parse0(rt,gt):_t==4?mt=_.cmap.parse4(rt,gt):_t==6?mt=_.cmap.parse6(rt,gt):_t==12?mt=_.cmap.parse12(rt,gt):console.debug("unknown format: "+_t,ht,pt,gt),at.tables.push(mt)}if(at[yt]!=null)throw"multiple tables for one platform+encoding";at[yt]=vt}return at},_.cmap.parse0=function(rt,it){var ot=_._bin,st={};st.format=ot.readUshort(rt,it),it+=2;var at=ot.readUshort(rt,it);it+=2,ot.readUshort(rt,it),it+=2,st.map=[];for(var lt=0;lt<at-6;lt++)st.map.push(rt[it+lt]);return st},_.cmap.parse4=function(rt,it){var ot=_._bin,st=it,at={};at.format=ot.readUshort(rt,it),it+=2;var lt=ot.readUshort(rt,it);it+=2,ot.readUshort(rt,it),it+=2;var ct=ot.readUshort(rt,it);it+=2;var ut=ct/2;at.searchRange=ot.readUshort(rt,it),it+=2,at.entrySelector=ot.readUshort(rt,it),it+=2,at.rangeShift=ot.readUshort(rt,it),it+=2,at.endCount=ot.readUshorts(rt,it,ut),it+=2*ut,it+=2,at.startCount=ot.readUshorts(rt,it,ut),it+=2*ut,at.idDelta=[];for(var ht=0;ht<ut;ht++)at.idDelta.push(ot.readShort(rt,it)),it+=2;for(at.idRangeOffset=ot.readUshorts(rt,it,ut),it+=2*ut,at.glyphIdArray=[];it<st+lt;)at.glyphIdArray.push(ot.readUshort(rt,it)),it+=2;return at},_.cmap.parse6=function(rt,it){var ot=_._bin,st={};st.format=ot.readUshort(rt,it),it+=2,ot.readUshort(rt,it),it+=2,ot.readUshort(rt,it),it+=2,st.firstCode=ot.readUshort(rt,it),it+=2;var at=ot.readUshort(rt,it);it+=2,st.glyphIdArray=[];for(var lt=0;lt<at;lt++)st.glyphIdArray.push(ot.readUshort(rt,it)),it+=2;return st},_.cmap.parse12=function(rt,it){var ot=_._bin,st={};st.format=ot.readUshort(rt,it),it+=2,it+=2,ot.readUint(rt,it),it+=4,ot.readUint(rt,it),it+=4;var at=ot.readUint(rt,it);it+=4,st.groups=[];for(var lt=0;lt<at;lt++){var ct=it+12*lt,ut=ot.readUint(rt,ct+0),ht=ot.readUint(rt,ct+4),pt=ot.readUint(rt,ct+8);st.groups.push([ut,ht,pt])}return st},_.glyf={},_.glyf.parse=function(rt,it,ot,st){for(var at=[],lt=0;lt<st.maxp.numGlyphs;lt++)at.push(null);return at},_.glyf._parseGlyf=function(rt,it){var ot=_._bin,st=rt._data,at=_._tabOffset(st,"glyf",rt._offset)+rt.loca[it];if(rt.loca[it]==rt.loca[it+1])return null;var lt={};if(lt.noc=ot.readShort(st,at),at+=2,lt.xMin=ot.readShort(st,at),at+=2,lt.yMin=ot.readShort(st,at),at+=2,lt.xMax=ot.readShort(st,at),at+=2,lt.yMax=ot.readShort(st,at),at+=2,lt.xMin>=lt.xMax||lt.yMin>=lt.yMax)return null;if(lt.noc>0){lt.endPts=[];for(var ct=0;ct<lt.noc;ct++)lt.endPts.push(ot.readUshort(st,at)),at+=2;var ut=ot.readUshort(st,at);if(at+=2,st.length-at<ut)return null;lt.instructions=ot.readBytes(st,at,ut),at+=ut;var ht=lt.endPts[lt.noc-1]+1;for(lt.flags=[],ct=0;ct<ht;ct++){var pt=st[at];if(at++,lt.flags.push(pt),(8&pt)!=0){var gt=st[at];at++;for(var yt=0;yt<gt;yt++)lt.flags.push(pt),ct++}}for(lt.xs=[],ct=0;ct<ht;ct++){var vt=(2&lt.flags[ct])!=0,mt=(16&lt.flags[ct])!=0;vt?(lt.xs.push(mt?st[at]:-st[at]),at++):mt?lt.xs.push(0):(lt.xs.push(ot.readShort(st,at)),at+=2)}for(lt.ys=[],ct=0;ct<ht;ct++)vt=(4&lt.flags[ct])!=0,mt=(32&lt.flags[ct])!=0,vt?(lt.ys.push(mt?st[at]:-st[at]),at++):mt?lt.ys.push(0):(lt.ys.push(ot.readShort(st,at)),at+=2);var _t=0,xt=0;for(ct=0;ct<ht;ct++)_t+=lt.xs[ct],xt+=lt.ys[ct],lt.xs[ct]=_t,lt.ys[ct]=xt}else{var St;lt.parts=[];do{St=ot.readUshort(st,at),at+=2;var Tt={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(lt.parts.push(Tt),Tt.glyphIndex=ot.readUshort(st,at),at+=2,1&St){var Mt=ot.readShort(st,at);at+=2;var bt=ot.readShort(st,at);at+=2}else Mt=ot.readInt8(st,at),at++,bt=ot.readInt8(st,at),at++;2&St?(Tt.m.tx=Mt,Tt.m.ty=bt):(Tt.p1=Mt,Tt.p2=bt),8&St?(Tt.m.a=Tt.m.d=ot.readF2dot14(st,at),at+=2):64&St?(Tt.m.a=ot.readF2dot14(st,at),at+=2,Tt.m.d=ot.readF2dot14(st,at),at+=2):128&St&&(Tt.m.a=ot.readF2dot14(st,at),at+=2,Tt.m.b=ot.readF2dot14(st,at),at+=2,Tt.m.c=ot.readF2dot14(st,at),at+=2,Tt.m.d=ot.readF2dot14(st,at),at+=2)}while(32&St);if(256&St){var Pt=ot.readUshort(st,at);for(at+=2,lt.instr=[],ct=0;ct<Pt;ct++)lt.instr.push(st[at]),at++}}return lt},_.GPOS={},_.GPOS.parse=function(rt,it,ot,st){return _._lctf.parse(rt,it,ot,st,_.GPOS.subt)},_.GPOS.subt=function(rt,it,ot,st){var at=_._bin,lt=ot,ct={};if(ct.fmt=at.readUshort(rt,ot),ot+=2,it==1||it==2||it==3||it==7||it==8&&ct.fmt<=2){var ut=at.readUshort(rt,ot);ot+=2,ct.coverage=_._lctf.readCoverage(rt,ut+lt)}if(it==1&&ct.fmt==1){var ht=at.readUshort(rt,ot);ot+=2;var pt=_._lctf.numOfOnes(ht);ht!=0&&(ct.pos=_.GPOS.readValueRecord(rt,ot,ht))}else if(it==2&&ct.fmt>=1&&ct.fmt<=2){ht=at.readUshort(rt,ot),ot+=2;var gt=at.readUshort(rt,ot);ot+=2,pt=_._lctf.numOfOnes(ht);var yt=_._lctf.numOfOnes(gt);if(ct.fmt==1){ct.pairsets=[];var vt=at.readUshort(rt,ot);ot+=2;for(var mt=0;mt<vt;mt++){var _t=lt+at.readUshort(rt,ot);ot+=2;var xt=at.readUshort(rt,_t);_t+=2;for(var St=[],Tt=0;Tt<xt;Tt++){var Mt=at.readUshort(rt,_t);_t+=2,ht!=0&&(Ut=_.GPOS.readValueRecord(rt,_t,ht),_t+=2*pt),gt!=0&&(Nt=_.GPOS.readValueRecord(rt,_t,gt),_t+=2*yt),St.push({gid2:Mt,val1:Ut,val2:Nt})}ct.pairsets.push(St)}}if(ct.fmt==2){var bt=at.readUshort(rt,ot);ot+=2;var Pt=at.readUshort(rt,ot);ot+=2;var wt=at.readUshort(rt,ot);ot+=2;var Bt=at.readUshort(rt,ot);for(ot+=2,ct.classDef1=_._lctf.readClassDef(rt,lt+bt),ct.classDef2=_._lctf.readClassDef(rt,lt+Pt),ct.matrix=[],mt=0;mt<wt;mt++){var Ot=[];for(Tt=0;Tt<Bt;Tt++){var Ut=null,Nt=null;ht!=0&&(Ut=_.GPOS.readValueRecord(rt,ot,ht),ot+=2*pt),gt!=0&&(Nt=_.GPOS.readValueRecord(rt,ot,gt),ot+=2*yt),Ot.push({val1:Ut,val2:Nt})}ct.matrix.push(Ot)}}}else{if(it==9&&ct.fmt==1){var zt=at.readUshort(rt,ot);ot+=2;var jt=at.readUint(rt,ot);if(ot+=4,st.ltype==9)st.ltype=zt;else if(st.ltype!=zt)throw"invalid extension substitution";return _.GPOS.subt(rt,st.ltype,lt+jt)}console.debug("unsupported GPOS table LookupType",it,"format",ct.fmt)}return ct},_.GPOS.readValueRecord=function(rt,it,ot){var st=_._bin,at=[];return at.push(1&ot?st.readShort(rt,it):0),it+=1&ot?2:0,at.push(2&ot?st.readShort(rt,it):0),it+=2&ot?2:0,at.push(4&ot?st.readShort(rt,it):0),it+=4&ot?2:0,at.push(8&ot?st.readShort(rt,it):0),it+=8&ot?2:0,at},_.GSUB={},_.GSUB.parse=function(rt,it,ot,st){return _._lctf.parse(rt,it,ot,st,_.GSUB.subt)},_.GSUB.subt=function(rt,it,ot,st){var at=_._bin,lt=ot,ct={};if(ct.fmt=at.readUshort(rt,ot),ot+=2,it!=1&&it!=4&&it!=5&&it!=6)return null;if(it==1||it==4||it==5&&ct.fmt<=2||it==6&&ct.fmt<=2){var ut=at.readUshort(rt,ot);ot+=2,ct.coverage=_._lctf.readCoverage(rt,lt+ut)}if(it==1&&ct.fmt>=1&&ct.fmt<=2){if(ct.fmt==1)ct.delta=at.readShort(rt,ot),ot+=2;else if(ct.fmt==2){var ht=at.readUshort(rt,ot);ot+=2,ct.newg=at.readUshorts(rt,ot,ht),ot+=2*ct.newg.length}}else if(it==4){ct.vals=[],ht=at.readUshort(rt,ot),ot+=2;for(var pt=0;pt<ht;pt++){var gt=at.readUshort(rt,ot);ot+=2,ct.vals.push(_.GSUB.readLigatureSet(rt,lt+gt))}}else if(it==5&&ct.fmt==2){if(ct.fmt==2){var yt=at.readUshort(rt,ot);ot+=2,ct.cDef=_._lctf.readClassDef(rt,lt+yt),ct.scset=[];var vt=at.readUshort(rt,ot);for(ot+=2,pt=0;pt<vt;pt++){var mt=at.readUshort(rt,ot);ot+=2,ct.scset.push(mt==0?null:_.GSUB.readSubClassSet(rt,lt+mt))}}}else if(it==6&&ct.fmt==3){if(ct.fmt==3){for(pt=0;pt<3;pt++){ht=at.readUshort(rt,ot),ot+=2;for(var _t=[],xt=0;xt<ht;xt++)_t.push(_._lctf.readCoverage(rt,lt+at.readUshort(rt,ot+2*xt)));ot+=2*ht,pt==0&&(ct.backCvg=_t),pt==1&&(ct.inptCvg=_t),pt==2&&(ct.ahedCvg=_t)}ht=at.readUshort(rt,ot),ot+=2,ct.lookupRec=_.GSUB.readSubstLookupRecords(rt,ot,ht)}}else{if(it==7&&ct.fmt==1){var St=at.readUshort(rt,ot);ot+=2;var Tt=at.readUint(rt,ot);if(ot+=4,st.ltype==9)st.ltype=St;else if(st.ltype!=St)throw"invalid extension substitution";return _.GSUB.subt(rt,st.ltype,lt+Tt)}console.debug("unsupported GSUB table LookupType",it,"format",ct.fmt)}return ct},_.GSUB.readSubClassSet=function(rt,it){var ot=_._bin.readUshort,st=it,at=[],lt=ot(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=ot(rt,it);it+=2,at.push(_.GSUB.readSubClassRule(rt,st+ut))}return at},_.GSUB.readSubClassRule=function(rt,it){var ot=_._bin.readUshort,st={},at=ot(rt,it),lt=ot(rt,it+=2);it+=2,st.input=[];for(var ct=0;ct<at-1;ct++)st.input.push(ot(rt,it)),it+=2;return st.substLookupRecords=_.GSUB.readSubstLookupRecords(rt,it,lt),st},_.GSUB.readSubstLookupRecords=function(rt,it,ot){for(var st=_._bin.readUshort,at=[],lt=0;lt<ot;lt++)at.push(st(rt,it),st(rt,it+2)),it+=4;return at},_.GSUB.readChainSubClassSet=function(rt,it){var ot=_._bin,st=it,at=[],lt=ot.readUshort(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=ot.readUshort(rt,it);it+=2,at.push(_.GSUB.readChainSubClassRule(rt,st+ut))}return at},_.GSUB.readChainSubClassRule=function(rt,it){for(var ot=_._bin,st={},at=["backtrack","input","lookahead"],lt=0;lt<at.length;lt++){var ct=ot.readUshort(rt,it);it+=2,lt==1&&ct--,st[at[lt]]=ot.readUshorts(rt,it,ct),it+=2*st[at[lt]].length}return ct=ot.readUshort(rt,it),it+=2,st.subst=ot.readUshorts(rt,it,2*ct),it+=2*st.subst.length,st},_.GSUB.readLigatureSet=function(rt,it){var ot=_._bin,st=it,at=[],lt=ot.readUshort(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=ot.readUshort(rt,it);it+=2,at.push(_.GSUB.readLigature(rt,st+ut))}return at},_.GSUB.readLigature=function(rt,it){var ot=_._bin,st={chain:[]};st.nglyph=ot.readUshort(rt,it),it+=2;var at=ot.readUshort(rt,it);it+=2;for(var lt=0;lt<at-1;lt++)st.chain.push(ot.readUshort(rt,it)),it+=2;return st},_.head={},_.head.parse=function(rt,it,ot){var st=_._bin,at={};return st.readFixed(rt,it),it+=4,at.fontRevision=st.readFixed(rt,it),it+=4,st.readUint(rt,it),it+=4,st.readUint(rt,it),it+=4,at.flags=st.readUshort(rt,it),it+=2,at.unitsPerEm=st.readUshort(rt,it),it+=2,at.created=st.readUint64(rt,it),it+=8,at.modified=st.readUint64(rt,it),it+=8,at.xMin=st.readShort(rt,it),it+=2,at.yMin=st.readShort(rt,it),it+=2,at.xMax=st.readShort(rt,it),it+=2,at.yMax=st.readShort(rt,it),it+=2,at.macStyle=st.readUshort(rt,it),it+=2,at.lowestRecPPEM=st.readUshort(rt,it),it+=2,at.fontDirectionHint=st.readShort(rt,it),it+=2,at.indexToLocFormat=st.readShort(rt,it),it+=2,at.glyphDataFormat=st.readShort(rt,it),it+=2,at},_.hhea={},_.hhea.parse=function(rt,it,ot){var st=_._bin,at={};return st.readFixed(rt,it),it+=4,at.ascender=st.readShort(rt,it),it+=2,at.descender=st.readShort(rt,it),it+=2,at.lineGap=st.readShort(rt,it),it+=2,at.advanceWidthMax=st.readUshort(rt,it),it+=2,at.minLeftSideBearing=st.readShort(rt,it),it+=2,at.minRightSideBearing=st.readShort(rt,it),it+=2,at.xMaxExtent=st.readShort(rt,it),it+=2,at.caretSlopeRise=st.readShort(rt,it),it+=2,at.caretSlopeRun=st.readShort(rt,it),it+=2,at.caretOffset=st.readShort(rt,it),it+=2,it+=8,at.metricDataFormat=st.readShort(rt,it),it+=2,at.numberOfHMetrics=st.readUshort(rt,it),it+=2,at},_.hmtx={},_.hmtx.parse=function(rt,it,ot,st){for(var at=_._bin,lt={aWidth:[],lsBearing:[]},ct=0,ut=0,ht=0;ht<st.maxp.numGlyphs;ht++)ht<st.hhea.numberOfHMetrics&&(ct=at.readUshort(rt,it),it+=2,ut=at.readShort(rt,it),it+=2),lt.aWidth.push(ct),lt.lsBearing.push(ut);return lt},_.kern={},_.kern.parse=function(rt,it,ot,st){var at=_._bin,lt=at.readUshort(rt,it);if(it+=2,lt==1)return _.kern.parseV1(rt,it-2,ot,st);var ct=at.readUshort(rt,it);it+=2;for(var ut={glyph1:[],rval:[]},ht=0;ht<ct;ht++){it+=2,ot=at.readUshort(rt,it),it+=2;var pt=at.readUshort(rt,it);it+=2;var gt=pt>>>8;if((gt&=15)!=0)throw"unknown kern table format: "+gt;it=_.kern.readFormat0(rt,it,ut)}return ut},_.kern.parseV1=function(rt,it,ot,st){var at=_._bin;at.readFixed(rt,it),it+=4;var lt=at.readUint(rt,it);it+=4;for(var ct={glyph1:[],rval:[]},ut=0;ut<lt;ut++){at.readUint(rt,it),it+=4;var ht=at.readUshort(rt,it);it+=2,at.readUshort(rt,it),it+=2;var pt=ht>>>8;if((pt&=15)!=0)throw"unknown kern table format: "+pt;it=_.kern.readFormat0(rt,it,ct)}return ct},_.kern.readFormat0=function(rt,it,ot){var st=_._bin,at=-1,lt=st.readUshort(rt,it);it+=2,st.readUshort(rt,it),it+=2,st.readUshort(rt,it),it+=2,st.readUshort(rt,it),it+=2;for(var ct=0;ct<lt;ct++){var ut=st.readUshort(rt,it);it+=2;var ht=st.readUshort(rt,it);it+=2;var pt=st.readShort(rt,it);it+=2,ut!=at&&(ot.glyph1.push(ut),ot.rval.push({glyph2:[],vals:[]}));var gt=ot.rval[ot.rval.length-1];gt.glyph2.push(ht),gt.vals.push(pt),at=ut}return it},_.loca={},_.loca.parse=function(rt,it,ot,st){var at=_._bin,lt=[],ct=st.head.indexToLocFormat,ut=st.maxp.numGlyphs+1;if(ct==0)for(var ht=0;ht<ut;ht++)lt.push(at.readUshort(rt,it+(ht<<1))<<1);if(ct==1)for(ht=0;ht<ut;ht++)lt.push(at.readUint(rt,it+(ht<<2)));return lt},_.maxp={},_.maxp.parse=function(rt,it,ot){var st=_._bin,at={},lt=st.readUint(rt,it);return it+=4,at.numGlyphs=st.readUshort(rt,it),it+=2,lt==65536&&(at.maxPoints=st.readUshort(rt,it),it+=2,at.maxContours=st.readUshort(rt,it),it+=2,at.maxCompositePoints=st.readUshort(rt,it),it+=2,at.maxCompositeContours=st.readUshort(rt,it),it+=2,at.maxZones=st.readUshort(rt,it),it+=2,at.maxTwilightPoints=st.readUshort(rt,it),it+=2,at.maxStorage=st.readUshort(rt,it),it+=2,at.maxFunctionDefs=st.readUshort(rt,it),it+=2,at.maxInstructionDefs=st.readUshort(rt,it),it+=2,at.maxStackElements=st.readUshort(rt,it),it+=2,at.maxSizeOfInstructions=st.readUshort(rt,it),it+=2,at.maxComponentElements=st.readUshort(rt,it),it+=2,at.maxComponentDepth=st.readUshort(rt,it),it+=2),at},_.name={},_.name.parse=function(rt,it,ot){var st=_._bin,at={};st.readUshort(rt,it),it+=2;var lt=st.readUshort(rt,it);it+=2,st.readUshort(rt,it);for(var ct,ut=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],ht=it+=2,pt=0;pt<lt;pt++){var gt=st.readUshort(rt,it);it+=2;var yt=st.readUshort(rt,it);it+=2;var vt=st.readUshort(rt,it);it+=2;var mt=st.readUshort(rt,it);it+=2;var _t=st.readUshort(rt,it);it+=2;var xt=st.readUshort(rt,it);it+=2;var St,Tt=ut[mt],Mt=ht+12*lt+xt;if(gt==0)St=st.readUnicode(rt,Mt,_t/2);else if(gt==3&&yt==0)St=st.readUnicode(rt,Mt,_t/2);else if(yt==0)St=st.readASCII(rt,Mt,_t);else if(yt==1)St=st.readUnicode(rt,Mt,_t/2);else if(yt==3)St=st.readUnicode(rt,Mt,_t/2);else{if(gt!=1)throw"unknown encoding "+yt+", platformID: "+gt;St=st.readASCII(rt,Mt,_t),console.debug("reading unknown MAC encoding "+yt+" as ASCII")}var bt="p"+gt+","+vt.toString(16);at[bt]==null&&(at[bt]={}),at[bt][Tt!==void 0?Tt:mt]=St,at[bt]._lang=vt}for(var Pt in at)if(at[Pt].postScriptName!=null&&at[Pt]._lang==1033)return at[Pt];for(var Pt in at)if(at[Pt].postScriptName!=null&&at[Pt]._lang==0)return at[Pt];for(var Pt in at)if(at[Pt].postScriptName!=null&&at[Pt]._lang==3084)return at[Pt];for(var Pt in at)if(at[Pt].postScriptName!=null)return at[Pt];for(var Pt in at){ct=Pt;break}return console.debug("returning name table with languageID "+at[ct]._lang),at[ct]},_["OS/2"]={},_["OS/2"].parse=function(rt,it,ot){var st=_._bin.readUshort(rt,it);it+=2;var at={};if(st==0)_["OS/2"].version0(rt,it,at);else if(st==1)_["OS/2"].version1(rt,it,at);else if(st==2||st==3||st==4)_["OS/2"].version2(rt,it,at);else{if(st!=5)throw"unknown OS/2 table version: "+st;_["OS/2"].version5(rt,it,at)}return at},_["OS/2"].version0=function(rt,it,ot){var st=_._bin;return ot.xAvgCharWidth=st.readShort(rt,it),it+=2,ot.usWeightClass=st.readUshort(rt,it),it+=2,ot.usWidthClass=st.readUshort(rt,it),it+=2,ot.fsType=st.readUshort(rt,it),it+=2,ot.ySubscriptXSize=st.readShort(rt,it),it+=2,ot.ySubscriptYSize=st.readShort(rt,it),it+=2,ot.ySubscriptXOffset=st.readShort(rt,it),it+=2,ot.ySubscriptYOffset=st.readShort(rt,it),it+=2,ot.ySuperscriptXSize=st.readShort(rt,it),it+=2,ot.ySuperscriptYSize=st.readShort(rt,it),it+=2,ot.ySuperscriptXOffset=st.readShort(rt,it),it+=2,ot.ySuperscriptYOffset=st.readShort(rt,it),it+=2,ot.yStrikeoutSize=st.readShort(rt,it),it+=2,ot.yStrikeoutPosition=st.readShort(rt,it),it+=2,ot.sFamilyClass=st.readShort(rt,it),it+=2,ot.panose=st.readBytes(rt,it,10),it+=10,ot.ulUnicodeRange1=st.readUint(rt,it),it+=4,ot.ulUnicodeRange2=st.readUint(rt,it),it+=4,ot.ulUnicodeRange3=st.readUint(rt,it),it+=4,ot.ulUnicodeRange4=st.readUint(rt,it),it+=4,ot.achVendID=[st.readInt8(rt,it),st.readInt8(rt,it+1),st.readInt8(rt,it+2),st.readInt8(rt,it+3)],it+=4,ot.fsSelection=st.readUshort(rt,it),it+=2,ot.usFirstCharIndex=st.readUshort(rt,it),it+=2,ot.usLastCharIndex=st.readUshort(rt,it),it+=2,ot.sTypoAscender=st.readShort(rt,it),it+=2,ot.sTypoDescender=st.readShort(rt,it),it+=2,ot.sTypoLineGap=st.readShort(rt,it),it+=2,ot.usWinAscent=st.readUshort(rt,it),it+=2,ot.usWinDescent=st.readUshort(rt,it),it+=2},_["OS/2"].version1=function(rt,it,ot){var st=_._bin;return it=_["OS/2"].version0(rt,it,ot),ot.ulCodePageRange1=st.readUint(rt,it),it+=4,ot.ulCodePageRange2=st.readUint(rt,it),it+=4},_["OS/2"].version2=function(rt,it,ot){var st=_._bin;return it=_["OS/2"].version1(rt,it,ot),ot.sxHeight=st.readShort(rt,it),it+=2,ot.sCapHeight=st.readShort(rt,it),it+=2,ot.usDefault=st.readUshort(rt,it),it+=2,ot.usBreak=st.readUshort(rt,it),it+=2,ot.usMaxContext=st.readUshort(rt,it),it+=2},_["OS/2"].version5=function(rt,it,ot){var st=_._bin;return it=_["OS/2"].version2(rt,it,ot),ot.usLowerOpticalPointSize=st.readUshort(rt,it),it+=2,ot.usUpperOpticalPointSize=st.readUshort(rt,it),it+=2},_.post={},_.post.parse=function(rt,it,ot){var st=_._bin,at={};return at.version=st.readFixed(rt,it),it+=4,at.italicAngle=st.readFixed(rt,it),it+=4,at.underlinePosition=st.readShort(rt,it),it+=2,at.underlineThickness=st.readShort(rt,it),it+=2,at},_==null&&(_={}),_.U==null&&(_.U={}),_.U.codeToGlyph=function(rt,it){var ot=rt.cmap,st=-1;if(ot.p0e4!=null?st=ot.p0e4:ot.p3e1!=null?st=ot.p3e1:ot.p1e0!=null?st=ot.p1e0:ot.p0e3!=null&&(st=ot.p0e3),st==-1)throw"no familiar platform and encoding!";var at=ot.tables[st];if(at.format==0)return it>=at.map.length?0:at.map[it];if(at.format==4){for(var lt=-1,ct=0;ct<at.endCount.length;ct++)if(it<=at.endCount[ct]){lt=ct;break}return lt==-1||at.startCount[lt]>it?0:65535&(at.idRangeOffset[lt]!=0?at.glyphIdArray[it-at.startCount[lt]+(at.idRangeOffset[lt]>>1)-(at.idRangeOffset.length-lt)]:it+at.idDelta[lt])}if(at.format==12){if(it>at.groups[at.groups.length-1][1])return 0;for(ct=0;ct<at.groups.length;ct++){var ut=at.groups[ct];if(ut[0]<=it&&it<=ut[1])return ut[2]+(it-ut[0])}return 0}throw"unknown cmap table format "+at.format},_.U.glyphToPath=function(rt,it){var ot={cmds:[],crds:[]};if(rt.SVG&&rt.SVG.entries[it]){var st=rt.SVG.entries[it];return st==null?ot:(typeof st=="string"&&(st=_.SVG.toPath(st),rt.SVG.entries[it]=st),st)}if(rt.CFF){var at={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:rt.CFF.Private?rt.CFF.Private.defaultWidthX:0,open:!1},lt=rt.CFF,ct=rt.CFF.Private;if(lt.ROS){for(var ut=0;lt.FDSelect[ut+2]<=it;)ut+=2;ct=lt.FDArray[lt.FDSelect[ut+1]].Private}_.U._drawCFF(rt.CFF.CharStrings[it],at,lt,ct,ot)}else rt.glyf&&_.U._drawGlyf(it,rt,ot);return ot},_.U._drawGlyf=function(rt,it,ot){var st=it.glyf[rt];st==null&&(st=it.glyf[rt]=_.glyf._parseGlyf(it,rt)),st!=null&&(st.noc>-1?_.U._simpleGlyph(st,ot):_.U._compoGlyph(st,it,ot))},_.U._simpleGlyph=function(rt,it){for(var ot=0;ot<rt.noc;ot++){for(var st=ot==0?0:rt.endPts[ot-1]+1,at=rt.endPts[ot],lt=st;lt<=at;lt++){var ct=lt==st?at:lt-1,ut=lt==at?st:lt+1,ht=1&rt.flags[lt],pt=1&rt.flags[ct],gt=1&rt.flags[ut],yt=rt.xs[lt],vt=rt.ys[lt];if(lt==st)if(ht){if(!pt){_.U.P.moveTo(it,yt,vt);continue}_.U.P.moveTo(it,rt.xs[ct],rt.ys[ct])}else pt?_.U.P.moveTo(it,rt.xs[ct],rt.ys[ct]):_.U.P.moveTo(it,(rt.xs[ct]+yt)/2,(rt.ys[ct]+vt)/2);ht?pt&&_.U.P.lineTo(it,yt,vt):gt?_.U.P.qcurveTo(it,yt,vt,rt.xs[ut],rt.ys[ut]):_.U.P.qcurveTo(it,yt,vt,(yt+rt.xs[ut])/2,(vt+rt.ys[ut])/2)}_.U.P.closePath(it)}},_.U._compoGlyph=function(rt,it,ot){for(var st=0;st<rt.parts.length;st++){var at={cmds:[],crds:[]},lt=rt.parts[st];_.U._drawGlyf(lt.glyphIndex,it,at);for(var ct=lt.m,ut=0;ut<at.crds.length;ut+=2){var ht=at.crds[ut],pt=at.crds[ut+1];ot.crds.push(ht*ct.a+pt*ct.b+ct.tx),ot.crds.push(ht*ct.c+pt*ct.d+ct.ty)}for(ut=0;ut<at.cmds.length;ut++)ot.cmds.push(at.cmds[ut])}},_.U._getGlyphClass=function(rt,it){var ot=_._lctf.getInterval(it,rt);return ot==-1?0:it[ot+2]},_.U.getPairAdjustment=function(rt,it,ot){var st=!1;if(rt.GPOS)for(var at=rt.GPOS,lt=at.lookupList,ct=at.featureList,ut=[],ht=0;ht<ct.length;ht++){var pt=ct[ht];if(pt.tag=="kern"){st=!0;for(var gt=0;gt<pt.tab.length;gt++)if(!ut[pt.tab[gt]]){ut[pt.tab[gt]]=!0;for(var yt=lt[pt.tab[gt]],vt=0;vt<yt.tabs.length;vt++)if(yt.tabs[vt]!=null){var mt,_t=yt.tabs[vt];if((!_t.coverage||(mt=_._lctf.coverageIndex(_t.coverage,it))!=-1)&&yt.ltype!=1){if(yt.ltype==2){var xt=null;if(_t.fmt==1){var St=_t.pairsets[mt];for(ht=0;ht<St.length;ht++)St[ht].gid2==ot&&(xt=St[ht])}else if(_t.fmt==2){var Tt=_.U._getGlyphClass(it,_t.classDef1),Mt=_.U._getGlyphClass(ot,_t.classDef2);xt=_t.matrix[Tt][Mt]}if(xt){var bt=0;return xt.val1&&xt.val1[2]&&(bt+=xt.val1[2]),xt.val2&&xt.val2[0]&&(bt+=xt.val2[0]),bt}}}}}}}if(rt.kern&&!st){var Pt=rt.kern.glyph1.indexOf(it);if(Pt!=-1){var wt=rt.kern.rval[Pt].glyph2.indexOf(ot);if(wt!=-1)return rt.kern.rval[Pt].vals[wt]}}return 0},_.U._applySubs=function(rt,it,ot,st){for(var at=rt.length-it-1,lt=0;lt<ot.tabs.length;lt++)if(ot.tabs[lt]!=null){var ct,ut=ot.tabs[lt];if(!ut.coverage||(ct=_._lctf.coverageIndex(ut.coverage,rt[it]))!=-1){if(ot.ltype==1)rt[it],ut.fmt==1?rt[it]=rt[it]+ut.delta:rt[it]=ut.newg[ct];else if(ot.ltype==4)for(var ht=ut.vals[ct],pt=0;pt<ht.length;pt++){var gt=ht[pt],yt=gt.chain.length;if(!(yt>at)){for(var vt=!0,mt=0,_t=0;_t<yt;_t++){for(;rt[it+mt+(1+_t)]==-1;)mt++;gt.chain[_t]!=rt[it+mt+(1+_t)]&&(vt=!1)}if(vt){for(rt[it]=gt.nglyph,_t=0;_t<yt+mt;_t++)rt[it+_t+1]=-1;break}}}else if(ot.ltype==5&&ut.fmt==2)for(var xt=_._lctf.getInterval(ut.cDef,rt[it]),St=ut.cDef[xt+2],Tt=ut.scset[St],Mt=0;Mt<Tt.length;Mt++){var bt=Tt[Mt],Pt=bt.input;if(!(Pt.length>at)){for(vt=!0,_t=0;_t<Pt.length;_t++){var wt=_._lctf.getInterval(ut.cDef,rt[it+1+_t]);if(xt==-1&&ut.cDef[wt+2]!=Pt[_t]){vt=!1;break}}if(vt){var Bt=bt.substLookupRecords;for(pt=0;pt<Bt.length;pt+=2)Bt[pt],Bt[pt+1]}}}else if(ot.ltype==6&&ut.fmt==3){if(!_.U._glsCovered(rt,ut.backCvg,it-ut.backCvg.length)||!_.U._glsCovered(rt,ut.inptCvg,it)||!_.U._glsCovered(rt,ut.ahedCvg,it+ut.inptCvg.length))continue;var Ot=ut.lookupRec;for(Mt=0;Mt<Ot.length;Mt+=2){xt=Ot[Mt];var Ut=st[Ot[Mt+1]];_.U._applySubs(rt,it+xt,Ut,st)}}}}},_.U._glsCovered=function(rt,it,ot){for(var st=0;st<it.length;st++)if(_._lctf.coverageIndex(it[st],rt[ot+st])==-1)return!1;return!0},_.U.glyphsToPath=function(rt,it,ot){for(var st={cmds:[],crds:[]},at=0,lt=0;lt<it.length;lt++){var ct=it[lt];if(ct!=-1){for(var ut=lt<it.length-1&&it[lt+1]!=-1?it[lt+1]:0,ht=_.U.glyphToPath(rt,ct),pt=0;pt<ht.crds.length;pt+=2)st.crds.push(ht.crds[pt]+at),st.crds.push(ht.crds[pt+1]);for(ot&&st.cmds.push(ot),pt=0;pt<ht.cmds.length;pt++)st.cmds.push(ht.cmds[pt]);ot&&st.cmds.push("X"),at+=rt.hmtx.aWidth[ct],lt<it.length-1&&(at+=_.U.getPairAdjustment(rt,ct,ut))}}return st},_.U.P={},_.U.P.moveTo=function(rt,it,ot){rt.cmds.push("M"),rt.crds.push(it,ot)},_.U.P.lineTo=function(rt,it,ot){rt.cmds.push("L"),rt.crds.push(it,ot)},_.U.P.curveTo=function(rt,it,ot,st,at,lt,ct){rt.cmds.push("C"),rt.crds.push(it,ot,st,at,lt,ct)},_.U.P.qcurveTo=function(rt,it,ot,st,at){rt.cmds.push("Q"),rt.crds.push(it,ot,st,at)},_.U.P.closePath=function(rt){rt.cmds.push("Z")},_.U._drawCFF=function(rt,it,ot,st,at){for(var lt=it.stack,ct=it.nStems,ut=it.haveWidth,ht=it.width,pt=it.open,gt=0,yt=it.x,vt=it.y,mt=0,_t=0,xt=0,St=0,Tt=0,Mt=0,bt=0,Pt=0,wt=0,Bt=0,Ot={val:0,size:0};gt<rt.length;){_.CFF.getCharString(rt,gt,Ot);var Ut=Ot.val;if(gt+=Ot.size,Ut=="o1"||Ut=="o18")lt.length%2!=0&&!ut&&(ht=lt.shift()+st.nominalWidthX),ct+=lt.length>>1,lt.length=0,ut=!0;else if(Ut=="o3"||Ut=="o23")lt.length%2!=0&&!ut&&(ht=lt.shift()+st.nominalWidthX),ct+=lt.length>>1,lt.length=0,ut=!0;else if(Ut=="o4")lt.length>1&&!ut&&(ht=lt.shift()+st.nominalWidthX,ut=!0),pt&&_.U.P.closePath(at),vt+=lt.pop(),_.U.P.moveTo(at,yt,vt),pt=!0;else if(Ut=="o5")for(;lt.length>0;)yt+=lt.shift(),vt+=lt.shift(),_.U.P.lineTo(at,yt,vt);else if(Ut=="o6"||Ut=="o7")for(var Nt=lt.length,zt=Ut=="o6",jt=0;jt<Nt;jt++){var Yt=lt.shift();zt?yt+=Yt:vt+=Yt,zt=!zt,_.U.P.lineTo(at,yt,vt)}else if(Ut=="o8"||Ut=="o24"){Nt=lt.length;for(var qt=0;qt+6<=Nt;)mt=yt+lt.shift(),_t=vt+lt.shift(),xt=mt+lt.shift(),St=_t+lt.shift(),yt=xt+lt.shift(),vt=St+lt.shift(),_.U.P.curveTo(at,mt,_t,xt,St,yt,vt),qt+=6;Ut=="o24"&&(yt+=lt.shift(),vt+=lt.shift(),_.U.P.lineTo(at,yt,vt))}else{if(Ut=="o11")break;if(Ut=="o1234"||Ut=="o1235"||Ut=="o1236"||Ut=="o1237")Ut=="o1234"&&(_t=vt,xt=(mt=yt+lt.shift())+lt.shift(),Bt=St=_t+lt.shift(),Mt=St,Pt=vt,yt=(bt=(Tt=(wt=xt+lt.shift())+lt.shift())+lt.shift())+lt.shift(),_.U.P.curveTo(at,mt,_t,xt,St,wt,Bt),_.U.P.curveTo(at,Tt,Mt,bt,Pt,yt,vt)),Ut=="o1235"&&(mt=yt+lt.shift(),_t=vt+lt.shift(),xt=mt+lt.shift(),St=_t+lt.shift(),wt=xt+lt.shift(),Bt=St+lt.shift(),Tt=wt+lt.shift(),Mt=Bt+lt.shift(),bt=Tt+lt.shift(),Pt=Mt+lt.shift(),yt=bt+lt.shift(),vt=Pt+lt.shift(),lt.shift(),_.U.P.curveTo(at,mt,_t,xt,St,wt,Bt),_.U.P.curveTo(at,Tt,Mt,bt,Pt,yt,vt)),Ut=="o1236"&&(mt=yt+lt.shift(),_t=vt+lt.shift(),xt=mt+lt.shift(),Bt=St=_t+lt.shift(),Mt=St,bt=(Tt=(wt=xt+lt.shift())+lt.shift())+lt.shift(),Pt=Mt+lt.shift(),yt=bt+lt.shift(),_.U.P.curveTo(at,mt,_t,xt,St,wt,Bt),_.U.P.curveTo(at,Tt,Mt,bt,Pt,yt,vt)),Ut=="o1237"&&(mt=yt+lt.shift(),_t=vt+lt.shift(),xt=mt+lt.shift(),St=_t+lt.shift(),wt=xt+lt.shift(),Bt=St+lt.shift(),Tt=wt+lt.shift(),Mt=Bt+lt.shift(),bt=Tt+lt.shift(),Pt=Mt+lt.shift(),Math.abs(bt-yt)>Math.abs(Pt-vt)?yt=bt+lt.shift():vt=Pt+lt.shift(),_.U.P.curveTo(at,mt,_t,xt,St,wt,Bt),_.U.P.curveTo(at,Tt,Mt,bt,Pt,yt,vt));else if(Ut=="o14"){if(lt.length>0&&!ut&&(ht=lt.shift()+ot.nominalWidthX,ut=!0),lt.length==4){var Gt=lt.shift(),Xt=lt.shift(),Vt=lt.shift(),Wt=lt.shift(),$t=_.CFF.glyphBySE(ot,Vt),nn=_.CFF.glyphBySE(ot,Wt);_.U._drawCFF(ot.CharStrings[$t],it,ot,st,at),it.x=Gt,it.y=Xt,_.U._drawCFF(ot.CharStrings[nn],it,ot,st,at)}pt&&(_.U.P.closePath(at),pt=!1)}else if(Ut=="o19"||Ut=="o20")lt.length%2!=0&&!ut&&(ht=lt.shift()+st.nominalWidthX),ct+=lt.length>>1,lt.length=0,ut=!0,gt+=ct+7>>3;else if(Ut=="o21")lt.length>2&&!ut&&(ht=lt.shift()+st.nominalWidthX,ut=!0),vt+=lt.pop(),yt+=lt.pop(),pt&&_.U.P.closePath(at),_.U.P.moveTo(at,yt,vt),pt=!0;else if(Ut=="o22")lt.length>1&&!ut&&(ht=lt.shift()+st.nominalWidthX,ut=!0),yt+=lt.pop(),pt&&_.U.P.closePath(at),_.U.P.moveTo(at,yt,vt),pt=!0;else if(Ut=="o25"){for(;lt.length>6;)yt+=lt.shift(),vt+=lt.shift(),_.U.P.lineTo(at,yt,vt);mt=yt+lt.shift(),_t=vt+lt.shift(),xt=mt+lt.shift(),St=_t+lt.shift(),yt=xt+lt.shift(),vt=St+lt.shift(),_.U.P.curveTo(at,mt,_t,xt,St,yt,vt)}else if(Ut=="o26")for(lt.length%2&&(yt+=lt.shift());lt.length>0;)mt=yt,_t=vt+lt.shift(),yt=xt=mt+lt.shift(),vt=(St=_t+lt.shift())+lt.shift(),_.U.P.curveTo(at,mt,_t,xt,St,yt,vt);else if(Ut=="o27")for(lt.length%2&&(vt+=lt.shift());lt.length>0;)_t=vt,xt=(mt=yt+lt.shift())+lt.shift(),St=_t+lt.shift(),yt=xt+lt.shift(),vt=St,_.U.P.curveTo(at,mt,_t,xt,St,yt,vt);else if(Ut=="o10"||Ut=="o29"){var en=Ut=="o10"?st:ot;if(lt.length==0)console.debug("error: empty stack");else{var sn=lt.pop(),rn=en.Subrs[sn+en.Bias];it.x=yt,it.y=vt,it.nStems=ct,it.haveWidth=ut,it.width=ht,it.open=pt,_.U._drawCFF(rn,it,ot,st,at),yt=it.x,vt=it.y,ct=it.nStems,ut=it.haveWidth,ht=it.width,pt=it.open}}else if(Ut=="o30"||Ut=="o31"){var an=lt.length,dn=(qt=0,Ut=="o31");for(qt+=an-(Nt=-3&an);qt<Nt;)dn?(_t=vt,xt=(mt=yt+lt.shift())+lt.shift(),vt=(St=_t+lt.shift())+lt.shift(),Nt-qt==5?(yt=xt+lt.shift(),qt++):yt=xt,dn=!1):(mt=yt,_t=vt+lt.shift(),xt=mt+lt.shift(),St=_t+lt.shift(),yt=xt+lt.shift(),Nt-qt==5?(vt=St+lt.shift(),qt++):vt=St,dn=!0),_.U.P.curveTo(at,mt,_t,xt,St,yt,vt),qt+=4}else{if((Ut+"").charAt(0)=="o")throw console.debug("Unknown operation: "+Ut,rt),Ut;lt.push(Ut)}}}it.x=yt,it.y=vt,it.nStems=ct,it.haveWidth=ut,it.width=ht,it.open=pt};var _e=_,nt={Typr:_e};return tt.Typr=_e,tt.default=nt,Object.defineProperty(tt,"__esModule",{value:!0}),tt}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function woff2otfFactory(){return function(tt){var _=Uint8Array,_e=Uint16Array,nt=Uint32Array,rt=new _([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),it=new _([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ot=new _([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),st=function(Ut,Nt){for(var zt=new _e(31),jt=0;jt<31;++jt)zt[jt]=Nt+=1<<Ut[jt-1];var Yt=new nt(zt[30]);for(jt=1;jt<30;++jt)for(var qt=zt[jt];qt<zt[jt+1];++qt)Yt[qt]=qt-zt[jt]<<5|jt;return[zt,Yt]},at=st(rt,2),lt=at[0],ct=at[1];lt[28]=258,ct[258]=28;for(var ut=st(it,0)[0],ht=new _e(32768),pt=0;pt<32768;++pt){var gt=(43690&pt)>>>1|(21845&pt)<<1;gt=(61680&(gt=(52428&gt)>>>2|(13107&gt)<<2))>>>4|(3855&gt)<<4,ht[pt]=((65280&gt)>>>8|(255&gt)<<8)>>>1}var yt=function(Ut,Nt,zt){for(var jt=Ut.length,Yt=0,qt=new _e(Nt);Yt<jt;++Yt)++qt[Ut[Yt]-1];var Gt,Xt=new _e(Nt);for(Yt=0;Yt<Nt;++Yt)Xt[Yt]=Xt[Yt-1]+qt[Yt-1]<<1;if(zt){Gt=new _e(1<<Nt);var Vt=15-Nt;for(Yt=0;Yt<jt;++Yt)if(Ut[Yt])for(var Wt=Yt<<4|Ut[Yt],$t=Nt-Ut[Yt],nn=Xt[Ut[Yt]-1]++<<$t,en=nn|(1<<$t)-1;nn<=en;++nn)Gt[ht[nn]>>>Vt]=Wt}else for(Gt=new _e(jt),Yt=0;Yt<jt;++Yt)Ut[Yt]&&(Gt[Yt]=ht[Xt[Ut[Yt]-1]++]>>>15-Ut[Yt]);return Gt},vt=new _(288);for(pt=0;pt<144;++pt)vt[pt]=8;for(pt=144;pt<256;++pt)vt[pt]=9;for(pt=256;pt<280;++pt)vt[pt]=7;for(pt=280;pt<288;++pt)vt[pt]=8;var mt=new _(32);for(pt=0;pt<32;++pt)mt[pt]=5;var _t=yt(vt,9,1),xt=yt(mt,5,1),St=function(Ut){for(var Nt=Ut[0],zt=1;zt<Ut.length;++zt)Ut[zt]>Nt&&(Nt=Ut[zt]);return Nt},Tt=function(Ut,Nt,zt){var jt=Nt/8|0;return(Ut[jt]|Ut[jt+1]<<8)>>(7&Nt)&zt},Mt=function(Ut,Nt){var zt=Nt/8|0;return(Ut[zt]|Ut[zt+1]<<8|Ut[zt+2]<<16)>>(7&Nt)},bt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pt=function(Ut,Nt,zt){var jt=new Error(Nt||bt[Ut]);if(jt.code=Ut,Error.captureStackTrace&&Error.captureStackTrace(jt,Pt),!zt)throw jt;return jt},wt=function(Ut,Nt,zt){var jt=Ut.length;if(!jt||zt&&!zt.l&&jt<5)return Nt||new _(0);var Yt=!Nt||zt,qt=!zt||zt.i;zt||(zt={}),Nt||(Nt=new _(3*jt));var Gt,Xt=function(Fn){var kn=Nt.length;if(Fn>kn){var Yn=new _(Math.max(2*kn,Fn));Yn.set(Nt),Nt=Yn}},Vt=zt.f||0,Wt=zt.p||0,$t=zt.b||0,nn=zt.l,en=zt.d,sn=zt.m,rn=zt.n,an=8*jt;do{if(!nn){zt.f=Vt=Tt(Ut,Wt,1);var dn=Tt(Ut,Wt+1,3);if(Wt+=3,!dn){var Bn=Ut[(On=((Gt=Wt)/8|0)+(7&Gt&&1)+4)-4]|Ut[On-3]<<8,Nn=On+Bn;if(Nn>jt){qt&&Pt(0);break}Yt&&Xt($t+Bn),Nt.set(Ut.subarray(On,Nn),$t),zt.b=$t+=Bn,zt.p=Wt=8*Nn;continue}if(dn==1)nn=_t,en=xt,sn=9,rn=5;else if(dn==2){var gn=Tt(Ut,Wt,31)+257,Ht=Tt(Ut,Wt+10,15)+4,xn=gn+Tt(Ut,Wt+5,31)+1;Wt+=14;for(var hn=new _(xn),vn=new _(19),pn=0;pn<Ht;++pn)vn[ot[pn]]=Tt(Ut,Wt+3*pn,7);Wt+=3*Ht;var Hn=St(vn),yn=(1<<Hn)-1,Ln=yt(vn,Hn,1);for(pn=0;pn<xn;){var On,Sn=Ln[Tt(Ut,Wt,yn)];if(Wt+=15&Sn,(On=Sn>>>4)<16)hn[pn++]=On;else{var jn=0,Ft=0;for(On==16?(Ft=3+Tt(Ut,Wt,3),Wt+=2,jn=hn[pn-1]):On==17?(Ft=3+Tt(Ut,Wt,7),Wt+=3):On==18&&(Ft=11+Tt(Ut,Wt,127),Wt+=7);Ft--;)hn[pn++]=jn}}var Dt=hn.subarray(0,gn),on=hn.subarray(gn);sn=St(Dt),rn=St(on),nn=yt(Dt,sn,1),en=yt(on,rn,1)}else Pt(1);if(Wt>an){qt&&Pt(0);break}}Yt&&Xt($t+131072);for(var bn=(1<<sn)-1,Mn=(1<<rn)-1,wn=Wt;;wn=Wt){var $n=(jn=nn[Mt(Ut,Wt)&bn])>>>4;if((Wt+=15&jn)>an){qt&&Pt(0);break}if(jn||Pt(2),$n<256)Nt[$t++]=$n;else{if($n==256){wn=Wt,nn=null;break}var Gn=$n-254;if($n>264){var En=rt[pn=$n-257];Gn=Tt(Ut,Wt,(1<<En)-1)+lt[pn],Wt+=En}var zn=en[Mt(Ut,Wt)&Mn],Vn=zn>>>4;if(zn||Pt(3),Wt+=15&zn,on=ut[Vn],Vn>3&&(En=it[Vn],on+=Mt(Ut,Wt)&(1<<En)-1,Wt+=En),Wt>an){qt&&Pt(0);break}Yt&&Xt($t+131072);for(var Un=$t+Gn;$t<Un;$t+=4)Nt[$t]=Nt[$t-on],Nt[$t+1]=Nt[$t+1-on],Nt[$t+2]=Nt[$t+2-on],Nt[$t+3]=Nt[$t+3-on];$t=Un}}zt.l=nn,zt.p=wn,zt.b=$t,nn&&(Vt=1,zt.m=sn,zt.d=en,zt.n=rn)}while(!Vt);return $t==Nt.length?Nt:function(Fn,kn,Yn){(kn==null||kn<0)&&(kn=0),(Yn==null||Yn>Fn.length)&&(Yn=Fn.length);var nr=new(Fn instanceof _e?_e:Fn instanceof nt?nt:_)(Yn-kn);return nr.set(Fn.subarray(kn,Yn)),nr}(Nt,0,$t)},Bt=new _(0),Ot=typeof TextDecoder<"u"&&new TextDecoder;try{Ot.decode(Bt,{stream:!0})}catch{}return tt.convert_streams=function(Ut){var Nt=new DataView(Ut),zt=0;function jt(){var gn=Nt.getUint16(zt);return zt+=2,gn}function Yt(){var gn=Nt.getUint32(zt);return zt+=4,gn}function qt(gn){Bn.setUint16(Nn,gn),Nn+=2}function Gt(gn){Bn.setUint32(Nn,gn),Nn+=4}for(var Xt={signature:Yt(),flavor:Yt(),length:Yt(),numTables:jt(),reserved:jt(),totalSfntSize:Yt(),majorVersion:jt(),minorVersion:jt(),metaOffset:Yt(),metaLength:Yt(),metaOrigLength:Yt(),privOffset:Yt(),privLength:Yt()},Vt=0;Math.pow(2,Vt)<=Xt.numTables;)Vt++;Vt--;for(var Wt=16*Math.pow(2,Vt),$t=16*Xt.numTables-Wt,nn=12,en=[],sn=0;sn<Xt.numTables;sn++)en.push({tag:Yt(),offset:Yt(),compLength:Yt(),origLength:Yt(),origChecksum:Yt()}),nn+=16;var rn,an=new Uint8Array(12+16*en.length+en.reduce(function(gn,Ht){return gn+Ht.origLength+4},0)),dn=an.buffer,Bn=new DataView(dn),Nn=0;return Gt(Xt.flavor),qt(Xt.numTables),qt(Wt),qt(Vt),qt($t),en.forEach(function(gn){Gt(gn.tag),Gt(gn.origChecksum),Gt(nn),Gt(gn.origLength),gn.outOffset=nn,(nn+=gn.origLength)%4!=0&&(nn+=4-nn%4)}),en.forEach(function(gn){var Ht,xn=Ut.slice(gn.offset,gn.offset+gn.compLength);if(gn.compLength!=gn.origLength){var hn=new Uint8Array(gn.origLength);Ht=new Uint8Array(xn,2),wt(Ht,hn)}else hn=new Uint8Array(xn);an.set(hn,gn.outOffset);var vn=0;(nn=gn.outOffset+gn.origLength)%4!=0&&(vn=4-nn%4),an.set(new Uint8Array(vn).buffer,gn.outOffset+gn.origLength),rn=nn+vn}),dn.slice(0,rn)},Object.defineProperty(tt,"__esModule",{value:!0}),tt}({}).convert_streams}function parserFactory(tt,_){const _e={M:2,L:2,Q:4,C:6,Z:0},nt={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},rt=1,it=2,ot=4,st=8,at=16,lt=32;let ct;function ut(Tt){if(!ct){const Mt={R:it,L:rt,D:ot,C:at,U:lt,T:st};ct=new Map;for(let bt in nt){let Pt=0;nt[bt].split(",").forEach(wt=>{let[Bt,Ot]=wt.split("+");Bt=parseInt(Bt,36),Ot=Ot?parseInt(Ot,36):0,ct.set(Pt+=Bt,Mt[bt]);for(let Ut=Ot;Ut--;)ct.set(++Pt,Mt[bt])})}}return ct.get(Tt)||lt}const ht=1,pt=2,gt=3,yt=4,vt=[null,"isol","init","fina","medi"];function mt(Tt){const Mt=new Uint8Array(Tt.length);let bt=lt,Pt=ht,wt=-1;for(let Bt=0;Bt<Tt.length;Bt++){const Ot=Tt.codePointAt(Bt);let Ut=ut(Ot)|0,Nt=ht;Ut&st||(bt&(rt|ot|at)?Ut&(it|ot|at)?(Nt=gt,(Pt===ht||Pt===gt)&&Mt[wt]++):Ut&(rt|lt)&&(Pt===pt||Pt===yt)&&Mt[wt]--:bt&(it|lt)&&(Pt===pt||Pt===yt)&&Mt[wt]--,Pt=Mt[Bt]=Nt,bt=Ut,wt=Bt,Ot>65535&&Bt++)}return Mt}function _t(Tt,Mt){const bt=[];for(let wt=0;wt<Mt.length;wt++){const Bt=Mt.codePointAt(wt);Bt>65535&&wt++,bt.push(tt.U.codeToGlyph(Tt,Bt))}const Pt=Tt.GSUB;if(Pt){const{lookupList:wt,featureList:Bt}=Pt;let Ot;const Ut=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,Nt=[];Bt.forEach(zt=>{if(Ut.test(zt.tag))for(let jt=0;jt<zt.tab.length;jt++){if(Nt[zt.tab[jt]])continue;Nt[zt.tab[jt]]=!0;const Yt=wt[zt.tab[jt]],qt=/^(isol|init|fina|medi)$/.test(zt.tag);qt&&!Ot&&(Ot=mt(Mt));for(let Gt=0;Gt<bt.length;Gt++)(!Ot||!qt||vt[Ot[Gt]]===zt.tag)&&tt.U._applySubs(bt,Gt,Yt,wt)}})}return bt}function xt(...Tt){for(let Mt=0;Mt<Tt.length;Mt++)if(typeof Tt[Mt]=="number")return Tt[Mt]}function St(Tt){const Mt=Object.create(null),bt=Tt["OS/2"],Pt=Tt.hhea,wt=Tt.head.unitsPerEm,Bt=xt(bt&&bt.sTypoAscender,Pt&&Pt.ascender,wt),Ot={unitsPerEm:wt,ascender:Bt,descender:xt(bt&&bt.sTypoDescender,Pt&&Pt.descender,0),capHeight:xt(bt&&bt.sCapHeight,Bt),xHeight:xt(bt&&bt.sxHeight,Bt),lineGap:xt(bt&&bt.sTypoLineGap,Pt&&Pt.lineGap),forEachGlyph(Ut,Nt,zt,jt){let Yt=0;const qt=1/Ot.unitsPerEm*Nt,Gt=_t(Tt,Ut);let Xt=0,Vt=-1;return Gt.forEach((Wt,$t)=>{if(Wt!==-1){let nn=Mt[Wt];if(!nn){const{cmds:en,crds:sn}=tt.U.glyphToPath(Tt,Wt);let rn="",an=0;for(let Ht=0,xn=en.length;Ht<xn;Ht++){const hn=_e[en[Ht]];rn+=en[Ht];for(let vn=1;vn<=hn;vn++)rn+=(vn>1?",":"")+sn[an++]}let dn,Bn,Nn,gn;if(sn.length){dn=Bn=1/0,Nn=gn=-1/0;for(let Ht=0,xn=sn.length;Ht<xn;Ht+=2){let hn=sn[Ht],vn=sn[Ht+1];hn<dn&&(dn=hn),vn<Bn&&(Bn=vn),hn>Nn&&(Nn=hn),vn>gn&&(gn=vn)}}else dn=Nn=Bn=gn=0;nn=Mt[Wt]={index:Wt,advanceWidth:Tt.hmtx.aWidth[Wt],xMin:dn,yMin:Bn,xMax:Nn,yMax:gn,path:rn,pathCommandCount:en.length}}Vt!==-1&&(Yt+=tt.U.getPairAdjustment(Tt,Vt,Wt)*qt),jt.call(null,nn,Yt,Xt),nn.advanceWidth&&(Yt+=nn.advanceWidth*qt),zt&&(Yt+=zt*Nt),Vt=Wt}Xt+=Ut.codePointAt(Xt)>65535?2:1}),Yt}};return Ot}return function(Mt){const bt=new Uint8Array(Mt,0,4),Pt=tt._bin.readASCII(bt,0,4);if(Pt==="wOFF")Mt=_(Mt);else if(Pt==="wOF2")throw new Error("woff2 fonts not supported");return St(tt.parse(Mt)[0])}}const workerModule=defineWorkerModule({name:"Typr Font Parser",dependencies:[typrFactory,woff2otfFactory,parserFactory],init(tt,_,_e){const nt=tt(),rt=_();return _e(nt,rt)}}),CONFIG={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},tempColor=new Color$1;function now$1(){return(self.performance||Date).now()}const atlases=Object.create(null);function getTextRenderInfo(tt,_){tt=assign$2({},tt);const _e=now$1();if(tt.font=toAbsoluteURL(tt.font||CONFIG.defaultFontURL),tt.text=""+tt.text,tt.sdfGlyphSize=tt.sdfGlyphSize||CONFIG.sdfGlyphSize,tt.colorRanges!=null){let ut={};for(let ht in tt.colorRanges)if(tt.colorRanges.hasOwnProperty(ht)){let pt=tt.colorRanges[ht];typeof pt!="number"&&(pt=tempColor.set(pt).getHex()),ut[ht]=pt}tt.colorRanges=ut}Object.freeze(tt);const{textureWidth:nt,sdfExponent:rt}=CONFIG,{sdfGlyphSize:it}=tt,ot=nt/it*4;let st=atlases[it];if(!st){const ut=document.createElement("canvas");ut.width=nt,ut.height=it*256/ot,st=atlases[it]={glyphCount:0,sdfGlyphSize:it,sdfCanvas:ut,sdfTexture:new Texture(ut,void 0,void 0,void 0,LinearFilter,LinearFilter),contextLost:!1,glyphsByFont:new Map},st.sdfTexture.generateMipmaps=!1,initContextLossHandling(st)}const{sdfTexture:at,sdfCanvas:lt}=st;let ct=st.glyphsByFont.get(tt.font);ct||st.glyphsByFont.set(tt.font,ct=new Map),typesetInWorker(tt).then(ut=>{const{glyphIds:ht,glyphPositions:pt,fontSize:gt,unitsPerEm:yt,timings:vt}=ut,mt=[],_t=new Float32Array(ht.length*4),xt=gt/yt;let St=0,Tt=0;const Mt=now$1();ht.forEach((Ot,Ut)=>{let Nt=ct.get(Ot);if(!Nt){const{path:qt,pathBounds:Gt}=ut.glyphData[Ot],Xt=Math.max(Gt[2]-Gt[0],Gt[3]-Gt[1])/it*(CONFIG.sdfMargin*it+.5),Vt=st.glyphCount++,Wt=[Gt[0]-Xt,Gt[1]-Xt,Gt[2]+Xt,Gt[3]+Xt];ct.set(Ot,Nt={path:qt,atlasIndex:Vt,sdfViewBox:Wt}),mt.push(Nt)}const{sdfViewBox:zt}=Nt,jt=pt[Tt++],Yt=pt[Tt++];_t[St++]=jt+zt[0]*xt,_t[St++]=Yt+zt[1]*xt,_t[St++]=jt+zt[2]*xt,_t[St++]=Yt+zt[3]*xt,ht[Ut]=Nt.atlasIndex}),vt.quads=(vt.quads||0)+(now$1()-Mt);const bt=now$1();vt.sdf={};const Pt=lt.height,wt=Math.ceil(st.glyphCount/ot),Bt=Math.pow(2,Math.ceil(Math.log2(wt*it)));Bt>Pt&&(console.info(`Increasing SDF texture size ${Pt}->${Bt}`),resizeWebGLCanvasWithoutClearing(lt,nt,Bt),at.dispose()),Promise.all(mt.map(Ot=>generateGlyphSDF(Ot,st,tt.gpuAccelerateSDF).then(({timing:Ut})=>{vt.sdf[Ot.atlasIndex]=Ut}))).then(()=>{mt.length&&!st.contextLost&&(safariPre15Workaround(st),at.needsUpdate=!0),vt.sdfTotal=now$1()-bt,vt.total=now$1()-_e,_(Object.freeze({parameters:tt,sdfTexture:at,sdfGlyphSize:it,sdfExponent:rt,glyphBounds:_t,glyphAtlasIndices:ht,glyphColors:ut.glyphColors,caretPositions:ut.caretPositions,caretHeight:ut.caretHeight,chunkedBounds:ut.chunkedBounds,ascender:ut.ascender,descender:ut.descender,lineHeight:ut.lineHeight,capHeight:ut.capHeight,xHeight:ut.xHeight,topBaseline:ut.topBaseline,blockBounds:ut.blockBounds,visibleBounds:ut.visibleBounds,timings:ut.timings}))})}),Promise.resolve().then(()=>{st.contextLost||warmUpSDFCanvas(lt)})}function generateGlyphSDF({path:tt,atlasIndex:_,sdfViewBox:_e},{sdfGlyphSize:nt,sdfCanvas:rt,contextLost:it},ot){if(it)return Promise.resolve({timing:-1});const{textureWidth:st,sdfExponent:at}=CONFIG,lt=Math.max(_e[2]-_e[0],_e[3]-_e[1]),ct=Math.floor(_/4),ut=ct%(st/nt)*nt,ht=Math.floor(ct/(st/nt))*nt,pt=_%4;return generateSDF(nt,nt,tt,_e,lt,at,rt,ut,ht,pt,ot)}function initContextLossHandling(tt){const _=tt.sdfCanvas;_.addEventListener("webglcontextlost",_e=>{console.log("Context Lost",_e),_e.preventDefault(),tt.contextLost=!0}),_.addEventListener("webglcontextrestored",_e=>{console.log("Context Restored",_e),tt.contextLost=!1;const nt=[];tt.glyphsByFont.forEach(rt=>{rt.forEach(it=>{nt.push(generateGlyphSDF(it,tt,!0))})}),Promise.all(nt).then(()=>{safariPre15Workaround(tt),tt.sdfTexture.needsUpdate=!0})})}function preloadFont({font:tt,characters:_,sdfGlyphSize:_e},nt){let rt=Array.isArray(_)?_.join(`
`):""+_;getTextRenderInfo({font:tt,sdfGlyphSize:_e,text:rt},nt)}function assign$2(tt,_){for(let _e in _)_.hasOwnProperty(_e)&&(tt[_e]=_[_e]);return tt}let linkEl;function toAbsoluteURL(tt){return linkEl||(linkEl=typeof document>"u"?{}:document.createElement("a")),linkEl.href=tt,linkEl.href}function safariPre15Workaround(tt){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:_,sdfTexture:_e}=tt,{width:nt,height:rt}=_,it=tt.sdfCanvas.getContext("webgl");let ot=_e.image.data;(!ot||ot.length!==nt*rt*4)&&(ot=new Uint8Array(nt*rt*4),_e.image={width:nt,height:rt,data:ot},_e.flipY=!1,_e.isDataTexture=!0),it.readPixels(0,0,nt,rt,it.RGBA,it.UNSIGNED_BYTE,ot)}}const typesetterWorkerModule=defineWorkerModule({name:"Typesetter",dependencies:[CONFIG,workerModule,createTypesetter,bidiFactory],init(tt,_,_e,nt){const{defaultFontURL:rt}=tt;return _e(_,nt(),{defaultFontURL:rt})}}),typesetInWorker=defineWorkerModule({name:"Typesetter",dependencies:[typesetterWorkerModule],init(tt){return function(_){return new Promise(_e=>{tt.typeset(_,_e)})}},getTransferables(tt){const _=[tt.glyphPositions.buffer,tt.glyphIds.buffer];return tt.caretPositions&&_.push(tt.caretPositions.buffer),tt.glyphColors&&_.push(tt.glyphColors.buffer),_}}),templateGeometries={};function getTemplateGeometry(tt){let _=templateGeometries[tt];if(!_){const _e=new PlaneGeometry(1,1,tt,tt),nt=_e.clone(),rt=_e.attributes,it=nt.attributes,ot=new BufferGeometry,st=rt.uv.count;for(let at=0;at<st;at++)it.position.array[at*3]*=-1,it.normal.array[at*3+2]*=-1;["position","normal","uv"].forEach(at=>{ot.setAttribute(at,new Float32BufferAttribute([...rt[at].array,...it[at].array],rt[at].itemSize))}),ot.setIndex([..._e.index.array,...nt.index.array.map(at=>at+st)]),ot.translate(.5,.5,0),_=templateGeometries[tt]=ot}return _}const glyphBoundsAttrName="aTroikaGlyphBounds",glyphIndexAttrName="aTroikaGlyphIndex",glyphColorAttrName="aTroikaGlyphColor";class GlyphsGeometry extends InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Sphere,this.boundingBox=new Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(_){const _e=this.getIndex().count;this.setDrawRange(_===BackSide?_e/2:0,_===DoubleSide?_e:_e/2)}set detail(_){if(_!==this._detail){this._detail=_,(typeof _!="number"||_<1)&&(_=1);let _e=getTemplateGeometry(_);["position","normal","uv"].forEach(nt=>{this.attributes[nt]=_e.attributes[nt].clone()}),this.setIndex(_e.getIndex().clone())}}get detail(){return this._detail}set curveRadius(_){_!==this._curveRadius&&(this._curveRadius=_,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(_,_e,nt,rt,it){updateBufferAttr(this,glyphBoundsAttrName,_,4),updateBufferAttr(this,glyphIndexAttrName,_e,1),updateBufferAttr(this,glyphColorAttrName,it,3),this._blockBounds=nt,this._chunkedBounds=rt,this.instanceCount=_e.length,this._updateBounds()}_updateBounds(){const _=this._blockBounds;if(_){const{curveRadius:_e,boundingBox:nt}=this;if(_e){const{PI:rt,floor:it,min:ot,max:st,sin:at,cos:lt}=Math,ct=rt/2,ut=rt*2,ht=Math.abs(_e),pt=_[0]/ht,gt=_[2]/ht,yt=it((pt+ct)/ut)!==it((gt+ct)/ut)?-ht:ot(at(pt)*ht,at(gt)*ht),vt=it((pt-ct)/ut)!==it((gt-ct)/ut)?ht:st(at(pt)*ht,at(gt)*ht),mt=it((pt+rt)/ut)!==it((gt+rt)/ut)?ht*2:st(ht-lt(pt)*ht,ht-lt(gt)*ht);nt.min.set(yt,_[1],_e<0?-mt:0),nt.max.set(vt,_[3],_e<0?0:mt)}else nt.min.set(_[0],_[1],0),nt.max.set(_[2],_[3],0);nt.getBoundingSphere(this.boundingSphere)}}applyClipRect(_){let _e=this.getAttribute(glyphIndexAttrName).count,nt=this._chunkedBounds;if(nt)for(let rt=nt.length;rt--;){_e=nt[rt].end;let it=nt[rt].rect;if(it[1]<_.w&&it[3]>_.y&&it[0]<_.z&&it[2]>_.x)break}this.instanceCount=_e}}function updateBufferAttr(tt,_,_e,nt){const rt=tt.getAttribute(_);_e?rt&&rt.array.length===_e.length?(rt.array.set(_e),rt.needsUpdate=!0):(tt.setAttribute(_,new InstancedBufferAttribute(_e,nt)),delete tt._maxInstanceCount,tt.dispose()):rt&&tt.deleteAttribute(_)}const VERTEX_DEFS=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,VERTEX_TRANSFORM=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,FRAGMENT_DEFS=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,FRAGMENT_TRANSFORM=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function createTextDerivedMaterial(tt){const _=createDerivedMaterial(tt,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Vector4(0,0,0,0)},uTroikaClipRect:{value:new Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Color$1},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:VERTEX_DEFS,vertexTransform:VERTEX_TRANSFORM,fragmentDefs:FRAGMENT_DEFS,fragmentColorTransform:FRAGMENT_TRANSFORM,customRewriter({vertexShader:_e,fragmentShader:nt}){let rt=/\buniform\s+vec3\s+diffuse\b/;return rt.test(nt)&&(nt=nt.replace(rt,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),rt.test(_e)||(_e=_e.replace(voidMainRegExp,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:_e,fragmentShader:nt}}});return _.transparent=!0,Object.defineProperties(_,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),_}const defaultMaterial=new MeshBasicMaterial({color:16777215,side:DoubleSide,transparent:!0}),defaultStrokeColor=8421504,tempMat4=new Matrix4,tempVec3a=new Vector3,tempVec3b=new Vector3,tempArray=[],origin=new Vector3,defaultOrient="+x+y";function first(tt){return Array.isArray(tt)?tt[0]:tt}let getFlatRaycastMesh=()=>{const tt=new Mesh(new PlaneGeometry(1,1),defaultMaterial);return getFlatRaycastMesh=()=>tt,tt},getCurvedRaycastMesh=()=>{const tt=new Mesh(new PlaneGeometry(1,1,32,1),defaultMaterial);return getCurvedRaycastMesh=()=>tt,tt};const syncStartEvent={type:"syncstart"},syncCompleteEvent={type:"synccomplete"},SYNCABLE_PROPS=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],COPYABLE_PROPS=SYNCABLE_PROPS.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let Text$1=class extends Mesh{constructor(){const _=new GlyphsGeometry;super(_,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=defaultStrokeColor,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=defaultOrient,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(_){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(_):(this._isSyncing=!0,this.dispatchEvent(syncStartEvent),getTextRenderInfo({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},_e=>{this._isSyncing=!1,this._textRenderInfo=_e,this.geometry.updateGlyphs(_e.glyphBounds,_e.glyphAtlasIndices,_e.blockBounds,_e.chunkedBounds,_e.glyphColors);const nt=this._queuedSyncs;nt&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{nt.forEach(rt=>rt&&rt())})),this.dispatchEvent(syncCompleteEvent),_&&_()})))}onBeforeRender(_,_e,nt,rt,it,ot){this.sync(),it.isTroikaTextMaterial&&this._prepareForRender(it),it._hadOwnSide=it.hasOwnProperty("side"),this.geometry.setSide(it._actualSide=it.side),it.side=FrontSide}onAfterRender(_,_e,nt,rt,it,ot){it._hadOwnSide?it.side=it._actualSide:delete it.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let _=this._derivedMaterial;const _e=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=defaultMaterial.clone());if((!_||_.baseMaterial!==_e)&&(_=this._derivedMaterial=createTextDerivedMaterial(_e),_e.addEventListener("dispose",function nt(){_e.removeEventListener("dispose",nt),_.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let nt=_._outlineMtl;return nt||(nt=_._outlineMtl=Object.create(_,{id:{value:_.id+.1}}),nt.isTextOutlineMaterial=!0,nt.depthWrite=!1,nt.map=null,_.addEventListener("dispose",function rt(){_.removeEventListener("dispose",rt),nt.dispose()})),[nt,_]}else return _}set material(_){_&&_.isTroikaTextMaterial?(this._derivedMaterial=_,this._baseMaterial=_.baseMaterial):this._baseMaterial=_}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(_){this.geometry.detail=_}get curveRadius(){return this.geometry.curveRadius}set curveRadius(_){this.geometry.curveRadius=_}get customDepthMaterial(){return first(this.material).getDepthMaterial()}get customDistanceMaterial(){return first(this.material).getDistanceMaterial()}_prepareForRender(_){const _e=_.isTextOutlineMaterial,nt=_.uniforms,rt=this.textRenderInfo;if(rt){const{sdfTexture:st,blockBounds:at}=rt;nt.uTroikaSDFTexture.value=st,nt.uTroikaSDFTextureSize.value.set(st.image.width,st.image.height),nt.uTroikaSDFGlyphSize.value=rt.sdfGlyphSize,nt.uTroikaSDFExponent.value=rt.sdfExponent,nt.uTroikaTotalBounds.value.fromArray(at),nt.uTroikaUseGlyphColors.value=!_e&&!!rt.glyphColors;let lt=0,ct=0,ut=0,ht,pt,gt,yt=0,vt=0;if(_e){let{outlineWidth:_t,outlineOffsetX:xt,outlineOffsetY:St,outlineBlur:Tt,outlineOpacity:Mt}=this;lt=this._parsePercent(_t)||0,ct=Math.max(0,this._parsePercent(Tt)||0),ht=Mt,yt=this._parsePercent(xt)||0,vt=this._parsePercent(St)||0}else ut=Math.max(0,this._parsePercent(this.strokeWidth)||0),ut&&(gt=this.strokeColor,nt.uTroikaStrokeColor.value.set(gt??defaultStrokeColor),pt=this.strokeOpacity,pt==null&&(pt=1)),ht=this.fillOpacity;nt.uTroikaDistanceOffset.value=lt,nt.uTroikaPositionOffset.value.set(yt,vt),nt.uTroikaBlurRadius.value=ct,nt.uTroikaStrokeWidth.value=ut,nt.uTroikaStrokeOpacity.value=pt,nt.uTroikaFillOpacity.value=ht??1,nt.uTroikaCurveRadius.value=this.curveRadius||0;let mt=this.clipRect;if(mt&&Array.isArray(mt)&&mt.length===4)nt.uTroikaClipRect.value.fromArray(mt);else{const _t=(this.fontSize||.1)*100;nt.uTroikaClipRect.value.set(at[0]-_t,at[1]-_t,at[2]+_t,at[3]+_t)}this.geometry.applyClipRect(nt.uTroikaClipRect.value)}nt.uTroikaSDFDebug.value=!!this.debugSDF,_.polygonOffset=!!this.depthOffset,_.polygonOffsetFactor=_.polygonOffsetUnits=this.depthOffset||0;const it=_e?this.outlineColor||0:this.color;if(it==null)delete _.color;else{const st=_.hasOwnProperty("color")?_.color:_.color=new Color$1;(it!==st._input||typeof it=="object")&&st.set(st._input=it)}let ot=this.orientation||defaultOrient;if(ot!==_._orientation){let st=nt.uTroikaOrient.value;ot=ot.replace(/[^-+xyz]/g,"");let at=ot!==defaultOrient&&ot.match(/^([-+])([xyz])([-+])([xyz])$/);if(at){let[,lt,ct,ut,ht]=at;tempVec3a.set(0,0,0)[ct]=lt==="-"?1:-1,tempVec3b.set(0,0,0)[ht]=ut==="-"?-1:1,tempMat4.lookAt(origin,tempVec3a.cross(tempVec3b),tempVec3b),st.setFromMatrix4(tempMat4)}else st.identity();_._orientation=ot}}_parsePercent(_){if(typeof _=="string"){let _e=_.match(/^(-?[\d.]+)%$/),nt=_e?parseFloat(_e[1]):NaN;_=(isNaN(nt)?0:nt/100)*this.fontSize}return _}localPositionToTextCoords(_,_e=new Vector2){_e.copy(_);const nt=this.curveRadius;return nt&&(_e.x=Math.atan2(_.x,Math.abs(nt)-Math.abs(_.z))*Math.abs(nt)),_e}worldPositionToTextCoords(_,_e=new Vector2){return tempVec3a.copy(_),this.localPositionToTextCoords(this.worldToLocal(tempVec3a),_e)}raycast(_,_e){const{textRenderInfo:nt,curveRadius:rt}=this;if(nt){const it=nt.blockBounds,ot=rt?getCurvedRaycastMesh():getFlatRaycastMesh(),st=ot.geometry,{position:at,uv:lt}=st.attributes;for(let ct=0;ct<lt.count;ct++){let ut=it[0]+lt.getX(ct)*(it[2]-it[0]);const ht=it[1]+lt.getY(ct)*(it[3]-it[1]);let pt=0;rt&&(pt=rt-Math.cos(ut/rt)*rt,ut=Math.sin(ut/rt)*rt),at.setXYZ(ct,ut,ht,pt)}st.boundingSphere=this.geometry.boundingSphere,st.boundingBox=this.geometry.boundingBox,ot.matrixWorld=this.matrixWorld,ot.material.side=this.material.side,tempArray.length=0,ot.raycast(_,tempArray);for(let ct=0;ct<tempArray.length;ct++)tempArray[ct].object=this,_e.push(tempArray[ct])}}copy(_){const _e=this.geometry;return super.copy(_),this.geometry=_e,COPYABLE_PROPS.forEach(nt=>{this[nt]=_[nt]}),this}clone(){return new this.constructor().copy(this)}};SYNCABLE_PROPS.forEach(tt=>{const _="_private_"+tt;Object.defineProperty(Text$1.prototype,tt,{get(){return this[_]},set(_e){_e!==this[_]&&(this[_]=_e,this._needsSync=!0)}})});const Text=reactExports.forwardRef(({sdfGlyphSize:tt=64,anchorX:_="center",anchorY:_e="middle",font:nt,fontSize:rt=1,children:it,characters:ot,onSync:st,...at},lt)=>{const ct=useThree(({invalidate:gt})=>gt),[ut]=reactExports.useState(()=>new Text$1),[ht,pt]=reactExports.useMemo(()=>{const gt=[];let yt="";return reactExports.Children.forEach(it,vt=>{typeof vt=="string"||typeof vt=="number"?yt+=vt:gt.push(vt)}),[gt,yt]},[it]);return suspend(()=>new Promise(gt=>preloadFont({font:nt,characters:ot},gt)),["troika-text",nt,ot]),reactExports.useLayoutEffect(()=>void ut.sync(()=>{ct(),st&&st(ut)})),reactExports.useEffect(()=>()=>ut.dispose(),[ut]),reactExports.createElement("primitive",_extends$3({object:ut,ref:lt,font:nt,text:pt,anchorX:_,anchorY:_e,fontSize:rt,sdfGlyphSize:tt},at),ht)});let dracoLoader=null;function extensions(tt,_,_e){return nt=>{_e&&_e(nt),tt&&(dracoLoader||(dracoLoader=new DRACOLoader),dracoLoader.setDecoderPath(typeof tt=="string"?tt:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),nt.setDRACOLoader(dracoLoader)),_&&nt.setMeshoptDecoder(typeof MeshoptDecoder=="function"?MeshoptDecoder():MeshoptDecoder)}}function useGLTF(tt,_=!0,_e=!0,nt){return useLoader(GLTFLoader,tt,extensions(_,_e,nt))}useGLTF.preload=(tt,_=!0,_e=!0,nt)=>useLoader.preload(GLTFLoader,tt,extensions(_,_e,nt));useGLTF.clear=tt=>useLoader.clear(GLTFLoader,tt);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const MOUSE_BUTTON={LEFT:1,RIGHT:2,MIDDLE:4},ACTION=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),DOLLY_DIRECTION={NONE:0,IN:1,OUT:-1};function isPerspectiveCamera(tt){return tt.isPerspectiveCamera}function isOrthographicCamera(tt){return tt.isOrthographicCamera}const PI_2=Math.PI*2,PI_HALF=Math.PI/2,EPSILON=1e-5,DEG2RAD=Math.PI/180;function clamp$3(tt,_,_e){return Math.max(_,Math.min(_e,tt))}function approxZero(tt,_=EPSILON){return Math.abs(tt)<_}function approxEquals(tt,_,_e=EPSILON){return approxZero(tt-_,_e)}function roundToStep(tt,_){return Math.round(tt/_)*_}function infinityToMaxNumber(tt){return isFinite(tt)?tt:tt<0?-Number.MAX_VALUE:Number.MAX_VALUE}function maxNumberToInfinity(tt){return Math.abs(tt)<Number.MAX_VALUE?tt:tt*(1/0)}function smoothDamp(tt,_,_e,nt,rt=1/0,it){nt=Math.max(1e-4,nt);const ot=2/nt,st=ot*it,at=1/(1+st+.48*st*st+.235*st*st*st);let lt=tt-_;const ct=_,ut=rt*nt;lt=clamp$3(lt,-ut,ut),_=tt-lt;const ht=(_e.value+ot*lt)*it;_e.value=(_e.value-ot*ht)*at;let pt=_+(lt+ht)*at;return ct-tt>0==pt>ct&&(pt=ct,_e.value=(pt-ct)/it),pt}function smoothDampVec3(tt,_,_e,nt,rt=1/0,it,ot){nt=Math.max(1e-4,nt);const st=2/nt,at=st*it,lt=1/(1+at+.48*at*at+.235*at*at*at);let ct=_.x,ut=_.y,ht=_.z,pt=tt.x-ct,gt=tt.y-ut,yt=tt.z-ht;const vt=ct,mt=ut,_t=ht,xt=rt*nt,St=xt*xt,Tt=pt*pt+gt*gt+yt*yt;if(Tt>St){const jt=Math.sqrt(Tt);pt=pt/jt*xt,gt=gt/jt*xt,yt=yt/jt*xt}ct=tt.x-pt,ut=tt.y-gt,ht=tt.z-yt;const Mt=(_e.x+st*pt)*it,bt=(_e.y+st*gt)*it,Pt=(_e.z+st*yt)*it;_e.x=(_e.x-st*Mt)*lt,_e.y=(_e.y-st*bt)*lt,_e.z=(_e.z-st*Pt)*lt,ot.x=ct+(pt+Mt)*lt,ot.y=ut+(gt+bt)*lt,ot.z=ht+(yt+Pt)*lt;const wt=vt-tt.x,Bt=mt-tt.y,Ot=_t-tt.z,Ut=ot.x-vt,Nt=ot.y-mt,zt=ot.z-_t;return wt*Ut+Bt*Nt+Ot*zt>0&&(ot.x=vt,ot.y=mt,ot.z=_t,_e.x=(ot.x-vt)/it,_e.y=(ot.y-mt)/it,_e.z=(ot.z-_t)/it),ot}function extractClientCoordFromEvent(tt,_){_.set(0,0),tt.forEach(_e=>{_.x+=_e.clientX,_.y+=_e.clientY}),_.x/=tt.length,_.y/=tt.length}function notSupportedInOrthographicCamera(tt,_){return isOrthographicCamera(tt)?(console.warn(`${_} is not supported in OrthographicCamera`),!0):!1}class EventDispatcher{constructor(){this._listeners={}}addEventListener(_,_e){const nt=this._listeners;nt[_]===void 0&&(nt[_]=[]),nt[_].indexOf(_e)===-1&&nt[_].push(_e)}hasEventListener(_,_e){const nt=this._listeners;return nt[_]!==void 0&&nt[_].indexOf(_e)!==-1}removeEventListener(_,_e){const rt=this._listeners[_];if(rt!==void 0){const it=rt.indexOf(_e);it!==-1&&rt.splice(it,1)}}removeAllEventListeners(_){if(!_){this._listeners={};return}Array.isArray(this._listeners[_])&&(this._listeners[_].length=0)}dispatchEvent(_){const nt=this._listeners[_.type];if(nt!==void 0){_.target=this;const rt=nt.slice(0);for(let it=0,ot=rt.length;it<ot;it++)rt[it].call(this,_)}}}const VERSION="2.7.2",TOUCH_DOLLY_FACTOR=1/8,isBrowser$1=typeof window<"u",isMac=isBrowser$1&&/Mac/.test(navigator.platform),isPointerEventsNotSupported=!(isBrowser$1&&"PointerEvent"in window);let THREE,_ORIGIN,_AXIS_Y,_AXIS_Z,_v2,_v3A,_v3B,_v3C,_cameraDirection,_xColumn,_yColumn,_zColumn,_deltaTarget,_deltaOffset,_sphericalA,_sphericalB,_box3A,_box3B,_sphere,_quaternionA,_quaternionB,_rotationMatrix,_raycaster,CameraControls$1=class fp extends EventDispatcher{static install(_){THREE=_.THREE,_ORIGIN=Object.freeze(new THREE.Vector3(0,0,0)),_AXIS_Y=Object.freeze(new THREE.Vector3(0,1,0)),_AXIS_Z=Object.freeze(new THREE.Vector3(0,0,1)),_v2=new THREE.Vector2,_v3A=new THREE.Vector3,_v3B=new THREE.Vector3,_v3C=new THREE.Vector3,_cameraDirection=new THREE.Vector3,_xColumn=new THREE.Vector3,_yColumn=new THREE.Vector3,_zColumn=new THREE.Vector3,_deltaTarget=new THREE.Vector3,_deltaOffset=new THREE.Vector3,_sphericalA=new THREE.Spherical,_sphericalB=new THREE.Spherical,_box3A=new THREE.Box3,_box3B=new THREE.Box3,_sphere=new THREE.Sphere,_quaternionA=new THREE.Quaternion,_quaternionB=new THREE.Quaternion,_rotationMatrix=new THREE.Matrix4,_raycaster=new THREE.Raycaster}static get ACTION(){return ACTION}constructor(_,_e){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=ACTION.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=DOLLY_DIRECTION.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new THREE.Vector3,this._focalOffsetVelocity=new THREE.Vector3,this._zoomVelocity={value:0},this._truckInternal=(St,Tt,Mt)=>{let bt,Pt;if(isPerspectiveCamera(this._camera)){const wt=_v3A.copy(this._camera.position).sub(this._target),Bt=this._camera.getEffectiveFOV()*DEG2RAD,Ot=wt.length()*Math.tan(Bt*.5);bt=this.truckSpeed*St*Ot/this._elementRect.height,Pt=this.truckSpeed*Tt*Ot/this._elementRect.height}else if(isOrthographicCamera(this._camera)){const wt=this._camera;bt=St*(wt.right-wt.left)/wt.zoom/this._elementRect.width,Pt=Tt*(wt.top-wt.bottom)/wt.zoom/this._elementRect.height}else return;this.verticalDragToForward?(Mt?this.setFocalOffset(this._focalOffsetEnd.x+bt,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(bt,0,!0),this.forward(-Pt,!0)):Mt?this.setFocalOffset(this._focalOffsetEnd.x+bt,this._focalOffsetEnd.y+Pt,this._focalOffsetEnd.z,!0):this.truck(bt,Pt,!0)},this._rotateInternal=(St,Tt)=>{const Mt=PI_2*this.azimuthRotateSpeed*St/this._elementRect.height,bt=PI_2*this.polarRotateSpeed*Tt/this._elementRect.height;this.rotate(Mt,bt,!0)},this._dollyInternal=(St,Tt,Mt)=>{const bt=Math.pow(.95,-St*this.dollySpeed),Pt=this._sphericalEnd.radius,wt=this._sphericalEnd.radius*bt,Bt=clamp$3(wt,this.minDistance,this.maxDistance),Ot=Bt-wt;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(wt,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(Ot,!0),this._dollyToNoClamp(Bt,!0)):this._dollyToNoClamp(Bt,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?wt:Bt)-Pt,this._dollyControlCoord.set(Tt,Mt)),this._lastDollyDirection=Math.sign(-St)},this._zoomInternal=(St,Tt,Mt)=>{const bt=Math.pow(.95,St*this.dollySpeed),Pt=this._zoom,wt=this._zoom*bt;this.zoomTo(wt,!0),this.dollyToCursor&&(this._changedZoom+=wt-Pt,this._dollyControlCoord.set(Tt,Mt))},typeof THREE>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=_,this._yAxisUpSpace=new THREE.Quaternion().setFromUnitVectors(this._camera.up,_AXIS_Y),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=ACTION.NONE,this._target=new THREE.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new THREE.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new THREE.Spherical().setFromVector3(_v3A.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this._updateNearPlaneCorners(),this._boundary=new THREE.Box3(new THREE.Vector3(-1/0,-1/0,-1/0),new THREE.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new THREE.Vector2,this.mouseButtons={left:ACTION.ROTATE,middle:ACTION.DOLLY,right:ACTION.TRUCK,wheel:isPerspectiveCamera(this._camera)?ACTION.DOLLY:isOrthographicCamera(this._camera)?ACTION.ZOOM:ACTION.NONE},this.touches={one:ACTION.TOUCH_ROTATE,two:isPerspectiveCamera(this._camera)?ACTION.TOUCH_DOLLY_TRUCK:isOrthographicCamera(this._camera)?ACTION.TOUCH_ZOOM_TRUCK:ACTION.NONE,three:ACTION.TOUCH_TRUCK};const nt=new THREE.Vector2,rt=new THREE.Vector2,it=new THREE.Vector2,ot=St=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const bt=this._domElement.getBoundingClientRect(),Pt=St.clientX/bt.width,wt=St.clientY/bt.height;if(Pt<this._interactiveArea.left||Pt>this._interactiveArea.right||wt<this._interactiveArea.top||wt>this._interactiveArea.bottom)return}const Tt=St.pointerType!=="mouse"?null:(St.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT?MOUSE_BUTTON.LEFT:(St.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.MIDDLE?MOUSE_BUTTON.MIDDLE:(St.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.RIGHT?MOUSE_BUTTON.RIGHT:null;if(Tt!==null){const bt=this._findPointerByMouseButton(Tt);bt&&this._disposePointer(bt)}if((St.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT&&this._lockedPointer)return;const Mt={pointerId:St.pointerId,clientX:St.clientX,clientY:St.clientY,deltaX:0,deltaY:0,mouseButton:Tt};this._activePointers.push(Mt),this._domElement.ownerDocument.removeEventListener("pointermove",at,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",ct),this._domElement.ownerDocument.addEventListener("pointermove",at,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",ct),this._isDragging=!0,yt(St)},st=St=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const bt=this._domElement.getBoundingClientRect(),Pt=St.clientX/bt.width,wt=St.clientY/bt.height;if(Pt<this._interactiveArea.left||Pt>this._interactiveArea.right||wt<this._interactiveArea.top||wt>this._interactiveArea.bottom)return}const Tt=(St.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT?MOUSE_BUTTON.LEFT:(St.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.MIDDLE?MOUSE_BUTTON.MIDDLE:(St.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.RIGHT?MOUSE_BUTTON.RIGHT:null;if(Tt!==null){const bt=this._findPointerByMouseButton(Tt);bt&&this._disposePointer(bt)}const Mt={pointerId:1,clientX:St.clientX,clientY:St.clientY,deltaX:0,deltaY:0,mouseButton:(St.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT?MOUSE_BUTTON.LEFT:(St.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.LEFT?MOUSE_BUTTON.MIDDLE:(St.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.LEFT?MOUSE_BUTTON.RIGHT:null};this._activePointers.push(Mt),this._domElement.ownerDocument.removeEventListener("mousemove",lt),this._domElement.ownerDocument.removeEventListener("mouseup",ut),this._domElement.ownerDocument.addEventListener("mousemove",lt),this._domElement.ownerDocument.addEventListener("mouseup",ut),this._isDragging=!0,yt(St)},at=St=>{St.cancelable&&St.preventDefault();const Tt=St.pointerId,Mt=this._lockedPointer||this._findPointerById(Tt);if(Mt){if(Mt.clientX=St.clientX,Mt.clientY=St.clientY,Mt.deltaX=St.movementX,Mt.deltaY=St.movementY,this._state=0,St.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(St.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(St.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(St.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.RIGHT&&(this._state=this._state|this.mouseButtons.right);vt()}},lt=St=>{const Tt=this._lockedPointer||this._findPointerById(1);Tt&&(Tt.clientX=St.clientX,Tt.clientY=St.clientY,Tt.deltaX=St.movementX,Tt.deltaY=St.movementY,this._state=0,(this._lockedPointer||(St.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT)&&(this._state=this._state|this.mouseButtons.left),(St.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(St.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.RIGHT&&(this._state=this._state|this.mouseButtons.right),vt())},ct=St=>{const Tt=this._findPointerById(St.pointerId);if(!(Tt&&Tt===this._lockedPointer)){if(Tt&&this._disposePointer(Tt),St.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=ACTION.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=ACTION.NONE;mt()}},ut=()=>{const St=this._findPointerById(1);St&&St===this._lockedPointer||(St&&this._disposePointer(St),this._state=ACTION.NONE,mt())};let ht=-1;const pt=St=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===ACTION.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const wt=this._domElement.getBoundingClientRect(),Bt=St.clientX/wt.width,Ot=St.clientY/wt.height;if(Bt<this._interactiveArea.left||Bt>this._interactiveArea.right||Ot<this._interactiveArea.top||Ot>this._interactiveArea.bottom)return}if(St.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===ACTION.ROTATE||this.mouseButtons.wheel===ACTION.TRUCK){const wt=performance.now();ht-wt<1e3&&this._getClientRect(this._elementRect),ht=wt}const Tt=isMac?-1:-3,Mt=St.deltaMode===1?St.deltaY/Tt:St.deltaY/(Tt*10),bt=this.dollyToCursor?(St.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,Pt=this.dollyToCursor?(St.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case ACTION.ROTATE:{this._rotateInternal(St.deltaX,St.deltaY),this._isUserControllingRotate=!0;break}case ACTION.TRUCK:{this._truckInternal(St.deltaX,St.deltaY,!1),this._isUserControllingTruck=!0;break}case ACTION.OFFSET:{this._truckInternal(St.deltaX,St.deltaY,!0),this._isUserControllingOffset=!0;break}case ACTION.DOLLY:{this._dollyInternal(-Mt,bt,Pt),this._isUserControllingDolly=!0;break}case ACTION.ZOOM:{this._zoomInternal(-Mt,bt,Pt),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},gt=St=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===fp.ACTION.NONE){const Tt=St instanceof PointerEvent?St.pointerId:(St instanceof MouseEvent,0),Mt=this._findPointerById(Tt);Mt&&this._disposePointer(Mt),this._domElement.ownerDocument.removeEventListener("pointermove",at,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",ct),this._domElement.ownerDocument.removeEventListener("mousemove",lt),this._domElement.ownerDocument.removeEventListener("mouseup",ut);return}St.preventDefault()}},yt=St=>{if(!this._enabled)return;if(extractClientCoordFromEvent(this._activePointers,_v2),this._getClientRect(this._elementRect),nt.copy(_v2),rt.copy(_v2),this._activePointers.length>=2){const Mt=_v2.x-this._activePointers[1].clientX,bt=_v2.y-this._activePointers[1].clientY,Pt=Math.sqrt(Mt*Mt+bt*bt);it.set(0,Pt);const wt=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,Bt=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;rt.set(wt,Bt)}if(this._state=0,!St)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in St&&St.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(St.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT&&(this._state=this._state|this.mouseButtons.left),(St.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(St.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&ACTION.ROTATE)===ACTION.ROTATE||(this._state&ACTION.TOUCH_ROTATE)===ACTION.TOUCH_ROTATE||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_ZOOM_ROTATE)===ACTION.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&ACTION.TRUCK)===ACTION.TRUCK||(this._state&ACTION.TOUCH_TRUCK)===ACTION.TOUCH_TRUCK||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_ZOOM_TRUCK)===ACTION.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&ACTION.DOLLY)===ACTION.DOLLY||(this._state&ACTION.TOUCH_DOLLY)===ACTION.TOUCH_DOLLY||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&ACTION.ZOOM)===ACTION.ZOOM||(this._state&ACTION.TOUCH_ZOOM)===ACTION.TOUCH_ZOOM||(this._state&ACTION.TOUCH_ZOOM_TRUCK)===ACTION.TOUCH_ZOOM_TRUCK||(this._state&ACTION.TOUCH_ZOOM_OFFSET)===ACTION.TOUCH_ZOOM_OFFSET||(this._state&ACTION.TOUCH_ZOOM_ROTATE)===ACTION.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&ACTION.OFFSET)===ACTION.OFFSET||(this._state&ACTION.TOUCH_OFFSET)===ACTION.TOUCH_OFFSET||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET||(this._state&ACTION.TOUCH_ZOOM_OFFSET)===ACTION.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},vt=()=>{if(!this._enabled)return;extractClientCoordFromEvent(this._activePointers,_v2);const Tt=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,Mt=Tt?-Tt.deltaX:rt.x-_v2.x,bt=Tt?-Tt.deltaY:rt.y-_v2.y;if(rt.copy(_v2),((this._state&ACTION.ROTATE)===ACTION.ROTATE||(this._state&ACTION.TOUCH_ROTATE)===ACTION.TOUCH_ROTATE||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_ZOOM_ROTATE)===ACTION.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(Mt,bt),this._isUserControllingRotate=!0),(this._state&ACTION.DOLLY)===ACTION.DOLLY||(this._state&ACTION.ZOOM)===ACTION.ZOOM){const Pt=this.dollyToCursor?(nt.x-this._elementRect.x)/this._elementRect.width*2-1:0,wt=this.dollyToCursor?(nt.y-this._elementRect.y)/this._elementRect.height*-2+1:0,Bt=this.dollyDragInverted?-1:1;(this._state&ACTION.DOLLY)===ACTION.DOLLY?(this._dollyInternal(Bt*bt*TOUCH_DOLLY_FACTOR,Pt,wt),this._isUserControllingDolly=!0):(this._zoomInternal(Bt*bt*TOUCH_DOLLY_FACTOR,Pt,wt),this._isUserControllingZoom=!0)}if((this._state&ACTION.TOUCH_DOLLY)===ACTION.TOUCH_DOLLY||(this._state&ACTION.TOUCH_ZOOM)===ACTION.TOUCH_ZOOM||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_ZOOM_TRUCK)===ACTION.TOUCH_ZOOM_TRUCK||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET||(this._state&ACTION.TOUCH_ZOOM_OFFSET)===ACTION.TOUCH_ZOOM_OFFSET||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_ZOOM_ROTATE)===ACTION.TOUCH_ZOOM_ROTATE){const Pt=_v2.x-this._activePointers[1].clientX,wt=_v2.y-this._activePointers[1].clientY,Bt=Math.sqrt(Pt*Pt+wt*wt),Ot=it.y-Bt;it.set(0,Bt);const Ut=this.dollyToCursor?(rt.x-this._elementRect.x)/this._elementRect.width*2-1:0,Nt=this.dollyToCursor?(rt.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&ACTION.TOUCH_DOLLY)===ACTION.TOUCH_DOLLY||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET?(this._dollyInternal(Ot*TOUCH_DOLLY_FACTOR,Ut,Nt),this._isUserControllingDolly=!0):(this._zoomInternal(Ot*TOUCH_DOLLY_FACTOR,Ut,Nt),this._isUserControllingZoom=!0)}((this._state&ACTION.TRUCK)===ACTION.TRUCK||(this._state&ACTION.TOUCH_TRUCK)===ACTION.TOUCH_TRUCK||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_ZOOM_TRUCK)===ACTION.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(Mt,bt,!1),this._isUserControllingTruck=!0),((this._state&ACTION.OFFSET)===ACTION.OFFSET||(this._state&ACTION.TOUCH_OFFSET)===ACTION.TOUCH_OFFSET||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET||(this._state&ACTION.TOUCH_ZOOM_OFFSET)===ACTION.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(Mt,bt,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},mt=()=>{extractClientCoordFromEvent(this._activePointers,_v2),rt.copy(_v2),(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",at,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",lt),this._domElement.ownerDocument.removeEventListener("pointerup",ct),this._domElement.ownerDocument.removeEventListener("mouseup",ut),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",at,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",ct),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",_t),this._domElement.ownerDocument.addEventListener("pointerlockerror",xt),this._domElement.ownerDocument.addEventListener("pointermove",at,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",ct),yt())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",_t),this._domElement.ownerDocument.removeEventListener("pointerlockerror",xt))};const _t=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},xt=()=>{this.unlockPointer()};this._addAllEventListeners=St=>{this._domElement=St,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",ot),isPointerEventsNotSupported&&this._domElement.addEventListener("mousedown",st),this._domElement.addEventListener("pointercancel",ct),this._domElement.addEventListener("wheel",pt,{passive:!1}),this._domElement.addEventListener("contextmenu",gt)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",ot),this._domElement.removeEventListener("mousedown",st),this._domElement.removeEventListener("pointercancel",ct),this._domElement.removeEventListener("wheel",pt,{passive:!1}),this._domElement.removeEventListener("contextmenu",gt),this._domElement.ownerDocument.removeEventListener("pointermove",at,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",lt),this._domElement.ownerDocument.removeEventListener("pointerup",ct),this._domElement.ownerDocument.removeEventListener("mouseup",ut),this._domElement.ownerDocument.removeEventListener("pointerlockchange",_t),this._domElement.ownerDocument.removeEventListener("pointerlockerror",xt))},this.cancel=()=>{this._state!==ACTION.NONE&&(this._state=ACTION.NONE,this._activePointers.length=0,mt())},_e&&this.connect(_e),this.update(0)}get camera(){return this._camera}set camera(_){this._camera=_,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(_){this._enabled=_,this._domElement&&(_?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(_){this._spherical.radius===_&&this._sphericalEnd.radius===_||(this._spherical.radius=_,this._sphericalEnd.radius=_,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(_){this._spherical.theta===_&&this._sphericalEnd.theta===_||(this._spherical.theta=_,this._sphericalEnd.theta=_,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(_){this._spherical.phi===_&&this._sphericalEnd.phi===_||(this._spherical.phi=_,this._sphericalEnd.phi=_,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(_){this._boundaryEnclosesCamera=_,this._needsUpdate=!0}set interactiveArea(_){this._interactiveArea.width=clamp$3(_.width,0,1),this._interactiveArea.height=clamp$3(_.height,0,1),this._interactiveArea.x=clamp$3(_.x,0,1-this._interactiveArea.width),this._interactiveArea.y=clamp$3(_.x,0,1-this._interactiveArea.height)}addEventListener(_,_e){super.addEventListener(_,_e)}removeEventListener(_,_e){super.removeEventListener(_,_e)}rotate(_,_e,nt=!1){return this.rotateTo(this._sphericalEnd.theta+_,this._sphericalEnd.phi+_e,nt)}rotateAzimuthTo(_,_e=!1){return this.rotateTo(_,this._sphericalEnd.phi,_e)}rotatePolarTo(_,_e=!1){return this.rotateTo(this._sphericalEnd.theta,_,_e)}rotateTo(_,_e,nt=!1){this._isUserControllingRotate=!1;const rt=clamp$3(_,this.minAzimuthAngle,this.maxAzimuthAngle),it=clamp$3(_e,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=rt,this._sphericalEnd.phi=it,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,nt||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const ot=!nt||approxEquals(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&approxEquals(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(ot)}dolly(_,_e=!1){return this.dollyTo(this._sphericalEnd.radius-_,_e)}dollyTo(_,_e=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=DOLLY_DIRECTION.NONE,this._changedDolly=0,this._dollyToNoClamp(clamp$3(_,this.minDistance,this.maxDistance),_e)}_dollyToNoClamp(_,_e=!1){const nt=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const ot=this._collisionTest(),st=approxEquals(ot,this._spherical.radius);if(!(nt>_)&&st)return Promise.resolve();this._sphericalEnd.radius=Math.min(_,ot)}else this._sphericalEnd.radius=_;this._needsUpdate=!0,_e||(this._spherical.radius=this._sphericalEnd.radius);const it=!_e||approxEquals(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(it)}dollyInFixed(_,_e=!1){this._targetEnd.add(this._getCameraDirection(_cameraDirection).multiplyScalar(_)),_e||this._target.copy(this._targetEnd);const nt=!_e||approxEquals(this._target.x,this._targetEnd.x,this.restThreshold)&&approxEquals(this._target.y,this._targetEnd.y,this.restThreshold)&&approxEquals(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(nt)}zoom(_,_e=!1){return this.zoomTo(this._zoomEnd+_,_e)}zoomTo(_,_e=!1){this._isUserControllingZoom=!1,this._zoomEnd=clamp$3(_,this.minZoom,this.maxZoom),this._needsUpdate=!0,_e||(this._zoom=this._zoomEnd);const nt=!_e||approxEquals(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(nt)}pan(_,_e,nt=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(_,_e,nt)}truck(_,_e,nt=!1){this._camera.updateMatrix(),_xColumn.setFromMatrixColumn(this._camera.matrix,0),_yColumn.setFromMatrixColumn(this._camera.matrix,1),_xColumn.multiplyScalar(_),_yColumn.multiplyScalar(-_e);const rt=_v3A.copy(_xColumn).add(_yColumn),it=_v3B.copy(this._targetEnd).add(rt);return this.moveTo(it.x,it.y,it.z,nt)}forward(_,_e=!1){_v3A.setFromMatrixColumn(this._camera.matrix,0),_v3A.crossVectors(this._camera.up,_v3A),_v3A.multiplyScalar(_);const nt=_v3B.copy(this._targetEnd).add(_v3A);return this.moveTo(nt.x,nt.y,nt.z,_e)}elevate(_,_e=!1){return _v3A.copy(this._camera.up).multiplyScalar(_),this.moveTo(this._targetEnd.x+_v3A.x,this._targetEnd.y+_v3A.y,this._targetEnd.z+_v3A.z,_e)}moveTo(_,_e,nt,rt=!1){this._isUserControllingTruck=!1;const it=_v3A.set(_,_e,nt).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,it,this.boundaryFriction),this._needsUpdate=!0,rt||this._target.copy(this._targetEnd);const ot=!rt||approxEquals(this._target.x,this._targetEnd.x,this.restThreshold)&&approxEquals(this._target.y,this._targetEnd.y,this.restThreshold)&&approxEquals(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(ot)}lookInDirectionOf(_,_e,nt,rt=!1){const st=_v3A.set(_,_e,nt).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(st.x,st.y,st.z,rt)}fitToBox(_,_e,{cover:nt=!1,paddingLeft:rt=0,paddingRight:it=0,paddingBottom:ot=0,paddingTop:st=0}={}){const at=[],lt=_.isBox3?_box3A.copy(_):_box3A.setFromObject(_);lt.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const ct=roundToStep(this._sphericalEnd.theta,PI_HALF),ut=roundToStep(this._sphericalEnd.phi,PI_HALF);at.push(this.rotateTo(ct,ut,_e));const ht=_v3A.setFromSpherical(this._sphericalEnd).normalize(),pt=_quaternionA.setFromUnitVectors(ht,_AXIS_Z),gt=approxEquals(Math.abs(ht.y),1);gt&&pt.multiply(_quaternionB.setFromAxisAngle(_AXIS_Y,ct)),pt.multiply(this._yAxisUpSpaceInverse);const yt=_box3B.makeEmpty();_v3B.copy(lt.min).applyQuaternion(pt),yt.expandByPoint(_v3B),_v3B.copy(lt.min).setX(lt.max.x).applyQuaternion(pt),yt.expandByPoint(_v3B),_v3B.copy(lt.min).setY(lt.max.y).applyQuaternion(pt),yt.expandByPoint(_v3B),_v3B.copy(lt.max).setZ(lt.min.z).applyQuaternion(pt),yt.expandByPoint(_v3B),_v3B.copy(lt.min).setZ(lt.max.z).applyQuaternion(pt),yt.expandByPoint(_v3B),_v3B.copy(lt.max).setY(lt.min.y).applyQuaternion(pt),yt.expandByPoint(_v3B),_v3B.copy(lt.max).setX(lt.min.x).applyQuaternion(pt),yt.expandByPoint(_v3B),_v3B.copy(lt.max).applyQuaternion(pt),yt.expandByPoint(_v3B),yt.min.x-=rt,yt.min.y-=ot,yt.max.x+=it,yt.max.y+=st,pt.setFromUnitVectors(_AXIS_Z,ht),gt&&pt.premultiply(_quaternionB.invert()),pt.premultiply(this._yAxisUpSpace);const vt=yt.getSize(_v3A),mt=yt.getCenter(_v3B).applyQuaternion(pt);if(isPerspectiveCamera(this._camera)){const _t=this.getDistanceToFitBox(vt.x,vt.y,vt.z,nt);at.push(this.moveTo(mt.x,mt.y,mt.z,_e)),at.push(this.dollyTo(_t,_e)),at.push(this.setFocalOffset(0,0,0,_e))}else if(isOrthographicCamera(this._camera)){const _t=this._camera,xt=_t.right-_t.left,St=_t.top-_t.bottom,Tt=nt?Math.max(xt/vt.x,St/vt.y):Math.min(xt/vt.x,St/vt.y);at.push(this.moveTo(mt.x,mt.y,mt.z,_e)),at.push(this.zoomTo(Tt,_e)),at.push(this.setFocalOffset(0,0,0,_e))}return Promise.all(at)}fitToSphere(_,_e){const nt=[],it=_ instanceof THREE.Sphere?_sphere.copy(_):fp.createBoundingSphere(_,_sphere);if(nt.push(this.moveTo(it.center.x,it.center.y,it.center.z,_e)),isPerspectiveCamera(this._camera)){const ot=this.getDistanceToFitSphere(it.radius);nt.push(this.dollyTo(ot,_e))}else if(isOrthographicCamera(this._camera)){const ot=this._camera.right-this._camera.left,st=this._camera.top-this._camera.bottom,at=2*it.radius,lt=Math.min(ot/at,st/at);nt.push(this.zoomTo(lt,_e))}return nt.push(this.setFocalOffset(0,0,0,_e)),Promise.all(nt)}setLookAt(_,_e,nt,rt,it,ot,st=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=DOLLY_DIRECTION.NONE,this._changedDolly=0;const at=_v3B.set(rt,it,ot),lt=_v3A.set(_,_e,nt);this._targetEnd.copy(at),this._sphericalEnd.setFromVector3(lt.sub(at).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,st||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const ct=!st||approxEquals(this._target.x,this._targetEnd.x,this.restThreshold)&&approxEquals(this._target.y,this._targetEnd.y,this.restThreshold)&&approxEquals(this._target.z,this._targetEnd.z,this.restThreshold)&&approxEquals(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&approxEquals(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&approxEquals(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(ct)}lerpLookAt(_,_e,nt,rt,it,ot,st,at,lt,ct,ut,ht,pt,gt=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=DOLLY_DIRECTION.NONE,this._changedDolly=0;const yt=_v3A.set(rt,it,ot),vt=_v3B.set(_,_e,nt);_sphericalA.setFromVector3(vt.sub(yt).applyQuaternion(this._yAxisUpSpace));const mt=_v3C.set(ct,ut,ht),_t=_v3B.set(st,at,lt);_sphericalB.setFromVector3(_t.sub(mt).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(yt.lerp(mt,pt));const xt=_sphericalB.theta-_sphericalA.theta,St=_sphericalB.phi-_sphericalA.phi,Tt=_sphericalB.radius-_sphericalA.radius;this._sphericalEnd.set(_sphericalA.radius+Tt*pt,_sphericalA.phi+St*pt,_sphericalA.theta+xt*pt),this.normalizeRotations(),this._needsUpdate=!0,gt||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const Mt=!gt||approxEquals(this._target.x,this._targetEnd.x,this.restThreshold)&&approxEquals(this._target.y,this._targetEnd.y,this.restThreshold)&&approxEquals(this._target.z,this._targetEnd.z,this.restThreshold)&&approxEquals(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&approxEquals(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&approxEquals(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(Mt)}setPosition(_,_e,nt,rt=!1){return this.setLookAt(_,_e,nt,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,rt)}setTarget(_,_e,nt,rt=!1){const it=this.getPosition(_v3A),ot=this.setLookAt(it.x,it.y,it.z,_,_e,nt,rt);return this._sphericalEnd.phi=clamp$3(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),ot}setFocalOffset(_,_e,nt,rt=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(_,_e,nt),this._needsUpdate=!0,rt||this._focalOffset.copy(this._focalOffsetEnd);const it=!rt||approxEquals(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&approxEquals(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&approxEquals(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(it)}setOrbitPoint(_,_e,nt){this._camera.updateMatrixWorld(),_xColumn.setFromMatrixColumn(this._camera.matrixWorldInverse,0),_yColumn.setFromMatrixColumn(this._camera.matrixWorldInverse,1),_zColumn.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const rt=_v3A.set(_,_e,nt),it=rt.distanceTo(this._camera.position),ot=rt.sub(this._camera.position);_xColumn.multiplyScalar(ot.x),_yColumn.multiplyScalar(ot.y),_zColumn.multiplyScalar(ot.z),_v3A.copy(_xColumn).add(_yColumn).add(_zColumn),_v3A.z=_v3A.z+it,this.dollyTo(it,!1),this.setFocalOffset(-_v3A.x,_v3A.y,-_v3A.z,!1),this.moveTo(_,_e,nt,!1)}setBoundary(_){if(!_){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(_),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(_,_e,nt,rt){if(_===null){this._viewport=null;return}this._viewport=this._viewport||new THREE.Vector4,typeof _=="number"?this._viewport.set(_,_e,nt,rt):this._viewport.copy(_)}getDistanceToFitBox(_,_e,nt,rt=!1){if(notSupportedInOrthographicCamera(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const it=_/_e,ot=this._camera.getEffectiveFOV()*DEG2RAD,st=this._camera.aspect;return((rt?it>st:it<st)?_e:_/st)*.5/Math.tan(ot*.5)+nt*.5}getDistanceToFitSphere(_){if(notSupportedInOrthographicCamera(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const _e=this._camera.getEffectiveFOV()*DEG2RAD,nt=Math.atan(Math.tan(_e*.5)*this._camera.aspect)*2,rt=1<this._camera.aspect?_e:nt;return _/Math.sin(rt*.5)}getTarget(_,_e=!0){return(_&&_.isVector3?_:new THREE.Vector3).copy(_e?this._targetEnd:this._target)}getPosition(_,_e=!0){return(_&&_.isVector3?_:new THREE.Vector3).setFromSpherical(_e?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(_e?this._targetEnd:this._target)}getSpherical(_,_e=!0){return(_&&_ instanceof THREE.Spherical?_:new THREE.Spherical).copy(_e?this._sphericalEnd:this._spherical)}getFocalOffset(_,_e=!0){return(_&&_.isVector3?_:new THREE.Vector3).copy(_e?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%PI_2,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=PI_2),this._spherical.theta+=PI_2*Math.round((this._sphericalEnd.theta-this._spherical.theta)/PI_2)}reset(_=!1){if(!approxEquals(this._camera.up.x,this._cameraUp0.x)||!approxEquals(this._camera.up.y,this._cameraUp0.y)||!approxEquals(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const nt=this.getPosition(_v3A);this.updateCameraUp(),this.setPosition(nt.x,nt.y,nt.z)}const _e=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,_),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,_),this.zoomTo(this._zoom0,_)];return Promise.all(_e)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,_AXIS_Y),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const _=_v3A.subVectors(this._target,this._camera.position).normalize(),_e=_v3B.crossVectors(_,this._camera.up);this._camera.up.crossVectors(_e,_).normalize(),this._camera.updateMatrixWorld();const nt=this.getPosition(_v3A);this.updateCameraUp(),this.setPosition(nt.x,nt.y,nt.z)}update(_){const _e=this._sphericalEnd.theta-this._spherical.theta,nt=this._sphericalEnd.phi-this._spherical.phi,rt=this._sphericalEnd.radius-this._spherical.radius,it=_deltaTarget.subVectors(this._targetEnd,this._target),ot=_deltaOffset.subVectors(this._focalOffsetEnd,this._focalOffset),st=this._zoomEnd-this._zoom;if(approxZero(_e))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const ut=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=smoothDamp(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,ut,1/0,_),this._needsUpdate=!0}if(approxZero(nt))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const ut=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=smoothDamp(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,ut,1/0,_),this._needsUpdate=!0}if(approxZero(rt))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const ut=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=smoothDamp(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,ut,this.maxSpeed,_),this._needsUpdate=!0}if(approxZero(it.x)&&approxZero(it.y)&&approxZero(it.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const ut=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;smoothDampVec3(this._target,this._targetEnd,this._targetVelocity,ut,this.maxSpeed,_,this._target),this._needsUpdate=!0}if(approxZero(ot.x)&&approxZero(ot.y)&&approxZero(ot.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const ut=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;smoothDampVec3(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,ut,this.maxSpeed,_,this._focalOffset),this._needsUpdate=!0}if(approxZero(st))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const ut=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=smoothDamp(this._zoom,this._zoomEnd,this._zoomVelocity,ut,1/0,_)}if(this.dollyToCursor){if(isPerspectiveCamera(this._camera)&&this._changedDolly!==0){const ut=this._spherical.radius-this._lastDistance,ht=this._camera,pt=this._getCameraDirection(_cameraDirection),gt=_v3A.copy(pt).cross(ht.up).normalize();gt.lengthSq()===0&&(gt.x=1);const yt=_v3B.crossVectors(gt,pt),vt=this._sphericalEnd.radius*Math.tan(ht.getEffectiveFOV()*DEG2RAD*.5),_t=(this._sphericalEnd.radius-ut-this._sphericalEnd.radius)/this._sphericalEnd.radius,xt=_v3C.copy(this._targetEnd).add(gt.multiplyScalar(this._dollyControlCoord.x*vt*ht.aspect)).add(yt.multiplyScalar(this._dollyControlCoord.y*vt)),St=_v3A.copy(this._targetEnd).lerp(xt,_t),Tt=this._lastDollyDirection===DOLLY_DIRECTION.IN&&this._spherical.radius<=this.minDistance,Mt=this._lastDollyDirection===DOLLY_DIRECTION.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(Tt||Mt)){this._sphericalEnd.radius-=ut,this._spherical.radius-=ut;const Pt=_v3B.copy(pt).multiplyScalar(-ut);St.add(Pt)}this._boundary.clampPoint(St,St);const bt=_v3B.subVectors(St,this._targetEnd);this._targetEnd.copy(St),this._target.add(bt),this._changedDolly-=ut,approxZero(this._changedDolly)&&(this._changedDolly=0)}else if(isOrthographicCamera(this._camera)&&this._changedZoom!==0){const ut=this._zoom-this._lastZoom,ht=this._camera,pt=_v3A.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(ht.near+ht.far)/(ht.near-ht.far)).unproject(ht),gt=_v3B.set(0,0,-1).applyQuaternion(ht.quaternion),yt=_v3C.copy(pt).add(gt.multiplyScalar(-pt.dot(ht.up))),mt=-(this._zoom-ut-this._zoom)/this._zoom,_t=this._getCameraDirection(_cameraDirection),xt=this._targetEnd.dot(_t),St=_v3A.copy(this._targetEnd).lerp(yt,mt),Tt=St.dot(_t),Mt=_t.multiplyScalar(Tt-xt);St.sub(Mt),this._boundary.clampPoint(St,St);const bt=_v3B.subVectors(St,this._targetEnd);this._targetEnd.copy(St),this._target.add(bt),this._changedZoom-=ut,approxZero(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const at=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,at),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!approxZero(this._focalOffset.x)||!approxZero(this._focalOffset.y)||!approxZero(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),_xColumn.setFromMatrixColumn(this._camera.matrix,0),_yColumn.setFromMatrixColumn(this._camera.matrix,1),_zColumn.setFromMatrixColumn(this._camera.matrix,2),_xColumn.multiplyScalar(this._focalOffset.x),_yColumn.multiplyScalar(-this._focalOffset.y),_zColumn.multiplyScalar(this._focalOffset.z),_v3A.copy(_xColumn).add(_yColumn).add(_zColumn),this._camera.position.add(_v3A)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),_v3A.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const ct=this._needsUpdate;return ct&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):ct?(this.dispatchEvent({type:"update"}),approxZero(_e,this.restThreshold)&&approxZero(nt,this.restThreshold)&&approxZero(rt,this.restThreshold)&&approxZero(it.x,this.restThreshold)&&approxZero(it.y,this.restThreshold)&&approxZero(it.z,this.restThreshold)&&approxZero(ot.x,this.restThreshold)&&approxZero(ot.y,this.restThreshold)&&approxZero(ot.z,this.restThreshold)&&approxZero(st,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!ct&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=ct,this._needsUpdate=!1,ct}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:infinityToMaxNumber(this.maxDistance),minZoom:this.minZoom,maxZoom:infinityToMaxNumber(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:infinityToMaxNumber(this.maxPolarAngle),minAzimuthAngle:infinityToMaxNumber(this.minAzimuthAngle),maxAzimuthAngle:infinityToMaxNumber(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:_v3A.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(_,_e=!1){const nt=JSON.parse(_);this.enabled=nt.enabled,this.minDistance=nt.minDistance,this.maxDistance=maxNumberToInfinity(nt.maxDistance),this.minZoom=nt.minZoom,this.maxZoom=maxNumberToInfinity(nt.maxZoom),this.minPolarAngle=nt.minPolarAngle,this.maxPolarAngle=maxNumberToInfinity(nt.maxPolarAngle),this.minAzimuthAngle=maxNumberToInfinity(nt.minAzimuthAngle),this.maxAzimuthAngle=maxNumberToInfinity(nt.maxAzimuthAngle),this.smoothTime=nt.smoothTime,this.draggingSmoothTime=nt.draggingSmoothTime,this.dollySpeed=nt.dollySpeed,this.truckSpeed=nt.truckSpeed,this.dollyToCursor=nt.dollyToCursor,this.verticalDragToForward=nt.verticalDragToForward,this._target0.fromArray(nt.target0),this._position0.fromArray(nt.position0),this._zoom0=nt.zoom0,this._focalOffset0.fromArray(nt.focalOffset0),this.moveTo(nt.target[0],nt.target[1],nt.target[2],_e),_sphericalA.setFromVector3(_v3A.fromArray(nt.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(_sphericalA.theta,_sphericalA.phi,_e),this.dollyTo(_sphericalA.radius,_e),this.zoomTo(nt.zoom,_e),this.setFocalOffset(nt.focalOffset[0],nt.focalOffset[1],nt.focalOffset[2],_e),this._needsUpdate=!0}connect(_){if(this._domElement){console.warn("camera-controls is already connected.");return}_.setAttribute("data-camera-controls-version",VERSION),this._addAllEventListeners(_),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(_){return _.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(_){return this._getTargetDirection(_).negate()}_findPointerById(_){return this._activePointers.find(_e=>_e.pointerId===_)}_findPointerByMouseButton(_){return this._activePointers.find(_e=>_e.mouseButton===_)}_disposePointer(_){this._activePointers.splice(this._activePointers.indexOf(_),1)}_encloseToBoundary(_,_e,nt){const rt=_e.lengthSq();if(rt===0)return _;const it=_v3B.copy(_e).add(_),st=this._boundary.clampPoint(it,_v3C).sub(it),at=st.lengthSq();if(at===0)return _.add(_e);if(at===rt)return _;if(nt===0)return _.add(_e).add(st);{const lt=1+nt*at/_e.dot(st);return _.add(_v3B.copy(_e).multiplyScalar(lt)).add(st.multiplyScalar(1-nt))}}_updateNearPlaneCorners(){if(isPerspectiveCamera(this._camera)){const _=this._camera,_e=_.near,nt=_.getEffectiveFOV()*DEG2RAD,rt=Math.tan(nt*.5)*_e,it=rt*_.aspect;this._nearPlaneCorners[0].set(-it,-rt,0),this._nearPlaneCorners[1].set(it,-rt,0),this._nearPlaneCorners[2].set(it,rt,0),this._nearPlaneCorners[3].set(-it,rt,0)}else if(isOrthographicCamera(this._camera)){const _=this._camera,_e=1/_.zoom,nt=_.left*_e,rt=_.right*_e,it=_.top*_e,ot=_.bottom*_e;this._nearPlaneCorners[0].set(nt,it,0),this._nearPlaneCorners[1].set(rt,it,0),this._nearPlaneCorners[2].set(rt,ot,0),this._nearPlaneCorners[3].set(nt,ot,0)}}_collisionTest(){let _=1/0;if(!(this.colliderMeshes.length>=1)||notSupportedInOrthographicCamera(this._camera,"_collisionTest"))return _;const nt=this._getTargetDirection(_cameraDirection);_rotationMatrix.lookAt(_ORIGIN,nt,this._camera.up);for(let rt=0;rt<4;rt++){const it=_v3B.copy(this._nearPlaneCorners[rt]);it.applyMatrix4(_rotationMatrix);const ot=_v3C.addVectors(this._target,it);_raycaster.set(ot,nt),_raycaster.far=this._spherical.radius+1;const st=_raycaster.intersectObjects(this.colliderMeshes);st.length!==0&&st[0].distance<_&&(_=st[0].distance)}return _}_getClientRect(_){if(!this._domElement)return;const _e=this._domElement.getBoundingClientRect();return _.x=_e.left,_.y=_e.top,this._viewport?(_.x+=this._viewport.x,_.y+=_e.height-this._viewport.w-this._viewport.y,_.width=this._viewport.z,_.height=this._viewport.w):(_.width=_e.width,_.height=_e.height),_}_createOnRestPromise(_){return _?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(_e=>{const nt=()=>{this.removeEventListener("rest",nt),_e()};this.addEventListener("rest",nt)}))}_addAllEventListeners(_){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(_){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(_){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(_,_e=new THREE.Sphere){const nt=_e,rt=nt.center;_box3A.makeEmpty(),_.traverseVisible(ot=>{ot.isMesh&&_box3A.expandByObject(ot)}),_box3A.getCenter(rt);let it=0;return _.traverseVisible(ot=>{if(!ot.isMesh)return;const st=ot,at=st.geometry.clone();at.applyMatrix4(st.matrixWorld);const ct=at.attributes.position;for(let ut=0,ht=ct.count;ut<ht;ut++)_v3A.fromBufferAttribute(ct,ut),it=Math.max(it,rt.distanceToSquared(_v3A))}),nt.radius=Math.sqrt(it),nt}};const CameraControls=reactExports.forwardRef((tt,_)=>{reactExports.useMemo(()=>{CameraControls$1.install({THREE:THREE$1}),extend$2({CameraControlsImpl:CameraControls$1})},[]);const{camera:_e,domElement:nt,makeDefault:rt,onStart:it,onEnd:ot,onChange:st,regress:at,...lt}=tt,ct=useThree(Tt=>Tt.camera),ut=useThree(Tt=>Tt.gl),ht=useThree(Tt=>Tt.invalidate),pt=useThree(Tt=>Tt.events),gt=useThree(Tt=>Tt.setEvents),yt=useThree(Tt=>Tt.set),vt=useThree(Tt=>Tt.get),mt=useThree(Tt=>Tt.performance),_t=_e||ct,xt=nt||pt.connected||ut.domElement,St=reactExports.useMemo(()=>new CameraControls$1(_t),[_t]);return useFrame((Tt,Mt)=>{St.enabled&&St.update(Mt)},-1),reactExports.useEffect(()=>(St.connect(xt),()=>void St.disconnect()),[xt,St]),reactExports.useEffect(()=>{const Tt=Pt=>{ht(),at&&mt.regress(),st&&st(Pt)},Mt=Pt=>{it&&it(Pt)},bt=Pt=>{ot&&ot(Pt)};return St.addEventListener("update",Tt),St.addEventListener("controlstart",Mt),St.addEventListener("controlend",bt),St.addEventListener("control",Tt),St.addEventListener("transitionstart",Tt),St.addEventListener("wake",Tt),()=>{St.removeEventListener("update",Tt),St.removeEventListener("controlstart",Mt),St.removeEventListener("controlend",bt),St.removeEventListener("control",Tt),St.removeEventListener("transitionstart",Tt),St.removeEventListener("wake",Tt)}},[St,it,ot,ht,gt,at,st]),reactExports.useEffect(()=>{if(rt){const Tt=vt().controls;return yt({controls:St}),()=>yt({controls:Tt})}},[rt,St]),reactExports.createElement("primitive",_extends$3({ref:_,object:St},lt))});function useAnimations(tt,_){const _e=reactExports.useRef(),[nt]=reactExports.useState(()=>_?_ instanceof Object3D?{current:_}:_:_e),[rt]=reactExports.useState(()=>new AnimationMixer(void 0));reactExports.useLayoutEffect(()=>void(rt._root=nt.current),[rt,_]);const it=reactExports.useRef({}),[ot]=reactExports.useState(()=>{const st={};return tt.forEach(at=>Object.defineProperty(st,at.name,{enumerable:!0,get(){if(nt.current)return it.current[at.name]||(it.current[at.name]=rt.clipAction(at,nt.current))},configurable:!0})),{ref:nt,clips:tt,actions:st,names:tt.map(at=>at.name),mixer:rt}});return useFrame((st,at)=>rt.update(at)),reactExports.useEffect(()=>{const st=nt.current;return()=>{it.current={},Object.values(ot.actions).forEach(at=>{st&&rt.uncacheAction(at,st)})}},[tt]),reactExports.useEffect(()=>()=>{rt.stopAllAction()},[rt]),ot}const presetsObj={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},CUBEMAP_ROOT="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",isArray=tt=>Array.isArray(tt);function useEnvironment({files:tt=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:_="",preset:_e=void 0,encoding:nt=void 0,extensions:rt}={}){var it;let ot=null,st=!1,at;if(_e){if(!(_e in presetsObj))throw new Error("Preset must be one of: "+Object.keys(presetsObj).join(", "));tt=presetsObj[_e],_=CUBEMAP_ROOT}if(st=isArray(tt),at=isArray(tt)?"cube":tt.startsWith("data:application/exr")?"exr":tt.startsWith("data:application/hdr")?"hdr":(it=tt.split(".").pop())==null?void 0:it.toLowerCase(),ot=st?CubeTextureLoader:at==="hdr"?RGBELoader:at==="exr"?EXRLoader:null,!ot)throw new Error("useEnvironment: Unrecognized file extension: "+tt);const lt=useLoader(ot,st?[tt]:tt,pt=>{pt.setPath==null||pt.setPath(_),rt&&rt(pt)}),ct=st?lt[0]:lt;ct.mapping=st?CubeReflectionMapping:EquirectangularReflectionMapping;const ut=3001,ht=3e3;return"colorSpace"in ct?ct.colorSpace=nt??st?"srgb":"srgb-linear":ct.encoding=nt??st?ut:ht,ct}const isRef=tt=>tt.current&&tt.current.isScene,resolveScene=tt=>isRef(tt)?tt.current:tt;function setEnvProps(tt,_,_e,nt,rt=0){const it=resolveScene(_||_e),ot=it.background,st=it.environment,at=it.backgroundBlurriness||0;return tt!=="only"&&(it.environment=nt),tt&&(it.background=nt),tt&&it.backgroundBlurriness!==void 0&&(it.backgroundBlurriness=rt),()=>{tt!=="only"&&(it.environment=st),tt&&(it.background=ot),tt&&it.backgroundBlurriness!==void 0&&(it.backgroundBlurriness=at)}}function EnvironmentMap({scene:tt,background:_=!1,blur:_e,map:nt}){const rt=useThree(it=>it.scene);return reactExports.useLayoutEffect(()=>{if(nt)return setEnvProps(_,tt,rt,nt,_e)},[rt,tt,nt,_,_e]),null}function EnvironmentCube({background:tt=!1,scene:_,blur:_e,...nt}){const rt=useEnvironment(nt),it=useThree(ot=>ot.scene);return reactExports.useLayoutEffect(()=>setEnvProps(tt,_,it,rt,_e),[rt,tt,_,it,_e]),null}function EnvironmentPortal({children:tt,near:_=1,far:_e=1e3,resolution:nt=256,frames:rt=1,map:it,background:ot=!1,blur:st,scene:at,files:lt,path:ct,preset:ut=void 0,extensions:ht}){const pt=useThree(xt=>xt.gl),gt=useThree(xt=>xt.scene),yt=reactExports.useRef(null),[vt]=reactExports.useState(()=>new Scene),mt=reactExports.useMemo(()=>{const xt=new WebGLCubeRenderTarget(nt);return xt.texture.type=HalfFloatType,xt},[nt]);reactExports.useLayoutEffect(()=>(rt===1&&yt.current.update(pt,vt),setEnvProps(ot,at,gt,mt.texture,st)),[tt,vt,mt.texture,at,gt,ot,rt,pt]);let _t=1;return useFrame(()=>{(rt===1/0||_t<rt)&&(yt.current.update(pt,vt),_t++)}),reactExports.createElement(reactExports.Fragment,null,createPortal(reactExports.createElement(reactExports.Fragment,null,tt,reactExports.createElement("cubeCamera",{ref:yt,args:[_,_e,mt]}),lt||ut?reactExports.createElement(EnvironmentCube,{background:!0,files:lt,preset:ut,path:ct,extensions:ht}):it?reactExports.createElement(EnvironmentMap,{background:!0,map:it,extensions:ht}):null),vt))}function EnvironmentGround(tt){var _,_e,nt,rt;const it=useEnvironment(tt),ot=tt.map||it;reactExports.useMemo(()=>extend$2({GroundProjectedEnvImpl:GroundProjectedEnv}),[]);const st=reactExports.useMemo(()=>[ot],[ot]),at=(_=tt.ground)==null?void 0:_.height,lt=(_e=tt.ground)==null?void 0:_e.radius,ct=(nt=(rt=tt.ground)==null?void 0:rt.scale)!==null&&nt!==void 0?nt:1e3;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(EnvironmentMap,_extends$3({},tt,{map:ot})),reactExports.createElement("groundProjectedEnvImpl",{args:st,scale:ct,height:at,radius:lt}))}function Environment(tt){return tt.ground?reactExports.createElement(EnvironmentGround,tt):tt.map?reactExports.createElement(EnvironmentMap,tt):tt.children?reactExports.createElement(EnvironmentPortal,tt):reactExports.createElement(EnvironmentCube,tt)}const ContactShadows=reactExports.forwardRef(({scale:tt=10,frames:_=1/0,opacity:_e=1,width:nt=1,height:rt=1,blur:it=1,far:ot=10,resolution:st=512,smooth:at=!0,color:lt="#000000",depthWrite:ct=!1,renderOrder:ut,...ht},pt)=>{const gt=reactExports.useRef(null),yt=useThree(Nt=>Nt.scene),vt=useThree(Nt=>Nt.gl),mt=reactExports.useRef(null);nt=nt*(Array.isArray(tt)?tt[0]:tt||1),rt=rt*(Array.isArray(tt)?tt[1]:tt||1);const[_t,xt,St,Tt,Mt,bt,Pt]=reactExports.useMemo(()=>{const Nt=new WebGLRenderTarget(st,st),zt=new WebGLRenderTarget(st,st);zt.texture.generateMipmaps=Nt.texture.generateMipmaps=!1;const jt=new PlaneGeometry(nt,rt).rotateX(Math.PI/2),Yt=new Mesh(jt),qt=new MeshDepthMaterial;qt.depthTest=qt.depthWrite=!1,qt.onBeforeCompile=Vt=>{Vt.uniforms={...Vt.uniforms,ucolor:{value:new Color$1(lt)}},Vt.fragmentShader=Vt.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),Vt.fragmentShader=Vt.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Gt=new ShaderMaterial(HorizontalBlurShader),Xt=new ShaderMaterial(VerticalBlurShader);return Xt.depthTest=Gt.depthTest=!1,[Nt,jt,qt,Yt,Gt,Xt,zt]},[st,nt,rt,tt,lt]),wt=Nt=>{Tt.visible=!0,Tt.material=Mt,Mt.uniforms.tDiffuse.value=_t.texture,Mt.uniforms.h.value=Nt*1/256,vt.setRenderTarget(Pt),vt.render(Tt,mt.current),Tt.material=bt,bt.uniforms.tDiffuse.value=Pt.texture,bt.uniforms.v.value=Nt*1/256,vt.setRenderTarget(_t),vt.render(Tt,mt.current),Tt.visible=!1};let Bt=0,Ot,Ut;return useFrame(()=>{mt.current&&(_===1/0||Bt<_)&&(Bt++,Ot=yt.background,Ut=yt.overrideMaterial,gt.current.visible=!1,yt.background=null,yt.overrideMaterial=St,vt.setRenderTarget(_t),vt.render(yt,mt.current),wt(it),at&&wt(it*.4),vt.setRenderTarget(null),gt.current.visible=!0,yt.overrideMaterial=Ut,yt.background=Ot)}),reactExports.useImperativeHandle(pt,()=>gt.current,[]),reactExports.createElement("group",_extends$3({"rotation-x":Math.PI/2},ht,{ref:gt}),reactExports.createElement("mesh",{renderOrder:ut,geometry:xt,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},reactExports.createElement("meshBasicMaterial",{transparent:!0,map:_t.texture,opacity:_e,depthWrite:ct})),reactExports.createElement("orthographicCamera",{ref:mt,args:[-nt/2,nt/2,rt/2,-rt/2,0,ot]}))});var propTypesExports={},propTypes={get exports(){return propTypesExports},set exports(tt){propTypesExports=tt}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function tt(nt,rt,it,ot,st,at){if(at!==ReactPropTypesSecret){var lt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw lt.name="Invariant Violation",lt}}tt.isRequired=tt;function _(){return tt}var _e={array:tt,bigint:tt,bool:tt,func:tt,number:tt,object:tt,string:tt,symbol:tt,any:tt,arrayOf:_,element:tt,elementType:tt,instanceOf:_,node:tt,objectOf:_,oneOf:_,oneOfType:_,shape:_,exact:_,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return _e.PropTypes=_e,_e};propTypes.exports=factoryWithThrowingShims();function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(tt){for(var _=1;_<arguments.length;_++){var _e=arguments[_];for(var nt in _e)Object.prototype.hasOwnProperty.call(_e,nt)&&(tt[nt]=_e[nt])}return tt},_extends$1.apply(this,arguments)}function $6ed0406888f73fc4$var$setRef(tt,_){typeof tt=="function"?tt(_):tt!=null&&(tt.current=_)}function $6ed0406888f73fc4$export$43e446d32b3d21af(...tt){return _=>tt.forEach(_e=>$6ed0406888f73fc4$var$setRef(_e,_))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(...tt){return reactExports.useCallback($6ed0406888f73fc4$export$43e446d32b3d21af(...tt),tt)}const $5e63c961fc1ce211$export$8c6ed5c666ac1360=reactExports.forwardRef((tt,_)=>{const{children:_e,...nt}=tt,rt=reactExports.Children.toArray(_e),it=rt.find($5e63c961fc1ce211$var$isSlottable);if(it){const ot=it.props.children,st=rt.map(at=>at===it?reactExports.Children.count(ot)>1?reactExports.Children.only(null):reactExports.isValidElement(ot)?ot.props.children:null:at);return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},nt,{ref:_}),reactExports.isValidElement(ot)?reactExports.cloneElement(ot,void 0,st):null)}return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},nt,{ref:_}),_e)});$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=reactExports.forwardRef((tt,_)=>{const{children:_e,...nt}=tt;return reactExports.isValidElement(_e)?reactExports.cloneElement(_e,{...$5e63c961fc1ce211$var$mergeProps(nt,_e.props),ref:_?$6ed0406888f73fc4$export$43e446d32b3d21af(_,_e.ref):_e.ref}):reactExports.Children.count(_e)>1?reactExports.Children.only(null):null});$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:tt})=>reactExports.createElement(reactExports.Fragment,null,tt);function $5e63c961fc1ce211$var$isSlottable(tt){return reactExports.isValidElement(tt)&&tt.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(tt,_){const _e={..._};for(const nt in _){const rt=tt[nt],it=_[nt];/^on[A-Z]/.test(nt)?rt&&it?_e[nt]=(...st)=>{it(...st),rt(...st)}:rt&&(_e[nt]=rt):nt==="style"?_e[nt]={...rt,...it}:nt==="className"&&(_e[nt]=[rt,it].filter(Boolean).join(" "))}return{...tt,..._e}}const $8927f6f2acc4f386$var$NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$8927f6f2acc4f386$export$250ffa63cdc0d034=$8927f6f2acc4f386$var$NODES.reduce((tt,_)=>{const _e=reactExports.forwardRef((nt,rt)=>{const{asChild:it,...ot}=nt,st=it?$5e63c961fc1ce211$export$8c6ed5c666ac1360:_;return reactExports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),reactExports.createElement(st,_extends$1({},ot,{ref:rt}))});return _e.displayName=`Primitive.${_}`,{...tt,[_]:_e}},{});function $8927f6f2acc4f386$export$6d1a0317bde7de7f(tt,_){tt&&reactDomExports.flushSync(()=>tt.dispatchEvent(_))}const $f1701beae083dbae$export$602eac185826482c=reactExports.forwardRef((tt,_)=>{var _e;const{container:nt=globalThis==null||(_e=globalThis.document)===null||_e===void 0?void 0:_e.body,...rt}=tt;return nt?ReactDOM.createPortal(reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},rt,{ref:_})),nt):null}),$f1701beae083dbae$export$be92b6f5f03c0fe9=$f1701beae083dbae$export$602eac185826482c;var has=Object.prototype.hasOwnProperty;function dequal(tt,_){var _e,nt;if(tt===_)return!0;if(tt&&_&&(_e=tt.constructor)===_.constructor){if(_e===Date)return tt.getTime()===_.getTime();if(_e===RegExp)return tt.toString()===_.toString();if(_e===Array){if((nt=tt.length)===_.length)for(;nt--&&dequal(tt[nt],_[nt]););return nt===-1}if(!_e||typeof tt=="object"){nt=0;for(_e in tt)if(has.call(tt,_e)&&++nt&&!has.call(_,_e)||!(_e in _)||!dequal(tt[_e],_[_e]))return!1;return Object.keys(_).length===nt}}return tt!==tt&&_!==_}var Rule=function(_,_e,nt,rt){this.name=_,this.fn=_e,this.args=nt,this.modifiers=rt};Rule.prototype._test=function(_){var _e=this.fn;try{testAux(this.modifiers.slice(),_e,this)(_)}catch{_e=function(){return!1}}try{return testAux(this.modifiers.slice(),_e,this)(_)}catch{return!1}};Rule.prototype._check=function(_){try{testAux(this.modifiers.slice(),this.fn,this)(_)}catch{if(testAux(this.modifiers.slice(),function(nt){return nt},this)(!1))return}if(!testAux(this.modifiers.slice(),this.fn,this)(_))throw null};Rule.prototype._testAsync=function(_){var _e=this;return new Promise(function(nt,rt){testAsyncAux(_e.modifiers.slice(),_e.fn,_e)(_).then(function(it){it?nt(_):rt(null)}).catch(function(it){return rt(it)})})};function pickFn(tt,_){return _===void 0&&(_="simple"),typeof tt=="object"?tt[_]:tt}function testAux(tt,_,_e){if(tt.length){var nt=tt.shift(),rt=testAux(tt,_,_e);return nt.perform(rt,_e)}else return pickFn(_)}function testAsyncAux(tt,_,_e){if(tt.length){var nt=tt.shift(),rt=testAsyncAux(tt,_,_e);return nt.performAsync(rt,_e)}else return function(it){return Promise.resolve(pickFn(_,"async")(it))}}var Modifier=function(_,_e,nt){this.name=_,this.perform=_e,this.performAsync=nt},ValidationError=function(tt){function _(_e,nt,rt,it){for(var ot=[],st=arguments.length-4;st-- >0;)ot[st]=arguments[st+4];tt.call(this,ot),tt.captureStackTrace&&tt.captureStackTrace(this,_),this.rule=_e,this.value=nt,this.cause=rt,this.target=it}return tt&&(_.__proto__=tt),_.prototype=Object.create(tt&&tt.prototype),_.prototype.constructor=_,_}(Error),Context=function(_,_e){_===void 0&&(_=[]),_e===void 0&&(_e=[]),this.chain=_,this.nextRuleModifiers=_e};Context.prototype._applyRule=function(_,_e){var nt=this;return function(){for(var rt=[],it=arguments.length;it--;)rt[it]=arguments[it];return nt.chain.push(new Rule(_e,_.apply(nt,rt),rt,nt.nextRuleModifiers)),nt.nextRuleModifiers=[],nt}};Context.prototype._applyModifier=function(_,_e){return this.nextRuleModifiers.push(new Modifier(_e,_.simple,_.async)),this};Context.prototype._clone=function(){return new Context(this.chain.slice(),this.nextRuleModifiers.slice())};Context.prototype.test=function(_){return this.chain.every(function(_e){return _e._test(_)})};Context.prototype.testAll=function(_){var _e=[];return this.chain.forEach(function(nt){try{nt._check(_)}catch(rt){_e.push(new ValidationError(nt,_,rt))}}),_e};Context.prototype.check=function(_){this.chain.forEach(function(_e){try{_e._check(_)}catch(nt){throw new ValidationError(_e,_,nt)}})};Context.prototype.testAsync=function(_){var _e=this;return new Promise(function(nt,rt){executeAsyncRules(_,_e.chain.slice(),nt,rt)})};function executeAsyncRules(tt,_,_e,nt){if(_.length){var rt=_.shift();rt._testAsync(tt).then(function(){executeAsyncRules(tt,_,_e,nt)},function(it){nt(new ValidationError(rt,tt,it))})}else _e(tt)}var consideredEmpty=function(tt,_){return _&&typeof tt=="string"&&tt.trim().length===0?!0:tt==null};function optional(tt,_){return _===void 0&&(_=!1),{simple:function(_e){return consideredEmpty(_e,_)||tt.check(_e)===void 0},async:function(_e){return consideredEmpty(_e,_)||tt.testAsync(_e)}}}function v8n(){return typeof Proxy<"u"?proxyContext(new Context):proxylessContext(new Context)}var customRules={};v8n.extend=function(tt){Object.assign(customRules,tt)};v8n.clearCustomRules=function(){customRules={}};function proxyContext(tt){return new Proxy(tt,{get:function(_e,nt){if(nt in _e)return _e[nt];var rt=proxyContext(tt._clone());if(nt in availableModifiers)return rt._applyModifier(availableModifiers[nt],nt);if(nt in customRules)return rt._applyRule(customRules[nt],nt);if(nt in availableRules)return rt._applyRule(availableRules[nt],nt)}})}function proxylessContext(tt){var _=function(rt,it){return Object.keys(rt).forEach(function(ot){it[ot]=function(){for(var st=[],at=arguments.length;at--;)st[at]=arguments[at];var lt=proxylessContext(it._clone()),ct=lt._applyRule(rt[ot],ot).apply(void 0,st);return ct}}),it},_e=_(availableRules,tt),nt=_(customRules,_e);return Object.keys(availableModifiers).forEach(function(rt){Object.defineProperty(nt,rt,{get:function(){var it=proxylessContext(nt._clone());return it._applyModifier(availableModifiers[rt],rt)}})}),nt}var availableModifiers={not:{simple:function(tt){return function(_){return!tt(_)}},async:function(tt){return function(_){return Promise.resolve(tt(_)).then(function(_e){return!_e}).catch(function(){return!0})}}},some:{simple:function(tt){return function(_){return split$1(_).some(function(_e){try{return tt(_e)}catch{return!1}})}},async:function(tt){return function(_){return Promise.all(split$1(_).map(function(_e){try{return tt(_e).catch(function(){return!1})}catch{return!1}})).then(function(_e){return _e.some(Boolean)})}}},every:{simple:function(tt){return function(_){return _!==!1&&split$1(_).every(tt)}},async:function(tt){return function(_){return Promise.all(split$1(_).map(tt)).then(function(_e){return _e.every(Boolean)})}}},strict:{simple:function(tt,_){return function(_e){return isSchemaRule(_)&&_e&&typeof _e=="object"?Object.keys(_.args[0]).length===Object.keys(_e).length&&tt(_e):tt(_e)}},async:function(tt,_){return function(_e){return Promise.resolve(tt(_e)).then(function(nt){return isSchemaRule(_)&&_e&&typeof _e=="object"?Object.keys(_.args[0]).length===Object.keys(_e).length&&nt:nt}).catch(function(){return!1})}}}};function isSchemaRule(tt){return tt&&tt.name==="schema"&&tt.args.length>0&&typeof tt.args[0]=="object"}function split$1(tt){return typeof tt=="string"?tt.split(""):tt}var availableRules={equal:function(tt){return function(_){return _==tt}},exact:function(tt){return function(_){return _===tt}},number:function(tt){return tt===void 0&&(tt=!0),function(_){return typeof _=="number"&&(tt||isFinite(_))}},integer:function(){return function(tt){var _=Number.isInteger||isIntegerPolyfill;return _(tt)}},numeric:function(){return function(tt){return!isNaN(parseFloat(tt))&&isFinite(tt)}},string:function(){return testType("string")},boolean:function(){return testType("boolean")},undefined:function(){return testType("undefined")},null:function(){return testType("null")},array:function(){return testType("array")},object:function(){return testType("object")},instanceOf:function(tt){return function(_){return _ instanceof tt}},pattern:function(tt){return function(_){return tt.test(_)}},lowercase:function(){return function(tt){return typeof tt=="boolean"||tt===tt.toLowerCase()&&tt.trim()!==""}},uppercase:function(){return function(tt){return tt===tt.toUpperCase()&&tt.trim()!==""}},vowel:function(){return function(tt){return/^[aeiou]+$/i.test(tt)}},consonant:function(){return function(tt){return/^(?=[^aeiou])([a-z]+)$/i.test(tt)}},first:function(tt){return function(_){return _[0]==tt}},last:function(tt){return function(_){return _[_.length-1]==tt}},empty:function(){return function(tt){return tt.length===0}},length:function(tt,_){return function(_e){return _e.length>=tt&&_e.length<=(_||tt)}},minLength:function(tt){return function(_){return _.length>=tt}},maxLength:function(tt){return function(_){return _.length<=tt}},negative:function(){return function(tt){return tt<0}},positive:function(){return function(tt){return tt>=0}},between:function(tt,_){return function(_e){return _e>=tt&&_e<=_}},range:function(tt,_){return function(_e){return _e>=tt&&_e<=_}},lessThan:function(tt){return function(_){return _<tt}},lessThanOrEqual:function(tt){return function(_){return _<=tt}},greaterThan:function(tt){return function(_){return _>tt}},greaterThanOrEqual:function(tt){return function(_){return _>=tt}},even:function(){return function(tt){return tt%2===0}},odd:function(){return function(tt){return tt%2!==0}},includes:function(tt){return function(_){return~_.indexOf(tt)}},schema:function(tt){return testSchema(tt)},passesAnyOf:function(){for(var tt=[],_=arguments.length;_--;)tt[_]=arguments[_];return function(_e){return tt.some(function(nt){return nt.test(_e)})}},optional};function testType(tt){return function(_){return Array.isArray(_)&&tt==="array"||_===null&&tt==="null"||typeof _===tt}}function isIntegerPolyfill(tt){return typeof tt=="number"&&isFinite(tt)&&Math.floor(tt)===tt}function testSchema(tt){return{simple:function(_){var _e=[];if(Object.keys(tt).forEach(function(nt){var rt=tt[nt];try{rt.check((_||{})[nt])}catch(it){it.target=nt,_e.push(it)}}),_e.length>0)throw _e;return!0},async:function(_){var _e=[],nt=Object.keys(tt).map(function(rt){var it=tt[rt];return it.testAsync((_||{})[rt]).catch(function(ot){ot.target=rt,_e.push(ot)})});return Promise.all(nt).then(function(){if(_e.length>0)throw _e;return!0})}}}var e$1="colors",t$1="sizes",r$1="space",n$1={gap:r$1,gridGap:r$1,columnGap:r$1,gridColumnGap:r$1,rowGap:r$1,gridRowGap:r$1,inset:r$1,insetBlock:r$1,insetBlockEnd:r$1,insetBlockStart:r$1,insetInline:r$1,insetInlineEnd:r$1,insetInlineStart:r$1,margin:r$1,marginTop:r$1,marginRight:r$1,marginBottom:r$1,marginLeft:r$1,marginBlock:r$1,marginBlockEnd:r$1,marginBlockStart:r$1,marginInline:r$1,marginInlineEnd:r$1,marginInlineStart:r$1,padding:r$1,paddingTop:r$1,paddingRight:r$1,paddingBottom:r$1,paddingLeft:r$1,paddingBlock:r$1,paddingBlockEnd:r$1,paddingBlockStart:r$1,paddingInline:r$1,paddingInlineEnd:r$1,paddingInlineStart:r$1,top:r$1,right:r$1,bottom:r$1,left:r$1,scrollMargin:r$1,scrollMarginTop:r$1,scrollMarginRight:r$1,scrollMarginBottom:r$1,scrollMarginLeft:r$1,scrollMarginX:r$1,scrollMarginY:r$1,scrollMarginBlock:r$1,scrollMarginBlockEnd:r$1,scrollMarginBlockStart:r$1,scrollMarginInline:r$1,scrollMarginInlineEnd:r$1,scrollMarginInlineStart:r$1,scrollPadding:r$1,scrollPaddingTop:r$1,scrollPaddingRight:r$1,scrollPaddingBottom:r$1,scrollPaddingLeft:r$1,scrollPaddingX:r$1,scrollPaddingY:r$1,scrollPaddingBlock:r$1,scrollPaddingBlockEnd:r$1,scrollPaddingBlockStart:r$1,scrollPaddingInline:r$1,scrollPaddingInlineEnd:r$1,scrollPaddingInlineStart:r$1,fontSize:"fontSizes",background:e$1,backgroundColor:e$1,backgroundImage:e$1,borderImage:e$1,border:e$1,borderBlock:e$1,borderBlockEnd:e$1,borderBlockStart:e$1,borderBottom:e$1,borderBottomColor:e$1,borderColor:e$1,borderInline:e$1,borderInlineEnd:e$1,borderInlineStart:e$1,borderLeft:e$1,borderLeftColor:e$1,borderRight:e$1,borderRightColor:e$1,borderTop:e$1,borderTopColor:e$1,caretColor:e$1,color:e$1,columnRuleColor:e$1,fill:e$1,outline:e$1,outlineColor:e$1,stroke:e$1,textDecorationColor:e$1,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:t$1,minBlockSize:t$1,maxBlockSize:t$1,inlineSize:t$1,minInlineSize:t$1,maxInlineSize:t$1,width:t$1,minWidth:t$1,maxWidth:t$1,height:t$1,minHeight:t$1,maxHeight:t$1,flexBasis:t$1,gridTemplateColumns:t$1,gridTemplateRows:t$1,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},i$3=(tt,_)=>typeof _=="function"?{"()":Function.prototype.toString.call(_)}:_,o$1=()=>{const tt=Object.create(null);return(_,_e,...nt)=>{const rt=(it=>JSON.stringify(it,i$3))(_);return rt in tt?tt[rt]:tt[rt]=_e(_,...nt)}},l$1=Symbol.for("sxs.internal"),s$2=(tt,_)=>Object.defineProperties(tt,Object.getOwnPropertyDescriptors(_)),a$1=tt=>{for(const _ in tt)return!0;return!1},{hasOwnProperty:c$2}=Object.prototype,d$2=tt=>tt.includes("-")?tt:tt.replace(/[A-Z]/g,_=>"-"+_.toLowerCase()),g$2=/\s+(?![^()]*\))/,p$2=tt=>_=>tt(...typeof _=="string"?String(_).split(g$2):[_]),u$2={appearance:tt=>({WebkitAppearance:tt,appearance:tt}),backfaceVisibility:tt=>({WebkitBackfaceVisibility:tt,backfaceVisibility:tt}),backdropFilter:tt=>({WebkitBackdropFilter:tt,backdropFilter:tt}),backgroundClip:tt=>({WebkitBackgroundClip:tt,backgroundClip:tt}),boxDecorationBreak:tt=>({WebkitBoxDecorationBreak:tt,boxDecorationBreak:tt}),clipPath:tt=>({WebkitClipPath:tt,clipPath:tt}),content:tt=>({content:tt.includes('"')||tt.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(tt)?tt:`"${tt}"`}),hyphens:tt=>({WebkitHyphens:tt,hyphens:tt}),maskImage:tt=>({WebkitMaskImage:tt,maskImage:tt}),maskSize:tt=>({WebkitMaskSize:tt,maskSize:tt}),tabSize:tt=>({MozTabSize:tt,tabSize:tt}),textSizeAdjust:tt=>({WebkitTextSizeAdjust:tt,textSizeAdjust:tt}),userSelect:tt=>({WebkitUserSelect:tt,userSelect:tt}),marginBlock:p$2((tt,_)=>({marginBlockStart:tt,marginBlockEnd:_||tt})),marginInline:p$2((tt,_)=>({marginInlineStart:tt,marginInlineEnd:_||tt})),maxSize:p$2((tt,_)=>({maxBlockSize:tt,maxInlineSize:_||tt})),minSize:p$2((tt,_)=>({minBlockSize:tt,minInlineSize:_||tt})),paddingBlock:p$2((tt,_)=>({paddingBlockStart:tt,paddingBlockEnd:_||tt})),paddingInline:p$2((tt,_)=>({paddingInlineStart:tt,paddingInlineEnd:_||tt}))},h$2=/([\d.]+)([^]*)/,f$2=(tt,_)=>tt.length?tt.reduce((_e,nt)=>(_e.push(..._.map(rt=>rt.includes("&")?rt.replace(/&/g,/[ +>|~]/.test(nt)&&/&.*&/.test(rt)?`:is(${nt})`:nt):nt+" "+rt)),_e),[]):_,m$2=(tt,_)=>tt in b$2&&typeof _=="string"?_.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(_e,nt,rt,it)=>nt+(rt==="stretch"?`-moz-available${it};${d$2(tt)}:${nt}-webkit-fill-available`:`-moz-fit-content${it};${d$2(tt)}:${nt}fit-content`)+it):String(_),b$2={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},S$2=tt=>tt?tt+"-":"",k$2=(tt,_,_e)=>tt.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(nt,rt,it,ot,st)=>ot=="$"==!!it?nt:(rt||ot=="--"?"calc(":"")+"var(--"+(ot==="$"?S$2(_)+(st.includes("$")?"":S$2(_e))+st.replace(/\$/g,"-"):st)+")"+(rt||ot=="--"?"*"+(rt||"")+(it||"1")+")":"")),y$2=/\s*,\s*(?![^()]*\))/,B=Object.prototype.toString,$$2=(tt,_,_e,nt,rt)=>{let it,ot,st;const at=(lt,ct,ut)=>{let ht,pt;const gt=yt=>{for(ht in yt){const _t=ht.charCodeAt(0)===64,xt=_t&&Array.isArray(yt[ht])?yt[ht]:[yt[ht]];for(pt of xt){const St=/[A-Z]/.test(mt=ht)?mt:mt.replace(/-[^]/g,Mt=>Mt[1].toUpperCase()),Tt=typeof pt=="object"&&pt&&pt.toString===B&&(!nt.utils[St]||!ct.length);if(St in nt.utils&&!Tt){const Mt=nt.utils[St];if(Mt!==ot){ot=Mt,gt(Mt(pt)),ot=null;continue}}else if(St in u$2){const Mt=u$2[St];if(Mt!==st){st=Mt,gt(Mt(pt)),st=null;continue}}if(_t&&(vt=ht.slice(1)in nt.media?"@media "+nt.media[ht.slice(1)]:ht,ht=vt.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(Mt,bt,Pt,wt,Bt,Ot)=>{const Ut=h$2.test(bt),Nt=.0625*(Ut?-1:1),[zt,jt]=Ut?[wt,bt]:[bt,wt];return"("+(Pt[0]==="="?"":Pt[0]===">"===Ut?"max-":"min-")+zt+":"+(Pt[0]!=="="&&Pt.length===1?jt.replace(h$2,(Yt,qt,Gt)=>Number(qt)+Nt*(Pt===">"?1:-1)+Gt):jt)+(Bt?") and ("+(Bt[0]===">"?"min-":"max-")+zt+":"+(Bt.length===1?Ot.replace(h$2,(Yt,qt,Gt)=>Number(qt)+Nt*(Bt===">"?-1:1)+Gt):Ot):"")+")"})),Tt){const Mt=_t?ut.concat(ht):[...ut],bt=_t?[...ct]:f$2(ct,ht.split(y$2));it!==void 0&&rt(x$2(...it)),it=void 0,at(pt,bt,Mt)}else it===void 0&&(it=[[],ct,ut]),ht=_t||ht.charCodeAt(0)!==36?ht:`--${S$2(nt.prefix)}${ht.slice(1).replace(/\$/g,"-")}`,pt=Tt?pt:typeof pt=="number"?pt&&St in I$2?String(pt)+"px":String(pt):k$2(m$2(St,pt??""),nt.prefix,nt.themeMap[St]),it[0].push(`${_t?`${ht} `:`${d$2(ht)}:`}${pt}`)}}var vt,mt};gt(lt),it!==void 0&&rt(x$2(...it)),it=void 0};at(tt,_,_e)},x$2=(tt,_,_e)=>`${_e.map(nt=>`${nt}{`).join("")}${_.length?`${_.join(",")}{`:""}${tt.join(";")}${_.length?"}":""}${Array(_e.length?_e.length+1:0).join("}")}`,I$2={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},R=tt=>String.fromCharCode(tt+(tt>25?39:97)),z=tt=>(_=>{let _e,nt="";for(_e=Math.abs(_);_e>52;_e=_e/52|0)nt=R(_e%52)+nt;return R(_e%52)+nt})(((_,_e)=>{let nt=_e.length;for(;nt;)_=33*_^_e.charCodeAt(--nt);return _})(5381,JSON.stringify(tt))>>>0),W=["themed","global","styled","onevar","resonevar","allvar","inline"],j$1=tt=>{if(tt.href&&!tt.href.startsWith(location.origin))return!1;try{return!!tt.cssRules}catch{return!1}},E=tt=>{let _;const _e=()=>{const{cssRules:rt}=_.sheet;return[].map.call(rt,(it,ot)=>{const{cssText:st}=it;let at="";if(st.startsWith("--sxs"))return"";if(rt[ot-1]&&(at=rt[ot-1].cssText).startsWith("--sxs")){if(!it.cssRules.length)return"";for(const lt in _.rules)if(_.rules[lt].group===it)return`--sxs{--sxs:${[..._.rules[lt].cache].join(" ")}}${st}`;return it.cssRules.length?`${at}${st}`:""}return st}).join("")},nt=()=>{if(_){const{rules:st,sheet:at}=_;if(!at.deleteRule){for(;Object(Object(at.cssRules)[0]).type===3;)at.cssRules.splice(0,1);at.cssRules=[]}for(const lt in st)delete st[lt]}const rt=Object(tt).styleSheets||[];for(const st of rt)if(j$1(st)){for(let at=0,lt=st.cssRules;lt[at];++at){const ct=Object(lt[at]);if(ct.type!==1)continue;const ut=Object(lt[at+1]);if(ut.type!==4)continue;++at;const{cssText:ht}=ct;if(!ht.startsWith("--sxs"))continue;const pt=ht.slice(14,-3).trim().split(/\s+/),gt=W[pt[0]];gt&&(_||(_={sheet:st,reset:nt,rules:{},toString:_e}),_.rules[gt]={group:ut,index:at,cache:new Set(pt)})}if(_)break}if(!_){const st=(at,lt)=>({type:lt,cssRules:[],insertRule(ct,ut){this.cssRules.splice(ut,0,st(ct,{import:3,undefined:1}[(ct.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return at==="@media{}"?`@media{${[].map.call(this.cssRules,ct=>ct.cssText).join("")}}`:at}});_={sheet:tt?(tt.head||tt).appendChild(document.createElement("style")).sheet:st("","text/css"),rules:{},reset:nt,toString:_e}}const{sheet:it,rules:ot}=_;for(let st=W.length-1;st>=0;--st){const at=W[st];if(!ot[at]){const lt=W[st+1],ct=ot[lt]?ot[lt].index:it.cssRules.length;it.insertRule("@media{}",ct),it.insertRule(`--sxs{--sxs:${st}}`,ct),ot[at]={group:it.cssRules[ct+1],index:ct,cache:new Set([st])}}v$2(ot[at])}};return nt(),_},v$2=tt=>{const _=tt.group;let _e=_.cssRules.length;tt.apply=nt=>{try{_.insertRule(nt,_e),++_e}catch{}}},T$1=Symbol(),w$1=o$1(),M$1=(tt,_)=>w$1(tt,()=>(..._e)=>{let nt={type:null,composers:new Set};for(const rt of _e)if(rt!=null)if(rt[l$1]){nt.type==null&&(nt.type=rt[l$1].type);for(const it of rt[l$1].composers)nt.composers.add(it)}else rt.constructor!==Object||rt.$$typeof?nt.type==null&&(nt.type=rt):nt.composers.add(C(rt,tt));return nt.type==null&&(nt.type="span"),nt.composers.size||nt.composers.add(["PJLV",{},[],[],{},[]]),P(tt,nt,_)}),C=({variants:tt,compoundVariants:_,defaultVariants:_e,...nt},rt)=>{const it=`${S$2(rt.prefix)}c-${z(nt)}`,ot=[],st=[],at=Object.create(null),lt=[];for(const ht in _e)at[ht]=String(_e[ht]);if(typeof tt=="object"&&tt)for(const ht in tt){ct=at,ut=ht,c$2.call(ct,ut)||(at[ht]="undefined");const pt=tt[ht];for(const gt in pt){const yt={[ht]:String(gt)};String(gt)==="undefined"&&lt.push(ht);const vt=pt[gt],mt=[yt,vt,!a$1(vt)];ot.push(mt)}}var ct,ut;if(typeof _=="object"&&_)for(const ht of _){let{css:pt,...gt}=ht;pt=typeof pt=="object"&&pt||{};for(const vt in gt)gt[vt]=String(gt[vt]);const yt=[gt,pt,!a$1(pt)];st.push(yt)}return[it,nt,ot,st,at,lt]},P=(tt,_,_e)=>{const[nt,rt,it,ot]=L$1(_.composers),st=typeof _.type=="function"||_.type.$$typeof?(ut=>{function ht(){for(let pt=0;pt<ht[T$1].length;pt++){const[gt,yt]=ht[T$1][pt];ut.rules[gt].apply(yt)}return ht[T$1]=[],null}return ht[T$1]=[],ht.rules={},W.forEach(pt=>ht.rules[pt]={apply:gt=>ht[T$1].push([pt,gt])}),ht})(_e):null,at=(st||_e).rules,lt=`.${nt}${rt.length>1?`:where(.${rt.slice(1).join(".")})`:""}`,ct=ut=>{ut=typeof ut=="object"&&ut||A;const{css:ht,...pt}=ut,gt={};for(const mt in it)if(delete pt[mt],mt in ut){let _t=ut[mt];typeof _t=="object"&&_t?gt[mt]={"@initial":it[mt],..._t}:(_t=String(_t),gt[mt]=_t!=="undefined"||ot.has(mt)?_t:it[mt])}else gt[mt]=it[mt];const yt=new Set([...rt]);for(const[mt,_t,xt,St]of _.composers){_e.rules.styled.cache.has(mt)||(_e.rules.styled.cache.add(mt),$$2(_t,[`.${mt}`],[],tt,bt=>{at.styled.apply(bt)}));const Tt=O(xt,gt,tt.media),Mt=O(St,gt,tt.media,!0);for(const bt of Tt)if(bt!==void 0)for(const[Pt,wt,Bt]of bt){const Ot=`${mt}-${z(wt)}-${Pt}`;yt.add(Ot);const Ut=(Bt?_e.rules.resonevar:_e.rules.onevar).cache,Nt=Bt?at.resonevar:at.onevar;Ut.has(Ot)||(Ut.add(Ot),$$2(wt,[`.${Ot}`],[],tt,zt=>{Nt.apply(zt)}))}for(const bt of Mt)if(bt!==void 0)for(const[Pt,wt]of bt){const Bt=`${mt}-${z(wt)}-${Pt}`;yt.add(Bt),_e.rules.allvar.cache.has(Bt)||(_e.rules.allvar.cache.add(Bt),$$2(wt,[`.${Bt}`],[],tt,Ot=>{at.allvar.apply(Ot)}))}}if(typeof ht=="object"&&ht){const mt=`${nt}-i${z(ht)}-css`;yt.add(mt),_e.rules.inline.cache.has(mt)||(_e.rules.inline.cache.add(mt),$$2(ht,[`.${mt}`],[],tt,_t=>{at.inline.apply(_t)}))}for(const mt of String(ut.className||"").trim().split(/\s+/))mt&&yt.add(mt);const vt=pt.className=[...yt].join(" ");return{type:_.type,className:vt,selector:lt,props:pt,toString:()=>vt,deferredInjector:st}};return s$2(ct,{className:nt,selector:lt,[l$1]:_,toString:()=>(_e.rules.styled.cache.has(nt)||ct(),nt)})},L$1=tt=>{let _="";const _e=[],nt={},rt=[];for(const[it,,,,ot,st]of tt){_===""&&(_=it),_e.push(it),rt.push(...st);for(const at in ot){const lt=ot[at];(nt[at]===void 0||lt!=="undefined"||st.includes(lt))&&(nt[at]=lt)}}return[_,_e,nt,new Set(rt)]},O=(tt,_,_e,nt)=>{const rt=[];e:for(let[it,ot,st]of tt){if(st)continue;let at,lt=0,ct=!1;for(at in it){const ut=it[at];let ht=_[at];if(ht!==ut){if(typeof ht!="object"||!ht)continue e;{let pt,gt,yt=0;for(const vt in ht){if(ut===String(ht[vt])){if(vt!=="@initial"){const mt=vt.slice(1);(gt=gt||[]).push(mt in _e?_e[mt]:vt.replace(/^@media ?/,"")),ct=!0}lt+=yt,pt=!0}++yt}if(gt&&gt.length&&(ot={["@media "+gt.join(", ")]:ot}),!pt)continue e}}}(rt[lt]=rt[lt]||[]).push([nt?"cv":`${at}-${it[at]}`,ot,ct])}return rt},A={},N$1=o$1(),D=(tt,_)=>N$1(tt,()=>(..._e)=>{const nt=()=>{for(let rt of _e){rt=typeof rt=="object"&&rt||{};let it=z(rt);if(!_.rules.global.cache.has(it)){if(_.rules.global.cache.add(it),"@import"in rt){let ot=[].indexOf.call(_.sheet.cssRules,_.rules.themed.group)-1;for(let st of[].concat(rt["@import"]))st=st.includes('"')||st.includes("'")?st:`"${st}"`,_.sheet.insertRule(`@import ${st};`,ot++);delete rt["@import"]}$$2(rt,[],[],tt,ot=>{_.rules.global.apply(ot)})}}return""};return s$2(nt,{toString:nt})}),H$1=o$1(),V$2=(tt,_)=>H$1(tt,()=>_e=>{const nt=`${S$2(tt.prefix)}k-${z(_e)}`,rt=()=>{if(!_.rules.global.cache.has(nt)){_.rules.global.cache.add(nt);const it=[];$$2(_e,[],[],tt,st=>it.push(st));const ot=`@keyframes ${nt}{${it.join("")}}`;_.rules.global.apply(ot)}return nt};return s$2(rt,{get name(){return rt()},toString:rt})}),G=class{constructor(tt,_,_e,nt){this.token=tt==null?"":String(tt),this.value=_==null?"":String(_),this.scale=_e==null?"":String(_e),this.prefix=nt==null?"":String(nt)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+S$2(this.prefix)+S$2(this.scale)+this.token}toString(){return this.computedValue}},F$1=o$1(),J$1=(tt,_)=>F$1(tt,()=>(_e,nt)=>{nt=typeof _e=="object"&&_e||Object(nt);const rt=`.${_e=(_e=typeof _e=="string"?_e:"")||`${S$2(tt.prefix)}t-${z(nt)}`}`,it={},ot=[];for(const at in nt){it[at]={};for(const lt in nt[at]){const ct=`--${S$2(tt.prefix)}${at}-${lt}`,ut=k$2(String(nt[at][lt]),tt.prefix,at);it[at][lt]=new G(lt,ut,at,tt.prefix),ot.push(`${ct}:${ut}`)}}const st=()=>{if(ot.length&&!_.rules.themed.cache.has(_e)){_.rules.themed.cache.add(_e);const at=`${nt===tt.theme?":root,":""}.${_e}{${ot.join(";")}}`;_.rules.themed.apply(at)}return _e};return{...it,get className(){return st()},selector:rt,toString:st}}),U$1=o$1(),Y$1=o$1(),q$1=tt=>{const _=(_e=>{let nt=!1;const rt=U$1(_e,it=>{nt=!0;const ot="prefix"in(it=typeof it=="object"&&it||{})?String(it.prefix):"",st=typeof it.media=="object"&&it.media||{},at=typeof it.root=="object"?it.root||null:globalThis.document||null,lt=typeof it.theme=="object"&&it.theme||{},ct={prefix:ot,media:st,theme:lt,themeMap:typeof it.themeMap=="object"&&it.themeMap||{...n$1},utils:typeof it.utils=="object"&&it.utils||{}},ut=E(at),ht={css:M$1(ct,ut),globalCss:D(ct,ut),keyframes:V$2(ct,ut),createTheme:J$1(ct,ut),reset(){ut.reset(),ht.theme.toString()},theme:{},sheet:ut,config:ct,prefix:ot,getCssText:ut.toString,toString:ut.toString};return String(ht.theme=ht.createTheme(lt)),ht});return nt||rt.reset(),rt})(tt);return _.styled=(({config:_e,sheet:nt})=>Y$1(_e,()=>{const rt=M$1(_e,nt);return(...it)=>{const ot=rt(...it),st=ot[l$1].type,at=React.forwardRef((lt,ct)=>{const ut=lt&&lt.as||st,{props:ht,deferredInjector:pt}=ot(lt);return delete ht.as,ht.ref=ct,pt?React.createElement(React.Fragment,null,React.createElement(ut,ht),React.createElement(pt,null)):React.createElement(ut,ht)});return at.className=ot.className,at.displayName=`Styled.${st.displayName||st.name||st}`,at.selector=ot.selector,at.toString=()=>ot.selector,at[l$1]=ot[l$1],at}}))(_),_};function clamp$2(tt,_,_e){return Math.max(_,Math.min(tt,_e))}const V$1={toVector(tt,_){return tt===void 0&&(tt=_),Array.isArray(tt)?tt:[tt,tt]},add(tt,_){return[tt[0]+_[0],tt[1]+_[1]]},sub(tt,_){return[tt[0]-_[0],tt[1]-_[1]]},addTo(tt,_){tt[0]+=_[0],tt[1]+=_[1]},subTo(tt,_){tt[0]-=_[0],tt[1]-=_[1]}};function rubberband(tt,_,_e){return _===0||Math.abs(_)===1/0?Math.pow(tt,_e*5):tt*_*_e/(_+_e*tt)}function rubberbandIfOutOfBounds(tt,_,_e,nt=.15){return nt===0?clamp$2(tt,_,_e):tt<_?-rubberband(_-tt,_e-_,nt)+_:tt>_e?+rubberband(tt-_e,_e-_,nt)+_e:tt}function computeRubberband(tt,[_,_e],[nt,rt]){const[[it,ot],[st,at]]=tt;return[rubberbandIfOutOfBounds(_,it,ot,nt),rubberbandIfOutOfBounds(_e,st,at,rt)]}function _toPrimitive(tt,_){if(typeof tt!="object"||tt===null)return tt;var _e=tt[Symbol.toPrimitive];if(_e!==void 0){var nt=_e.call(tt,_||"default");if(typeof nt!="object")return nt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(tt)}function _toPropertyKey(tt){var _=_toPrimitive(tt,"string");return typeof _=="symbol"?_:String(_)}function _defineProperty$3(tt,_,_e){return _=_toPropertyKey(_),_ in tt?Object.defineProperty(tt,_,{value:_e,enumerable:!0,configurable:!0,writable:!0}):tt[_]=_e,tt}function ownKeys$3(tt,_){var _e=Object.keys(tt);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(tt);_&&(nt=nt.filter(function(rt){return Object.getOwnPropertyDescriptor(tt,rt).enumerable})),_e.push.apply(_e,nt)}return _e}function _objectSpread2$1(tt){for(var _=1;_<arguments.length;_++){var _e=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$3(Object(_e),!0).forEach(function(nt){_defineProperty$3(tt,nt,_e[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(_e)):ownKeys$3(Object(_e)).forEach(function(nt){Object.defineProperty(tt,nt,Object.getOwnPropertyDescriptor(_e,nt))})}return tt}const EVENT_TYPE_MAP={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function capitalize(tt){return tt?tt[0].toUpperCase()+tt.slice(1):""}const actionsWithoutCaptureSupported=["enter","leave"];function hasCapture(tt=!1,_){return tt&&!actionsWithoutCaptureSupported.includes(_)}function toHandlerProp(tt,_="",_e=!1){const nt=EVENT_TYPE_MAP[tt],rt=nt&&nt[_]||_;return"on"+capitalize(tt)+capitalize(rt)+(hasCapture(_e,rt)?"Capture":"")}const pointerCaptureEvents=["gotpointercapture","lostpointercapture"];function parseProp(tt){let _=tt.substring(2).toLowerCase();const _e=!!~_.indexOf("passive");_e&&(_=_.replace("passive",""));const nt=pointerCaptureEvents.includes(_)?"capturecapture":"capture",rt=!!~_.indexOf(nt);return rt&&(_=_.replace("capture","")),{device:_,capture:rt,passive:_e}}function toDomEventType(tt,_=""){const _e=EVENT_TYPE_MAP[tt],nt=_e&&_e[_]||_;return tt+nt}function isTouch(tt){return"touches"in tt}function getPointerType(tt){return isTouch(tt)?"touch":"pointerType"in tt?tt.pointerType:"mouse"}function getCurrentTargetTouchList(tt){return Array.from(tt.touches).filter(_=>{var _e,nt;return _.target===tt.currentTarget||((_e=tt.currentTarget)===null||_e===void 0||(nt=_e.contains)===null||nt===void 0?void 0:nt.call(_e,_.target))})}function getTouchList(tt){return tt.type==="touchend"||tt.type==="touchcancel"?tt.changedTouches:tt.targetTouches}function getValueEvent(tt){return isTouch(tt)?getTouchList(tt)[0]:tt}function touchIds(tt){return getCurrentTargetTouchList(tt).map(_=>_.identifier)}function pointerId(tt){const _=getValueEvent(tt);return isTouch(tt)?_.identifier:_.pointerId}function pointerValues(tt){const _=getValueEvent(tt);return[_.clientX,_.clientY]}function getEventDetails(tt){const _={};if("buttons"in tt&&(_.buttons=tt.buttons),"shiftKey"in tt){const{shiftKey:_e,altKey:nt,metaKey:rt,ctrlKey:it}=tt;Object.assign(_,{shiftKey:_e,altKey:nt,metaKey:rt,ctrlKey:it})}return _}function call(tt,..._){return typeof tt=="function"?tt(..._):tt}function noop$1(){}function chain(...tt){return tt.length===0?noop$1:tt.length===1?tt[0]:function(){let _;for(const _e of tt)_=_e.apply(this,arguments)||_;return _}}function assignDefault(tt,_){return Object.assign({},_,tt||{})}const BEFORE_LAST_KINEMATICS_DELAY=32;class Engine{constructor(_,_e,nt){this.ctrl=_,this.args=_e,this.key=nt,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(_){this.ctrl.state[this.key]=_}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:_,shared:_e,ingKey:nt,args:rt}=this;_e[nt]=_._active=_.active=_._blocked=_._force=!1,_._step=[!1,!1],_.intentional=!1,_._movement=[0,0],_._distance=[0,0],_._direction=[0,0],_._delta=[0,0],_._bounds=[[-1/0,1/0],[-1/0,1/0]],_.args=rt,_.axis=void 0,_.memo=void 0,_.elapsedTime=_.timeDelta=0,_.direction=[0,0],_.distance=[0,0],_.overflow=[0,0],_._movementBound=[!1,!1],_.velocity=[0,0],_.movement=[0,0],_.delta=[0,0],_.timeStamp=0}start(_){const _e=this.state,nt=this.config;_e._active||(this.reset(),this.computeInitial(),_e._active=!0,_e.target=_.target,_e.currentTarget=_.currentTarget,_e.lastOffset=nt.from?call(nt.from,_e):_e.offset,_e.offset=_e.lastOffset,_e.startTime=_e.timeStamp=_.timeStamp)}computeValues(_){const _e=this.state;_e._values=_,_e.values=this.config.transform(_)}computeInitial(){const _=this.state;_._initial=_._values,_.initial=_.values}compute(_){const{state:_e,config:nt,shared:rt}=this;_e.args=this.args;let it=0;if(_&&(_e.event=_,nt.preventDefault&&_.cancelable&&_e.event.preventDefault(),_e.type=_.type,rt.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,rt.locked=!!document.pointerLockElement,Object.assign(rt,getEventDetails(_)),rt.down=rt.pressed=rt.buttons%2===1||rt.touches>0,it=_.timeStamp-_e.timeStamp,_e.timeStamp=_.timeStamp,_e.elapsedTime=_e.timeStamp-_e.startTime),_e._active){const Mt=_e._delta.map(Math.abs);V$1.addTo(_e._distance,Mt)}this.axisIntent&&this.axisIntent(_);const[ot,st]=_e._movement,[at,lt]=nt.threshold,{_step:ct,values:ut}=_e;if(nt.hasCustomTransform?(ct[0]===!1&&(ct[0]=Math.abs(ot)>=at&&ut[0]),ct[1]===!1&&(ct[1]=Math.abs(st)>=lt&&ut[1])):(ct[0]===!1&&(ct[0]=Math.abs(ot)>=at&&Math.sign(ot)*at),ct[1]===!1&&(ct[1]=Math.abs(st)>=lt&&Math.sign(st)*lt)),_e.intentional=ct[0]!==!1||ct[1]!==!1,!_e.intentional)return;const ht=[0,0];if(nt.hasCustomTransform){const[Mt,bt]=ut;ht[0]=ct[0]!==!1?Mt-ct[0]:0,ht[1]=ct[1]!==!1?bt-ct[1]:0}else ht[0]=ct[0]!==!1?ot-ct[0]:0,ht[1]=ct[1]!==!1?st-ct[1]:0;this.restrictToAxis&&!_e._blocked&&this.restrictToAxis(ht);const pt=_e.offset,gt=_e._active&&!_e._blocked||_e.active;gt&&(_e.first=_e._active&&!_e.active,_e.last=!_e._active&&_e.active,_e.active=rt[this.ingKey]=_e._active,_&&(_e.first&&("bounds"in nt&&(_e._bounds=call(nt.bounds,_e)),this.setup&&this.setup()),_e.movement=ht,this.computeOffset()));const[yt,vt]=_e.offset,[[mt,_t],[xt,St]]=_e._bounds;_e.overflow=[yt<mt?-1:yt>_t?1:0,vt<xt?-1:vt>St?1:0],_e._movementBound[0]=_e.overflow[0]?_e._movementBound[0]===!1?_e._movement[0]:_e._movementBound[0]:!1,_e._movementBound[1]=_e.overflow[1]?_e._movementBound[1]===!1?_e._movement[1]:_e._movementBound[1]:!1;const Tt=_e._active?nt.rubberband||[0,0]:[0,0];if(_e.offset=computeRubberband(_e._bounds,_e.offset,Tt),_e.delta=V$1.sub(_e.offset,pt),this.computeMovement(),gt&&(!_e.last||it>BEFORE_LAST_KINEMATICS_DELAY)){_e.delta=V$1.sub(_e.offset,pt);const Mt=_e.delta.map(Math.abs);V$1.addTo(_e.distance,Mt),_e.direction=_e.delta.map(Math.sign),_e._direction=_e._delta.map(Math.sign),!_e.first&&it>0&&(_e.velocity=[Mt[0]/it,Mt[1]/it],_e.timeDelta=it)}}emit(){const _=this.state,_e=this.shared,nt=this.config;if(_._active||this.clean(),(_._blocked||!_.intentional)&&!_._force&&!nt.triggerAllEvents)return;const rt=this.handler(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},_e),_),{},{[this.aliasKey]:_.values}));rt!==void 0&&(_.memo=rt)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function selectAxis([tt,_],_e){const nt=Math.abs(tt),rt=Math.abs(_);if(nt>rt&&nt>_e)return"x";if(rt>nt&&rt>_e)return"y"}class CoordinatesEngine extends Engine{constructor(..._){super(..._),_defineProperty$3(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=V$1.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=V$1.sub(this.state.offset,this.state.lastOffset)}axisIntent(_){const _e=this.state,nt=this.config;if(!_e.axis&&_){const rt=typeof nt.axisThreshold=="object"?nt.axisThreshold[getPointerType(_)]:nt.axisThreshold;_e.axis=selectAxis(_e._movement,rt)}_e._blocked=(nt.lockDirection||!!nt.axis)&&!_e.axis||!!nt.axis&&nt.axis!==_e.axis}restrictToAxis(_){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":_[1]=0;break;case"y":_[0]=0;break}}}const identity=tt=>tt,DEFAULT_RUBBERBAND=.15,commonConfigResolver={enabled(tt=!0){return tt},eventOptions(tt,_,_e){return _objectSpread2$1(_objectSpread2$1({},_e.shared.eventOptions),tt)},preventDefault(tt=!1){return tt},triggerAllEvents(tt=!1){return tt},rubberband(tt=0){switch(tt){case!0:return[DEFAULT_RUBBERBAND,DEFAULT_RUBBERBAND];case!1:return[0,0];default:return V$1.toVector(tt)}},from(tt){if(typeof tt=="function")return tt;if(tt!=null)return V$1.toVector(tt)},transform(tt,_,_e){const nt=tt||_e.shared.transform;return this.hasCustomTransform=!!nt,nt||identity},threshold(tt){return V$1.toVector(tt,0)}},DEFAULT_AXIS_THRESHOLD=0,coordinatesConfigResolver=_objectSpread2$1(_objectSpread2$1({},commonConfigResolver),{},{axis(tt,_,{axis:_e}){if(this.lockDirection=_e==="lock",!this.lockDirection)return _e},axisThreshold(tt=DEFAULT_AXIS_THRESHOLD){return tt},bounds(tt={}){if(typeof tt=="function")return it=>coordinatesConfigResolver.bounds(tt(it));if("current"in tt)return()=>tt.current;if(typeof HTMLElement=="function"&&tt instanceof HTMLElement)return tt;const{left:_=-1/0,right:_e=1/0,top:nt=-1/0,bottom:rt=1/0}=tt;return[[_,_e],[nt,rt]]}}),KEYS_DELTA_MAP={ArrowRight:(tt,_=1)=>[tt*_,0],ArrowLeft:(tt,_=1)=>[-1*tt*_,0],ArrowUp:(tt,_=1)=>[0,-1*tt*_],ArrowDown:(tt,_=1)=>[0,tt*_]};class DragEngine extends CoordinatesEngine{constructor(..._){super(..._),_defineProperty$3(this,"ingKey","dragging")}reset(){super.reset();const _=this.state;_._pointerId=void 0,_._pointerActive=!1,_._keyboardActive=!1,_._preventScroll=!1,_._delayed=!1,_.swipe=[0,0],_.tap=!1,_.canceled=!1,_.cancel=this.cancel.bind(this)}setup(){const _=this.state;if(_._bounds instanceof HTMLElement){const _e=_._bounds.getBoundingClientRect(),nt=_.currentTarget.getBoundingClientRect(),rt={left:_e.left-nt.left+_.offset[0],right:_e.right-nt.right+_.offset[0],top:_e.top-nt.top+_.offset[1],bottom:_e.bottom-nt.bottom+_.offset[1]};_._bounds=coordinatesConfigResolver.bounds(rt)}}cancel(){const _=this.state;_.canceled||(_.canceled=!0,_._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(_){const _e=this.config,nt=this.state;if(_.buttons!=null&&(Array.isArray(_e.pointerButtons)?!_e.pointerButtons.includes(_.buttons):_e.pointerButtons!==-1&&_e.pointerButtons!==_.buttons))return;const rt=this.ctrl.setEventIds(_);_e.pointerCapture&&_.target.setPointerCapture(_.pointerId),!(rt&&rt.size>1&&nt._pointerActive)&&(this.start(_),this.setupPointer(_),nt._pointerId=pointerId(_),nt._pointerActive=!0,this.computeValues(pointerValues(_)),this.computeInitial(),_e.preventScrollAxis&&getPointerType(_)!=="mouse"?(nt._active=!1,this.setupScrollPrevention(_)):_e.delay>0?(this.setupDelayTrigger(_),_e.triggerAllEvents&&(this.compute(_),this.emit())):this.startPointerDrag(_))}startPointerDrag(_){const _e=this.state;_e._active=!0,_e._preventScroll=!0,_e._delayed=!1,this.compute(_),this.emit()}pointerMove(_){const _e=this.state,nt=this.config;if(!_e._pointerActive)return;const rt=pointerId(_);if(_e._pointerId!==void 0&&rt!==_e._pointerId)return;const it=pointerValues(_);if(document.pointerLockElement===_.target?_e._delta=[_.movementX,_.movementY]:(_e._delta=V$1.sub(it,_e._values),this.computeValues(it)),V$1.addTo(_e._movement,_e._delta),this.compute(_),_e._delayed&&_e.intentional){this.timeoutStore.remove("dragDelay"),_e.active=!1,this.startPointerDrag(_);return}if(nt.preventScrollAxis&&!_e._preventScroll)if(_e.axis)if(_e.axis===nt.preventScrollAxis||nt.preventScrollAxis==="xy"){_e._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(_);return}else return;this.emit()}pointerUp(_){this.ctrl.setEventIds(_);try{this.config.pointerCapture&&_.target.hasPointerCapture(_.pointerId)&&_.target.releasePointerCapture(_.pointerId)}catch{}const _e=this.state,nt=this.config;if(!_e._active||!_e._pointerActive)return;const rt=pointerId(_);if(_e._pointerId!==void 0&&rt!==_e._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(_);const[it,ot]=_e._distance;if(_e.tap=it<=nt.tapsThreshold&&ot<=nt.tapsThreshold,_e.tap&&nt.filterTaps)_e._force=!0;else{const[st,at]=_e._delta,[lt,ct]=_e._movement,[ut,ht]=nt.swipe.velocity,[pt,gt]=nt.swipe.distance,yt=nt.swipe.duration;if(_e.elapsedTime<yt){const vt=Math.abs(st/_e.timeDelta),mt=Math.abs(at/_e.timeDelta);vt>ut&&Math.abs(lt)>pt&&(_e.swipe[0]=Math.sign(st)),mt>ht&&Math.abs(ct)>gt&&(_e.swipe[1]=Math.sign(at))}}this.emit()}pointerClick(_){!this.state.tap&&_.detail>0&&(_.preventDefault(),_.stopPropagation())}setupPointer(_){const _e=this.config,nt=_e.device;_e.pointerLock&&_.currentTarget.requestPointerLock(),_e.pointerCapture||(this.eventStore.add(this.sharedConfig.window,nt,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,nt,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,nt,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(_){this.state._preventScroll&&_.cancelable&&_.preventDefault()}setupScrollPrevention(_){this.state._preventScroll=!1,persistEvent(_);const _e=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",_e),this.eventStore.add(this.sharedConfig.window,"touch","cancel",_e),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,_)}setupDelayTrigger(_){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(_)},this.config.delay)}keyDown(_){const _e=KEYS_DELTA_MAP[_.key];if(_e){const nt=this.state,rt=_.shiftKey?10:_.altKey?.1:1;this.start(_),nt._delta=_e(this.config.keyboardDisplacement,rt),nt._keyboardActive=!0,V$1.addTo(nt._movement,nt._delta),this.compute(_),this.emit()}}keyUp(_){_.key in KEYS_DELTA_MAP&&(this.state._keyboardActive=!1,this.setActive(),this.compute(_),this.emit())}bind(_){const _e=this.config.device;_(_e,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(_(_e,"change",this.pointerMove.bind(this)),_(_e,"end",this.pointerUp.bind(this)),_(_e,"cancel",this.pointerUp.bind(this)),_("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(_("key","down",this.keyDown.bind(this)),_("key","up",this.keyUp.bind(this))),this.config.filterTaps&&_("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function persistEvent(tt){"persist"in tt&&typeof tt.persist=="function"&&tt.persist()}const isBrowser=typeof window<"u"&&window.document&&window.document.createElement;function supportsTouchEvents(){return isBrowser&&"ontouchstart"in window}function isTouchScreen(){return supportsTouchEvents()||isBrowser&&window.navigator.maxTouchPoints>1}function supportsPointerEvents(){return isBrowser&&"onpointerdown"in window}function supportsPointerLock(){return isBrowser&&"exitPointerLock"in window.document}function supportsGestureEvents(){try{return"constructor"in GestureEvent}catch{return!1}}const SUPPORT={isBrowser,gesture:supportsGestureEvents(),touch:supportsTouchEvents(),touchscreen:isTouchScreen(),pointer:supportsPointerEvents(),pointerLock:supportsPointerLock()},DEFAULT_PREVENT_SCROLL_DELAY=250,DEFAULT_DRAG_DELAY=180,DEFAULT_SWIPE_VELOCITY=.5,DEFAULT_SWIPE_DISTANCE=50,DEFAULT_SWIPE_DURATION=250,DEFAULT_KEYBOARD_DISPLACEMENT=10,DEFAULT_DRAG_AXIS_THRESHOLD={mouse:0,touch:0,pen:8},dragConfigResolver=_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{device(tt,_,{pointer:{touch:_e=!1,lock:nt=!1,mouse:rt=!1}={}}){return this.pointerLock=nt&&SUPPORT.pointerLock,SUPPORT.touch&&_e?"touch":this.pointerLock?"mouse":SUPPORT.pointer&&!rt?"pointer":SUPPORT.touch?"touch":"mouse"},preventScrollAxis(tt,_,{preventScroll:_e}){if(this.preventScrollDelay=typeof _e=="number"?_e:_e||_e===void 0&&tt?DEFAULT_PREVENT_SCROLL_DELAY:void 0,!(!SUPPORT.touchscreen||_e===!1))return tt||(_e!==void 0?"y":void 0)},pointerCapture(tt,_,{pointer:{capture:_e=!0,buttons:nt=1,keys:rt=!0}={}}){return this.pointerButtons=nt,this.keys=rt,!this.pointerLock&&this.device==="pointer"&&_e},threshold(tt,_,{filterTaps:_e=!1,tapsThreshold:nt=3,axis:rt=void 0}){const it=V$1.toVector(tt,_e?nt:rt?1:0);return this.filterTaps=_e,this.tapsThreshold=nt,it},swipe({velocity:tt=DEFAULT_SWIPE_VELOCITY,distance:_=DEFAULT_SWIPE_DISTANCE,duration:_e=DEFAULT_SWIPE_DURATION}={}){return{velocity:this.transform(V$1.toVector(tt)),distance:this.transform(V$1.toVector(_)),duration:_e}},delay(tt=0){switch(tt){case!0:return DEFAULT_DRAG_DELAY;case!1:return 0;default:return tt}},axisThreshold(tt){return tt?_objectSpread2$1(_objectSpread2$1({},DEFAULT_DRAG_AXIS_THRESHOLD),tt):DEFAULT_DRAG_AXIS_THRESHOLD},keyboardDisplacement(tt=DEFAULT_KEYBOARD_DISPLACEMENT){return tt}});_objectSpread2$1(_objectSpread2$1({},commonConfigResolver),{},{device(tt,_,{shared:_e,pointer:{touch:nt=!1}={}}){if(_e.target&&!SUPPORT.touch&&SUPPORT.gesture)return"gesture";if(SUPPORT.touch&&nt)return"touch";if(SUPPORT.touchscreen){if(SUPPORT.pointer)return"pointer";if(SUPPORT.touch)return"touch"}},bounds(tt,_,{scaleBounds:_e={},angleBounds:nt={}}){const rt=ot=>{const st=assignDefault(call(_e,ot),{min:-1/0,max:1/0});return[st.min,st.max]},it=ot=>{const st=assignDefault(call(nt,ot),{min:-1/0,max:1/0});return[st.min,st.max]};return typeof _e!="function"&&typeof nt!="function"?[rt(),it()]:ot=>[rt(ot),it(ot)]},threshold(tt,_,_e){return this.lockDirection=_e.axis==="lock",V$1.toVector(tt,this.lockDirection?[.1,3]:0)},modifierKey(tt){return tt===void 0?"ctrlKey":tt},pinchOnWheel(tt=!0){return tt}});_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{mouseOnly:(tt=!0)=>tt});_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{mouseOnly:(tt=!0)=>tt});const EngineMap=new Map,ConfigResolverMap=new Map;function registerAction(tt){EngineMap.set(tt.key,tt.engine),ConfigResolverMap.set(tt.key,tt.resolver)}const dragAction={key:"drag",engine:DragEngine,resolver:dragConfigResolver};function _objectWithoutPropertiesLoose$2(tt,_){if(tt==null)return{};var _e={},nt=Object.keys(tt),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_.indexOf(rt)>=0)&&(_e[rt]=tt[rt]);return _e}function _objectWithoutProperties$2(tt,_){if(tt==null)return{};var _e=_objectWithoutPropertiesLoose$2(tt,_),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(tt);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(tt,nt)&&(_e[nt]=tt[nt])}return _e}const sharedConfigResolver={target(tt){if(tt)return()=>"current"in tt?tt.current:tt},enabled(tt=!0){return tt},window(tt=SUPPORT.isBrowser?window:void 0){return tt},eventOptions({passive:tt=!0,capture:_=!1}={}){return{passive:tt,capture:_}},transform(tt){return tt}},_excluded$c=["target","eventOptions","window","enabled","transform"];function resolveWith(tt={},_){const _e={};for(const[nt,rt]of Object.entries(_))switch(typeof rt){case"function":_e[nt]=rt.call(_e,tt[nt],nt,tt);break;case"object":_e[nt]=resolveWith(tt[nt],rt);break;case"boolean":rt&&(_e[nt]=tt[nt]);break}return _e}function parse$1(tt,_,_e={}){const nt=tt,{target:rt,eventOptions:it,window:ot,enabled:st,transform:at}=nt,lt=_objectWithoutProperties$2(nt,_excluded$c);if(_e.shared=resolveWith({target:rt,eventOptions:it,window:ot,enabled:st,transform:at},sharedConfigResolver),_){const ct=ConfigResolverMap.get(_);_e[_]=resolveWith(_objectSpread2$1({shared:_e.shared},lt),ct)}else for(const ct in lt){const ut=ConfigResolverMap.get(ct);ut&&(_e[ct]=resolveWith(_objectSpread2$1({shared:_e.shared},lt[ct]),ut))}return _e}class EventStore{constructor(_,_e){_defineProperty$3(this,"_listeners",new Set),this._ctrl=_,this._gestureKey=_e}add(_,_e,nt,rt,it){const ot=this._listeners,st=toDomEventType(_e,nt),at=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},lt=_objectSpread2$1(_objectSpread2$1({},at),it);_.addEventListener(st,rt,lt);const ct=()=>{_.removeEventListener(st,rt,lt),ot.delete(ct)};return ot.add(ct),ct}clean(){this._listeners.forEach(_=>_()),this._listeners.clear()}}class TimeoutStore{constructor(){_defineProperty$3(this,"_timeouts",new Map)}add(_,_e,nt=140,...rt){this.remove(_),this._timeouts.set(_,window.setTimeout(_e,nt,...rt))}remove(_){const _e=this._timeouts.get(_);_e&&window.clearTimeout(_e)}clean(){this._timeouts.forEach(_=>void window.clearTimeout(_)),this._timeouts.clear()}}class Controller{constructor(_){_defineProperty$3(this,"gestures",new Set),_defineProperty$3(this,"_targetEventStore",new EventStore(this)),_defineProperty$3(this,"gestureEventStores",{}),_defineProperty$3(this,"gestureTimeoutStores",{}),_defineProperty$3(this,"handlers",{}),_defineProperty$3(this,"config",{}),_defineProperty$3(this,"pointerIds",new Set),_defineProperty$3(this,"touchIds",new Set),_defineProperty$3(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),resolveGestures(this,_)}setEventIds(_){if(isTouch(_))return this.touchIds=new Set(touchIds(_)),this.touchIds;if("pointerId"in _)return _.type==="pointerup"||_.type==="pointercancel"?this.pointerIds.delete(_.pointerId):_.type==="pointerdown"&&this.pointerIds.add(_.pointerId),this.pointerIds}applyHandlers(_,_e){this.handlers=_,this.nativeHandlers=_e}applyConfig(_,_e){this.config=parse$1(_,_e,this.config)}clean(){this._targetEventStore.clean();for(const _ of this.gestures)this.gestureEventStores[_].clean(),this.gestureTimeoutStores[_].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(..._){const _e=this.config.shared,nt={};let rt;if(!(_e.target&&(rt=_e.target(),!rt))){if(_e.enabled){for(const ot of this.gestures){const st=this.config[ot],at=bindToProps(nt,st.eventOptions,!!rt);if(st.enabled){const lt=EngineMap.get(ot);new lt(this,_,ot).bind(at)}}const it=bindToProps(nt,_e.eventOptions,!!rt);for(const ot in this.nativeHandlers)it(ot,"",st=>this.nativeHandlers[ot](_objectSpread2$1(_objectSpread2$1({},this.state.shared),{},{event:st,args:_})),void 0,!0)}for(const it in nt)nt[it]=chain(...nt[it]);if(!rt)return nt;for(const it in nt){const{device:ot,capture:st,passive:at}=parseProp(it);this._targetEventStore.add(rt,ot,"",nt[it],{capture:st,passive:at})}}}}function setupGesture(tt,_){tt.gestures.add(_),tt.gestureEventStores[_]=new EventStore(tt,_),tt.gestureTimeoutStores[_]=new TimeoutStore}function resolveGestures(tt,_){_.drag&&setupGesture(tt,"drag"),_.wheel&&setupGesture(tt,"wheel"),_.scroll&&setupGesture(tt,"scroll"),_.move&&setupGesture(tt,"move"),_.pinch&&setupGesture(tt,"pinch"),_.hover&&setupGesture(tt,"hover")}const bindToProps=(tt,_,_e)=>(nt,rt,it,ot={},st=!1)=>{var at,lt;const ct=(at=ot.capture)!==null&&at!==void 0?at:_.capture,ut=(lt=ot.passive)!==null&&lt!==void 0?lt:_.passive;let ht=st?nt:toHandlerProp(nt,rt,ct);_e&&ut&&(ht+="Passive"),tt[ht]=tt[ht]||[],tt[ht].push(it)};function useRecognizers(tt,_={},_e,nt){const rt=React.useMemo(()=>new Controller(tt),[]);if(rt.applyHandlers(tt,nt),rt.applyConfig(_,_e),React.useEffect(rt.effect.bind(rt)),React.useEffect(()=>rt.clean.bind(rt),[]),_.target===void 0)return rt.bind.bind(rt)}function useDrag$1(tt,_){return registerAction(dragAction),useRecognizers({drag:tt},_||{},"drag")}function $e42e1063c40fb3ef$export$b9ecd428b558ff10(tt,_,{checkForDefaultPrevented:_e=!0}={}){return function(rt){if(tt==null||tt(rt),_e===!1||!rt.defaultPrevented)return _==null?void 0:_(rt)}}function $c512c27ab02ef895$export$50c7b4e9d9f19c1(tt,_=[]){let _e=[];function nt(it,ot){const st=reactExports.createContext(ot),at=_e.length;_e=[..._e,ot];function lt(ut){const{scope:ht,children:pt,...gt}=ut,yt=(ht==null?void 0:ht[tt][at])||st,vt=reactExports.useMemo(()=>gt,Object.values(gt));return reactExports.createElement(yt.Provider,{value:vt},pt)}function ct(ut,ht){const pt=(ht==null?void 0:ht[tt][at])||st,gt=reactExports.useContext(pt);if(gt)return gt;if(ot!==void 0)return ot;throw new Error(`\`${ut}\` must be used within \`${it}\``)}return lt.displayName=it+"Provider",[lt,ct]}const rt=()=>{const it=_e.map(ot=>reactExports.createContext(ot));return function(st){const at=(st==null?void 0:st[tt])||it;return reactExports.useMemo(()=>({[`__scope${tt}`]:{...st,[tt]:at}}),[st,at])}};return rt.scopeName=tt,[nt,$c512c27ab02ef895$var$composeContextScopes(rt,..._)]}function $c512c27ab02ef895$var$composeContextScopes(...tt){const _=tt[0];if(tt.length===1)return _;const _e=()=>{const nt=tt.map(rt=>({useScope:rt(),scopeName:rt.scopeName}));return function(it){const ot=nt.reduce((st,{useScope:at,scopeName:lt})=>{const ut=at(it)[`__scope${lt}`];return{...st,...ut}},{});return reactExports.useMemo(()=>({[`__scope${_.scopeName}`]:ot}),[ot])}};return _e.scopeName=_.scopeName,_e}function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(tt){const _=reactExports.useRef(tt);return reactExports.useEffect(()=>{_.current=tt}),reactExports.useMemo(()=>(..._e)=>{var nt;return(nt=_.current)===null||nt===void 0?void 0:nt.call(_,..._e)},[])}function $addc16e1bbe58fd0$export$3a72a57244d6e765(tt,_=globalThis==null?void 0:globalThis.document){const _e=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(tt);reactExports.useEffect(()=>{const nt=rt=>{rt.key==="Escape"&&_e(rt)};return _.addEventListener("keydown",nt),()=>_.removeEventListener("keydown",nt)},[_e,_])}const $5cb92bef7577960e$var$CONTEXT_UPDATE="dismissableLayer.update",$5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",$5cb92bef7577960e$var$FOCUS_OUTSIDE="dismissableLayer.focusOutside";let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=reactExports.forwardRef((tt,_)=>{var _e;const{disableOutsidePointerEvents:nt=!1,onEscapeKeyDown:rt,onPointerDownOutside:it,onFocusOutside:ot,onInteractOutside:st,onDismiss:at,...lt}=tt,ct=reactExports.useContext($5cb92bef7577960e$var$DismissableLayerContext),[ut,ht]=reactExports.useState(null),pt=(_e=ut==null?void 0:ut.ownerDocument)!==null&&_e!==void 0?_e:globalThis==null?void 0:globalThis.document,[,gt]=reactExports.useState({}),yt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,Pt=>ht(Pt)),vt=Array.from(ct.layers),[mt]=[...ct.layersWithOutsidePointerEventsDisabled].slice(-1),_t=vt.indexOf(mt),xt=ut?vt.indexOf(ut):-1,St=ct.layersWithOutsidePointerEventsDisabled.size>0,Tt=xt>=_t,Mt=$5cb92bef7577960e$var$usePointerDownOutside(Pt=>{const wt=Pt.target,Bt=[...ct.branches].some(Ot=>Ot.contains(wt));!Tt||Bt||(it==null||it(Pt),st==null||st(Pt),Pt.defaultPrevented||at==null||at())},pt),bt=$5cb92bef7577960e$var$useFocusOutside(Pt=>{const wt=Pt.target;[...ct.branches].some(Ot=>Ot.contains(wt))||(ot==null||ot(Pt),st==null||st(Pt),Pt.defaultPrevented||at==null||at())},pt);return $addc16e1bbe58fd0$export$3a72a57244d6e765(Pt=>{xt===ct.layers.size-1&&(rt==null||rt(Pt),!Pt.defaultPrevented&&at&&(Pt.preventDefault(),at()))},pt),reactExports.useEffect(()=>{if(ut)return nt&&(ct.layersWithOutsidePointerEventsDisabled.size===0&&($5cb92bef7577960e$var$originalBodyPointerEvents=pt.body.style.pointerEvents,pt.body.style.pointerEvents="none"),ct.layersWithOutsidePointerEventsDisabled.add(ut)),ct.layers.add(ut),$5cb92bef7577960e$var$dispatchUpdate(),()=>{nt&&ct.layersWithOutsidePointerEventsDisabled.size===1&&(pt.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}},[ut,pt,nt,ct]),reactExports.useEffect(()=>()=>{ut&&(ct.layers.delete(ut),ct.layersWithOutsidePointerEventsDisabled.delete(ut),$5cb92bef7577960e$var$dispatchUpdate())},[ut,ct]),reactExports.useEffect(()=>{const Pt=()=>gt({});return document.addEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,Pt),()=>document.removeEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,Pt)},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},lt,{ref:yt,style:{pointerEvents:St?Tt?"auto":"none":void 0,...tt.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(tt.onFocusCapture,bt.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(tt.onBlurCapture,bt.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(tt.onPointerDownCapture,Mt.onPointerDownCapture)}))});function $5cb92bef7577960e$var$usePointerDownOutside(tt,_=globalThis==null?void 0:globalThis.document){const _e=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(tt),nt=reactExports.useRef(!1),rt=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const it=st=>{if(st.target&&!nt.current){let ct=function(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE,_e,lt,{discrete:!0})};var at=ct;const lt={originalEvent:st};st.pointerType==="touch"?(_.removeEventListener("click",rt.current),rt.current=ct,_.addEventListener("click",rt.current,{once:!0})):ct()}else _.removeEventListener("click",rt.current);nt.current=!1},ot=window.setTimeout(()=>{_.addEventListener("pointerdown",it)},0);return()=>{window.clearTimeout(ot),_.removeEventListener("pointerdown",it),_.removeEventListener("click",rt.current)}},[_,_e]),{onPointerDownCapture:()=>nt.current=!0}}function $5cb92bef7577960e$var$useFocusOutside(tt,_=globalThis==null?void 0:globalThis.document){const _e=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(tt),nt=reactExports.useRef(!1);return reactExports.useEffect(()=>{const rt=it=>{it.target&&!nt.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$FOCUS_OUTSIDE,_e,{originalEvent:it},{discrete:!1})};return _.addEventListener("focusin",rt),()=>_.removeEventListener("focusin",rt)},[_,_e]),{onFocusCapture:()=>nt.current=!0,onBlurCapture:()=>nt.current=!1}}function $5cb92bef7577960e$var$dispatchUpdate(){const tt=new CustomEvent($5cb92bef7577960e$var$CONTEXT_UPDATE);document.dispatchEvent(tt)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(tt,_,_e,{discrete:nt}){const rt=_e.originalEvent.target,it=new CustomEvent(tt,{bubbles:!1,cancelable:!0,detail:_e});_&&rt.addEventListener(tt,_,{once:!0}),nt?$8927f6f2acc4f386$export$6d1a0317bde7de7f(rt,it):rt.dispatchEvent(it)}const $9f79659886946c16$export$e5c5a5f917a5871c=Boolean(globalThis==null?void 0:globalThis.document)?reactExports.useLayoutEffect:()=>{},$1746a345f3d73bb7$var$useReactId=$2AODx$react["useId".toString()]||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(tt){const[_,_e]=reactExports.useState($1746a345f3d73bb7$var$useReactId());return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{tt||_e(nt=>nt??String($1746a345f3d73bb7$var$count++))},[tt]),tt||(_?`radix-${_}`:"")}const sides=["top","right","bottom","left"],min=Math.min,max$1=Math.max,round=Math.round,floor=Math.floor,createCoords=tt=>({x:tt,y:tt}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(tt,_,_e){return max$1(tt,min(_,_e))}function evaluate$1(tt,_){return typeof tt=="function"?tt(_):tt}function getSide(tt){return tt.split("-")[0]}function getAlignment(tt){return tt.split("-")[1]}function getOppositeAxis(tt){return tt==="x"?"y":"x"}function getAxisLength(tt){return tt==="y"?"height":"width"}function getSideAxis(tt){return["top","bottom"].includes(getSide(tt))?"y":"x"}function getAlignmentAxis(tt){return getOppositeAxis(getSideAxis(tt))}function getAlignmentSides(tt,_,_e){_e===void 0&&(_e=!1);const nt=getAlignment(tt),rt=getAlignmentAxis(tt),it=getAxisLength(rt);let ot=rt==="x"?nt===(_e?"end":"start")?"right":"left":nt==="start"?"bottom":"top";return _.reference[it]>_.floating[it]&&(ot=getOppositePlacement(ot)),[ot,getOppositePlacement(ot)]}function getExpandedPlacements(tt){const _=getOppositePlacement(tt);return[getOppositeAlignmentPlacement(tt),_,getOppositeAlignmentPlacement(_)]}function getOppositeAlignmentPlacement(tt){return tt.replace(/start|end/g,_=>oppositeAlignmentMap[_])}function getSideList(tt,_,_e){const nt=["left","right"],rt=["right","left"],it=["top","bottom"],ot=["bottom","top"];switch(tt){case"top":case"bottom":return _e?_?rt:nt:_?nt:rt;case"left":case"right":return _?it:ot;default:return[]}}function getOppositeAxisPlacements(tt,_,_e,nt){const rt=getAlignment(tt);let it=getSideList(getSide(tt),_e==="start",nt);return rt&&(it=it.map(ot=>ot+"-"+rt),_&&(it=it.concat(it.map(getOppositeAlignmentPlacement)))),it}function getOppositePlacement(tt){return tt.replace(/left|right|bottom|top/g,_=>oppositeSideMap[_])}function expandPaddingObject(tt){return{top:0,right:0,bottom:0,left:0,...tt}}function getPaddingObject(tt){return typeof tt!="number"?expandPaddingObject(tt):{top:tt,right:tt,bottom:tt,left:tt}}function rectToClientRect(tt){return{...tt,top:tt.y,left:tt.x,right:tt.x+tt.width,bottom:tt.y+tt.height}}function computeCoordsFromPlacement(tt,_,_e){let{reference:nt,floating:rt}=tt;const it=getSideAxis(_),ot=getAlignmentAxis(_),st=getAxisLength(ot),at=getSide(_),lt=it==="y",ct=nt.x+nt.width/2-rt.width/2,ut=nt.y+nt.height/2-rt.height/2,ht=nt[st]/2-rt[st]/2;let pt;switch(at){case"top":pt={x:ct,y:nt.y-rt.height};break;case"bottom":pt={x:ct,y:nt.y+nt.height};break;case"right":pt={x:nt.x+nt.width,y:ut};break;case"left":pt={x:nt.x-rt.width,y:ut};break;default:pt={x:nt.x,y:nt.y}}switch(getAlignment(_)){case"start":pt[ot]-=ht*(_e&&lt?-1:1);break;case"end":pt[ot]+=ht*(_e&&lt?-1:1);break}return pt}const computePosition$1=async(tt,_,_e)=>{const{placement:nt="bottom",strategy:rt="absolute",middleware:it=[],platform:ot}=_e,st=it.filter(Boolean),at=await(ot.isRTL==null?void 0:ot.isRTL(_));let lt=await ot.getElementRects({reference:tt,floating:_,strategy:rt}),{x:ct,y:ut}=computeCoordsFromPlacement(lt,nt,at),ht=nt,pt={},gt=0;for(let yt=0;yt<st.length;yt++){const{name:vt,fn:mt}=st[yt],{x:_t,y:xt,data:St,reset:Tt}=await mt({x:ct,y:ut,initialPlacement:nt,placement:ht,strategy:rt,middlewareData:pt,rects:lt,platform:ot,elements:{reference:tt,floating:_}});if(ct=_t??ct,ut=xt??ut,pt={...pt,[vt]:{...pt[vt],...St}},Tt&&gt<=50){gt++,typeof Tt=="object"&&(Tt.placement&&(ht=Tt.placement),Tt.rects&&(lt=Tt.rects===!0?await ot.getElementRects({reference:tt,floating:_,strategy:rt}):Tt.rects),{x:ct,y:ut}=computeCoordsFromPlacement(lt,ht,at)),yt=-1;continue}}return{x:ct,y:ut,placement:ht,strategy:rt,middlewareData:pt}};async function detectOverflow(tt,_){var _e;_===void 0&&(_={});const{x:nt,y:rt,platform:it,rects:ot,elements:st,strategy:at}=tt,{boundary:lt="clippingAncestors",rootBoundary:ct="viewport",elementContext:ut="floating",altBoundary:ht=!1,padding:pt=0}=evaluate$1(_,tt),gt=getPaddingObject(pt),vt=st[ht?ut==="floating"?"reference":"floating":ut],mt=rectToClientRect(await it.getClippingRect({element:(_e=await(it.isElement==null?void 0:it.isElement(vt)))==null||_e?vt:vt.contextElement||await(it.getDocumentElement==null?void 0:it.getDocumentElement(st.floating)),boundary:lt,rootBoundary:ct,strategy:at})),_t=ut==="floating"?{...ot.floating,x:nt,y:rt}:ot.reference,xt=await(it.getOffsetParent==null?void 0:it.getOffsetParent(st.floating)),St=await(it.isElement==null?void 0:it.isElement(xt))?await(it.getScale==null?void 0:it.getScale(xt))||{x:1,y:1}:{x:1,y:1},Tt=rectToClientRect(it.convertOffsetParentRelativeRectToViewportRelativeRect?await it.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_t,offsetParent:xt,strategy:at}):_t);return{top:(mt.top-Tt.top+gt.top)/St.y,bottom:(Tt.bottom-mt.bottom+gt.bottom)/St.y,left:(mt.left-Tt.left+gt.left)/St.x,right:(Tt.right-mt.right+gt.right)/St.x}}const arrow$1=tt=>({name:"arrow",options:tt,async fn(_){const{x:_e,y:nt,placement:rt,rects:it,platform:ot,elements:st,middlewareData:at}=_,{element:lt,padding:ct=0}=evaluate$1(tt,_)||{};if(lt==null)return{};const ut=getPaddingObject(ct),ht={x:_e,y:nt},pt=getAlignmentAxis(rt),gt=getAxisLength(pt),yt=await ot.getDimensions(lt),vt=pt==="y",mt=vt?"top":"left",_t=vt?"bottom":"right",xt=vt?"clientHeight":"clientWidth",St=it.reference[gt]+it.reference[pt]-ht[pt]-it.floating[gt],Tt=ht[pt]-it.reference[pt],Mt=await(ot.getOffsetParent==null?void 0:ot.getOffsetParent(lt));let bt=Mt?Mt[xt]:0;(!bt||!await(ot.isElement==null?void 0:ot.isElement(Mt)))&&(bt=st.floating[xt]||it.floating[gt]);const Pt=St/2-Tt/2,wt=bt/2-yt[gt]/2-1,Bt=min(ut[mt],wt),Ot=min(ut[_t],wt),Ut=Bt,Nt=bt-yt[gt]-Ot,zt=bt/2-yt[gt]/2+Pt,jt=clamp$1(Ut,zt,Nt),Yt=!at.arrow&&getAlignment(rt)!=null&&zt!=jt&&it.reference[gt]/2-(zt<Ut?Bt:Ot)-yt[gt]/2<0,qt=Yt?zt<Ut?zt-Ut:zt-Nt:0;return{[pt]:ht[pt]+qt,data:{[pt]:jt,centerOffset:zt-jt-qt,...Yt&&{alignmentOffset:qt}},reset:Yt}}}),flip=function(tt){return tt===void 0&&(tt={}),{name:"flip",options:tt,async fn(_){var _e,nt;const{placement:rt,middlewareData:it,rects:ot,initialPlacement:st,platform:at,elements:lt}=_,{mainAxis:ct=!0,crossAxis:ut=!0,fallbackPlacements:ht,fallbackStrategy:pt="bestFit",fallbackAxisSideDirection:gt="none",flipAlignment:yt=!0,...vt}=evaluate$1(tt,_);if((_e=it.arrow)!=null&&_e.alignmentOffset)return{};const mt=getSide(rt),_t=getSide(st)===st,xt=await(at.isRTL==null?void 0:at.isRTL(lt.floating)),St=ht||(_t||!yt?[getOppositePlacement(st)]:getExpandedPlacements(st));!ht&&gt!=="none"&&St.push(...getOppositeAxisPlacements(st,yt,gt,xt));const Tt=[st,...St],Mt=await detectOverflow(_,vt),bt=[];let Pt=((nt=it.flip)==null?void 0:nt.overflows)||[];if(ct&&bt.push(Mt[mt]),ut){const Ut=getAlignmentSides(rt,ot,xt);bt.push(Mt[Ut[0]],Mt[Ut[1]])}if(Pt=[...Pt,{placement:rt,overflows:bt}],!bt.every(Ut=>Ut<=0)){var wt,Bt;const Ut=(((wt=it.flip)==null?void 0:wt.index)||0)+1,Nt=Tt[Ut];if(Nt)return{data:{index:Ut,overflows:Pt},reset:{placement:Nt}};let zt=(Bt=Pt.filter(jt=>jt.overflows[0]<=0).sort((jt,Yt)=>jt.overflows[1]-Yt.overflows[1])[0])==null?void 0:Bt.placement;if(!zt)switch(pt){case"bestFit":{var Ot;const jt=(Ot=Pt.map(Yt=>[Yt.placement,Yt.overflows.filter(qt=>qt>0).reduce((qt,Gt)=>qt+Gt,0)]).sort((Yt,qt)=>Yt[1]-qt[1])[0])==null?void 0:Ot[0];jt&&(zt=jt);break}case"initialPlacement":zt=st;break}if(rt!==zt)return{reset:{placement:zt}}}return{}}}};function getSideOffsets(tt,_){return{top:tt.top-_.height,right:tt.right-_.width,bottom:tt.bottom-_.height,left:tt.left-_.width}}function isAnySideFullyClipped(tt){return sides.some(_=>tt[_]>=0)}const hide=function(tt){return tt===void 0&&(tt={}),{name:"hide",options:tt,async fn(_){const{rects:_e}=_,{strategy:nt="referenceHidden",...rt}=evaluate$1(tt,_);switch(nt){case"referenceHidden":{const it=await detectOverflow(_,{...rt,elementContext:"reference"}),ot=getSideOffsets(it,_e.reference);return{data:{referenceHiddenOffsets:ot,referenceHidden:isAnySideFullyClipped(ot)}}}case"escaped":{const it=await detectOverflow(_,{...rt,altBoundary:!0}),ot=getSideOffsets(it,_e.floating);return{data:{escapedOffsets:ot,escaped:isAnySideFullyClipped(ot)}}}default:return{}}}}};async function convertValueToCoords(tt,_){const{placement:_e,platform:nt,elements:rt}=tt,it=await(nt.isRTL==null?void 0:nt.isRTL(rt.floating)),ot=getSide(_e),st=getAlignment(_e),at=getSideAxis(_e)==="y",lt=["left","top"].includes(ot)?-1:1,ct=it&&at?-1:1,ut=evaluate$1(_,tt);let{mainAxis:ht,crossAxis:pt,alignmentAxis:gt}=typeof ut=="number"?{mainAxis:ut,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...ut};return st&&typeof gt=="number"&&(pt=st==="end"?gt*-1:gt),at?{x:pt*ct,y:ht*lt}:{x:ht*lt,y:pt*ct}}const offset=function(tt){return tt===void 0&&(tt=0),{name:"offset",options:tt,async fn(_){const{x:_e,y:nt}=_,rt=await convertValueToCoords(_,tt);return{x:_e+rt.x,y:nt+rt.y,data:rt}}}},shift=function(tt){return tt===void 0&&(tt={}),{name:"shift",options:tt,async fn(_){const{x:_e,y:nt,placement:rt}=_,{mainAxis:it=!0,crossAxis:ot=!1,limiter:st={fn:vt=>{let{x:mt,y:_t}=vt;return{x:mt,y:_t}}},...at}=evaluate$1(tt,_),lt={x:_e,y:nt},ct=await detectOverflow(_,at),ut=getSideAxis(getSide(rt)),ht=getOppositeAxis(ut);let pt=lt[ht],gt=lt[ut];if(it){const vt=ht==="y"?"top":"left",mt=ht==="y"?"bottom":"right",_t=pt+ct[vt],xt=pt-ct[mt];pt=clamp$1(_t,pt,xt)}if(ot){const vt=ut==="y"?"top":"left",mt=ut==="y"?"bottom":"right",_t=gt+ct[vt],xt=gt-ct[mt];gt=clamp$1(_t,gt,xt)}const yt=st.fn({..._,[ht]:pt,[ut]:gt});return{...yt,data:{x:yt.x-_e,y:yt.y-nt}}}}},limitShift=function(tt){return tt===void 0&&(tt={}),{options:tt,fn(_){const{x:_e,y:nt,placement:rt,rects:it,middlewareData:ot}=_,{offset:st=0,mainAxis:at=!0,crossAxis:lt=!0}=evaluate$1(tt,_),ct={x:_e,y:nt},ut=getSideAxis(rt),ht=getOppositeAxis(ut);let pt=ct[ht],gt=ct[ut];const yt=evaluate$1(st,_),vt=typeof yt=="number"?{mainAxis:yt,crossAxis:0}:{mainAxis:0,crossAxis:0,...yt};if(at){const xt=ht==="y"?"height":"width",St=it.reference[ht]-it.floating[xt]+vt.mainAxis,Tt=it.reference[ht]+it.reference[xt]-vt.mainAxis;pt<St?pt=St:pt>Tt&&(pt=Tt)}if(lt){var mt,_t;const xt=ht==="y"?"width":"height",St=["top","left"].includes(getSide(rt)),Tt=it.reference[ut]-it.floating[xt]+(St&&((mt=ot.offset)==null?void 0:mt[ut])||0)+(St?0:vt.crossAxis),Mt=it.reference[ut]+it.reference[xt]+(St?0:((_t=ot.offset)==null?void 0:_t[ut])||0)-(St?vt.crossAxis:0);gt<Tt?gt=Tt:gt>Mt&&(gt=Mt)}return{[ht]:pt,[ut]:gt}}}},size=function(tt){return tt===void 0&&(tt={}),{name:"size",options:tt,async fn(_){const{placement:_e,rects:nt,platform:rt,elements:it}=_,{apply:ot=()=>{},...st}=evaluate$1(tt,_),at=await detectOverflow(_,st),lt=getSide(_e),ct=getAlignment(_e),ut=getSideAxis(_e)==="y",{width:ht,height:pt}=nt.floating;let gt,yt;lt==="top"||lt==="bottom"?(gt=lt,yt=ct===(await(rt.isRTL==null?void 0:rt.isRTL(it.floating))?"start":"end")?"left":"right"):(yt=lt,gt=ct==="end"?"top":"bottom");const vt=pt-at[gt],mt=ht-at[yt],_t=!_.middlewareData.shift;let xt=vt,St=mt;if(ut){const Mt=ht-at.left-at.right;St=ct||_t?min(mt,Mt):Mt}else{const Mt=pt-at.top-at.bottom;xt=ct||_t?min(vt,Mt):Mt}if(_t&&!ct){const Mt=max$1(at.left,0),bt=max$1(at.right,0),Pt=max$1(at.top,0),wt=max$1(at.bottom,0);ut?St=ht-2*(Mt!==0||bt!==0?Mt+bt:max$1(at.left,at.right)):xt=pt-2*(Pt!==0||wt!==0?Pt+wt:max$1(at.top,at.bottom))}await ot({..._,availableWidth:St,availableHeight:xt});const Tt=await rt.getDimensions(it.floating);return ht!==Tt.width||pt!==Tt.height?{reset:{rects:!0}}:{}}}};function getNodeName(tt){return isNode(tt)?(tt.nodeName||"").toLowerCase():"#document"}function getWindow(tt){var _;return(tt==null||(_=tt.ownerDocument)==null?void 0:_.defaultView)||window}function getDocumentElement(tt){var _;return(_=(isNode(tt)?tt.ownerDocument:tt.document)||window.document)==null?void 0:_.documentElement}function isNode(tt){return tt instanceof Node||tt instanceof getWindow(tt).Node}function isElement(tt){return tt instanceof Element||tt instanceof getWindow(tt).Element}function isHTMLElement(tt){return tt instanceof HTMLElement||tt instanceof getWindow(tt).HTMLElement}function isShadowRoot(tt){return typeof ShadowRoot>"u"?!1:tt instanceof ShadowRoot||tt instanceof getWindow(tt).ShadowRoot}function isOverflowElement(tt){const{overflow:_,overflowX:_e,overflowY:nt,display:rt}=getComputedStyle$1(tt);return/auto|scroll|overlay|hidden|clip/.test(_+nt+_e)&&!["inline","contents"].includes(rt)}function isTableElement(tt){return["table","td","th"].includes(getNodeName(tt))}function isContainingBlock(tt){const _=isWebKit(),_e=getComputedStyle$1(tt);return _e.transform!=="none"||_e.perspective!=="none"||(_e.containerType?_e.containerType!=="normal":!1)||!_&&(_e.backdropFilter?_e.backdropFilter!=="none":!1)||!_&&(_e.filter?_e.filter!=="none":!1)||["transform","perspective","filter"].some(nt=>(_e.willChange||"").includes(nt))||["paint","layout","strict","content"].some(nt=>(_e.contain||"").includes(nt))}function getContainingBlock(tt){let _=getParentNode(tt);for(;isHTMLElement(_)&&!isLastTraversableNode(_);){if(isContainingBlock(_))return _;_=getParentNode(_)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(tt){return["html","body","#document"].includes(getNodeName(tt))}function getComputedStyle$1(tt){return getWindow(tt).getComputedStyle(tt)}function getNodeScroll(tt){return isElement(tt)?{scrollLeft:tt.scrollLeft,scrollTop:tt.scrollTop}:{scrollLeft:tt.pageXOffset,scrollTop:tt.pageYOffset}}function getParentNode(tt){if(getNodeName(tt)==="html")return tt;const _=tt.assignedSlot||tt.parentNode||isShadowRoot(tt)&&tt.host||getDocumentElement(tt);return isShadowRoot(_)?_.host:_}function getNearestOverflowAncestor(tt){const _=getParentNode(tt);return isLastTraversableNode(_)?tt.ownerDocument?tt.ownerDocument.body:tt.body:isHTMLElement(_)&&isOverflowElement(_)?_:getNearestOverflowAncestor(_)}function getOverflowAncestors(tt,_,_e){var nt;_===void 0&&(_=[]),_e===void 0&&(_e=!0);const rt=getNearestOverflowAncestor(tt),it=rt===((nt=tt.ownerDocument)==null?void 0:nt.body),ot=getWindow(rt);return it?_.concat(ot,ot.visualViewport||[],isOverflowElement(rt)?rt:[],ot.frameElement&&_e?getOverflowAncestors(ot.frameElement):[]):_.concat(rt,getOverflowAncestors(rt,[],_e))}function getCssDimensions(tt){const _=getComputedStyle$1(tt);let _e=parseFloat(_.width)||0,nt=parseFloat(_.height)||0;const rt=isHTMLElement(tt),it=rt?tt.offsetWidth:_e,ot=rt?tt.offsetHeight:nt,st=round(_e)!==it||round(nt)!==ot;return st&&(_e=it,nt=ot),{width:_e,height:nt,$:st}}function unwrapElement(tt){return isElement(tt)?tt:tt.contextElement}function getScale(tt){const _=unwrapElement(tt);if(!isHTMLElement(_))return createCoords(1);const _e=_.getBoundingClientRect(),{width:nt,height:rt,$:it}=getCssDimensions(_);let ot=(it?round(_e.width):_e.width)/nt,st=(it?round(_e.height):_e.height)/rt;return(!ot||!Number.isFinite(ot))&&(ot=1),(!st||!Number.isFinite(st))&&(st=1),{x:ot,y:st}}const noOffsets=createCoords(0);function getVisualOffsets(tt){const _=getWindow(tt);return!isWebKit()||!_.visualViewport?noOffsets:{x:_.visualViewport.offsetLeft,y:_.visualViewport.offsetTop}}function shouldAddVisualOffsets(tt,_,_e){return _===void 0&&(_=!1),!_e||_&&_e!==getWindow(tt)?!1:_}function getBoundingClientRect(tt,_,_e,nt){_===void 0&&(_=!1),_e===void 0&&(_e=!1);const rt=tt.getBoundingClientRect(),it=unwrapElement(tt);let ot=createCoords(1);_&&(nt?isElement(nt)&&(ot=getScale(nt)):ot=getScale(tt));const st=shouldAddVisualOffsets(it,_e,nt)?getVisualOffsets(it):createCoords(0);let at=(rt.left+st.x)/ot.x,lt=(rt.top+st.y)/ot.y,ct=rt.width/ot.x,ut=rt.height/ot.y;if(it){const ht=getWindow(it),pt=nt&&isElement(nt)?getWindow(nt):nt;let gt=ht.frameElement;for(;gt&&nt&&pt!==ht;){const yt=getScale(gt),vt=gt.getBoundingClientRect(),mt=getComputedStyle$1(gt),_t=vt.left+(gt.clientLeft+parseFloat(mt.paddingLeft))*yt.x,xt=vt.top+(gt.clientTop+parseFloat(mt.paddingTop))*yt.y;at*=yt.x,lt*=yt.y,ct*=yt.x,ut*=yt.y,at+=_t,lt+=xt,gt=getWindow(gt).frameElement}}return rectToClientRect({width:ct,height:ut,x:at,y:lt})}function convertOffsetParentRelativeRectToViewportRelativeRect(tt){let{rect:_,offsetParent:_e,strategy:nt}=tt;const rt=isHTMLElement(_e),it=getDocumentElement(_e);if(_e===it)return _;let ot={scrollLeft:0,scrollTop:0},st=createCoords(1);const at=createCoords(0);if((rt||!rt&&nt!=="fixed")&&((getNodeName(_e)!=="body"||isOverflowElement(it))&&(ot=getNodeScroll(_e)),isHTMLElement(_e))){const lt=getBoundingClientRect(_e);st=getScale(_e),at.x=lt.x+_e.clientLeft,at.y=lt.y+_e.clientTop}return{width:_.width*st.x,height:_.height*st.y,x:_.x*st.x-ot.scrollLeft*st.x+at.x,y:_.y*st.y-ot.scrollTop*st.y+at.y}}function getClientRects(tt){return Array.from(tt.getClientRects())}function getWindowScrollBarX(tt){return getBoundingClientRect(getDocumentElement(tt)).left+getNodeScroll(tt).scrollLeft}function getDocumentRect(tt){const _=getDocumentElement(tt),_e=getNodeScroll(tt),nt=tt.ownerDocument.body,rt=max$1(_.scrollWidth,_.clientWidth,nt.scrollWidth,nt.clientWidth),it=max$1(_.scrollHeight,_.clientHeight,nt.scrollHeight,nt.clientHeight);let ot=-_e.scrollLeft+getWindowScrollBarX(tt);const st=-_e.scrollTop;return getComputedStyle$1(nt).direction==="rtl"&&(ot+=max$1(_.clientWidth,nt.clientWidth)-rt),{width:rt,height:it,x:ot,y:st}}function getViewportRect(tt,_){const _e=getWindow(tt),nt=getDocumentElement(tt),rt=_e.visualViewport;let it=nt.clientWidth,ot=nt.clientHeight,st=0,at=0;if(rt){it=rt.width,ot=rt.height;const lt=isWebKit();(!lt||lt&&_==="fixed")&&(st=rt.offsetLeft,at=rt.offsetTop)}return{width:it,height:ot,x:st,y:at}}function getInnerBoundingClientRect(tt,_){const _e=getBoundingClientRect(tt,!0,_==="fixed"),nt=_e.top+tt.clientTop,rt=_e.left+tt.clientLeft,it=isHTMLElement(tt)?getScale(tt):createCoords(1),ot=tt.clientWidth*it.x,st=tt.clientHeight*it.y,at=rt*it.x,lt=nt*it.y;return{width:ot,height:st,x:at,y:lt}}function getClientRectFromClippingAncestor(tt,_,_e){let nt;if(_==="viewport")nt=getViewportRect(tt,_e);else if(_==="document")nt=getDocumentRect(getDocumentElement(tt));else if(isElement(_))nt=getInnerBoundingClientRect(_,_e);else{const rt=getVisualOffsets(tt);nt={..._,x:_.x-rt.x,y:_.y-rt.y}}return rectToClientRect(nt)}function hasFixedPositionAncestor(tt,_){const _e=getParentNode(tt);return _e===_||!isElement(_e)||isLastTraversableNode(_e)?!1:getComputedStyle$1(_e).position==="fixed"||hasFixedPositionAncestor(_e,_)}function getClippingElementAncestors(tt,_){const _e=_.get(tt);if(_e)return _e;let nt=getOverflowAncestors(tt,[],!1).filter(st=>isElement(st)&&getNodeName(st)!=="body"),rt=null;const it=getComputedStyle$1(tt).position==="fixed";let ot=it?getParentNode(tt):tt;for(;isElement(ot)&&!isLastTraversableNode(ot);){const st=getComputedStyle$1(ot),at=isContainingBlock(ot);!at&&st.position==="fixed"&&(rt=null),(it?!at&&!rt:!at&&st.position==="static"&&!!rt&&["absolute","fixed"].includes(rt.position)||isOverflowElement(ot)&&!at&&hasFixedPositionAncestor(tt,ot))?nt=nt.filter(ct=>ct!==ot):rt=st,ot=getParentNode(ot)}return _.set(tt,nt),nt}function getClippingRect(tt){let{element:_,boundary:_e,rootBoundary:nt,strategy:rt}=tt;const ot=[..._e==="clippingAncestors"?getClippingElementAncestors(_,this._c):[].concat(_e),nt],st=ot[0],at=ot.reduce((lt,ct)=>{const ut=getClientRectFromClippingAncestor(_,ct,rt);return lt.top=max$1(ut.top,lt.top),lt.right=min(ut.right,lt.right),lt.bottom=min(ut.bottom,lt.bottom),lt.left=max$1(ut.left,lt.left),lt},getClientRectFromClippingAncestor(_,st,rt));return{width:at.right-at.left,height:at.bottom-at.top,x:at.left,y:at.top}}function getDimensions(tt){return getCssDimensions(tt)}function getRectRelativeToOffsetParent(tt,_,_e){const nt=isHTMLElement(_),rt=getDocumentElement(_),it=_e==="fixed",ot=getBoundingClientRect(tt,!0,it,_);let st={scrollLeft:0,scrollTop:0};const at=createCoords(0);if(nt||!nt&&!it)if((getNodeName(_)!=="body"||isOverflowElement(rt))&&(st=getNodeScroll(_)),nt){const lt=getBoundingClientRect(_,!0,it,_);at.x=lt.x+_.clientLeft,at.y=lt.y+_.clientTop}else rt&&(at.x=getWindowScrollBarX(rt));return{x:ot.left+st.scrollLeft-at.x,y:ot.top+st.scrollTop-at.y,width:ot.width,height:ot.height}}function getTrueOffsetParent(tt,_){return!isHTMLElement(tt)||getComputedStyle$1(tt).position==="fixed"?null:_?_(tt):tt.offsetParent}function getOffsetParent(tt,_){const _e=getWindow(tt);if(!isHTMLElement(tt))return _e;let nt=getTrueOffsetParent(tt,_);for(;nt&&isTableElement(nt)&&getComputedStyle$1(nt).position==="static";)nt=getTrueOffsetParent(nt,_);return nt&&(getNodeName(nt)==="html"||getNodeName(nt)==="body"&&getComputedStyle$1(nt).position==="static"&&!isContainingBlock(nt))?_e:nt||getContainingBlock(tt)||_e}const getElementRects=async function(tt){let{reference:_,floating:_e,strategy:nt}=tt;const rt=this.getOffsetParent||getOffsetParent,it=this.getDimensions;return{reference:getRectRelativeToOffsetParent(_,await rt(_e),nt),floating:{x:0,y:0,...await it(_e)}}};function isRTL(tt){return getComputedStyle$1(tt).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(tt,_){let _e=null,nt;const rt=getDocumentElement(tt);function it(){clearTimeout(nt),_e&&_e.disconnect(),_e=null}function ot(st,at){st===void 0&&(st=!1),at===void 0&&(at=1),it();const{left:lt,top:ct,width:ut,height:ht}=tt.getBoundingClientRect();if(st||_(),!ut||!ht)return;const pt=floor(ct),gt=floor(rt.clientWidth-(lt+ut)),yt=floor(rt.clientHeight-(ct+ht)),vt=floor(lt),_t={rootMargin:-pt+"px "+-gt+"px "+-yt+"px "+-vt+"px",threshold:max$1(0,min(1,at))||1};let xt=!0;function St(Tt){const Mt=Tt[0].intersectionRatio;if(Mt!==at){if(!xt)return ot();Mt?ot(!1,Mt):nt=setTimeout(()=>{ot(!1,1e-7)},100)}xt=!1}try{_e=new IntersectionObserver(St,{..._t,root:rt.ownerDocument})}catch{_e=new IntersectionObserver(St,_t)}_e.observe(tt)}return ot(!0),it}function autoUpdate(tt,_,_e,nt){nt===void 0&&(nt={});const{ancestorScroll:rt=!0,ancestorResize:it=!0,elementResize:ot=typeof ResizeObserver=="function",layoutShift:st=typeof IntersectionObserver=="function",animationFrame:at=!1}=nt,lt=unwrapElement(tt),ct=rt||it?[...lt?getOverflowAncestors(lt):[],...getOverflowAncestors(_)]:[];ct.forEach(mt=>{rt&&mt.addEventListener("scroll",_e,{passive:!0}),it&&mt.addEventListener("resize",_e)});const ut=lt&&st?observeMove(lt,_e):null;let ht=-1,pt=null;ot&&(pt=new ResizeObserver(mt=>{let[_t]=mt;_t&&_t.target===lt&&pt&&(pt.unobserve(_),cancelAnimationFrame(ht),ht=requestAnimationFrame(()=>{pt&&pt.observe(_)})),_e()}),lt&&!at&&pt.observe(lt),pt.observe(_));let gt,yt=at?getBoundingClientRect(tt):null;at&&vt();function vt(){const mt=getBoundingClientRect(tt);yt&&(mt.x!==yt.x||mt.y!==yt.y||mt.width!==yt.width||mt.height!==yt.height)&&_e(),yt=mt,gt=requestAnimationFrame(vt)}return _e(),()=>{ct.forEach(mt=>{rt&&mt.removeEventListener("scroll",_e),it&&mt.removeEventListener("resize",_e)}),ut&&ut(),pt&&pt.disconnect(),pt=null,at&&cancelAnimationFrame(gt)}}const computePosition=(tt,_,_e)=>{const nt=new Map,rt={platform,..._e},it={...rt.platform,_c:nt};return computePosition$1(tt,_,{...rt,platform:it})},arrow=tt=>{function _(_e){return{}.hasOwnProperty.call(_e,"current")}return{name:"arrow",options:tt,fn(_e){const{element:nt,padding:rt}=typeof tt=="function"?tt(_e):tt;return nt&&_(nt)?nt.current!=null?arrow$1({element:nt.current,padding:rt}).fn(_e):{}:nt?arrow$1({element:nt,padding:rt}).fn(_e):{}}}};var index$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(tt,_){if(tt===_)return!0;if(typeof tt!=typeof _)return!1;if(typeof tt=="function"&&tt.toString()===_.toString())return!0;let _e,nt,rt;if(tt&&_&&typeof tt=="object"){if(Array.isArray(tt)){if(_e=tt.length,_e!=_.length)return!1;for(nt=_e;nt--!==0;)if(!deepEqual(tt[nt],_[nt]))return!1;return!0}if(rt=Object.keys(tt),_e=rt.length,_e!==Object.keys(_).length)return!1;for(nt=_e;nt--!==0;)if(!{}.hasOwnProperty.call(_,rt[nt]))return!1;for(nt=_e;nt--!==0;){const it=rt[nt];if(!(it==="_owner"&&tt.$$typeof)&&!deepEqual(tt[it],_[it]))return!1}return!0}return tt!==tt&&_!==_}function getDPR(tt){return typeof window>"u"?1:(tt.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(tt,_){const _e=getDPR(tt);return Math.round(_*_e)/_e}function useLatestRef(tt){const _=reactExports.useRef(tt);return index$1(()=>{_.current=tt}),_}function useFloating(tt){tt===void 0&&(tt={});const{placement:_="bottom",strategy:_e="absolute",middleware:nt=[],platform:rt,elements:{reference:it,floating:ot}={},transform:st=!0,whileElementsMounted:at,open:lt}=tt,[ct,ut]=reactExports.useState({x:0,y:0,strategy:_e,placement:_,middlewareData:{},isPositioned:!1}),[ht,pt]=reactExports.useState(nt);deepEqual(ht,nt)||pt(nt);const[gt,yt]=reactExports.useState(null),[vt,mt]=reactExports.useState(null),_t=reactExports.useCallback(Yt=>{Yt!=Mt.current&&(Mt.current=Yt,yt(Yt))},[yt]),xt=reactExports.useCallback(Yt=>{Yt!==bt.current&&(bt.current=Yt,mt(Yt))},[mt]),St=it||gt,Tt=ot||vt,Mt=reactExports.useRef(null),bt=reactExports.useRef(null),Pt=reactExports.useRef(ct),wt=useLatestRef(at),Bt=useLatestRef(rt),Ot=reactExports.useCallback(()=>{if(!Mt.current||!bt.current)return;const Yt={placement:_,strategy:_e,middleware:ht};Bt.current&&(Yt.platform=Bt.current),computePosition(Mt.current,bt.current,Yt).then(qt=>{const Gt={...qt,isPositioned:!0};Ut.current&&!deepEqual(Pt.current,Gt)&&(Pt.current=Gt,reactDomExports.flushSync(()=>{ut(Gt)}))})},[ht,_,_e,Bt]);index$1(()=>{lt===!1&&Pt.current.isPositioned&&(Pt.current.isPositioned=!1,ut(Yt=>({...Yt,isPositioned:!1})))},[lt]);const Ut=reactExports.useRef(!1);index$1(()=>(Ut.current=!0,()=>{Ut.current=!1}),[]),index$1(()=>{if(St&&(Mt.current=St),Tt&&(bt.current=Tt),St&&Tt){if(wt.current)return wt.current(St,Tt,Ot);Ot()}},[St,Tt,Ot,wt]);const Nt=reactExports.useMemo(()=>({reference:Mt,floating:bt,setReference:_t,setFloating:xt}),[_t,xt]),zt=reactExports.useMemo(()=>({reference:St,floating:Tt}),[St,Tt]),jt=reactExports.useMemo(()=>{const Yt={position:_e,left:0,top:0};if(!zt.floating)return Yt;const qt=roundByDPR(zt.floating,ct.x),Gt=roundByDPR(zt.floating,ct.y);return st?{...Yt,transform:"translate("+qt+"px, "+Gt+"px)",...getDPR(zt.floating)>=1.5&&{willChange:"transform"}}:{position:_e,left:qt,top:Gt}},[_e,st,zt.floating,ct.x,ct.y]);return reactExports.useMemo(()=>({...ct,update:Ot,refs:Nt,elements:zt,floatingStyles:jt}),[ct,Ot,Nt,zt,jt])}const $7e8f5cd07187803e$export$21b07c8f274aebd5=reactExports.forwardRef((tt,_)=>{const{children:_e,width:nt=10,height:rt=5,...it}=tt;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.svg,_extends$1({},it,{ref:_,width:nt,height:rt,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),tt.asChild?_e:reactExports.createElement("polygon",{points:"0,0 30,0 15,10"}))}),$7e8f5cd07187803e$export$be92b6f5f03c0fe9=$7e8f5cd07187803e$export$21b07c8f274aebd5;function $db6c3485150b8e66$export$1ab7ae714698c4b8(tt){const[_,_e]=reactExports.useState(void 0);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(tt){_e({width:tt.offsetWidth,height:tt.offsetHeight});const nt=new ResizeObserver(rt=>{if(!Array.isArray(rt)||!rt.length)return;const it=rt[0];let ot,st;if("borderBoxSize"in it){const at=it.borderBoxSize,lt=Array.isArray(at)?at[0]:at;ot=lt.inlineSize,st=lt.blockSize}else ot=tt.offsetWidth,st=tt.offsetHeight;_e({width:ot,height:st})});return nt.observe(tt,{box:"border-box"}),()=>nt.unobserve(tt)}else _e(void 0)},[tt]),_}const $cf1ac5d9fe0e8206$var$POPPER_NAME="Popper",[$cf1ac5d9fe0e8206$var$createPopperContext,$cf1ac5d9fe0e8206$export$722aac194ae923]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cf1ac5d9fe0e8206$var$POPPER_NAME),[$cf1ac5d9fe0e8206$var$PopperProvider,$cf1ac5d9fe0e8206$var$usePopperContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$POPPER_NAME),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9=tt=>{const{__scopePopper:_,children:_e}=tt,[nt,rt]=reactExports.useState(null);return reactExports.createElement($cf1ac5d9fe0e8206$var$PopperProvider,{scope:_,anchor:nt,onAnchorChange:rt},_e)},$cf1ac5d9fe0e8206$var$ANCHOR_NAME="PopperAnchor",$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d=reactExports.forwardRef((tt,_)=>{const{__scopePopper:_e,virtualRef:nt,...rt}=tt,it=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$ANCHOR_NAME,_e),ot=reactExports.useRef(null),st=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,ot);return reactExports.useEffect(()=>{it.onAnchorChange((nt==null?void 0:nt.current)||ot.current)}),nt?null:reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},rt,{ref:st}))}),$cf1ac5d9fe0e8206$var$CONTENT_NAME="PopperContent",[$cf1ac5d9fe0e8206$var$PopperContentProvider,$cf1ac5d9fe0e8206$var$useContentContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc=reactExports.forwardRef((tt,_)=>{var _e,nt,rt,it,ot,st,at,lt;const{__scopePopper:ct,side:ut="bottom",sideOffset:ht=0,align:pt="center",alignOffset:gt=0,arrowPadding:yt=0,avoidCollisions:vt=!0,collisionBoundary:mt=[],collisionPadding:_t=0,sticky:xt="partial",hideWhenDetached:St=!1,updatePositionStrategy:Tt="optimized",onPlaced:Mt,...bt}=tt,Pt=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,ct),[wt,Bt]=reactExports.useState(null),Ot=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,vn=>Bt(vn)),[Ut,Nt]=reactExports.useState(null),zt=$db6c3485150b8e66$export$1ab7ae714698c4b8(Ut),jt=(_e=zt==null?void 0:zt.width)!==null&&_e!==void 0?_e:0,Yt=(nt=zt==null?void 0:zt.height)!==null&&nt!==void 0?nt:0,qt=ut+(pt!=="center"?"-"+pt:""),Gt=typeof _t=="number"?_t:{top:0,right:0,bottom:0,left:0,..._t},Xt=Array.isArray(mt)?mt:[mt],Vt=Xt.length>0,Wt={padding:Gt,boundary:Xt.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:Vt},{refs:$t,floatingStyles:nn,placement:en,isPositioned:sn,middlewareData:rn}=useFloating({strategy:"fixed",placement:qt,whileElementsMounted:(...vn)=>autoUpdate(...vn,{animationFrame:Tt==="always"}),elements:{reference:Pt.anchor},middleware:[offset({mainAxis:ht+Yt,alignmentAxis:gt}),vt&&shift({mainAxis:!0,crossAxis:!1,limiter:xt==="partial"?limitShift():void 0,...Wt}),vt&&flip({...Wt}),size({...Wt,apply:({elements:vn,rects:pn,availableWidth:Hn,availableHeight:yn})=>{const{width:Ln,height:On}=pn.reference,Sn=vn.floating.style;Sn.setProperty("--radix-popper-available-width",`${Hn}px`),Sn.setProperty("--radix-popper-available-height",`${yn}px`),Sn.setProperty("--radix-popper-anchor-width",`${Ln}px`),Sn.setProperty("--radix-popper-anchor-height",`${On}px`)}}),Ut&&arrow({element:Ut,padding:yt}),$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:jt,arrowHeight:Yt}),St&&hide({strategy:"referenceHidden",...Wt})]}),[an,dn]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(en),Bn=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Mt);$9f79659886946c16$export$e5c5a5f917a5871c(()=>{sn&&(Bn==null||Bn())},[sn,Bn]);const Nn=(rt=rn.arrow)===null||rt===void 0?void 0:rt.x,gn=(it=rn.arrow)===null||it===void 0?void 0:it.y,Ht=((ot=rn.arrow)===null||ot===void 0?void 0:ot.centerOffset)!==0,[xn,hn]=reactExports.useState();return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{wt&&hn(window.getComputedStyle(wt).zIndex)},[wt]),reactExports.createElement("div",{ref:$t.setFloating,"data-radix-popper-content-wrapper":"",style:{...nn,transform:sn?nn.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xn,["--radix-popper-transform-origin"]:[(st=rn.transformOrigin)===null||st===void 0?void 0:st.x,(at=rn.transformOrigin)===null||at===void 0?void 0:at.y].join(" ")},dir:tt.dir},reactExports.createElement($cf1ac5d9fe0e8206$var$PopperContentProvider,{scope:ct,placedSide:an,onArrowChange:Nt,arrowX:Nn,arrowY:gn,shouldHideArrow:Ht},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-side":an,"data-align":dn},bt,{ref:Ot,style:{...bt.style,animation:sn?void 0:"none",opacity:(lt=rn.hide)!==null&&lt!==void 0&&lt.referenceHidden?0:void 0}}))))}),$cf1ac5d9fe0e8206$var$ARROW_NAME="PopperArrow",$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0=reactExports.forwardRef(function(_,_e){const{__scopePopper:nt,...rt}=_,it=$cf1ac5d9fe0e8206$var$useContentContext($cf1ac5d9fe0e8206$var$ARROW_NAME,nt),ot=$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE[it.placedSide];return reactExports.createElement("span",{ref:it.onArrowChange,style:{position:"absolute",left:it.arrowX,top:it.arrowY,[ot]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[it.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[it.placedSide],visibility:it.shouldHideArrow?"hidden":void 0}},reactExports.createElement($7e8f5cd07187803e$export$be92b6f5f03c0fe9,_extends$1({},rt,{ref:_e,style:{...rt.style,display:"block"}})))});function $cf1ac5d9fe0e8206$var$isNotNull(tt){return tt!==null}const $cf1ac5d9fe0e8206$var$transformOrigin=tt=>({name:"transformOrigin",options:tt,fn(_){var _e,nt,rt,it,ot;const{placement:st,rects:at,middlewareData:lt}=_,ut=((_e=lt.arrow)===null||_e===void 0?void 0:_e.centerOffset)!==0,ht=ut?0:tt.arrowWidth,pt=ut?0:tt.arrowHeight,[gt,yt]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(st),vt={start:"0%",center:"50%",end:"100%"}[yt],mt=((nt=(rt=lt.arrow)===null||rt===void 0?void 0:rt.x)!==null&&nt!==void 0?nt:0)+ht/2,_t=((it=(ot=lt.arrow)===null||ot===void 0?void 0:ot.y)!==null&&it!==void 0?it:0)+pt/2;let xt="",St="";return gt==="bottom"?(xt=ut?vt:`${mt}px`,St=`${-pt}px`):gt==="top"?(xt=ut?vt:`${mt}px`,St=`${at.floating.height+pt}px`):gt==="right"?(xt=`${-pt}px`,St=ut?vt:`${_t}px`):gt==="left"&&(xt=`${at.floating.width+pt}px`,St=ut?vt:`${_t}px`),{data:{x:xt,y:St}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(tt){const[_,_e="center"]=tt.split("-");return[_,_e]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9,$cf1ac5d9fe0e8206$export$b688253958b8dfe7=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc,$cf1ac5d9fe0e8206$export$21b07c8f274aebd5=$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0;function $fe963b355347cc68$export$3e6543de14f8614f(tt,_){return reactExports.useReducer((_e,nt)=>{const rt=_[_e][nt];return rt??_e},tt)}const $921a889cee6df7e8$export$99c2b779aa4e8b8b=tt=>{const{present:_,children:_e}=tt,nt=$921a889cee6df7e8$var$usePresence(_),rt=typeof _e=="function"?_e({present:nt.isPresent}):reactExports.Children.only(_e),it=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(nt.ref,rt.ref);return typeof _e=="function"||nt.isPresent?reactExports.cloneElement(rt,{ref:it}):null};$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence";function $921a889cee6df7e8$var$usePresence(tt){const[_,_e]=reactExports.useState(),nt=reactExports.useRef({}),rt=reactExports.useRef(tt),it=reactExports.useRef("none"),ot=tt?"mounted":"unmounted",[st,at]=$fe963b355347cc68$export$3e6543de14f8614f(ot,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const lt=$921a889cee6df7e8$var$getAnimationName(nt.current);it.current=st==="mounted"?lt:"none"},[st]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const lt=nt.current,ct=rt.current;if(ct!==tt){const ht=it.current,pt=$921a889cee6df7e8$var$getAnimationName(lt);tt?at("MOUNT"):pt==="none"||(lt==null?void 0:lt.display)==="none"?at("UNMOUNT"):at(ct&&ht!==pt?"ANIMATION_OUT":"UNMOUNT"),rt.current=tt}},[tt,at]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(_){const lt=ut=>{const pt=$921a889cee6df7e8$var$getAnimationName(nt.current).includes(ut.animationName);ut.target===_&&pt&&reactDomExports.flushSync(()=>at("ANIMATION_END"))},ct=ut=>{ut.target===_&&(it.current=$921a889cee6df7e8$var$getAnimationName(nt.current))};return _.addEventListener("animationstart",ct),_.addEventListener("animationcancel",lt),_.addEventListener("animationend",lt),()=>{_.removeEventListener("animationstart",ct),_.removeEventListener("animationcancel",lt),_.removeEventListener("animationend",lt)}}else at("ANIMATION_END")},[_,at]),{isPresent:["mounted","unmountSuspended"].includes(st),ref:reactExports.useCallback(lt=>{lt&&(nt.current=getComputedStyle(lt)),_e(lt)},[])}}function $921a889cee6df7e8$var$getAnimationName(tt){return(tt==null?void 0:tt.animationName)||"none"}function $71cd76cc60e0454e$export$6f32135080cb4c3({prop:tt,defaultProp:_,onChange:_e=()=>{}}){const[nt,rt]=$71cd76cc60e0454e$var$useUncontrolledState({defaultProp:_,onChange:_e}),it=tt!==void 0,ot=it?tt:nt,st=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_e),at=reactExports.useCallback(lt=>{if(it){const ut=typeof lt=="function"?lt(tt):lt;ut!==tt&&st(ut)}else rt(lt)},[it,tt,rt,st]);return[ot,at]}function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp:tt,onChange:_}){const _e=reactExports.useState(tt),[nt]=_e,rt=reactExports.useRef(nt),it=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_);return reactExports.useEffect(()=>{rt.current!==nt&&(it(nt),rt.current=nt)},[nt,rt,it]),_e}const $ea1ef594cf570d83$export$439d29a4e110a164=reactExports.forwardRef((tt,_)=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({},tt,{ref:_,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...tt.style}}))),$ea1ef594cf570d83$export$be92b6f5f03c0fe9=$ea1ef594cf570d83$export$439d29a4e110a164,[$a093c7e1ec25a057$var$createTooltipContext,$a093c7e1ec25a057$export$1c540a2224f0d865]=$c512c27ab02ef895$export$50c7b4e9d9f19c1("Tooltip",[$cf1ac5d9fe0e8206$export$722aac194ae923]),$a093c7e1ec25a057$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),$a093c7e1ec25a057$var$PROVIDER_NAME="TooltipProvider",$a093c7e1ec25a057$var$TOOLTIP_OPEN="tooltip.open",[$a093c7e1ec25a057$var$TooltipProviderContextProvider,$a093c7e1ec25a057$var$useTooltipProviderContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$PROVIDER_NAME),$a093c7e1ec25a057$var$TOOLTIP_NAME="Tooltip",[$a093c7e1ec25a057$var$TooltipContextProvider,$a093c7e1ec25a057$var$useTooltipContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$TOOLTIP_NAME),$a093c7e1ec25a057$export$28c660c63b792dea=tt=>{const{__scopeTooltip:_,children:_e,open:nt,defaultOpen:rt=!1,onOpenChange:it,disableHoverableContent:ot,delayDuration:st}=tt,at=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$TOOLTIP_NAME,tt.__scopeTooltip),lt=$a093c7e1ec25a057$var$usePopperScope(_),[ct,ut]=reactExports.useState(null),ht=$1746a345f3d73bb7$export$f680877a34711e37(),pt=reactExports.useRef(0),gt=ot??at.disableHoverableContent,yt=st??at.delayDuration,vt=reactExports.useRef(!1),[mt=!1,_t]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:nt,defaultProp:rt,onChange:bt=>{bt?(at.onOpen(),document.dispatchEvent(new CustomEvent($a093c7e1ec25a057$var$TOOLTIP_OPEN))):at.onClose(),it==null||it(bt)}}),xt=reactExports.useMemo(()=>mt?vt.current?"delayed-open":"instant-open":"closed",[mt]),St=reactExports.useCallback(()=>{window.clearTimeout(pt.current),vt.current=!1,_t(!0)},[_t]),Tt=reactExports.useCallback(()=>{window.clearTimeout(pt.current),_t(!1)},[_t]),Mt=reactExports.useCallback(()=>{window.clearTimeout(pt.current),pt.current=window.setTimeout(()=>{vt.current=!0,_t(!0)},yt)},[yt,_t]);return reactExports.useEffect(()=>()=>window.clearTimeout(pt.current),[]),reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,lt,reactExports.createElement($a093c7e1ec25a057$var$TooltipContextProvider,{scope:_,contentId:ht,open:mt,stateAttribute:xt,trigger:ct,onTriggerChange:ut,onTriggerEnter:reactExports.useCallback(()=>{at.isOpenDelayed?Mt():St()},[at.isOpenDelayed,Mt,St]),onTriggerLeave:reactExports.useCallback(()=>{gt?Tt():window.clearTimeout(pt.current)},[Tt,gt]),onOpen:St,onClose:Tt,disableHoverableContent:gt},_e))},$a093c7e1ec25a057$var$TRIGGER_NAME="TooltipTrigger",$a093c7e1ec25a057$export$8c610744efcf8a1d=reactExports.forwardRef((tt,_)=>{const{__scopeTooltip:_e,...nt}=tt,rt=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$TRIGGER_NAME,_e),it=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$TRIGGER_NAME,_e),ot=$a093c7e1ec25a057$var$usePopperScope(_e),st=reactExports.useRef(null),at=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,st,rt.onTriggerChange),lt=reactExports.useRef(!1),ct=reactExports.useRef(!1),ut=reactExports.useCallback(()=>lt.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",ut),[ut]),reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$1({asChild:!0},ot),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({"aria-describedby":rt.open?rt.contentId:void 0,"data-state":rt.stateAttribute},nt,{ref:at,onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(tt.onPointerMove,ht=>{ht.pointerType!=="touch"&&!ct.current&&!it.isPointerInTransitRef.current&&(rt.onTriggerEnter(),ct.current=!0)}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(tt.onPointerLeave,()=>{rt.onTriggerLeave(),ct.current=!1}),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(tt.onPointerDown,()=>{lt.current=!0,document.addEventListener("pointerup",ut,{once:!0})}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(tt.onFocus,()=>{lt.current||rt.onOpen()}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(tt.onBlur,rt.onClose),onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(tt.onClick,rt.onClose)})))}),$a093c7e1ec25a057$var$PORTAL_NAME="TooltipPortal",[$a093c7e1ec25a057$var$PortalProvider,$a093c7e1ec25a057$var$usePortalContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$PORTAL_NAME,{forceMount:void 0}),$a093c7e1ec25a057$var$CONTENT_NAME="TooltipContent",$a093c7e1ec25a057$export$e9003e2be37ec060=reactExports.forwardRef((tt,_)=>{const _e=$a093c7e1ec25a057$var$usePortalContext($a093c7e1ec25a057$var$CONTENT_NAME,tt.__scopeTooltip),{forceMount:nt=_e.forceMount,side:rt="top",...it}=tt,ot=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,tt.__scopeTooltip);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:nt||ot.open},ot.disableHoverableContent?reactExports.createElement($a093c7e1ec25a057$var$TooltipContentImpl,_extends$1({side:rt},it,{ref:_})):reactExports.createElement($a093c7e1ec25a057$var$TooltipContentHoverable,_extends$1({side:rt},it,{ref:_})))}),$a093c7e1ec25a057$var$TooltipContentHoverable=reactExports.forwardRef((tt,_)=>{const _e=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,tt.__scopeTooltip),nt=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$CONTENT_NAME,tt.__scopeTooltip),rt=reactExports.useRef(null),it=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,rt),[ot,st]=reactExports.useState(null),{trigger:at,onClose:lt}=_e,ct=rt.current,{onPointerInTransitChange:ut}=nt,ht=reactExports.useCallback(()=>{st(null),ut(!1)},[ut]),pt=reactExports.useCallback((gt,yt)=>{const vt=gt.currentTarget,mt={x:gt.clientX,y:gt.clientY},_t=$a093c7e1ec25a057$var$getExitSideFromRect(mt,vt.getBoundingClientRect()),xt=$a093c7e1ec25a057$var$getPaddedExitPoints(mt,_t),St=$a093c7e1ec25a057$var$getPointsFromRect(yt.getBoundingClientRect()),Tt=$a093c7e1ec25a057$var$getHull([...xt,...St]);st(Tt),ut(!0)},[ut]);return reactExports.useEffect(()=>()=>ht(),[ht]),reactExports.useEffect(()=>{if(at&&ct){const gt=vt=>pt(vt,ct),yt=vt=>pt(vt,at);return at.addEventListener("pointerleave",gt),ct.addEventListener("pointerleave",yt),()=>{at.removeEventListener("pointerleave",gt),ct.removeEventListener("pointerleave",yt)}}},[at,ct,pt,ht]),reactExports.useEffect(()=>{if(ot){const gt=yt=>{const vt=yt.target,mt={x:yt.clientX,y:yt.clientY},_t=(at==null?void 0:at.contains(vt))||(ct==null?void 0:ct.contains(vt)),xt=!$a093c7e1ec25a057$var$isPointInPolygon(mt,ot);_t?ht():xt&&(ht(),lt())};return document.addEventListener("pointermove",gt),()=>document.removeEventListener("pointermove",gt)}},[at,ct,ot,lt,ht]),reactExports.createElement($a093c7e1ec25a057$var$TooltipContentImpl,_extends$1({},tt,{ref:it}))}),[$a093c7e1ec25a057$var$VisuallyHiddenContentContextProvider,$a093c7e1ec25a057$var$useVisuallyHiddenContentContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$TOOLTIP_NAME,{isInside:!1}),$a093c7e1ec25a057$var$TooltipContentImpl=reactExports.forwardRef((tt,_)=>{const{__scopeTooltip:_e,children:nt,"aria-label":rt,onEscapeKeyDown:it,onPointerDownOutside:ot,...st}=tt,at=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,_e),lt=$a093c7e1ec25a057$var$usePopperScope(_e),{onClose:ct}=at;return reactExports.useEffect(()=>(document.addEventListener($a093c7e1ec25a057$var$TOOLTIP_OPEN,ct),()=>document.removeEventListener($a093c7e1ec25a057$var$TOOLTIP_OPEN,ct)),[ct]),reactExports.useEffect(()=>{if(at.trigger){const ut=ht=>{const pt=ht.target;pt!=null&&pt.contains(at.trigger)&&ct()};return window.addEventListener("scroll",ut,{capture:!0}),()=>window.removeEventListener("scroll",ut,{capture:!0})}},[at.trigger,ct]),reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:it,onPointerDownOutside:ot,onFocusOutside:ut=>ut.preventDefault(),onDismiss:ct},reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$1({"data-state":at.stateAttribute},lt,st,{ref:_,style:{...st.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),reactExports.createElement($5e63c961fc1ce211$export$d9f1ccf0bdb05d45,null,nt),reactExports.createElement($a093c7e1ec25a057$var$VisuallyHiddenContentContextProvider,{scope:_e,isInside:!0},reactExports.createElement($ea1ef594cf570d83$export$be92b6f5f03c0fe9,{id:at.contentId,role:"tooltip"},rt||nt))))}),$a093c7e1ec25a057$var$ARROW_NAME="TooltipArrow",$a093c7e1ec25a057$export$c27ee0ad710f7559=reactExports.forwardRef((tt,_)=>{const{__scopeTooltip:_e,...nt}=tt,rt=$a093c7e1ec25a057$var$usePopperScope(_e);return $a093c7e1ec25a057$var$useVisuallyHiddenContentContext($a093c7e1ec25a057$var$ARROW_NAME,_e).isInside?null:reactExports.createElement($cf1ac5d9fe0e8206$export$21b07c8f274aebd5,_extends$1({},rt,nt,{ref:_}))});function $a093c7e1ec25a057$var$getExitSideFromRect(tt,_){const _e=Math.abs(_.top-tt.y),nt=Math.abs(_.bottom-tt.y),rt=Math.abs(_.right-tt.x),it=Math.abs(_.left-tt.x);switch(Math.min(_e,nt,rt,it)){case it:return"left";case rt:return"right";case _e:return"top";case nt:return"bottom";default:throw new Error("unreachable")}}function $a093c7e1ec25a057$var$getPaddedExitPoints(tt,_,_e=5){const nt=[];switch(_){case"top":nt.push({x:tt.x-_e,y:tt.y+_e},{x:tt.x+_e,y:tt.y+_e});break;case"bottom":nt.push({x:tt.x-_e,y:tt.y-_e},{x:tt.x+_e,y:tt.y-_e});break;case"left":nt.push({x:tt.x+_e,y:tt.y-_e},{x:tt.x+_e,y:tt.y+_e});break;case"right":nt.push({x:tt.x-_e,y:tt.y-_e},{x:tt.x-_e,y:tt.y+_e});break}return nt}function $a093c7e1ec25a057$var$getPointsFromRect(tt){const{top:_,right:_e,bottom:nt,left:rt}=tt;return[{x:rt,y:_},{x:_e,y:_},{x:_e,y:nt},{x:rt,y:nt}]}function $a093c7e1ec25a057$var$isPointInPolygon(tt,_){const{x:_e,y:nt}=tt;let rt=!1;for(let it=0,ot=_.length-1;it<_.length;ot=it++){const st=_[it].x,at=_[it].y,lt=_[ot].x,ct=_[ot].y;at>nt!=ct>nt&&_e<(lt-st)*(nt-at)/(ct-at)+st&&(rt=!rt)}return rt}function $a093c7e1ec25a057$var$getHull(tt){const _=tt.slice();return _.sort((_e,nt)=>_e.x<nt.x?-1:_e.x>nt.x?1:_e.y<nt.y?-1:_e.y>nt.y?1:0),$a093c7e1ec25a057$var$getHullPresorted(_)}function $a093c7e1ec25a057$var$getHullPresorted(tt){if(tt.length<=1)return tt.slice();const _=[];for(let nt=0;nt<tt.length;nt++){const rt=tt[nt];for(;_.length>=2;){const it=_[_.length-1],ot=_[_.length-2];if((it.x-ot.x)*(rt.y-ot.y)>=(it.y-ot.y)*(rt.x-ot.x))_.pop();else break}_.push(rt)}_.pop();const _e=[];for(let nt=tt.length-1;nt>=0;nt--){const rt=tt[nt];for(;_e.length>=2;){const it=_e[_e.length-1],ot=_e[_e.length-2];if((it.x-ot.x)*(rt.y-ot.y)>=(it.y-ot.y)*(rt.x-ot.x))_e.pop();else break}_e.push(rt)}return _e.pop(),_.length===1&&_e.length===1&&_[0].x===_e[0].x&&_[0].y===_e[0].y?_:_.concat(_e)}const $a093c7e1ec25a057$export$be92b6f5f03c0fe9=$a093c7e1ec25a057$export$28c660c63b792dea,$a093c7e1ec25a057$export$41fb9f06171c75f4=$a093c7e1ec25a057$export$8c610744efcf8a1d,$a093c7e1ec25a057$export$7c6e2c02157bb7d2=$a093c7e1ec25a057$export$e9003e2be37ec060,$a093c7e1ec25a057$export$21b07c8f274aebd5=$a093c7e1ec25a057$export$c27ee0ad710f7559;function _objectWithoutPropertiesLoose$1(tt,_){if(tt==null)return{};var _e={},nt=Object.keys(tt),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_.indexOf(rt)>=0)&&(_e[rt]=tt[rt]);return _e}function _objectWithoutProperties$1(tt,_){if(tt==null)return{};var _e=_objectWithoutPropertiesLoose$1(tt,_),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(tt);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(tt,nt)&&(_e[nt]=tt[nt])}return _e}let LevaErrors;(function(tt){tt[tt.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",tt[tt.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",tt[tt.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",tt[tt.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",tt[tt.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",tt[tt.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",tt[tt.THEME_ERROR=6]="THEME_ERROR",tt[tt.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",tt[tt.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",tt[tt.EMPTY_KEY=9]="EMPTY_KEY"})(LevaErrors||(LevaErrors={}));const ErrorList={[LevaErrors.UNSUPPORTED_INPUT]:(tt,_)=>[`An input with type \`${tt}\` input was found at path \`${_}\` but it's not supported yet.`],[LevaErrors.NO_COMPONENT_FOR_TYPE]:(tt,_)=>[`Type \`${tt}\` found at path \`${_}\` can't be displayed in panel because no component supports it yet.`],[LevaErrors.UNKNOWN_INPUT]:(tt,_)=>[`input at path \`${tt}\` is not recognized.`,_],[LevaErrors.DUPLICATE_KEYS]:(tt,_,_e)=>[`Key \`${tt}\` of path \`${_}\` already exists at path \`${_e}\`. Even nested keys need to be unique. Rename one of the keys.`],[LevaErrors.ALREADY_REGISTERED_TYPE]:tt=>[`Type ${tt} has already been registered. You can't register a component with the same type.`],[LevaErrors.CLIPBOARD_ERROR]:tt=>["Error copying the value",tt],[LevaErrors.THEME_ERROR]:(tt,_)=>[`Error accessing the theme \`${tt}.${_}\` value.`],[LevaErrors.PATH_DOESNT_EXIST]:tt=>[`Error getting the value at path \`${tt}\`. There is probably an error in your \`render\` function.`],[LevaErrors.PATH_DOESNT_EXIST]:tt=>[`Error accessing the value at path \`${tt}\``],[LevaErrors.INPUT_TYPE_OVERRIDE]:(tt,_,_e)=>[`Input at path \`${tt}\` already exists with type: \`${_}\`. Its type cannot be overridden with type \`${_e}\`.`],[LevaErrors.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function _log(tt,_,..._e){const[nt,...rt]=ErrorList[_](..._e);console[tt]("LEVA: "+nt,...rt)}const warn=_log.bind(null,"warn"),log=_log.bind(null,"log"),_excluded$a=["value"],_excluded2$4=["schema"],_excluded3$1=["value"],Schemas=[],Plugins={};function getValueType(tt){let{value:_}=tt,_e=_objectWithoutProperties$1(tt,_excluded$a);for(let nt of Schemas){const rt=nt(_,_e);if(rt)return rt}}function register(tt,_){let{schema:_e}=_,nt=_objectWithoutProperties$1(_,_excluded2$4);if(tt in Plugins){warn(LevaErrors.ALREADY_REGISTERED_TYPE,tt);return}Schemas.push((rt,it)=>_e(rt,it)&&tt),Plugins[tt]=nt}function createInternalPlugin(tt){return tt}function normalize$3$1(tt,_,_e,nt){const{normalize:rt}=Plugins[tt];if(rt)return rt(_,_e,nt);if(typeof _!="object"||!("value"in _))return{value:_};const{value:it}=_,ot=_objectWithoutProperties$1(_,_excluded3$1);return{value:it,settings:ot}}function sanitize$4(tt,_,_e,nt,rt,it){const{sanitize:ot}=Plugins[tt];return ot?ot(_,_e,nt,rt,it):_}function format$2(tt,_,_e){const{format:nt}=Plugins[tt];return nt?nt(_,_e):_}function _defineProperty$2(tt,_,_e){return _ in tt?Object.defineProperty(tt,_,{value:_e,enumerable:!0,configurable:!0,writable:!0}):tt[_]=_e,tt}function ownKeys$2(tt,_){var _e=Object.keys(tt);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(tt);_&&(nt=nt.filter(function(rt){return Object.getOwnPropertyDescriptor(tt,rt).enumerable})),_e.push.apply(_e,nt)}return _e}function _objectSpread2(tt){for(var _=1;_<arguments.length;_++){var _e=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$2(Object(_e),!0).forEach(function(nt){_defineProperty$2(tt,nt,_e[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(_e)):ownKeys$2(Object(_e)).forEach(function(nt){Object.defineProperty(tt,nt,Object.getOwnPropertyDescriptor(_e,nt))})}return tt}const clamp=(tt,_,_e)=>tt>_e?_e:tt<_?_:tt,parseNumber=tt=>{if(tt===""||typeof tt=="number")return tt;try{const _=evaluate(tt);if(!isNaN(_))return _}catch{}return parseFloat(tt)},log10=Math.log(10);function getStep(tt){let _=Math.abs(+String(tt).replace(".",""));if(_===0)return .01;for(;_!==0&&_%10===0;)_/=10;const _e=Math.floor(Math.log(_)/log10)+1,nt=Math.floor(Math.log10(Math.abs(tt))),rt=Math.pow(10,nt-_e);return Math.max(rt,.001)}const range=(tt,_,_e)=>_e===_?0:(clamp(tt,_,_e)-_)/(_e-_),invertedRange=(tt,_,_e)=>tt*(_e-_)+_,getUid=()=>"_"+Math.random().toString(36).substr(2,9),parens=/\(([0-9+\-*/^ .]+)\)/,exp=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,mul=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,div=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,add=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,sub=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function evaluate(tt){if(isNaN(Number(tt)))if(parens.test(tt)){const _=tt.replace(parens,(_e,nt)=>String(evaluate(nt)));return evaluate(_)}else if(exp.test(tt)){const _=tt.replace(exp,(_e,nt,rt)=>String(Math.pow(Number(nt),Number(rt))));return evaluate(_)}else if(mul.test(tt)){const _=tt.replace(mul,(_e,nt,rt)=>String(Number(nt)*Number(rt)));return evaluate(_)}else if(div.test(tt)){const _=tt.replace(div,(_e,nt,rt)=>{if(rt!=0)return String(Number(nt)/Number(rt));throw new Error("Division by zero")});return evaluate(_)}else if(add.test(tt)){const _=tt.replace(add,(_e,nt,rt)=>String(Number(nt)+Number(rt)));return evaluate(_)}else if(sub.test(tt)){const _=tt.replace(sub,(_e,nt,rt)=>String(Number(nt)-Number(rt)));return evaluate(_)}else return Number(tt);return Number(tt)}function pick(tt,_){return _.reduce((_e,nt)=>(tt&&tt.hasOwnProperty(nt)&&(_e[nt]=tt[nt]),_e),{})}function omit(tt,_){const _e=_objectSpread2({},tt);return _.forEach(nt=>nt in tt&&delete _e[nt]),_e}function mapArrayToKeys(tt,_){return tt.reduce((_e,nt,rt)=>Object.assign(_e,{[_[rt]]:nt}),{})}function isObject$8(tt){return Object.prototype.toString.call(tt)==="[object Object]"}const isEmptyObject=tt=>isObject$8(tt)&&Object.keys(tt).length===0;let SpecialInputs;(function(tt){tt.BUTTON="BUTTON",tt.BUTTON_GROUP="BUTTON_GROUP",tt.MONITOR="MONITOR",tt.FOLDER="FOLDER"})(SpecialInputs||(SpecialInputs={}));let LevaInputs;(function(tt){tt.SELECT="SELECT",tt.IMAGE="IMAGE",tt.NUMBER="NUMBER",tt.COLOR="COLOR",tt.STRING="STRING",tt.BOOLEAN="BOOLEAN",tt.INTERVAL="INTERVAL",tt.VECTOR3D="VECTOR3D",tt.VECTOR2D="VECTOR2D"})(LevaInputs||(LevaInputs={}));const _excluded$9=["type","__customInput"],_excluded2$3=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],_excluded3$2=["type"];function parseOptions(tt,_,_e={},nt){var rt,it;if(typeof tt!="object"||Array.isArray(tt))return{type:nt,input:tt,options:_objectSpread2({key:_,label:_,optional:!1,disabled:!1,order:0},_e)};if("__customInput"in tt){const{type:Tt,__customInput:Mt}=tt,bt=_objectWithoutProperties$1(tt,_excluded$9);return parseOptions(Mt,_,bt,Tt)}const{render:ot,label:st,optional:at,order:lt=0,disabled:ct,hint:ut,onChange:ht,onEditStart:pt,onEditEnd:gt,transient:yt}=tt,vt=_objectWithoutProperties$1(tt,_excluded2$3),mt=_objectSpread2({render:ot,key:_,label:st??_,hint:ut,transient:yt??!!ht,onEditStart:pt,onEditEnd:gt,disabled:ct,optional:at,order:lt},_e);let{type:_t}=vt,xt=_objectWithoutProperties$1(vt,_excluded3$2);if(_t=nt??_t,_t in SpecialInputs)return{type:_t,input:xt,options:mt};let St;return nt&&isObject$8(xt)&&"value"in xt?St=xt.value:St=isEmptyObject(xt)?void 0:xt,{type:_t,input:St,options:_objectSpread2(_objectSpread2({},mt),{},{onChange:ht,optional:(rt=mt.optional)!==null&&rt!==void 0?rt:!1,disabled:(it=mt.disabled)!==null&&it!==void 0?it:!1})}}function normalizeInput(tt,_,_e,nt){const rt=parseOptions(tt,_),{type:it,input:ot,options:st}=rt;if(it)return it in SpecialInputs?rt:{type:it,input:normalize$3$1(it,ot,_e,nt),options:st};let at=getValueType(ot);return at?{type:at,input:normalize$3$1(at,ot,_e,nt),options:st}:(at=getValueType({value:ot}),at?{type:at,input:normalize$3$1(at,{value:ot},_e,nt),options:st}:!1)}function updateInput(tt,_,_e,nt,rt){const{value:it,type:ot,settings:st}=tt;tt.value=sanitizeValue({type:ot,value:it,settings:st},_,_e,nt),tt.fromPanel=rt}const ValueError=function(_,_e,nt){this.type="LEVA_ERROR",this.message="LEVA: "+_,this.previousValue=_e,this.error=nt};function sanitizeValue({type:tt,value:_,settings:_e},nt,rt,it){const ot=tt!=="SELECT"&&typeof nt=="function"?nt(_):nt;let st;try{st=sanitize$4(tt,ot,_e,_,rt,it)}catch(at){throw new ValueError(`The value \`${nt}\` did not result in a correct value.`,_,at)}return dequal(st,_)?_:st}const debounce=(tt,_,_e=!1)=>{let nt=0;return function(){const rt=arguments,it=_e&&!nt,ot=()=>tt.apply(this,rt);window.clearTimeout(nt),nt=window.setTimeout(ot,_),it&&ot()}},multiplyStep=tt=>tt.shiftKey?5:tt.altKey?1/5:1;function render(tt,_){const _e=console.error;console.error=()=>{},ReactDOM.render(tt,_),console.error=_e}const _excluded$8=["value"],_excluded2$2$1=["min","max"],schema$3=tt=>{if(typeof tt=="number")return!0;if(typeof tt=="string"){const _=parseFloat(tt);return isNaN(_)?!1:tt.substring((""+_).length).trim().length<4}return!1},sanitize$3=(tt,{min:_=-1/0,max:_e=1/0,suffix:nt})=>{const rt=parseFloat(tt);if(tt===""||isNaN(rt))throw Error("Invalid number");const it=clamp(rt,_,_e);return nt?it+nt:it},format$1$1=(tt,{pad:_=0,suffix:_e})=>{const nt=parseFloat(tt).toFixed(_);return _e?nt+_e:nt},normalize$2$1=tt=>{let{value:_}=tt,_e=_objectWithoutProperties$1(tt,_excluded$8);const{min:nt=-1/0,max:rt=1/0}=_e,it=_objectWithoutProperties$1(_e,_excluded2$2$1);let ot=parseFloat(_);const st=typeof _=="string"?_.substring((""+ot).length):void 0;ot=clamp(ot,nt,rt);let at=_e.step;at||(Number.isFinite(nt)?Number.isFinite(rt)?at=+(Math.abs(rt-nt)/100).toPrecision(1):at=+(Math.abs(ot-nt)/100).toPrecision(1):Number.isFinite(rt)&&(at=+(Math.abs(rt-ot)/100).toPrecision(1)));const lt=at?getStep(at)*10:getStep(ot);at=at||lt/10;const ct=Math.round(clamp(Math.log10(1/lt),0,2));return{value:st?ot+st:ot,settings:_objectSpread2({initialValue:ot,step:at,pad:ct,min:nt,max:rt,suffix:st},it)}},sanitizeStep$1=(tt,{step:_,initialValue:_e})=>{const nt=Math.round((tt-_e)/_);return _e+nt*_};var props$3=Object.freeze({__proto__:null,schema:schema$3,sanitize:sanitize$3,format:format$1$1,normalize:normalize$2$1,sanitizeStep:sanitizeStep$1});function _extends(){return _extends=Object.assign?Object.assign.bind():function(tt){for(var _=1;_<arguments.length;_++){var _e=arguments[_];for(var nt in _e)Object.prototype.hasOwnProperty.call(_e,nt)&&(tt[nt]=_e[nt])}return tt},_extends.apply(this,arguments)}const InputContext=reactExports.createContext({});function useInputContext(){return reactExports.useContext(InputContext)}const ThemeContext=reactExports.createContext(null),StoreContext=reactExports.createContext(null),PanelSettingsContext=reactExports.createContext(null);function useStoreContext(){return reactExports.useContext(StoreContext)}function usePanelSettingsContext(){return reactExports.useContext(PanelSettingsContext)}const getDefaultTheme=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function createStateClass(tt,_){const[_e,nt]=tt.split(" "),rt={};return _e!=="none"&&(rt.boxShadow=`${_.inset?"inset ":""}0 0 0 $borderWidths${[_.key]} $colors${_e!=="default"&&_e||_.borderColor}`),nt&&(rt.backgroundColor=nt),rt}const utils={$inputStyle:()=>tt=>createStateClass(tt,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>tt=>createStateClass(tt,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>tt=>createStateClass(tt,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>tt=>createStateClass(tt,{key:"$active",borderColor:"$accent1",inset:!0})},{styled,css,createTheme,globalCss,keyframes}=q$1({prefix:"leva",theme:getDefaultTheme(),utils:_objectSpread2(_objectSpread2({},utils),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:tt=>({"&:focus":utils.$focusStyle()(tt)}),$focusWithin:tt=>({"&:focus-within":utils.$focusStyle()(tt)}),$hover:tt=>({"&:hover":utils.$hoverStyle()(tt)}),$active:tt=>({"&:active":utils.$activeStyle()(tt)})})}),globalStyles=globalCss({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function mergeTheme(tt){const _=getDefaultTheme();if(!tt)return{theme:_,className:""};Object.keys(tt).forEach(nt=>{Object.assign(_[nt],tt[nt])});const _e=createTheme(_);return{theme:_,className:_e.className}}function useTh(tt,_){const{theme:_e}=reactExports.useContext(ThemeContext);if(!(tt in _e)||!(_ in _e[tt]))return warn(LevaErrors.THEME_ERROR,tt,_),"";let nt=_;for(;;){let rt=_e[tt][nt];if(typeof rt=="string"&&rt.charAt(0)==="$")nt=rt.substr(1);else return rt}}const StyledInput=styled("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),InnerLabel=styled("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${StyledInput}`]:{paddingLeft:0}}),InnerNumberLabel=styled(InnerLabel,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),InputContainer=styled("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),_excluded$7$1=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],_excluded2$1$1=["onUpdate"];function ValueInput(tt){let{innerLabel:_,value:_e,onUpdate:nt,onChange:rt,onKeyDown:it,type:ot,id:st,inputType:at="text",rows:lt=0}=tt,ct=_objectWithoutProperties$1(tt,_excluded$7$1);const{id:ut,emitOnEditStart:ht,emitOnEditEnd:pt,disabled:gt}=useInputContext(),yt=st||ut,vt=reactExports.useRef(null),mt=lt>0,_t=mt?"textarea":"input",xt=reactExports.useCallback(Mt=>bt=>{const Pt=bt.currentTarget.value;Mt(Pt)},[]);React.useEffect(()=>{const Mt=vt.current,bt=xt(Pt=>{nt(Pt),pt()});return Mt==null||Mt.addEventListener("blur",bt),()=>Mt==null?void 0:Mt.removeEventListener("blur",bt)},[xt,nt,pt]);const St=reactExports.useCallback(Mt=>{Mt.key==="Enter"&&xt(nt)(Mt)},[xt,nt]),Tt=Object.assign({as:_t},mt?{rows:lt}:{},ct);return React.createElement(InputContainer,{textArea:mt},_&&typeof _=="string"?React.createElement(InnerLabel,null,_):_,React.createElement(StyledInput,_extends({levaType:ot,ref:vt,id:yt,type:at,autoComplete:"off",spellCheck:"false",value:_e,onChange:xt(rt),onFocus:()=>ht(),onKeyPress:St,onKeyDown:it,disabled:gt},Tt)))}function NumberInput(tt){let{onUpdate:_}=tt,_e=_objectWithoutProperties$1(tt,_excluded2$1$1);const nt=reactExports.useCallback(it=>_(parseNumber(it)),[_]),rt=reactExports.useCallback(it=>{const ot=it.key==="ArrowUp"?1:it.key==="ArrowDown"?-1:0;if(ot){it.preventDefault();const st=it.altKey?.1:it.shiftKey?10:1;_(at=>parseFloat(at)+ot*st)}},[_]);return React.createElement(ValueInput,_extends({},_e,{onUpdate:nt,onKeyDown:rt,type:"number"}))}const StyledFolder=styled("div",{}),StyledWrapper=styled("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),StyledTitle=styled("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${StyledWrapper}::after`]:{opacity:.6},[`${StyledFolder}:hover > & + ${StyledWrapper}::after`]:{opacity:.6},[`${StyledFolder}:hover > & > svg`]:{opacity:1}}),StyledContent=styled("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${StyledFolder}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),StyledRow=styled("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${StyledContent} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),StyledInputRow=styled(StyledRow,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),CopyLabelContainer=styled("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),StyledOptionalToggle=styled("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),StyledLabel=styled("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),StyledInputWrapper$1=styled("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${StyledLabel}`]:{pointerEvents:"auto"}}}}}),Overlay=styled("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),StyledToolTipContent=styled("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),ToolTipArrow=styled($a093c7e1ec25a057$export$21b07c8f274aebd5,{fill:"$toolTipBackground"});function Portal({children:tt}){const{className:_}=reactExports.useContext(ThemeContext);return React.createElement($f1701beae083dbae$export$be92b6f5f03c0fe9,{className:_},tt)}const _excluded$6$1=["align"];function OptionalToggle(){const{id:tt,disable:_,disabled:_e}=useInputContext();return React.createElement(React.Fragment,null,React.createElement(StyledOptionalToggle,{id:tt+"__disable",type:"checkbox",checked:!_e,onChange:()=>_(!_e)}),React.createElement("label",{htmlFor:tt+"__disable"}))}function RawLabel(tt){const{id:_,optional:_e,hint:nt}=useInputContext(),rt=tt.htmlFor||(_?{htmlFor:_}:null),it=!nt&&typeof tt.children=="string"?{title:tt.children}:null;return React.createElement(React.Fragment,null,_e&&React.createElement(OptionalToggle,null),nt!==void 0?React.createElement($a093c7e1ec25a057$export$be92b6f5f03c0fe9,null,React.createElement($a093c7e1ec25a057$export$41fb9f06171c75f4,{asChild:!0},React.createElement(StyledLabel,_extends({},rt,tt))),React.createElement($a093c7e1ec25a057$export$7c6e2c02157bb7d2,{side:"top",sideOffset:2},React.createElement(StyledToolTipContent,null,nt,React.createElement(ToolTipArrow,null)))):React.createElement(StyledLabel,_extends({},rt,it,tt)))}function Label(tt){let{align:_}=tt,_e=_objectWithoutProperties$1(tt,_excluded$6$1);const{value:nt,label:rt,key:it,disabled:ot}=useInputContext(),{hideCopyButton:st}=usePanelSettingsContext(),at=!st&&it!==void 0,[lt,ct]=reactExports.useState(!1),ut=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[it]:nt??""})),ct(!0)}catch{warn(LevaErrors.CLIPBOARD_ERROR,{[it]:nt})}};return React.createElement(CopyLabelContainer,{align:_,onPointerLeave:()=>ct(!1)},React.createElement(RawLabel,_e),at&&!ot&&React.createElement("div",{title:`Click to copy ${typeof rt=="string"?rt:it} value`},lt?React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),React.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):React.createElement("svg",{onClick:ut,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),React.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const _excluded$5$1=["toggled"],Svg=styled("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function Chevron(tt){let{toggled:_}=tt,_e=_objectWithoutProperties$1(tt,_excluded$5$1);return React.createElement(Svg,_extends({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${_?0:-90}deg)`}},_e),React.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const _excluded$4$1=["input"];function Row(tt){let{input:_}=tt,_e=_objectWithoutProperties$1(tt,_excluded$4$1);return _?React.createElement(StyledInputRow,_e):React.createElement(StyledRow,_e)}function useInputSetters({value:tt,type:_,settings:_e,setValue:nt}){const[rt,it]=reactExports.useState(format$2(_,tt,_e)),ot=reactExports.useRef(tt),st=reactExports.useRef(_e);st.current=_e;const at=reactExports.useCallback(ct=>it(format$2(_,ct,st.current)),[_]),lt=reactExports.useCallback(ct=>{try{nt(ct)}catch(ut){const{type:ht,previousValue:pt}=ut;if(ht!=="LEVA_ERROR")throw ut;at(pt)}},[at,nt]);return reactExports.useEffect(()=>{dequal(tt,ot.current)||at(tt),ot.current=tt},[tt,at]),{displayValue:rt,onChange:it,onUpdate:lt}}function useDrag(tt,_){const{emitOnEditStart:_e,emitOnEditEnd:nt}=useInputContext();return useDrag$1(rt=>{rt.first&&(document.body.classList.add("leva__panel__dragged"),_e==null||_e());const it=tt(rt);return rt.last&&(document.body.classList.remove("leva__panel__dragged"),nt==null||nt()),it},_)}function useCanvas2d(tt){const _=reactExports.useRef(null),_e=reactExports.useRef(null),nt=reactExports.useRef(!1);return reactExports.useEffect(()=>{const rt=debounce(()=>{_.current.width=_.current.offsetWidth*window.devicePixelRatio,_.current.height=_.current.offsetHeight*window.devicePixelRatio,tt(_.current,_e.current)},250);return window.addEventListener("resize",rt),nt.current||(rt(),nt.current=!0),()=>window.removeEventListener("resize",rt)},[tt]),reactExports.useEffect(()=>{_e.current=_.current.getContext("2d")},[]),[_,_e]}function useTransform(){const tt=reactExports.useRef(null),_=reactExports.useRef({x:0,y:0}),_e=reactExports.useCallback(nt=>{Object.assign(_.current,nt),tt.current&&(tt.current.style.transform=`translate3d(${_.current.x}px, ${_.current.y}px, 0)`)},[]);return[tt,_e]}const _excluded$3$1=["__refCount"],getInputAtPath=(tt,_)=>{if(!tt[_])return null;const _e=tt[_];return _objectWithoutProperties$1(_e,_excluded$3$1)};function useInput(tt){const _=useStoreContext(),[_e,nt]=reactExports.useState(getInputAtPath(_.getData(),tt)),rt=reactExports.useCallback(lt=>_.setValueAtPath(tt,lt,!0),[tt,_]),it=reactExports.useCallback(lt=>_.setSettingsAtPath(tt,lt),[tt,_]),ot=reactExports.useCallback(lt=>_.disableInputAtPath(tt,lt),[tt,_]),st=reactExports.useCallback(()=>_.emitOnEditStart(tt),[tt,_]),at=reactExports.useCallback(()=>_.emitOnEditEnd(tt),[tt,_]);return reactExports.useEffect(()=>{nt(getInputAtPath(_.getData(),tt));const lt=_.useStore.subscribe(ct=>getInputAtPath(ct.data,tt),nt,{equalityFn:shallow});return()=>lt()},[_,tt]),[_e,{set:rt,setSettings:it,disable:ot,storeId:_.storeId,emitOnEditStart:st,emitOnEditEnd:at}]}const RangeGrid=styled("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),Range=styled("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),Scrubber=styled("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),RangeWrapper=styled("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),Indicator=styled("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function RangeSlider({value:tt,min:_,max:_e,onDrag:nt,step:rt,initialValue:it}){const ot=reactExports.useRef(null),st=reactExports.useRef(null),at=reactExports.useRef(0),lt=useTh("sizes","scrubberWidth"),ct=useDrag(({event:ht,first:pt,xy:[gt],movement:[yt],memo:vt})=>{if(pt){const{width:_t,left:xt}=ot.current.getBoundingClientRect();at.current=_t-parseFloat(lt),vt=(ht==null?void 0:ht.target)===st.current?tt:invertedRange((gt-xt)/_t,_,_e)}const mt=vt+invertedRange(yt/at.current,0,_e-_);return nt(sanitizeStep$1(mt,{step:rt,initialValue:it})),vt}),ut=range(tt,_,_e);return React.createElement(RangeWrapper,_extends({ref:ot},ct()),React.createElement(Range,null,React.createElement(Indicator,{style:{left:0,right:`${(1-ut)*100}%`}})),React.createElement(Scrubber,{ref:st,style:{left:`calc(${ut} * (100% - ${lt}))`}}))}const DraggableLabel=React.memo(({label:tt,onUpdate:_,step:_e,innerLabelTrim:nt})=>{const[rt,it]=reactExports.useState(!1),ot=useDrag(({active:st,delta:[at],event:lt,memo:ct=0})=>(it(st),ct+=at/2,Math.abs(ct)>=1&&(_(ut=>parseFloat(ut)+Math.floor(ct)*_e*multiplyStep(lt)),ct=0),ct));return React.createElement(InnerNumberLabel,_extends({dragging:rt,title:tt.length>1?tt:""},ot()),tt.slice(0,nt))});function Number$1({label:tt,id:_,displayValue:_e,onUpdate:nt,onChange:rt,settings:it,innerLabelTrim:ot=1}){const st=ot>0&&React.createElement(DraggableLabel,{label:tt,step:it.step,onUpdate:nt,innerLabelTrim:ot});return React.createElement(NumberInput,{id:_,value:String(_e),onUpdate:nt,onChange:rt,innerLabel:st})}function NumberComponent(){const tt=useInputContext(),{label:_,value:_e,onUpdate:nt,settings:rt,id:it}=tt,{min:ot,max:st}=rt,at=st!==1/0&&ot!==-1/0;return React.createElement(Row,{input:!0},React.createElement(Label,null,_),React.createElement(RangeGrid,{hasRange:at},at&&React.createElement(RangeSlider,_extends({value:parseFloat(_e),onDrag:nt},rt)),React.createElement(Number$1,_extends({},tt,{id:it,label:"value",innerLabelTrim:at?0:1}))))}const{sanitizeStep}=props$3,rest=_objectWithoutProperties$1(props$3,["sanitizeStep"]);var number$1=_objectSpread2({component:NumberComponent},rest);const schema$2$1=(tt,_)=>v8n().schema({options:v8n().passesAnyOf(v8n().object(),v8n().array())}).test(_),sanitize$2$1=(tt,{values:_})=>{if(_.indexOf(tt)<0)throw Error("Selected value doesn't match Select options");return tt},format$3=(tt,{values:_})=>_.indexOf(tt),normalize$1$1=tt=>{let{value:_,options:_e}=tt,nt,rt;return Array.isArray(_e)?(rt=_e,nt=_e.map(it=>String(it))):(rt=Object.values(_e),nt=Object.keys(_e)),"value"in tt?rt.includes(_)||(nt.unshift(String(_)),rt.unshift(_)):_=rt[0],Object.values(_e).includes(_)||(_e[String(_)]=_),{value:_,settings:{keys:nt,values:rt}}};var props$2$1=Object.freeze({__proto__:null,schema:schema$2$1,sanitize:sanitize$2$1,format:format$3,normalize:normalize$1$1});const SelectContainer=styled("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),NativeSelect=styled("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),PresentationalSelect=styled("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${NativeSelect}:focus + &`]:{$focusStyle:""},[`${NativeSelect}:hover + &`]:{$hoverStyle:""}});function Select({displayValue:tt,value:_,onUpdate:_e,id:nt,settings:rt,disabled:it}){const{keys:ot,values:st}=rt,at=reactExports.useRef();return _===st[tt]&&(at.current=ot[tt]),React.createElement(SelectContainer,null,React.createElement(NativeSelect,{id:nt,value:tt,onChange:lt=>_e(st[Number(lt.currentTarget.value)]),disabled:it},ot.map((lt,ct)=>React.createElement("option",{key:lt,value:ct},lt))),React.createElement(PresentationalSelect,null,at.current),React.createElement(Chevron,{toggled:!0}))}function SelectComponent(){const{label:tt,value:_,displayValue:_e,onUpdate:nt,id:rt,disabled:it,settings:ot}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,tt),React.createElement(Select,{id:rt,value:_,displayValue:_e,onUpdate:nt,settings:ot,disabled:it}))}var select=_objectSpread2({component:SelectComponent},props$2$1);const schema$1$1=tt=>v8n().string().test(tt),sanitize$1$1=tt=>{if(typeof tt!="string")throw Error("Invalid string");return tt},normalize$4=({value:tt,editable:_=!0,rows:_e=!1})=>({value:tt,settings:{editable:_,rows:typeof _e=="number"?_e:_e?5:0}});var props$1$1=Object.freeze({__proto__:null,schema:schema$1$1,sanitize:sanitize$1$1,normalize:normalize$4});const _excluded$2$1=["displayValue","onUpdate","onChange","editable"],NonEditableString=styled("div",{whiteSpace:"pre-wrap"});function String$1(tt){let{displayValue:_,onUpdate:_e,onChange:nt,editable:rt=!0}=tt,it=_objectWithoutProperties$1(tt,_excluded$2$1);return rt?React.createElement(ValueInput,_extends({value:_,onUpdate:_e,onChange:nt},it)):React.createElement(NonEditableString,null,_)}function StringComponent(){const{label:tt,settings:_,displayValue:_e,onUpdate:nt,onChange:rt}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,tt),React.createElement(String$1,_extends({displayValue:_e,onUpdate:nt,onChange:rt},_)))}var string=_objectSpread2({component:StringComponent},props$1$1);const schema$4=tt=>v8n().boolean().test(tt),sanitize$5=tt=>{if(typeof tt!="boolean")throw Error("Invalid boolean");return tt};var props$4=Object.freeze({__proto__:null,schema:schema$4,sanitize:sanitize$5});const StyledInputWrapper=styled("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Boolean$1({value:tt,onUpdate:_,id:_e,disabled:nt}){return React.createElement(StyledInputWrapper,null,React.createElement("input",{id:_e,type:"checkbox",checked:tt,onChange:rt=>_(rt.currentTarget.checked),disabled:nt}),React.createElement("label",{htmlFor:_e},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function BooleanComponent(){const{label:tt,value:_,onUpdate:_e,disabled:nt,id:rt}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,tt),React.createElement(Boolean$1,{value:_,onUpdate:_e,id:rt,disabled:nt}))}var boolean=_objectSpread2({component:BooleanComponent},props$4);const _excluded$1$1=["locked"];function Coordinate({value:tt,id:_,valueKey:_e,settings:nt,onUpdate:rt,innerLabelTrim:it}){const ot=reactExports.useRef(tt[_e]);ot.current=tt[_e];const st=reactExports.useCallback(lt=>rt({[_e]:sanitizeValue({type:"NUMBER",value:ot.current,settings:nt},lt)}),[rt,nt,_e]),at=useInputSetters({type:"NUMBER",value:tt[_e],settings:nt,setValue:st});return React.createElement(Number$1,{id:_,label:_e,value:tt[_e],displayValue:at.displayValue,onUpdate:at.onUpdate,onChange:at.onChange,settings:nt,innerLabelTrim:it})}const Container$2=styled("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function Lock(tt){let{locked:_}=tt,_e=_objectWithoutProperties$1(tt,_excluded$1$1);return React.createElement("svg",_extends({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_e),_?React.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):React.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Vector({value:tt,onUpdate:_,settings:_e,innerLabelTrim:nt}){const{id:rt,setSettings:it}=useInputContext(),{lock:ot,locked:st}=_e;return React.createElement(Container$2,{withLock:ot},ot&&React.createElement(Lock,{locked:st,onClick:()=>it({locked:!st})}),Object.keys(tt).map((at,lt)=>React.createElement(Coordinate,{id:lt===0?rt:`${rt}.${at}`,key:at,valueKey:at,value:tt,settings:_e[at],onUpdate:_,innerLabelTrim:nt})))}const normalizeKeyedNumberSettings=(tt,_)=>{const _e={};let nt=0,rt=1/0;Object.entries(tt).forEach(([it,ot])=>{_e[it]=normalize$2$1(_objectSpread2({value:ot},_[it])).settings,nt=Math.max(nt,_e[it].step),rt=Math.min(rt,_e[it].pad)});for(let it in _e){const{step:ot,min:st,max:at}=_[it]||{};!isFinite(ot)&&(!isFinite(st)||!isFinite(at))&&(_e[it].step=nt,_e[it].pad=rt)}return _e},_excluded$b=["lock"],_excluded2$5=["value"];function getVectorSchema(tt){const _=v8n().array().length(tt).every.number(),_e=nt=>{if(!nt||typeof nt!="object")return!1;const rt=Object.values(nt);return rt.length===tt&&rt.every(it=>isFinite(it))};return nt=>_.test(nt)||_e(nt)}function getVectorType(tt){return Array.isArray(tt)?"array":"object"}function convert$1(tt,_,_e){return getVectorType(tt)===_?tt:_==="array"?Object.values(tt):mapArrayToKeys(tt,_e)}const sanitizeVector=(tt,_,_e)=>{const nt=convert$1(tt,"object",_.keys);for(let ot in nt)nt[ot]=sanitize$3(nt[ot],_[ot]);const rt=Object.keys(nt);let it={};if(rt.length===_.keys.length)it=nt;else{const ot=convert$1(_e,"object",_.keys);if(rt.length===1&&_.locked){const st=rt[0],at=nt[st],lt=ot[st],ct=lt!==0?at/lt:1;for(let ut in ot)ut===st?it[st]=at:it[ut]=ot[ut]*ct}else it=_objectSpread2(_objectSpread2({},ot),nt)}return convert$1(it,_.format,_.keys)},formatVector=(tt,_)=>convert$1(tt,"object",_.keys),isNumberSettings=tt=>!!tt&&("step"in tt||"min"in tt||"max"in tt);function normalizeVector(tt,_,_e=[]){const{lock:nt=!1}=_,rt=_objectWithoutProperties$1(_,_excluded$b),it=Array.isArray(tt)?"array":"object",ot=it==="object"?Object.keys(tt):_e,st=convert$1(tt,"object",ot),at=isNumberSettings(rt)?ot.reduce((ct,ut)=>Object.assign(ct,{[ut]:rt}),{}):rt,lt=normalizeKeyedNumberSettings(st,at);return{value:it==="array"?tt:st,settings:_objectSpread2(_objectSpread2({},lt),{},{format:it,keys:ot,lock:nt,locked:!1})}}function getVectorPlugin(tt){return{schema:getVectorSchema(tt.length),normalize:_=>{let{value:_e}=_,nt=_objectWithoutProperties$1(_,_excluded2$5);return normalizeVector(_e,nt,tt)},format:(_,_e)=>formatVector(_,_e),sanitize:(_,_e,nt)=>sanitizeVector(_,_e,nt)}}var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(tt){return typeof tt=="string"?tt.length>0:typeof tt=="number"},n=function(tt,_,_e){return _===void 0&&(_=0),_e===void 0&&(_e=Math.pow(10,_)),Math.round(_e*tt)/_e+0},e=function(tt,_,_e){return _===void 0&&(_=0),_e===void 0&&(_e=1),tt>_e?_e:tt>_?tt:_},u$1=function(tt){return(tt=isFinite(tt)?tt%360:0)>0?tt:tt+360},a=function(tt){return{r:e(tt.r,0,255),g:e(tt.g,0,255),b:e(tt.b,0,255),a:e(tt.a)}},o=function(tt){return{r:n(tt.r),g:n(tt.g),b:n(tt.b),a:n(tt.a,3)}},i$2=/^#([0-9a-f]{3,8})$/i,s$1=function(tt){var _=tt.toString(16);return _.length<2?"0"+_:_},h$1=function(tt){var _=tt.r,_e=tt.g,nt=tt.b,rt=tt.a,it=Math.max(_,_e,nt),ot=it-Math.min(_,_e,nt),st=ot?it===_?(_e-nt)/ot:it===_e?2+(nt-_)/ot:4+(_-_e)/ot:0;return{h:60*(st<0?st+6:st),s:it?ot/it*100:0,v:it/255*100,a:rt}},b$1=function(tt){var _=tt.h,_e=tt.s,nt=tt.v,rt=tt.a;_=_/360*6,_e/=100,nt/=100;var it=Math.floor(_),ot=nt*(1-_e),st=nt*(1-(_-it)*_e),at=nt*(1-(1-_+it)*_e),lt=it%6;return{r:255*[nt,st,ot,ot,at,nt][lt],g:255*[at,nt,nt,st,ot,ot][lt],b:255*[ot,ot,at,nt,nt,st][lt],a:rt}},g$1=function(tt){return{h:u$1(tt.h),s:e(tt.s,0,100),l:e(tt.l,0,100),a:e(tt.a)}},d$1=function(tt){return{h:n(tt.h),s:n(tt.s),l:n(tt.l),a:n(tt.a,3)}},f$1=function(tt){return b$1((_e=(_=tt).s,{h:_.h,s:(_e*=((nt=_.l)<50?nt:100-nt)/100)>0?2*_e/(nt+_e)*100:0,v:nt+_e,a:_.a}));var _,_e,nt},c$1=function(tt){return{h:(_=h$1(tt)).h,s:(rt=(200-(_e=_.s))*(nt=_.v)/100)>0&&rt<200?_e*nt/100/(rt<=100?rt:200-rt)*100:0,l:rt/2,a:_.a};var _,_e,nt,rt},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p$1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y$1={string:[[function(tt){var _=i$2.exec(tt);return _?(tt=_[1]).length<=4?{r:parseInt(tt[0]+tt[0],16),g:parseInt(tt[1]+tt[1],16),b:parseInt(tt[2]+tt[2],16),a:tt.length===4?n(parseInt(tt[3]+tt[3],16)/255,2):1}:tt.length===6||tt.length===8?{r:parseInt(tt.substr(0,2),16),g:parseInt(tt.substr(2,2),16),b:parseInt(tt.substr(4,2),16),a:tt.length===8?n(parseInt(tt.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(tt){var _=v$1.exec(tt)||m$1.exec(tt);return _?_[2]!==_[4]||_[4]!==_[6]?null:a({r:Number(_[1])/(_[2]?100/255:1),g:Number(_[3])/(_[4]?100/255:1),b:Number(_[5])/(_[6]?100/255:1),a:_[7]===void 0?1:Number(_[7])/(_[8]?100:1)}):null},"rgb"],[function(tt){var _=l.exec(tt)||p$1.exec(tt);if(!_)return null;var _e,nt,rt=g$1({h:(_e=_[1],nt=_[2],nt===void 0&&(nt="deg"),Number(_e)*(r[nt]||1)),s:Number(_[3]),l:Number(_[4]),a:_[5]===void 0?1:Number(_[5])/(_[6]?100:1)});return f$1(rt)},"hsl"]],object:[[function(tt){var _=tt.r,_e=tt.g,nt=tt.b,rt=tt.a,it=rt===void 0?1:rt;return t(_)&&t(_e)&&t(nt)?a({r:Number(_),g:Number(_e),b:Number(nt),a:Number(it)}):null},"rgb"],[function(tt){var _=tt.h,_e=tt.s,nt=tt.l,rt=tt.a,it=rt===void 0?1:rt;if(!t(_)||!t(_e)||!t(nt))return null;var ot=g$1({h:Number(_),s:Number(_e),l:Number(nt),a:Number(it)});return f$1(ot)},"hsl"],[function(tt){var _=tt.h,_e=tt.s,nt=tt.v,rt=tt.a,it=rt===void 0?1:rt;if(!t(_)||!t(_e)||!t(nt))return null;var ot=function(st){return{h:u$1(st.h),s:e(st.s,0,100),v:e(st.v,0,100),a:e(st.a)}}({h:Number(_),s:Number(_e),v:Number(nt),a:Number(it)});return b$1(ot)},"hsv"]]},N=function(tt,_){for(var _e=0;_e<_.length;_e++){var nt=_[_e][0](tt);if(nt)return[nt,_[_e][1]]}return[null,void 0]},x$1=function(tt){return typeof tt=="string"?N(tt.trim(),y$1.string):typeof tt=="object"&&tt!==null?N(tt,y$1.object):[null,void 0]},I$1=function(tt){return x$1(tt)[1]},M=function(tt,_){var _e=c$1(tt);return{h:_e.h,s:e(_e.s+100*_,0,100),l:_e.l,a:_e.a}},H=function(tt){return(299*tt.r+587*tt.g+114*tt.b)/1e3/255},$$1=function(tt,_){var _e=c$1(tt);return{h:_e.h,s:_e.s,l:e(_e.l+100*_,0,100),a:_e.a}},j=function(){function tt(_){this.parsed=x$1(_)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return tt.prototype.isValid=function(){return this.parsed!==null},tt.prototype.brightness=function(){return n(H(this.rgba),2)},tt.prototype.isDark=function(){return H(this.rgba)<.5},tt.prototype.isLight=function(){return H(this.rgba)>=.5},tt.prototype.toHex=function(){return _=o(this.rgba),_e=_.r,nt=_.g,rt=_.b,ot=(it=_.a)<1?s$1(n(255*it)):"","#"+s$1(_e)+s$1(nt)+s$1(rt)+ot;var _,_e,nt,rt,it,ot},tt.prototype.toRgb=function(){return o(this.rgba)},tt.prototype.toRgbString=function(){return _=o(this.rgba),_e=_.r,nt=_.g,rt=_.b,(it=_.a)<1?"rgba("+_e+", "+nt+", "+rt+", "+it+")":"rgb("+_e+", "+nt+", "+rt+")";var _,_e,nt,rt,it},tt.prototype.toHsl=function(){return d$1(c$1(this.rgba))},tt.prototype.toHslString=function(){return _=d$1(c$1(this.rgba)),_e=_.h,nt=_.s,rt=_.l,(it=_.a)<1?"hsla("+_e+", "+nt+"%, "+rt+"%, "+it+")":"hsl("+_e+", "+nt+"%, "+rt+"%)";var _,_e,nt,rt,it},tt.prototype.toHsv=function(){return _=h$1(this.rgba),{h:n(_.h),s:n(_.s),v:n(_.v),a:n(_.a,3)};var _},tt.prototype.invert=function(){return w({r:255-(_=this.rgba).r,g:255-_.g,b:255-_.b,a:_.a});var _},tt.prototype.saturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,_))},tt.prototype.desaturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,-_))},tt.prototype.grayscale=function(){return w(M(this.rgba,-1))},tt.prototype.lighten=function(_){return _===void 0&&(_=.1),w($$1(this.rgba,_))},tt.prototype.darken=function(_){return _===void 0&&(_=.1),w($$1(this.rgba,-_))},tt.prototype.rotate=function(_){return _===void 0&&(_=15),this.hue(this.hue()+_)},tt.prototype.alpha=function(_){return typeof _=="number"?w({r:(_e=this.rgba).r,g:_e.g,b:_e.b,a:_}):n(this.rgba.a,3);var _e},tt.prototype.hue=function(_){var _e=c$1(this.rgba);return typeof _=="number"?w({h:_,s:_e.s,l:_e.l,a:_e.a}):n(_e.h)},tt.prototype.isEqual=function(_){return this.toHex()===w(_).toHex()},tt}(),w=function(tt){return tt instanceof j?tt:new j(tt)},S$1=[],k$1=function(tt){tt.forEach(function(_){S$1.indexOf(_)<0&&(_(j,y$1),S$1.push(_))})};function namesPlugin(tt,_){var _e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},nt={};for(var rt in _e)nt[_e[rt]]=rt;var it={};tt.prototype.toName=function(ot){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var st,at,lt=nt[this.toHex()];if(lt)return lt;if(ot!=null&&ot.closest){var ct=this.toRgb(),ut=1/0,ht="black";if(!it.length)for(var pt in _e)it[pt]=new tt(_e[pt]).toRgb();for(var gt in _e){var yt=(st=ct,at=it[gt],Math.pow(st.r-at.r,2)+Math.pow(st.g-at.g,2)+Math.pow(st.b-at.b,2));yt<ut&&(ut=yt,ht=gt)}return ht}},_.string.push([function(ot){var st=ot.toLowerCase(),at=st==="transparent"?"#0000":_e[st];return at?new tt(at).toRgb():null},"name"])}function u(){return(u=Object.assign||function(tt){for(var _=1;_<arguments.length;_++){var _e=arguments[_];for(var nt in _e)Object.prototype.hasOwnProperty.call(_e,nt)&&(tt[nt]=_e[nt])}return tt}).apply(this,arguments)}function c(tt,_){if(tt==null)return{};var _e,nt,rt={},it=Object.keys(tt);for(nt=0;nt<it.length;nt++)_.indexOf(_e=it[nt])>=0||(rt[_e]=tt[_e]);return rt}function i$1(tt){var _=reactExports.useRef(tt),_e=reactExports.useRef(function(nt){_.current&&_.current(nt)});return _.current=tt,_e.current}var s=function(tt,_,_e){return _===void 0&&(_=0),_e===void 0&&(_e=1),tt>_e?_e:tt<_?_:tt},f=function(tt){return"touches"in tt},v=function(tt){return tt&&tt.ownerDocument.defaultView||self},d=function(tt,_,_e){var nt=tt.getBoundingClientRect(),rt=f(_)?function(it,ot){for(var st=0;st<it.length;st++)if(it[st].identifier===ot)return it[st];return it[0]}(_.touches,_e):_;return{left:s((rt.pageX-(nt.left+v(tt).pageXOffset))/nt.width),top:s((rt.pageY-(nt.top+v(tt).pageYOffset))/nt.height)}},h=function(tt){!f(tt)&&tt.preventDefault()},m=React.memo(function(tt){var _=tt.onMove,_e=tt.onKey,nt=c(tt,["onMove","onKey"]),rt=reactExports.useRef(null),it=i$1(_),ot=i$1(_e),st=reactExports.useRef(null),at=reactExports.useRef(!1),lt=reactExports.useMemo(function(){var pt=function(vt){h(vt),(f(vt)?vt.touches.length>0:vt.buttons>0)&&rt.current?it(d(rt.current,vt,st.current)):yt(!1)},gt=function(){return yt(!1)};function yt(vt){var mt=at.current,_t=v(rt.current),xt=vt?_t.addEventListener:_t.removeEventListener;xt(mt?"touchmove":"mousemove",pt),xt(mt?"touchend":"mouseup",gt)}return[function(vt){var mt=vt.nativeEvent,_t=rt.current;if(_t&&(h(mt),!function(St,Tt){return Tt&&!f(St)}(mt,at.current)&&_t)){if(f(mt)){at.current=!0;var xt=mt.changedTouches||[];xt.length&&(st.current=xt[0].identifier)}_t.focus(),it(d(_t,mt,st.current)),yt(!0)}},function(vt){var mt=vt.which||vt.keyCode;mt<37||mt>40||(vt.preventDefault(),ot({left:mt===39?.05:mt===37?-.05:0,top:mt===40?.05:mt===38?-.05:0}))},yt]},[ot,it]),ct=lt[0],ut=lt[1],ht=lt[2];return reactExports.useEffect(function(){return ht},[ht]),React.createElement("div",u({},nt,{onTouchStart:ct,onMouseDown:ct,className:"react-colorful__interactive",ref:rt,onKeyDown:ut,tabIndex:0,role:"slider"}))}),g=function(tt){return tt.filter(Boolean).join(" ")},p=function(tt){var _=tt.color,_e=tt.left,nt=tt.top,rt=nt===void 0?.5:nt,it=g(["react-colorful__pointer",tt.className]);return React.createElement("div",{className:it,style:{top:100*rt+"%",left:100*_e+"%"}},React.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:_}}))},b=function(tt,_,_e){return _===void 0&&(_=0),_e===void 0&&(_e=Math.pow(10,_)),Math.round(_e*tt)/_e},y=function(tt){var _=tt.s,_e=tt.v,nt=tt.a,rt=(200-_)*_e/100;return{h:b(tt.h),s:b(rt>0&&rt<200?_*_e/100/(rt<=100?rt:200-rt)*100:0),l:b(rt/2),a:b(nt,2)}},q=function(tt){var _=y(tt);return"hsl("+_.h+", "+_.s+"%, "+_.l+"%)"},k=function(tt){var _=y(tt);return"hsla("+_.h+", "+_.s+"%, "+_.l+"%, "+_.a+")"},I=function(tt){var _=tt.h,_e=tt.s,nt=tt.v,rt=tt.a;_=_/360*6,_e/=100,nt/=100;var it=Math.floor(_),ot=nt*(1-_e),st=nt*(1-(_-it)*_e),at=nt*(1-(1-_+it)*_e),lt=it%6;return{r:b(255*[nt,st,ot,ot,at,nt][lt]),g:b(255*[at,nt,nt,st,ot,ot][lt]),b:b(255*[ot,ot,at,nt,nt,st][lt]),a:b(rt,2)}},L=function(tt){var _=tt.r,_e=tt.g,nt=tt.b,rt=tt.a,it=Math.max(_,_e,nt),ot=it-Math.min(_,_e,nt),st=ot?it===_?(_e-nt)/ot:it===_e?2+(nt-_)/ot:4+(_-_e)/ot:0;return{h:b(60*(st<0?st+6:st)),s:b(it?ot/it*100:0),v:b(it/255*100),a:rt}},S=React.memo(function(tt){var _=tt.hue,_e=tt.onChange,nt=g(["react-colorful__hue",tt.className]);return React.createElement("div",{className:nt},React.createElement(m,{onMove:function(rt){_e({h:360*rt.left})},onKey:function(rt){_e({h:s(_+360*rt.left,0,360)})},"aria-label":"Hue","aria-valuenow":b(_),"aria-valuemax":"360","aria-valuemin":"0"},React.createElement(p,{className:"react-colorful__hue-pointer",left:_/360,color:q({h:_,s:100,v:100,a:1})})))}),T=React.memo(function(tt){var _=tt.hsva,_e=tt.onChange,nt={backgroundColor:q({h:_.h,s:100,v:100,a:1})};return React.createElement("div",{className:"react-colorful__saturation",style:nt},React.createElement(m,{onMove:function(rt){_e({s:100*rt.left,v:100-100*rt.top})},onKey:function(rt){_e({s:s(_.s+100*rt.left,0,100),v:s(_.v-100*rt.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+b(_.s)+"%, Brightness "+b(_.v)+"%"},React.createElement(p,{className:"react-colorful__saturation-pointer",top:1-_.v/100,left:_.s/100,color:q(_)})))}),F=function(tt,_){if(tt===_)return!0;for(var _e in tt)if(tt[_e]!==_[_e])return!1;return!0};function Y(tt,_,_e){var nt=i$1(_e),rt=reactExports.useState(function(){return tt.toHsva(_)}),it=rt[0],ot=rt[1],st=reactExports.useRef({color:_,hsva:it});reactExports.useEffect(function(){if(!tt.equal(_,st.current.color)){var lt=tt.toHsva(_);st.current={hsva:lt,color:_},ot(lt)}},[_,tt]),reactExports.useEffect(function(){var lt;F(it,st.current.hsva)||tt.equal(lt=tt.fromHsva(it),st.current.color)||(st.current={hsva:it,color:lt},nt(lt))},[it,tt,nt]);var at=reactExports.useCallback(function(lt){ot(function(ct){return Object.assign({},ct,lt)})},[]);return[it,at]}var V=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,$=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},J=new Map,Q=function(tt){V(function(){var _=tt.current?tt.current.ownerDocument:document;if(_!==void 0&&!J.has(_)){var _e=_.createElement("style");_e.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,J.set(_,_e);var nt=$();nt&&_e.setAttribute("nonce",nt),_.head.appendChild(_e)}},[])},U=function(tt){var _=tt.className,_e=tt.colorModel,nt=tt.color,rt=nt===void 0?_e.defaultColor:nt,it=tt.onChange,ot=c(tt,["className","colorModel","color","onChange"]),st=reactExports.useRef(null);Q(st);var at=Y(_e,rt,it),lt=at[0],ct=at[1],ut=g(["react-colorful",_]);return React.createElement("div",u({},ot,{ref:st,className:ut}),React.createElement(T,{hsva:lt,onChange:ct}),React.createElement(S,{hue:lt.h,onChange:ct,className:"react-colorful__last-control"}))},ee=function(tt){var _=tt.className,_e=tt.hsva,nt=tt.onChange,rt={backgroundImage:"linear-gradient(90deg, "+k(Object.assign({},_e,{a:0}))+", "+k(Object.assign({},_e,{a:1}))+")"},it=g(["react-colorful__alpha",_]),ot=b(100*_e.a);return React.createElement("div",{className:it},React.createElement("div",{className:"react-colorful__alpha-gradient",style:rt}),React.createElement(m,{onMove:function(st){nt({a:st.left})},onKey:function(st){nt({a:s(_e.a+st.left)})},"aria-label":"Alpha","aria-valuetext":ot+"%","aria-valuenow":ot,"aria-valuemin":"0","aria-valuemax":"100"},React.createElement(p,{className:"react-colorful__alpha-pointer",left:_e.a,color:k(_e)})))},re=function(tt){var _=tt.className,_e=tt.colorModel,nt=tt.color,rt=nt===void 0?_e.defaultColor:nt,it=tt.onChange,ot=c(tt,["className","colorModel","color","onChange"]),st=reactExports.useRef(null);Q(st);var at=Y(_e,rt,it),lt=at[0],ct=at[1],ut=g(["react-colorful",_]);return React.createElement("div",u({},ot,{ref:st,className:ut}),React.createElement(T,{hsva:lt,onChange:ct}),React.createElement(S,{hue:lt.h,onChange:ct}),React.createElement(ee,{hsva:lt,onChange:ct,className:"react-colorful__last-control"}))},xe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:L,fromHsva:I,equal:F},Ce=function(tt){return React.createElement(re,u({},tt,{colorModel:xe}))},Me={defaultColor:{r:0,g:0,b:0},toHsva:function(tt){return L({r:tt.r,g:tt.g,b:tt.b,a:1})},fromHsva:function(tt){return{r:(_=I(tt)).r,g:_.g,b:_.b};var _},equal:F},Ne=function(tt){return React.createElement(U,u({},tt,{colorModel:Me}))};function __awaiter(tt,_,_e,nt){function rt(it){return it instanceof _e?it:new _e(function(ot){ot(it)})}return new(_e||(_e=Promise))(function(it,ot){function st(ct){try{lt(nt.next(ct))}catch(ut){ot(ut)}}function at(ct){try{lt(nt.throw(ct))}catch(ut){ot(ut)}}function lt(ct){ct.done?it(ct.value):rt(ct.value).then(st,at)}lt((nt=nt.apply(tt,_||[])).next())})}function __generator(tt,_){var _e={label:0,sent:function(){if(it[0]&1)throw it[1];return it[1]},trys:[],ops:[]},nt,rt,it,ot;return ot={next:st(0),throw:st(1),return:st(2)},typeof Symbol=="function"&&(ot[Symbol.iterator]=function(){return this}),ot;function st(lt){return function(ct){return at([lt,ct])}}function at(lt){if(nt)throw new TypeError("Generator is already executing.");for(;ot&&(ot=0,lt[0]&&(_e=0)),_e;)try{if(nt=1,rt&&(it=lt[0]&2?rt.return:lt[0]?rt.throw||((it=rt.return)&&it.call(rt),0):rt.next)&&!(it=it.call(rt,lt[1])).done)return it;switch(rt=0,it&&(lt=[lt[0]&2,it.value]),lt[0]){case 0:case 1:it=lt;break;case 4:return _e.label++,{value:lt[1],done:!1};case 5:_e.label++,rt=lt[1],lt=[0];continue;case 7:lt=_e.ops.pop(),_e.trys.pop();continue;default:if(it=_e.trys,!(it=it.length>0&&it[it.length-1])&&(lt[0]===6||lt[0]===2)){_e=0;continue}if(lt[0]===3&&(!it||lt[1]>it[0]&&lt[1]<it[3])){_e.label=lt[1];break}if(lt[0]===6&&_e.label<it[1]){_e.label=it[1],it=lt;break}if(it&&_e.label<it[2]){_e.label=it[2],_e.ops.push(lt);break}it[2]&&_e.ops.pop(),_e.trys.pop();continue}lt=_.call(tt,_e)}catch(ct){lt=[6,ct],rt=0}finally{nt=it=0}if(lt[0]&5)throw lt[1];return{value:lt[0]?lt[1]:void 0,done:!0}}}function __read(tt,_){var _e=typeof Symbol=="function"&&tt[Symbol.iterator];if(!_e)return tt;var nt=_e.call(tt),rt,it=[],ot;try{for(;(_===void 0||_-- >0)&&!(rt=nt.next()).done;)it.push(rt.value)}catch(st){ot={error:st}}finally{try{rt&&!rt.done&&(_e=nt.return)&&_e.call(nt)}finally{if(ot)throw ot.error}}return it}function __spread(){for(var tt=[],_=0;_<arguments.length;_++)tt=tt.concat(__read(arguments[_]));return tt}typeof SuppressedError=="function"&&SuppressedError;var COMMON_MIME_TYPES=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function toFileWithPath(tt,_){var _e=withMimeType(tt);if(typeof _e.path!="string"){var nt=tt.webkitRelativePath;Object.defineProperty(_e,"path",{value:typeof _=="string"?_:typeof nt=="string"&&nt.length>0?nt:tt.name,writable:!1,configurable:!1,enumerable:!0})}return _e}function withMimeType(tt){var _=tt.name,_e=_&&_.lastIndexOf(".")!==-1;if(_e&&!tt.type){var nt=_.split(".").pop().toLowerCase(),rt=COMMON_MIME_TYPES.get(nt);rt&&Object.defineProperty(tt,"type",{value:rt,writable:!1,configurable:!1,enumerable:!0})}return tt}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(tt){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_){return isObject$7(tt)&&isDataTransfer(tt)?[2,getDataTransferFiles(tt.dataTransfer,tt.type)]:isChangeEvt(tt)?[2,getInputFiles(tt)]:Array.isArray(tt)&&tt.every(function(_e){return"getFile"in _e&&typeof _e.getFile=="function"})?[2,getFsHandleFiles(tt)]:[2,[]]})})}function isDataTransfer(tt){return isObject$7(tt.dataTransfer)}function isChangeEvt(tt){return isObject$7(tt)&&isObject$7(tt.target)}function isObject$7(tt){return typeof tt=="object"&&tt!==null}function getInputFiles(tt){return fromList(tt.target.files).map(function(_){return toFileWithPath(_)})}function getFsHandleFiles(tt){return __awaiter(this,void 0,void 0,function(){var _;return __generator(this,function(_e){switch(_e.label){case 0:return[4,Promise.all(tt.map(function(nt){return nt.getFile()}))];case 1:return _=_e.sent(),[2,_.map(function(nt){return toFileWithPath(nt)})]}})})}function getDataTransferFiles(tt,_){return __awaiter(this,void 0,void 0,function(){var _e,nt;return __generator(this,function(rt){switch(rt.label){case 0:return tt===null?[2,[]]:tt.items?(_e=fromList(tt.items).filter(function(it){return it.kind==="file"}),_!=="drop"?[2,_e]:[4,Promise.all(_e.map(toFilePromises))]):[3,2];case 1:return nt=rt.sent(),[2,noIgnoredFiles(flatten(nt))];case 2:return[2,noIgnoredFiles(fromList(tt.files).map(function(it){return toFileWithPath(it)}))]}})})}function noIgnoredFiles(tt){return tt.filter(function(_){return FILES_TO_IGNORE.indexOf(_.name)===-1})}function fromList(tt){if(tt===null)return[];for(var _=[],_e=0;_e<tt.length;_e++){var nt=tt[_e];_.push(nt)}return _}function toFilePromises(tt){if(typeof tt.webkitGetAsEntry!="function")return fromDataTransferItem(tt);var _=tt.webkitGetAsEntry();return _&&_.isDirectory?fromDirEntry(_):fromDataTransferItem(tt)}function flatten(tt){return tt.reduce(function(_,_e){return __spread(_,Array.isArray(_e)?flatten(_e):[_e])},[])}function fromDataTransferItem(tt){var _=tt.getAsFile();if(!_)return Promise.reject(tt+" is not a File");var _e=toFileWithPath(_);return Promise.resolve(_e)}function fromEntry(tt){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_){return[2,tt.isDirectory?fromDirEntry(tt):fromFileEntry(tt)]})})}function fromDirEntry(tt){var _=tt.createReader();return new Promise(function(_e,nt){var rt=[];function it(){var ot=this;_.readEntries(function(st){return __awaiter(ot,void 0,void 0,function(){var at,lt,ct;return __generator(this,function(ut){switch(ut.label){case 0:if(st.length)return[3,5];ut.label=1;case 1:return ut.trys.push([1,3,,4]),[4,Promise.all(rt)];case 2:return at=ut.sent(),_e(at),[3,4];case 3:return lt=ut.sent(),nt(lt),[3,4];case 4:return[3,6];case 5:ct=Promise.all(st.map(fromEntry)),rt.push(ct),it(),ut.label=6;case 6:return[2]}})})},function(st){nt(st)})}it()})}function fromFileEntry(tt){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_){return[2,new Promise(function(_e,nt){tt.file(function(rt){var it=toFileWithPath(rt,tt.fullPath);_e(it)},function(rt){nt(rt)})})]})})}var _default=function(tt,_){if(tt&&_){var _e=Array.isArray(_)?_:_.split(","),nt=tt.name||"",rt=(tt.type||"").toLowerCase(),it=rt.replace(/\/.*$/,"");return _e.some(function(ot){var st=ot.trim().toLowerCase();return st.charAt(0)==="."?nt.toLowerCase().endsWith(st):st.endsWith("/*")?it===st.replace(/\/.*$/,""):rt===st})}return!0};function ownKeys$1(tt,_){var _e=Object.keys(tt);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(tt);_&&(nt=nt.filter(function(rt){return Object.getOwnPropertyDescriptor(tt,rt).enumerable})),_e.push.apply(_e,nt)}return _e}function _objectSpread$1(tt){for(var _=1;_<arguments.length;_++){var _e=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$1(Object(_e),!0).forEach(function(nt){_defineProperty$1(tt,nt,_e[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(_e)):ownKeys$1(Object(_e)).forEach(function(nt){Object.defineProperty(tt,nt,Object.getOwnPropertyDescriptor(_e,nt))})}return tt}function _defineProperty$1(tt,_,_e){return _ in tt?Object.defineProperty(tt,_,{value:_e,enumerable:!0,configurable:!0,writable:!0}):tt[_]=_e,tt}function _slicedToArray$1(tt,_){return _arrayWithHoles$1(tt)||_iterableToArrayLimit$1(tt,_)||_unsupportedIterableToArray$1(tt,_)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(tt,_){if(tt){if(typeof tt=="string")return _arrayLikeToArray$1(tt,_);var _e=Object.prototype.toString.call(tt).slice(8,-1);if(_e==="Object"&&tt.constructor&&(_e=tt.constructor.name),_e==="Map"||_e==="Set")return Array.from(tt);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$1(tt,_)}}function _arrayLikeToArray$1(tt,_){(_==null||_>tt.length)&&(_=tt.length);for(var _e=0,nt=new Array(_);_e<_;_e++)nt[_e]=tt[_e];return nt}function _iterableToArrayLimit$1(tt,_){var _e=tt==null?null:typeof Symbol<"u"&&tt[Symbol.iterator]||tt["@@iterator"];if(_e!=null){var nt=[],rt=!0,it=!1,ot,st;try{for(_e=_e.call(tt);!(rt=(ot=_e.next()).done)&&(nt.push(ot.value),!(_&&nt.length===_));rt=!0);}catch(at){it=!0,st=at}finally{try{!rt&&_e.return!=null&&_e.return()}finally{if(it)throw st}}return nt}}function _arrayWithHoles$1(tt){if(Array.isArray(tt))return tt}var FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function(_){_=Array.isArray(_)&&_.length===1?_[0]:_;var _e=Array.isArray(_)?"one of ".concat(_.join(", ")):_;return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(_e)}},getTooLargeRejectionErr=function(_){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(_," ").concat(_===1?"byte":"bytes")}},getTooSmallRejectionErr=function(_){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(_," ").concat(_===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(tt,_){var _e=tt.type==="application/x-moz-file"||_default(tt,_);return[_e,_e?null:getInvalidTypeRejectionErr(_)]}function fileMatchSize(tt,_,_e){if(isDefined(tt.size))if(isDefined(_)&&isDefined(_e)){if(tt.size>_e)return[!1,getTooLargeRejectionErr(_e)];if(tt.size<_)return[!1,getTooSmallRejectionErr(_)]}else{if(isDefined(_)&&tt.size<_)return[!1,getTooSmallRejectionErr(_)];if(isDefined(_e)&&tt.size>_e)return[!1,getTooLargeRejectionErr(_e)]}return[!0,null]}function isDefined(tt){return tt!=null}function allFilesAccepted(tt){var _=tt.files,_e=tt.accept,nt=tt.minSize,rt=tt.maxSize,it=tt.multiple,ot=tt.maxFiles;return!it&&_.length>1||it&&ot>=1&&_.length>ot?!1:_.every(function(st){var at=fileAccepted(st,_e),lt=_slicedToArray$1(at,1),ct=lt[0],ut=fileMatchSize(st,nt,rt),ht=_slicedToArray$1(ut,1),pt=ht[0];return ct&&pt})}function isPropagationStopped(tt){return typeof tt.isPropagationStopped=="function"?tt.isPropagationStopped():typeof tt.cancelBubble<"u"?tt.cancelBubble:!1}function isEvtWithFiles(tt){return tt.dataTransfer?Array.prototype.some.call(tt.dataTransfer.types,function(_){return _==="Files"||_==="application/x-moz-file"}):!!tt.target&&!!tt.target.files}function onDocumentDragOver(tt){tt.preventDefault()}function isIe(tt){return tt.indexOf("MSIE")!==-1||tt.indexOf("Trident/")!==-1}function isEdge(tt){return tt.indexOf("Edge/")!==-1}function isIeOrEdge(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(tt)||isEdge(tt)}function composeEventHandlers(){for(var tt=arguments.length,_=new Array(tt),_e=0;_e<tt;_e++)_[_e]=arguments[_e];return function(nt){for(var rt=arguments.length,it=new Array(rt>1?rt-1:0),ot=1;ot<rt;ot++)it[ot-1]=arguments[ot];return _.some(function(st){return!isPropagationStopped(nt)&&st&&st.apply(void 0,[nt].concat(it)),isPropagationStopped(nt)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function filePickerOptionsTypes(tt){return tt=typeof tt=="string"?tt.split(","):tt,[{description:"everything",accept:Array.isArray(tt)?tt.filter(function(_){return _==="audio/*"||_==="video/*"||_==="image/*"||_==="text/*"||/\w+\/[-+.\w]+/g.test(_)}).reduce(function(_,_e){return _objectSpread$1(_objectSpread$1({},_),{},_defineProperty$1({},_e,[]))},{}):{}}]}function isAbort(tt){return tt instanceof DOMException&&(tt.name==="AbortError"||tt.code===tt.ABORT_ERR)}function isSecurityError(tt){return tt instanceof DOMException&&(tt.name==="SecurityError"||tt.code===tt.SECURITY_ERR)}var _excluded=["children"],_excluded2$2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(tt){return _arrayWithoutHoles(tt)||_iterableToArray(tt)||_unsupportedIterableToArray(tt)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(tt){if(typeof Symbol<"u"&&tt[Symbol.iterator]!=null||tt["@@iterator"]!=null)return Array.from(tt)}function _arrayWithoutHoles(tt){if(Array.isArray(tt))return _arrayLikeToArray(tt)}function _slicedToArray(tt,_){return _arrayWithHoles(tt)||_iterableToArrayLimit(tt,_)||_unsupportedIterableToArray(tt,_)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(tt,_){if(tt){if(typeof tt=="string")return _arrayLikeToArray(tt,_);var _e=Object.prototype.toString.call(tt).slice(8,-1);if(_e==="Object"&&tt.constructor&&(_e=tt.constructor.name),_e==="Map"||_e==="Set")return Array.from(tt);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray(tt,_)}}function _arrayLikeToArray(tt,_){(_==null||_>tt.length)&&(_=tt.length);for(var _e=0,nt=new Array(_);_e<_;_e++)nt[_e]=tt[_e];return nt}function _iterableToArrayLimit(tt,_){var _e=tt==null?null:typeof Symbol<"u"&&tt[Symbol.iterator]||tt["@@iterator"];if(_e!=null){var nt=[],rt=!0,it=!1,ot,st;try{for(_e=_e.call(tt);!(rt=(ot=_e.next()).done)&&(nt.push(ot.value),!(_&&nt.length===_));rt=!0);}catch(at){it=!0,st=at}finally{try{!rt&&_e.return!=null&&_e.return()}finally{if(it)throw st}}return nt}}function _arrayWithHoles(tt){if(Array.isArray(tt))return tt}function ownKeys(tt,_){var _e=Object.keys(tt);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(tt);_&&(nt=nt.filter(function(rt){return Object.getOwnPropertyDescriptor(tt,rt).enumerable})),_e.push.apply(_e,nt)}return _e}function _objectSpread(tt){for(var _=1;_<arguments.length;_++){var _e=arguments[_]!=null?arguments[_]:{};_%2?ownKeys(Object(_e),!0).forEach(function(nt){_defineProperty(tt,nt,_e[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(_e)):ownKeys(Object(_e)).forEach(function(nt){Object.defineProperty(tt,nt,Object.getOwnPropertyDescriptor(_e,nt))})}return tt}function _defineProperty(tt,_,_e){return _ in tt?Object.defineProperty(tt,_,{value:_e,enumerable:!0,configurable:!0,writable:!0}):tt[_]=_e,tt}function _objectWithoutProperties(tt,_){if(tt==null)return{};var _e=_objectWithoutPropertiesLoose(tt,_),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(tt);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(tt,nt)&&(_e[nt]=tt[nt])}return _e}function _objectWithoutPropertiesLoose(tt,_){if(tt==null)return{};var _e={},nt=Object.keys(tt),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_.indexOf(rt)>=0)&&(_e[rt]=tt[rt]);return _e}var Dropzone=reactExports.forwardRef(function(tt,_){var _e=tt.children,nt=_objectWithoutProperties(tt,_excluded),rt=useDropzone(nt),it=rt.open,ot=_objectWithoutProperties(rt,_excluded2$2);return reactExports.useImperativeHandle(_,function(){return{open:it}},[it]),React.createElement(reactExports.Fragment,null,_e(_objectSpread(_objectSpread({},ot),{},{open:it})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:propTypesExports.func,accept:propTypesExports.oneOfType([propTypesExports.string,propTypesExports.arrayOf(propTypesExports.string)]),multiple:propTypesExports.bool,preventDropOnDocument:propTypesExports.bool,noClick:propTypesExports.bool,noKeyboard:propTypesExports.bool,noDrag:propTypesExports.bool,noDragEventsBubbling:propTypesExports.bool,minSize:propTypesExports.number,maxSize:propTypesExports.number,maxFiles:propTypesExports.number,disabled:propTypesExports.bool,getFilesFromEvent:propTypesExports.func,onFileDialogCancel:propTypesExports.func,onFileDialogOpen:propTypesExports.func,useFsAccessApi:propTypesExports.bool,onDragEnter:propTypesExports.func,onDragLeave:propTypesExports.func,onDragOver:propTypesExports.func,onDrop:propTypesExports.func,onDropAccepted:propTypesExports.func,onDropRejected:propTypesExports.func,validator:propTypesExports.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function useDropzone(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=_objectSpread(_objectSpread({},defaultProps),tt),_e=_.accept,nt=_.disabled,rt=_.getFilesFromEvent,it=_.maxSize,ot=_.minSize,st=_.multiple,at=_.maxFiles,lt=_.onDragEnter,ct=_.onDragLeave,ut=_.onDragOver,ht=_.onDrop,pt=_.onDropAccepted,gt=_.onDropRejected,yt=_.onFileDialogCancel,vt=_.onFileDialogOpen,mt=_.useFsAccessApi,_t=_.preventDropOnDocument,xt=_.noClick,St=_.noKeyboard,Tt=_.noDrag,Mt=_.noDragEventsBubbling,bt=_.validator,Pt=reactExports.useMemo(function(){return typeof vt=="function"?vt:noop},[vt]),wt=reactExports.useMemo(function(){return typeof yt=="function"?yt:noop},[yt]),Bt=reactExports.useRef(null),Ot=reactExports.useRef(null),Ut=reactExports.useReducer(reducer,initialState),Nt=_slicedToArray(Ut,2),zt=Nt[0],jt=Nt[1],Yt=zt.isFocused,qt=zt.isFileDialogActive,Gt=zt.draggedFiles,Xt=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&mt&&canUseFileSystemAccessAPI()),Vt=function(){!Xt.current&&qt&&setTimeout(function(){if(Ot.current){var Dt=Ot.current.files;Dt.length||(jt({type:"closeDialog"}),wt())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",Vt,!1),function(){window.removeEventListener("focus",Vt,!1)}},[Ot,qt,wt,Xt]);var Wt=reactExports.useRef([]),$t=function(Dt){Bt.current&&Bt.current.contains(Dt.target)||(Dt.preventDefault(),Wt.current=[])};reactExports.useEffect(function(){return _t&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",$t,!1)),function(){_t&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",$t))}},[Bt,_t]);var nn=reactExports.useCallback(function(Ft){Ft.preventDefault(),Ft.persist(),pn(Ft),Wt.current=[].concat(_toConsumableArray(Wt.current),[Ft.target]),isEvtWithFiles(Ft)&&Promise.resolve(rt(Ft)).then(function(Dt){isPropagationStopped(Ft)&&!Mt||(jt({draggedFiles:Dt,isDragActive:!0,type:"setDraggedFiles"}),lt&&lt(Ft))})},[rt,lt,Mt]),en=reactExports.useCallback(function(Ft){Ft.preventDefault(),Ft.persist(),pn(Ft);var Dt=isEvtWithFiles(Ft);if(Dt&&Ft.dataTransfer)try{Ft.dataTransfer.dropEffect="copy"}catch{}return Dt&&ut&&ut(Ft),!1},[ut,Mt]),sn=reactExports.useCallback(function(Ft){Ft.preventDefault(),Ft.persist(),pn(Ft);var Dt=Wt.current.filter(function(bn){return Bt.current&&Bt.current.contains(bn)}),on=Dt.indexOf(Ft.target);on!==-1&&Dt.splice(on,1),Wt.current=Dt,!(Dt.length>0)&&(jt({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),isEvtWithFiles(Ft)&&ct&&ct(Ft))},[Bt,ct,Mt]),rn=reactExports.useCallback(function(Ft,Dt){var on=[],bn=[];Ft.forEach(function(Mn){var wn=fileAccepted(Mn,_e),$n=_slicedToArray(wn,2),Gn=$n[0],En=$n[1],zn=fileMatchSize(Mn,ot,it),Vn=_slicedToArray(zn,2),Un=Vn[0],Fn=Vn[1],kn=bt?bt(Mn):null;if(Gn&&Un&&!kn)on.push(Mn);else{var Yn=[En,Fn];kn&&(Yn=Yn.concat(kn)),bn.push({file:Mn,errors:Yn.filter(function(nr){return nr})})}}),(!st&&on.length>1||st&&at>=1&&on.length>at)&&(on.forEach(function(Mn){bn.push({file:Mn,errors:[TOO_MANY_FILES_REJECTION]})}),on.splice(0)),jt({acceptedFiles:on,fileRejections:bn,type:"setFiles"}),ht&&ht(on,bn,Dt),bn.length>0&&gt&&gt(bn,Dt),on.length>0&&pt&&pt(on,Dt)},[jt,st,_e,ot,it,at,ht,pt,gt,bt]),an=reactExports.useCallback(function(Ft){Ft.preventDefault(),Ft.persist(),pn(Ft),Wt.current=[],isEvtWithFiles(Ft)&&Promise.resolve(rt(Ft)).then(function(Dt){isPropagationStopped(Ft)&&!Mt||rn(Dt,Ft)}),jt({type:"reset"})},[rt,rn,Mt]),dn=reactExports.useCallback(function(){if(Xt.current){jt({type:"openDialog"}),Pt();var Ft={multiple:st,types:filePickerOptionsTypes(_e)};window.showOpenFilePicker(Ft).then(function(Dt){return rt(Dt)}).then(function(Dt){rn(Dt,null),jt({type:"closeDialog"})}).catch(function(Dt){isAbort(Dt)?(wt(Dt),jt({type:"closeDialog"})):isSecurityError(Dt)&&(Xt.current=!1,Ot.current&&(Ot.current.value=null,Ot.current.click()))});return}Ot.current&&(jt({type:"openDialog"}),Pt(),Ot.current.value=null,Ot.current.click())},[jt,Pt,wt,mt,rn,_e,st]),Bn=reactExports.useCallback(function(Ft){!Bt.current||!Bt.current.isEqualNode(Ft.target)||(Ft.key===" "||Ft.key==="Enter"||Ft.keyCode===32||Ft.keyCode===13)&&(Ft.preventDefault(),dn())},[Bt,dn]),Nn=reactExports.useCallback(function(){jt({type:"focus"})},[]),gn=reactExports.useCallback(function(){jt({type:"blur"})},[]),Ht=reactExports.useCallback(function(){xt||(isIeOrEdge()?setTimeout(dn,0):dn())},[xt,dn]),xn=function(Dt){return nt?null:Dt},hn=function(Dt){return St?null:xn(Dt)},vn=function(Dt){return Tt?null:xn(Dt)},pn=function(Dt){Mt&&Dt.stopPropagation()},Hn=reactExports.useMemo(function(){return function(){var Ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Dt=Ft.refKey,on=Dt===void 0?"ref":Dt,bn=Ft.role,Mn=Ft.onKeyDown,wn=Ft.onFocus,$n=Ft.onBlur,Gn=Ft.onClick,En=Ft.onDragEnter,zn=Ft.onDragOver,Vn=Ft.onDragLeave,Un=Ft.onDrop,Fn=_objectWithoutProperties(Ft,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:hn(composeEventHandlers(Mn,Bn)),onFocus:hn(composeEventHandlers(wn,Nn)),onBlur:hn(composeEventHandlers($n,gn)),onClick:xn(composeEventHandlers(Gn,Ht)),onDragEnter:vn(composeEventHandlers(En,nn)),onDragOver:vn(composeEventHandlers(zn,en)),onDragLeave:vn(composeEventHandlers(Vn,sn)),onDrop:vn(composeEventHandlers(Un,an)),role:typeof bn=="string"&&bn!==""?bn:"button"},on,Bt),!nt&&!St?{tabIndex:0}:{}),Fn)}},[Bt,Bn,Nn,gn,Ht,nn,en,sn,an,St,Tt,nt]),yn=reactExports.useCallback(function(Ft){Ft.stopPropagation()},[]),Ln=reactExports.useMemo(function(){return function(){var Ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Dt=Ft.refKey,on=Dt===void 0?"ref":Dt,bn=Ft.onChange,Mn=Ft.onClick,wn=_objectWithoutProperties(Ft,_excluded4),$n=_defineProperty({accept:_e,multiple:st,type:"file",style:{display:"none"},onChange:xn(composeEventHandlers(bn,an)),onClick:xn(composeEventHandlers(Mn,yn)),tabIndex:-1},on,Ot);return _objectSpread(_objectSpread({},$n),wn)}},[Ot,_e,st,an,nt]),On=Gt.length,Sn=On>0&&allFilesAccepted({files:Gt,accept:_e,minSize:ot,maxSize:it,multiple:st,maxFiles:at}),jn=On>0&&!Sn;return _objectSpread(_objectSpread({},zt),{},{isDragAccept:Sn,isDragReject:jn,isFocused:Yt&&!nt,getRootProps:Hn,getInputProps:Ln,rootRef:Bt,inputRef:Ot,open:xn(dn)})}function reducer(tt,_){switch(_.type){case"focus":return _objectSpread(_objectSpread({},tt),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},tt),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},tt),{},{isFileDialogActive:!1});case"setDraggedFiles":var _e=_.isDragActive,nt=_.draggedFiles;return _objectSpread(_objectSpread({},tt),{},{draggedFiles:nt,isDragActive:_e});case"setFiles":return _objectSpread(_objectSpread({},tt),{},{acceptedFiles:_.acceptedFiles,fileRejections:_.fileRejections});case"reset":return _objectSpread({},initialState);default:return tt}}function noop(){}/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isobject=function(_){return _!=null&&typeof _=="object"&&Array.isArray(_)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isObject$6=isobject;function isObjectObject(tt){return isObject$6(tt)===!0&&Object.prototype.toString.call(tt)==="[object Object]"}var isPlainObject$2=function(_){var _e,nt;return!(isObjectObject(_)===!1||(_e=_.constructor,typeof _e!="function")||(nt=_e.prototype,isObjectObject(nt)===!1)||nt.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isPlainObject$1=isPlainObject$2,isExtendable$4=function(_){return isPlainObject$1(_)||typeof _=="function"||Array.isArray(_)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var forIn$1=function(_,_e,nt){for(var rt in _)if(_e.call(nt,_[rt],rt,_)===!1)break},isExtendable$3=isExtendable$4,forIn=forIn$1;function mixinDeep(tt,_){for(var _e=arguments.length,nt=0;++nt<_e;){var rt=arguments[nt];isObject$5(rt)&&forIn(rt,copy,tt)}return tt}function copy(tt,_){if(isValidKey$1(_)){var _e=this[_];isObject$5(tt)&&isObject$5(_e)?mixinDeep(_e,tt):this[_]=tt}}function isObject$5(tt){return isExtendable$3(tt)&&!Array.isArray(tt)}function isValidKey$1(tt){return tt!=="__proto__"&&tt!=="constructor"&&tt!=="prototype"}var mixinDeep_1=mixinDeep;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var getValue$1=function(tt,_,_e,nt,rt){if(!isObject$4(tt)||!_)return tt;if(_=toString(_),_e&&(_+="."+toString(_e)),nt&&(_+="."+toString(nt)),rt&&(_+="."+toString(rt)),_ in tt)return tt[_];for(var it=_.split("."),ot=it.length,st=-1;tt&&++st<ot;){for(var at=it[st];at[at.length-1]==="\\";)at=at.slice(0,-1)+"."+it[++st];tt=tt[at]}return tt};function isObject$4(tt){return tt!==null&&(typeof tt=="object"||typeof tt=="function")}function toString(tt){return tt?Array.isArray(tt)?tt.join("."):tt:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var assignSymbols$1=function(tt,_){if(tt===null||typeof tt>"u")throw new TypeError("expected first argument to be an object.");if(typeof _>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return tt;for(var _e=Object.prototype.propertyIsEnumerable,nt=Object(tt),rt=arguments.length,it=0;++it<rt;)for(var ot=Object(arguments[it]),st=Object.getOwnPropertySymbols(ot),at=0;at<st.length;at++){var lt=st[at];_e.call(ot,lt)&&(nt[lt]=ot[lt])}return nt},isExtendable$2=isExtendable$4,assignSymbols=assignSymbols$1,extendShallow$1=Object.assign||function(tt){if(tt===null||typeof tt>"u")throw new TypeError("Cannot convert undefined or null to object");isObject$3(tt)||(tt={});for(var _=1;_<arguments.length;_++){var _e=arguments[_];isString(_e)&&(_e=toObject(_e)),isObject$3(_e)&&(assign$1(tt,_e),assignSymbols(tt,_e))}return tt};function assign$1(tt,_){for(var _e in _)hasOwn$1(_,_e)&&(tt[_e]=_[_e])}function isString(tt){return tt&&typeof tt=="string"}function toObject(tt){var _={};for(var _e in tt)_[_e]=tt[_e];return _}function isObject$3(tt){return tt&&typeof tt=="object"||isExtendable$2(tt)}function hasOwn$1(tt,_){return Object.prototype.hasOwnProperty.call(tt,_)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var extend$1=extendShallow$1,splitString=function(tt,_,_e){if(typeof tt!="string")throw new TypeError("expected a string");typeof _=="function"&&(_e=_,_=null),typeof _=="string"&&(_={sep:_});var nt=extend$1({sep:"."},_),rt=nt.quotes||['"',"'","`"],it;nt.brackets===!0?it={"<":">","(":")","[":"]","{":"}"}:nt.brackets&&(it=nt.brackets);var ot=[],st=[],at=[""],lt=nt.sep,ct=tt.length,ut=-1,ht;function pt(){if(it&&st.length)return it[st[st.length-1]]}for(;++ut<ct;){var gt=tt[ut],yt=tt[ut+1],vt={val:gt,idx:ut,arr:at,str:tt};if(ot.push(vt),gt==="\\"){vt.val=keepEscaping(nt,tt,ut)===!0?gt+yt:yt,vt.escaped=!0,typeof _e=="function"&&_e(vt),at[at.length-1]+=vt.val,ut++;continue}if(it&&it[gt]){st.push(gt);var mt=pt(),_t=ut+1;if(tt.indexOf(mt,_t+1)!==-1)for(;st.length&&_t<ct;){var xt=tt[++_t];if(xt==="\\"){xt++;continue}if(rt.indexOf(xt)!==-1){_t=getClosingQuote(tt,xt,_t+1);continue}if(mt=pt(),st.length&&tt.indexOf(mt,_t+1)===-1)break;if(it[xt]){st.push(xt);continue}mt===xt&&st.pop()}if(ht=_t,ht===-1){at[at.length-1]+=gt;continue}gt=tt.slice(ut,ht+1),vt.val=gt,vt.idx=ut=ht}if(rt.indexOf(gt)!==-1){if(ht=getClosingQuote(tt,gt,ut+1),ht===-1){at[at.length-1]+=gt;continue}keepQuotes(gt,nt)===!0?gt=tt.slice(ut,ht+1):gt=tt.slice(ut+1,ht),vt.val=gt,vt.idx=ut=ht}if(typeof _e=="function"&&(_e(vt,ot),gt=vt.val,ut=vt.idx),vt.val===lt&&vt.split!==!1){at.push("");continue}at[at.length-1]+=vt.val}return at};function getClosingQuote(tt,_,_e,nt){var rt=tt.indexOf(_,_e);return tt.charAt(rt-1)==="\\"?getClosingQuote(tt,_,rt+1):rt}function keepQuotes(tt,_){return _.keepDoubleQuotes===!0&&tt==='"'||_.keepSingleQuotes===!0&&tt==="'"?!0:_.keepQuotes}function keepEscaping(tt,_,_e){return typeof tt.keepEscaping=="function"?tt.keepEscaping(_,_e):tt.keepEscaping===!0||_[_e+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var isExtendable$1=function(_){return typeof _<"u"&&_!==null&&(typeof _=="object"||typeof _=="function")},isObject$2=isExtendable$1,extendShallow=function(_){isObject$2(_)||(_={});for(var _e=arguments.length,nt=1;nt<_e;nt++){var rt=arguments[nt];isObject$2(rt)&&assign(_,rt)}return _};function assign(tt,_){for(var _e in _)hasOwn(_,_e)&&(tt[_e]=_[_e])}function hasOwn(tt,_){return Object.prototype.hasOwnProperty.call(tt,_)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var isExtendable=function(_){return typeof _<"u"&&_!==null&&(typeof _=="object"||typeof _=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var split=splitString,extend=extendShallow,isPlainObject=isPlainObject$2,isObject$1=isExtendable,setValue=function(tt,_,_e){if(!isObject$1(tt)||(Array.isArray(_)&&(_=[].concat.apply([],_).join(".")),typeof _!="string"))return tt;for(var nt=split(_,{sep:".",brackets:!0}).filter(isValidKey),rt=nt.length,it=-1,ot=tt;++it<rt;){var st=nt[it];if(it!==rt-1){isObject$1(ot[st])||(ot[st]={}),ot=ot[st];continue}isPlainObject(ot[st])&&isPlainObject(_e)?ot[st]=extend({},ot[st],_e):ot[st]=_e}return tt};function isValidKey(tt){return tt!=="__proto__"&&tt!=="constructor"&&tt!=="prototype"}var isObject=isExtendable$4,merge=mixinDeep_1,get=getValue$1,set=setValue,mergeValue=function(_,_e,nt){if(!isObject(_))throw new TypeError("expected an object");if(typeof _e!="string"||nt==null)return merge.apply(null,arguments);if(typeof nt=="string")return set(_,_e,nt),_;var rt=get(_,_e);return isObject(nt)&&isObject(rt)&&(nt=merge({},rt,nt)),set(_,_e,nt),_};const join=(...tt)=>tt.filter(Boolean).join(".");function getKeyPath(tt){const _=tt.split(".");return[_.pop(),_.join(".")||void 0]}function getValuesForPaths(tt,_){return Object.entries(pick(tt,_)).reduce((_e,[,{value:nt,disabled:rt,key:it}])=>(_e[it]=rt?void 0:nt,_e),{})}function useCompareMemoize(tt,_){const _e=reactExports.useRef();return(_?dequal:shallow)(tt,_e.current)||(_e.current=tt),_e.current}function useDeepMemo(tt,_){return reactExports.useMemo(tt,useCompareMemoize(_,!0))}function useToggle(tt){const _=reactExports.useRef(null),_e=reactExports.useRef(null),nt=reactExports.useRef(!0);return reactExports.useLayoutEffect(()=>{tt||(_.current.style.height="0px",_.current.style.overflow="hidden")},[]),reactExports.useEffect(()=>{if(nt.current){nt.current=!1;return}let rt;const it=_.current,ot=()=>{tt&&(it.style.removeProperty("height"),it.style.removeProperty("overflow"),_e.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};it.addEventListener("transitionend",ot,{once:!0});const{height:st}=_e.current.getBoundingClientRect();return it.style.height=st+"px",tt||(it.style.overflow="hidden",rt=window.setTimeout(()=>it.style.height="0px",50)),()=>{it.removeEventListener("transitionend",ot),clearTimeout(rt)}},[tt]),{wrapperRef:_,contentRef:_e}}const useVisiblePaths=tt=>{const[_,_e]=reactExports.useState(tt.getVisiblePaths());return reactExports.useEffect(()=>{_e(tt.getVisiblePaths());const nt=tt.useStore.subscribe(tt.getVisiblePaths,_e,{equalityFn:shallow});return()=>nt()},[tt]),_};function useValuesForPath(tt,_,_e){return tt.useStore(rt=>{const it=_objectSpread2(_objectSpread2({},_e),rt.data);return getValuesForPaths(it,_)},shallow)}function usePopin(tt=3){const _=reactExports.useRef(null),_e=reactExports.useRef(null),[nt,rt]=reactExports.useState(!1),it=reactExports.useCallback(()=>rt(!0),[]),ot=reactExports.useCallback(()=>rt(!1),[]);return reactExports.useLayoutEffect(()=>{if(nt){const{bottom:st,top:at,left:lt}=_.current.getBoundingClientRect(),{height:ct}=_e.current.getBoundingClientRect(),ut=st+ct>window.innerHeight-40?"up":"down";_e.current.style.position="fixed",_e.current.style.zIndex="10000",_e.current.style.left=lt+"px",ut==="down"?_e.current.style.top=st+tt+"px":_e.current.style.bottom=window.innerHeight-at+tt+"px"}},[tt,nt]),{popinRef:_,wrapperRef:_e,shown:nt,show:it,hide:ot}}k$1([namesPlugin]);const convertMap={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};v8n.extend({color:()=>tt=>w(tt).isValid()});const schema$2=tt=>v8n().color().test(tt);function convert(tt,{format:_,hasAlpha:_e,isString:nt}){const rt=convertMap[_]+(nt&&_!=="hex"?"String":""),it=tt[rt]();return typeof it=="object"&&!_e?omit(it,["a"]):it}const sanitize$2=(tt,_)=>{const _e=w(tt);if(!_e.isValid())throw Error("Invalid color");return convert(_e,_)},format$1=(tt,_)=>convert(w(tt),_objectSpread2(_objectSpread2({},_),{},{isString:!0,format:"hex"})),normalize$3=({value:tt})=>{const _=I$1(tt),_e=_==="name"?"hex":_,nt=typeof tt=="object"?"a"in tt:_==="hex"&&tt.length===8||/^(rgba)|(hsla)|(hsva)/.test(tt),rt={format:_e,hasAlpha:nt,isString:typeof tt=="string"};return{value:sanitize$2(tt,rt),settings:rt}};var props$2=Object.freeze({__proto__:null,schema:schema$2,sanitize:sanitize$2,format:format$1,normalize:normalize$3});const ColorPreview=styled("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),PickerContainer=styled("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),PickerWrapper=styled("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function convertToRgb(tt,_){return _!=="rgb"?w(tt).toRgb():tt}function Color({value:tt,displayValue:_,settings:_e,onUpdate:nt}){const{emitOnEditStart:rt,emitOnEditEnd:it}=useInputContext(),{format:ot,hasAlpha:st}=_e,{popinRef:at,wrapperRef:lt,shown:ct,show:ut,hide:ht}=usePopin(),pt=reactExports.useRef(0),[gt,yt]=reactExports.useState(()=>convertToRgb(tt,ot)),vt=st?Ce:Ne,mt=()=>{yt(convertToRgb(tt,ot)),ut(),rt()},_t=()=>{ht(),it(),window.clearTimeout(pt.current)},xt=()=>{pt.current=window.setTimeout(_t,500)};return reactExports.useEffect(()=>()=>window.clearTimeout(pt.current),[]),React.createElement(React.Fragment,null,React.createElement(ColorPreview,{ref:at,active:ct,onClick:()=>mt(),style:{color:_}}),ct&&React.createElement(Portal,null,React.createElement(Overlay,{onPointerUp:_t}),React.createElement(PickerWrapper,{ref:lt,onMouseEnter:()=>window.clearTimeout(pt.current),onMouseLeave:St=>St.buttons===0&&xt()},React.createElement(vt,{color:gt,onChange:nt}))))}function ColorComponent(){const{value:tt,displayValue:_,label:_e,onChange:nt,onUpdate:rt,settings:it}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(PickerContainer,null,React.createElement(Color,{value:tt,displayValue:_,onChange:nt,onUpdate:rt,settings:it}),React.createElement(ValueInput,{value:_,onChange:nt,onUpdate:rt})))}var color=_objectSpread2({component:ColorComponent},props$2);function Vector3dComponent(){const{label:tt,displayValue:_,onUpdate:_e,settings:nt}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,tt),React.createElement(Vector,{value:_,settings:nt,onUpdate:_e}))}var vector3d=_objectSpread2({component:Vector3dComponent},getVectorPlugin(["x","y","z"]));const JoystickTrigger=styled("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),JoystickPlayground=styled("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Joystick({value:tt,settings:_,onUpdate:_e}){const nt=reactExports.useRef(),rt=reactExports.useRef(0),it=reactExports.useRef(0),ot=reactExports.useRef(1),[st,at]=reactExports.useState(!1),[lt,ct]=reactExports.useState(!1),[ut,ht]=useTransform(),pt=reactExports.useRef(null),gt=reactExports.useRef(null);reactExports.useLayoutEffect(()=>{if(st){const{top:Ut,left:Nt,width:zt,height:jt}=pt.current.getBoundingClientRect();gt.current.style.left=Nt+zt/2+"px",gt.current.style.top=Ut+jt/2+"px"}},[st]);const{keys:[yt,vt],joystick:mt}=_,_t=mt==="invertY"?1:-1,{[yt]:{step:xt},[vt]:{step:St}}=_,Tt=useTh("sizes","joystickWidth"),Mt=useTh("sizes","joystickHeight"),bt=parseFloat(Tt)*.8/2,Pt=parseFloat(Mt)*.8/2,wt=reactExports.useCallback(()=>{nt.current||(ct(!0),rt.current&&ht({x:rt.current*bt}),it.current&&ht({y:it.current*-Pt}),nt.current=window.setInterval(()=>{_e(Ut=>{const Nt=xt*rt.current*ot.current,zt=_t*St*it.current*ot.current;return Array.isArray(Ut)?{[yt]:Ut[0]+Nt,[vt]:Ut[1]+zt}:{[yt]:Ut[yt]+Nt,[vt]:Ut[vt]+zt}})},16))},[bt,Pt,_e,ht,xt,St,yt,vt,_t]),Bt=reactExports.useCallback(()=>{window.clearTimeout(nt.current),nt.current=void 0,ct(!1)},[]);reactExports.useEffect(()=>{function Ut(Nt){ot.current=multiplyStep(Nt)}return window.addEventListener("keydown",Ut),window.addEventListener("keyup",Ut),()=>{window.clearTimeout(nt.current),window.removeEventListener("keydown",Ut),window.removeEventListener("keyup",Ut)}},[]);const Ot=useDrag(({first:Ut,active:Nt,delta:[zt,jt],movement:[Yt,qt]})=>{Ut&&at(!0);const Gt=clamp(Yt,-bt,bt),Xt=clamp(qt,-Pt,Pt);rt.current=Math.abs(Yt)>Math.abs(Gt)?Math.sign(Yt-Gt):0,it.current=Math.abs(qt)>Math.abs(Xt)?Math.sign(Xt-qt):0;let Vt=tt[yt],Wt=tt[vt];Nt?(rt.current||(Vt+=zt*xt*ot.current,ht({x:Gt})),it.current||(Wt-=_t*jt*St*ot.current,ht({y:Xt})),rt.current||it.current?wt():Bt(),_e({[yt]:Vt,[vt]:Wt})):(at(!1),rt.current=0,it.current=0,ht({x:0,y:0}),Bt())});return React.createElement(JoystickTrigger,_extends({ref:pt},Ot()),st&&React.createElement(Portal,null,React.createElement(JoystickPlayground,{ref:gt,isOutOfBounds:lt},React.createElement("div",null),React.createElement("span",{ref:ut}))))}const Container$1=styled("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Vector2dComponent(){const{label:tt,displayValue:_,onUpdate:_e,settings:nt}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,tt),React.createElement(Container$1,{withJoystick:!!nt.joystick},nt.joystick&&React.createElement(Joystick,{value:_,settings:nt,onUpdate:_e}),React.createElement(Vector,{value:_,settings:nt,onUpdate:_e})))}const _excluded$7=["joystick"],plugin=getVectorPlugin(["x","y"]),normalize$2=tt=>{let{joystick:_=!0}=tt,_e=_objectWithoutProperties$1(tt,_excluded$7);const{value:nt,settings:rt}=plugin.normalize(_e);return{value:nt,settings:_objectSpread2(_objectSpread2({},rt),{},{joystick:_})}};var vector2d=_objectSpread2(_objectSpread2({component:Vector2dComponent},plugin),{},{normalize:normalize$2});const sanitize$1=tt=>{if(tt!==void 0){if(tt instanceof File)try{return URL.createObjectURL(tt)}catch{return}if(typeof tt=="string"&&tt.indexOf("blob:")===0)return tt;throw Error("Invalid image format [undefined | blob |File].")}},schema$1=(tt,_)=>typeof _=="object"&&"image"in _,normalize$1=({image:tt})=>({value:tt});var props$1=Object.freeze({__proto__:null,sanitize:sanitize$1,schema:schema$1,normalize:normalize$1});const ImageContainer=styled("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),DropZone=styled("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),ImagePreview=styled("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),ImageLargePreview=styled("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Instructions=styled("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Remove=styled("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function ImageComponent(){const{label:tt,value:_,onUpdate:_e,disabled:nt}=useInputContext(),{popinRef:rt,wrapperRef:it,shown:ot,show:st,hide:at}=usePopin(),lt=reactExports.useCallback(gt=>{gt.length&&_e(gt[0])},[_e]),ct=reactExports.useCallback(gt=>{gt.stopPropagation(),_e(void 0)},[_e]),{getRootProps:ut,getInputProps:ht,isDragAccept:pt}=useDropzone({maxFiles:1,accept:"image/*",onDrop:lt,disabled:nt});return React.createElement(Row,{input:!0},React.createElement(Label,null,tt),React.createElement(ImageContainer,null,React.createElement(ImagePreview,{ref:rt,hasImage:!!_,onPointerDown:()=>!!_&&st(),onPointerUp:at,style:{backgroundImage:_?`url(${_})`:"none"}}),ot&&!!_&&React.createElement(Portal,null,React.createElement(Overlay,{onPointerUp:at,style:{cursor:"pointer"}}),React.createElement(ImageLargePreview,{ref:it,style:{backgroundImage:`url(${_})`}})),React.createElement(DropZone,ut({isDragAccept:pt}),React.createElement("input",ht()),React.createElement(Instructions,null,pt?"drop image":"click or drop")),React.createElement(Remove,{onClick:ct,disabled:!_})))}var image=_objectSpread2({component:ImageComponent},props$1);const number=v8n().number(),schema=(tt,_)=>v8n().array().length(2).every.number().test(tt)&&v8n().schema({min:number,max:number}).test(_),format=tt=>({min:tt[0],max:tt[1]}),sanitize=(tt,{bounds:[_,_e]},nt)=>{const rt=Array.isArray(tt)?format(tt):tt,it={min:nt[0],max:nt[1]},{min:ot,max:st}=_objectSpread2(_objectSpread2({},it),rt);return[clamp(Number(ot),_,Math.max(_,st)),clamp(Number(st),Math.min(_e,ot),_e)]},normalize=({value:tt,min:_,max:_e})=>{const nt={min:_,max:_e},rt=normalizeKeyedNumberSettings(format(tt),{min:nt,max:nt}),it=[_,_e],ot=_objectSpread2(_objectSpread2({},rt),{},{bounds:it});return{value:sanitize(format(tt),ot,tt),settings:ot}};var props=Object.freeze({__proto__:null,schema,format,sanitize,normalize});const _excluded$6=["value","bounds","onDrag"],_excluded2$1=["bounds"],Container=styled("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function IntervalSlider(tt){let{value:_,bounds:[_e,nt],onDrag:rt}=tt,it=_objectWithoutProperties$1(tt,_excluded$6);const ot=reactExports.useRef(null),st=reactExports.useRef(null),at=reactExports.useRef(null),lt=reactExports.useRef(0),ct=useTh("sizes","scrubberWidth"),ut=useDrag(({event:gt,first:yt,xy:[vt],movement:[mt],memo:_t={}})=>{if(yt){const{width:St,left:Tt}=ot.current.getBoundingClientRect();lt.current=St-parseFloat(ct);const Mt=(gt==null?void 0:gt.target)===st.current||(gt==null?void 0:gt.target)===at.current;_t.pos=invertedRange((vt-Tt)/St,_e,nt);const bt=Math.abs(_t.pos-_.min)-Math.abs(_t.pos-_.max);_t.key=bt<0||bt===0&&_t.pos<=_.min?"min":"max",Mt&&(_t.pos=_[_t.key])}const xt=_t.pos+invertedRange(mt/lt.current,0,nt-_e);return rt({[_t.key]:sanitizeStep(xt,it[_t.key])}),_t}),ht=`calc(${range(_.min,_e,nt)} * (100% - ${ct} - 8px) + 4px)`,pt=`calc(${1-range(_.max,_e,nt)} * (100% - ${ct} - 8px) + 4px)`;return React.createElement(RangeWrapper,_extends({ref:ot},ut()),React.createElement(Range,null,React.createElement(Indicator,{style:{left:ht,right:pt}})),React.createElement(Scrubber,{position:"left",ref:st,style:{left:ht}}),React.createElement(Scrubber,{position:"right",ref:at,style:{right:pt}}))}function IntervalComponent(){const{label:tt,displayValue:_,onUpdate:_e,settings:nt}=useInputContext(),rt=_objectWithoutProperties$1(nt,_excluded2$1);return React.createElement(React.Fragment,null,React.createElement(Row,{input:!0},React.createElement(Label,null,tt),React.createElement(Container,null,React.createElement(IntervalSlider,_extends({value:_},nt,{onDrag:_e})),React.createElement(Vector,{value:_,settings:rt,onUpdate:_e,innerLabelTrim:0}))))}var interval=_objectSpread2({component:IntervalComponent},props);const createEventEmitter=()=>{const tt=new Map;return{on:(_,_e)=>{let nt=tt.get(_);nt===void 0&&(nt=new Set,tt.set(_,nt)),nt.add(_e)},off:(_,_e)=>{const nt=tt.get(_);nt!==void 0&&(nt.delete(_e),nt.size===0&&tt.delete(_))},emit:(_,..._e)=>{const nt=tt.get(_);if(nt!==void 0)for(const rt of nt)rt(..._e)}}},_excluded$5=["type","value"],_excluded2=["onChange","transient","onEditStart","onEditEnd"],Store=function(){const _=create(subscribeWithSelector(()=>({data:{}}))),_e=createEventEmitter();this.storeId=getUid(),this.useStore=_;const nt={},rt=new Set;this.getVisiblePaths=()=>{const ot=this.getData(),st=Object.keys(ot),at=[];Object.entries(nt).forEach(([ct,ut])=>{ut.render&&st.some(ht=>ht.indexOf(ct)===0)&&!ut.render(this.get)&&at.push(ct+".")});const lt=[];return rt.forEach(ct=>{ct in ot&&ot[ct].__refCount>0&&at.every(ut=>ct.indexOf(ut)===-1)&&(!ot[ct].render||ot[ct].render(this.get))&&lt.push(ct)}),lt},this.setOrderedPaths=ot=>{ot.forEach(st=>rt.add(st))},this.orderPaths=ot=>(this.setOrderedPaths(ot),ot),this.disposePaths=ot=>{_.setState(st=>{const at=st.data;return ot.forEach(lt=>{if(lt in at){const ct=at[lt];ct.__refCount--,ct.__refCount===0&&ct.type in SpecialInputs&&delete at[lt]}}),{data:at}})},this.dispose=()=>{_.setState(()=>({data:{}}))},this.getFolderSettings=ot=>nt[ot]||{},this.getData=()=>_.getState().data,this.addData=(ot,st)=>{_.setState(at=>{const lt=at.data;return Object.entries(ot).forEach(([ct,ut])=>{let ht=lt[ct];if(ht){const{type:pt,value:gt}=ut,yt=_objectWithoutProperties$1(ut,_excluded$5);pt!==ht.type?warn(LevaErrors.INPUT_TYPE_OVERRIDE,pt):((ht.__refCount===0||st)&&Object.assign(ht,yt),ht.__refCount++)}else lt[ct]=_objectSpread2(_objectSpread2({},ut),{},{__refCount:1})}),{data:lt}})},this.setValueAtPath=(ot,st,at)=>{_.setState(lt=>{const ct=lt.data;return updateInput(ct[ot],st,ot,this,at),{data:ct}})},this.setSettingsAtPath=(ot,st)=>{_.setState(at=>{const lt=at.data;return lt[ot].settings=_objectSpread2(_objectSpread2({},lt[ot].settings),st),{data:lt}})},this.disableInputAtPath=(ot,st)=>{_.setState(at=>{const lt=at.data;return lt[ot].disabled=st,{data:lt}})},this.set=(ot,st)=>{_.setState(at=>{const lt=at.data;return Object.entries(ot).forEach(([ct,ut])=>{try{updateInput(lt[ct],ut,void 0,void 0,st)}catch{}}),{data:lt}})},this.getInput=ot=>{try{return this.getData()[ot]}catch{warn(LevaErrors.PATH_DOESNT_EXIST,ot)}},this.get=ot=>{var st;return(st=this.getInput(ot))===null||st===void 0?void 0:st.value},this.emitOnEditStart=ot=>{_e.emit(`onEditStart:${ot}`,this.get(ot),ot,_objectSpread2(_objectSpread2({},this.getInput(ot)),{},{get:this.get}))},this.emitOnEditEnd=ot=>{_e.emit(`onEditEnd:${ot}`,this.get(ot),ot,_objectSpread2(_objectSpread2({},this.getInput(ot)),{},{get:this.get}))},this.subscribeToEditStart=(ot,st)=>{const at=`onEditStart:${ot}`;return _e.on(at,st),()=>_e.off(at,st)},this.subscribeToEditEnd=(ot,st)=>{const at=`onEditEnd:${ot}`;return _e.on(at,st),()=>_e.off(at,st)};const it=(ot,st,at)=>{const lt={};return Object.entries(ot).forEach(([ct,ut])=>{if(ct==="")return warn(LevaErrors.EMPTY_KEY);let ht=join(st,ct);if(ut.type===SpecialInputs.FOLDER){const pt=it(ut.schema,ht,at);Object.assign(lt,pt),ht in nt||(nt[ht]=ut.settings)}else if(ct in at)warn(LevaErrors.DUPLICATE_KEYS,ct,ht,at[ct].path);else{const pt=normalizeInput(ut,ct,ht,lt);if(pt){const{type:gt,options:yt,input:vt}=pt,{onChange:mt,transient:_t,onEditStart:xt,onEditEnd:St}=yt,Tt=_objectWithoutProperties$1(yt,_excluded2);lt[ht]=_objectSpread2(_objectSpread2(_objectSpread2({type:gt},Tt),vt),{},{fromPanel:!0}),at[ct]={path:ht,onChange:mt,transient:_t,onEditStart:xt,onEditEnd:St}}else warn(LevaErrors.UNKNOWN_INPUT,ht,ut)}}),lt};this.getDataFromSchema=ot=>{const st={};return[it(ot,"",st),st]}},levaStore=new Store,defaultSettings$2={collapsed:!1};function folder(tt,_){return{type:SpecialInputs.FOLDER,schema:tt,settings:_objectSpread2(_objectSpread2({},defaultSettings$2),_)}}const defaultSettings$1={disabled:!1};function button(tt,_){return{type:SpecialInputs.BUTTON,onClick:tt,settings:_objectSpread2(_objectSpread2({},defaultSettings$1),_)}}const isInput=tt=>"__levaInput"in tt,buildTree=(tt,_)=>{const _e={},nt=_?_.toLowerCase():null;return tt.forEach(rt=>{const[it,ot]=getKeyPath(rt);(!nt||it.toLowerCase().indexOf(nt)>-1)&&mergeValue(_e,ot,{[it]:{__levaInput:!0,path:rt}})}),_e},_excluded$4=["type","label","path","valueKey","value","settings","setValue","disabled"];function ControlInput(tt){let{type:_,label:_e,path:nt,valueKey:rt,value:it,settings:ot,setValue:st,disabled:at}=tt,lt=_objectWithoutProperties$1(tt,_excluded$4);const{displayValue:ct,onChange:ut,onUpdate:ht}=useInputSetters({type:_,value:it,settings:ot,setValue:st}),pt=Plugins[_].component;return pt?React.createElement(InputContext.Provider,{value:_objectSpread2({key:rt,path:nt,id:""+nt,label:_e,displayValue:ct,value:it,onChange:ut,onUpdate:ht,settings:ot,setValue:st,disabled:at},lt)},React.createElement(StyledInputWrapper$1,{disabled:at},React.createElement(pt,null))):(warn(LevaErrors.NO_COMPONENT_FOR_TYPE,_,nt),null)}const StyledButton=styled("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Button({onClick:tt,settings:_,label:_e}){const nt=useStoreContext();return React.createElement(Row,null,React.createElement(StyledButton,{disabled:_.disabled,onClick:()=>tt(nt.get)},_e))}const StyledButtonGroup=styled("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),StyledButtonGroupButton=styled("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),getOpts=({label:tt,opts:_})=>{let _e=typeof tt=="string"&&tt.trim()===""?null:tt,nt=_;return typeof _.opts=="object"&&(nt.label!==void 0&&(_e=_.label),nt=_.opts),{label:_e,opts:nt}};function ButtonGroup(tt){const{label:_,opts:_e}=getOpts(tt),nt=useStoreContext();return React.createElement(Row,{input:!!_},_&&React.createElement(Label,null,_),React.createElement(StyledButtonGroup,null,Object.entries(_e).map(([rt,it])=>React.createElement(StyledButtonGroupButton,{key:rt,onClick:()=>it(nt.get)},rt))))}const Canvas=styled("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),POINTS=100;function push(tt,_){tt.push(_),tt.length>POINTS&&tt.shift()}const MonitorCanvas=reactExports.forwardRef(function({initialValue:tt},_){const _e=useTh("colors","highlight3"),nt=useTh("colors","elevation2"),rt=useTh("colors","highlight1"),[it,ot]=reactExports.useMemo(()=>[w(rt).alpha(.4).toRgbString(),w(rt).alpha(.1).toRgbString()],[rt]),st=reactExports.useRef([tt]),at=reactExports.useRef(tt),lt=reactExports.useRef(tt),ct=reactExports.useRef(),ut=reactExports.useCallback((gt,yt)=>{if(!gt)return;const{width:vt,height:mt}=gt,_t=new Path2D,xt=vt/POINTS,St=mt*.05;for(let bt=0;bt<st.current.length;bt++){const Pt=range(st.current[bt],at.current,lt.current),wt=xt*bt,Bt=mt-Pt*(mt-St*2)-St;_t.lineTo(wt,Bt)}yt.clearRect(0,0,vt,mt);const Tt=new Path2D(_t);Tt.lineTo(xt*(st.current.length+1),mt),Tt.lineTo(0,mt),Tt.lineTo(0,0);const Mt=yt.createLinearGradient(0,0,0,mt);Mt.addColorStop(0,it),Mt.addColorStop(1,ot),yt.fillStyle=Mt,yt.fill(Tt),yt.strokeStyle=nt,yt.lineJoin="round",yt.lineWidth=14,yt.stroke(_t),yt.strokeStyle=_e,yt.lineWidth=2,yt.stroke(_t)},[_e,nt,it,ot]),[ht,pt]=useCanvas2d(ut);return reactExports.useImperativeHandle(_,()=>({frame:gt=>{(at.current===void 0||gt<at.current)&&(at.current=gt),(lt.current===void 0||gt>lt.current)&&(lt.current=gt),push(st.current,gt),ct.current=requestAnimationFrame(()=>ut(ht.current,pt.current))}}),[ht,pt,ut]),reactExports.useEffect(()=>()=>cancelAnimationFrame(ct.current),[]),React.createElement(Canvas,{ref:ht})}),parse=tt=>Number.isFinite(tt)?tt.toPrecision(2):tt.toString(),MonitorLog=reactExports.forwardRef(function({initialValue:tt},_){const[_e,nt]=reactExports.useState(parse(tt));return reactExports.useImperativeHandle(_,()=>({frame:rt=>nt(parse(rt))}),[]),React.createElement("div",null,_e)});function getValue(tt){return typeof tt=="function"?tt():tt.current}function Monitor({label:tt,objectOrFn:_,settings:_e}){const nt=reactExports.useRef(),rt=reactExports.useRef(getValue(_));return reactExports.useEffect(()=>{const it=window.setInterval(()=>{var ot;document.hidden||(ot=nt.current)===null||ot===void 0||ot.frame(getValue(_))},_e.interval);return()=>window.clearInterval(it)},[_,_e.interval]),React.createElement(Row,{input:!0},React.createElement(Label,{align:"top"},tt),_e.graph?React.createElement(MonitorCanvas,{ref:nt,initialValue:rt.current}):React.createElement(MonitorLog,{ref:nt,initialValue:rt.current}))}const _excluded$3=["type","label","key"],specialComponents={[SpecialInputs.BUTTON]:Button,[SpecialInputs.BUTTON_GROUP]:ButtonGroup,[SpecialInputs.MONITOR]:Monitor},Control=React.memo(({path:tt})=>{const[_,{set:_e,setSettings:nt,disable:rt,storeId:it,emitOnEditStart:ot,emitOnEditEnd:st}]=useInput(tt);if(!_)return null;const{type:at,label:lt,key:ct}=_,ut=_objectWithoutProperties$1(_,_excluded$3);if(at in SpecialInputs){const ht=specialComponents[at];return React.createElement(ht,_extends({label:lt,path:tt},ut))}return at in Plugins?React.createElement(ControlInput,_extends({key:it+tt,type:at,label:lt,storeId:it,path:tt,valueKey:ct,setValue:_e,setSettings:nt,disable:rt,emitOnEditStart:ot,emitOnEditEnd:st},ut)):(log(LevaErrors.UNSUPPORTED_INPUT,at,tt),null)});function FolderTitle({toggle:tt,toggled:_,name:_e}){return React.createElement(StyledTitle,{onClick:()=>tt()},React.createElement(Chevron,{toggled:_}),React.createElement("div",null,_e))}const Folder=({name:tt,path:_,tree:_e})=>{const nt=useStoreContext(),rt=join(_,tt),{collapsed:it,color:ot}=nt.getFolderSettings(rt),[st,at]=reactExports.useState(!it),lt=reactExports.useRef(null),ct=useTh("colors","folderWidgetColor"),ut=useTh("colors","folderTextColor");return reactExports.useLayoutEffect(()=>{lt.current.style.setProperty("--leva-colors-folderWidgetColor",ot||ct),lt.current.style.setProperty("--leva-colors-folderTextColor",ot||ut)},[ot,ct,ut]),React.createElement(StyledFolder,{ref:lt},React.createElement(FolderTitle,{name:tt,toggled:st,toggle:()=>at(ht=>!ht)}),React.createElement(TreeWrapper,{parent:rt,tree:_e,toggled:st}))},TreeWrapper=React.memo(({isRoot:tt=!1,fill:_=!1,flat:_e=!1,parent:nt,tree:rt,toggled:it})=>{const{wrapperRef:ot,contentRef:st}=useToggle(it),at=useStoreContext(),lt=([ut,ht])=>{var pt;return(isInput(ht)?(pt=at.getInput(ht.path))===null||pt===void 0?void 0:pt.order:at.getFolderSettings(join(nt,ut)).order)||0},ct=Object.entries(rt).sort((ut,ht)=>lt(ut)-lt(ht));return React.createElement(StyledWrapper,{ref:ot,isRoot:tt,fill:_,flat:_e},React.createElement(StyledContent,{ref:st,isRoot:tt,toggled:it},ct.map(([ut,ht])=>isInput(ht)?React.createElement(Control,{key:ht.path,valueKey:ht.valueKey,path:ht.path}):React.createElement(Folder,{key:ut,name:ut,path:nt,tree:ht}))))}),StyledRoot=styled("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${StyledInputRow}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),iconWidth=40,Icon=styled("i",{$flexCenter:"",width:iconWidth,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),StyledTitleWithFilter=styled("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),FilterWrapper=styled("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Icon}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),StyledFilterInput=styled("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),TitleContainer=styled("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:iconWidth}}}}),FilterInput=React.forwardRef(({setFilter:tt,toggle:_},_e)=>{const[nt,rt]=reactExports.useState(""),it=reactExports.useMemo(()=>debounce(tt,250),[tt]),ot=()=>{tt(""),rt("")},st=at=>{const lt=at.currentTarget.value;_(!0),rt(lt)};return reactExports.useEffect(()=>{it(nt)},[nt,it]),React.createElement(React.Fragment,null,React.createElement(StyledFilterInput,{ref:_e,value:nt,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:at=>at.stopPropagation(),onChange:st}),React.createElement(Icon,{onClick:()=>ot(),style:{visibility:nt?"visible":"hidden"}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function TitleWithFilter({setFilter:tt,onDrag:_,onDragStart:_e,onDragEnd:nt,toggle:rt,toggled:it,title:ot,drag:st,filterEnabled:at,from:lt}){const[ct,ut]=reactExports.useState(!1),ht=reactExports.useRef(null);reactExports.useEffect(()=>{var gt,yt;ct?(gt=ht.current)===null||gt===void 0||gt.focus():(yt=ht.current)===null||yt===void 0||yt.blur()},[ct]);const pt=useDrag(({offset:[gt,yt],first:vt,last:mt})=>{_({x:gt,y:yt}),vt&&_e({x:gt,y:yt}),mt&&nt({x:gt,y:yt})},{filterTaps:!0,from:({offset:[gt,yt]})=>[(lt==null?void 0:lt.x)||gt,(lt==null?void 0:lt.y)||yt]});return reactExports.useEffect(()=>{const gt=yt=>{yt.key==="L"&&yt.shiftKey&&yt.metaKey&&ut(vt=>!vt)};return window.addEventListener("keydown",gt),()=>window.removeEventListener("keydown",gt)},[]),React.createElement(React.Fragment,null,React.createElement(StyledTitleWithFilter,{mode:st?"drag":void 0},React.createElement(Icon,{active:!it,onClick:()=>rt()},React.createElement(Chevron,{toggled:it,width:12,height:8})),React.createElement(TitleContainer,_extends({},st?pt():{},{drag:st,filterEnabled:at}),ot===void 0&&st?React.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},React.createElement("circle",{cx:"2",cy:"2",r:"2"}),React.createElement("circle",{cx:"14",cy:"2",r:"2"}),React.createElement("circle",{cx:"26",cy:"2",r:"2"}),React.createElement("circle",{cx:"2",cy:"12",r:"2"}),React.createElement("circle",{cx:"14",cy:"12",r:"2"}),React.createElement("circle",{cx:"26",cy:"12",r:"2"})):ot),at&&React.createElement(Icon,{active:ct,onClick:()=>ut(gt=>!gt)},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},React.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),React.createElement(FilterWrapper,{toggled:ct},React.createElement(FilterInput,{ref:ht,setFilter:tt,toggle:rt})))}const _excluded$2=["store","hidden","theme","collapsed"];function LevaRoot(tt){let{store:_,hidden:_e=!1,theme:nt,collapsed:rt=!1}=tt,it=_objectWithoutProperties$1(tt,_excluded$2);const ot=useDeepMemo(()=>mergeTheme(nt),[nt]),[st,at]=reactExports.useState(!rt),lt=typeof rt=="object"?!rt.collapsed:st,ct=reactExports.useMemo(()=>typeof rt=="object"?ut=>{typeof ut=="function"?rt.onChange(!ut(!rt.collapsed)):rt.onChange(!ut)}:at,[rt]);return!_||_e?null:React.createElement(ThemeContext.Provider,{value:ot},React.createElement(LevaCore,_extends({store:_},it,{toggled:lt,setToggle:ct,rootClass:ot.className})))}const LevaCore=React.memo(({store:tt,rootClass:_,fill:_e=!1,flat:nt=!1,neverHide:rt=!1,oneLineLabels:it=!1,titleBar:ot={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:st=!1,toggled:at,setToggle:lt})=>{var ct,ut;const ht=useVisiblePaths(tt),[pt,gt]=reactExports.useState(""),yt=reactExports.useMemo(()=>buildTree(ht,pt),[ht,pt]),[vt,mt]=useTransform(),_t=rt||ht.length>0,xt=typeof ot=="object"&&ot.title||void 0,St=typeof ot=="object"&&(ct=ot.drag)!==null&&ct!==void 0?ct:!0,Tt=typeof ot=="object"&&(ut=ot.filter)!==null&&ut!==void 0?ut:!0,Mt=typeof ot=="object"&&ot.position||void 0,bt=typeof ot=="object"&&ot.onDrag||void 0,Pt=typeof ot=="object"&&ot.onDragStart||void 0,wt=typeof ot=="object"&&ot.onDragEnd||void 0;return React.useEffect(()=>{mt({x:Mt==null?void 0:Mt.x,y:Mt==null?void 0:Mt.y})},[Mt,mt]),globalStyles(),React.createElement(PanelSettingsContext.Provider,{value:{hideCopyButton:st}},React.createElement(StyledRoot,{ref:vt,className:_,fill:_e,flat:nt,oneLineLabels:it,hideTitleBar:!ot,style:{display:_t?"block":"none"}},ot&&React.createElement(TitleWithFilter,{onDrag:Bt=>{mt(Bt),bt==null||bt(Bt)},onDragStart:Bt=>Pt==null?void 0:Pt(Bt),onDragEnd:Bt=>wt==null?void 0:wt(Bt),setFilter:gt,toggle:Bt=>lt(Ot=>Bt??!Ot),toggled:at,title:xt,drag:St,filterEnabled:Tt,from:Mt}),_t&&React.createElement(StoreContext.Provider,{value:tt},React.createElement(TreeWrapper,{isRoot:!0,fill:_e,flat:nt,tree:yt,toggled:at}))))}),_excluded$1=["isRoot"];let rootInitialized=!1,rootEl=null;function Leva(tt){let{isRoot:_=!1}=tt,_e=_objectWithoutProperties$1(tt,_excluded$1);return reactExports.useEffect(()=>(rootInitialized=!0,!_&&rootEl&&(rootEl.remove(),rootEl=null),()=>{_||(rootInitialized=!1)}),[_]),React.createElement(LevaRoot,_extends({store:levaStore},_e))}function useRenderRoot(tt){reactExports.useEffect(()=>{tt&&!rootInitialized&&(rootEl||(rootEl=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(rootEl),render(React.createElement(Leva,{isRoot:!0}),rootEl))),rootInitialized=!0)},[tt])}function parseArgs(tt,_,_e,nt,rt){let it,ot,st,at,lt;return typeof tt=="string"?(ot=tt,it=_,Array.isArray(_e)?lt=_e:_e&&("store"in _e?(at=_e,lt=nt):(st=_e,Array.isArray(nt)?lt=nt:(at=nt,lt=rt)))):(it=tt,Array.isArray(_)?lt=_:(at=_,lt=_e)),{schema:it,folderName:ot,folderSettings:st,hookSettings:at,deps:lt||[]}}function useControls(tt,_,_e,nt,rt){const{folderName:it,schema:ot,folderSettings:st,hookSettings:at,deps:lt}=parseArgs(tt,_,_e,nt,rt),ct=typeof ot=="function",ut=reactExports.useRef(!1),ht=reactExports.useRef(!0),pt=useDeepMemo(()=>{ut.current=!0;const Ot=typeof ot=="function"?ot():ot;return it?{[it]:folder(Ot,st)}:Ot},lt),gt=!(at!=null&&at.store);useRenderRoot(gt);const[yt]=reactExports.useState(()=>(at==null?void 0:at.store)||levaStore),[vt,mt]=reactExports.useMemo(()=>yt.getDataFromSchema(pt),[yt,pt]),[_t,xt,St,Tt,Mt]=reactExports.useMemo(()=>{const Ot=[],Ut=[],Nt={},zt={},jt={};return Object.values(mt).forEach(({path:Yt,onChange:qt,onEditStart:Gt,onEditEnd:Xt,transient:Vt})=>{Ot.push(Yt),qt?(Nt[Yt]=qt,Vt||Ut.push(Yt)):Ut.push(Yt),Gt&&(zt[Yt]=Gt),Xt&&(jt[Yt]=Xt)}),[Ot,Ut,Nt,zt,jt]},[mt]),bt=reactExports.useMemo(()=>yt.orderPaths(_t),[_t,yt]),Pt=useValuesForPath(yt,xt,vt),wt=reactExports.useCallback(Ot=>{const Ut=Object.entries(Ot).reduce((Nt,[zt,jt])=>Object.assign(Nt,{[mt[zt].path]:jt}),{});yt.set(Ut,!1)},[yt,mt]),Bt=reactExports.useCallback(Ot=>yt.get(mt[Ot].path),[yt,mt]);return reactExports.useEffect(()=>{const Ot=!ht.current&&ut.current;return yt.addData(vt,Ot),ht.current=!1,ut.current=!1,()=>yt.disposePaths(bt)},[yt,bt,vt]),reactExports.useEffect(()=>{const Ot=[];return Object.entries(St).forEach(([Ut,Nt])=>{Nt(yt.get(Ut),Ut,_objectSpread2({initial:!0,get:yt.get},yt.getInput(Ut)));const zt=yt.useStore.subscribe(jt=>{const Yt=jt.data[Ut];return[Yt.disabled?void 0:Yt.value,Yt]},([jt,Yt])=>Nt(jt,Ut,_objectSpread2({initial:!1,get:yt.get},Yt)),{equalityFn:shallow});Ot.push(zt)}),()=>Ot.forEach(Ut=>Ut())},[yt,St]),reactExports.useEffect(()=>{const Ot=[];return Object.entries(Tt).forEach(([Ut,Nt])=>Ot.push(yt.subscribeToEditStart(Ut,Nt))),Object.entries(Mt).forEach(([Ut,Nt])=>Ot.push(yt.subscribeToEditEnd(Ut,Nt))),()=>Ot.forEach(Ut=>Ut())},[Tt,Mt,yt]),ct?[Pt,wt,Bt]:Pt}register(LevaInputs.SELECT,select);register(LevaInputs.IMAGE,image);register(LevaInputs.NUMBER,number$1);register(LevaInputs.COLOR,color);register(LevaInputs.STRING,string);register(LevaInputs.BOOLEAN,boolean);register(LevaInputs.INTERVAL,interval);register(LevaInputs.VECTOR3D,vector3d);register(LevaInputs.VECTOR2D,vector2d);/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var durl=function(tt){return URL.createObjectURL(new Blob([tt],{type:"text/javascript"}))};try{URL.revokeObjectURL(durl(""))}catch{durl=function(_){return"data:application/javascript;charset=UTF-8,"+encodeURI(_)}}var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(tt,_){for(var _e=new u16(31),nt=0;nt<31;++nt)_e[nt]=_+=1<<tt[nt-1];for(var rt=new u32(_e[30]),nt=1;nt<30;++nt)for(var it=_e[nt];it<_e[nt+1];++it)rt[it]=it-_e[nt]<<5|nt;return[_e,rt]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],rev=new u16(32768);for(var i=0;i<32768;++i){var x=(i&43690)>>>1|(i&21845)<<1;x=(x&52428)>>>2|(x&13107)<<2,x=(x&61680)>>>4|(x&3855)<<4,rev[i]=((x&65280)>>>8|(x&255)<<8)>>>1}var hMap=function(tt,_,_e){for(var nt=tt.length,rt=0,it=new u16(_);rt<nt;++rt)++it[tt[rt]-1];var ot=new u16(_);for(rt=0;rt<_;++rt)ot[rt]=ot[rt-1]+it[rt-1]<<1;var st;if(_e){st=new u16(1<<_);var at=15-_;for(rt=0;rt<nt;++rt)if(tt[rt])for(var lt=rt<<4|tt[rt],ct=_-tt[rt],ut=ot[tt[rt]-1]++<<ct,ht=ut|(1<<ct)-1;ut<=ht;++ut)st[rev[ut]>>>at]=lt}else for(st=new u16(nt),rt=0;rt<nt;++rt)tt[rt]&&(st[rt]=rev[ot[tt[rt]-1]++]>>>15-tt[rt]);return st},flt=new u8(288);for(var i=0;i<144;++i)flt[i]=8;for(var i=144;i<256;++i)flt[i]=9;for(var i=256;i<280;++i)flt[i]=7;for(var i=280;i<288;++i)flt[i]=8;var fdt=new u8(32);for(var i=0;i<32;++i)fdt[i]=5;var flrm=hMap(flt,9,1),fdrm=hMap(fdt,5,1),max=function(tt){for(var _=tt[0],_e=1;_e<tt.length;++_e)tt[_e]>_&&(_=tt[_e]);return _},bits=function(tt,_,_e){var nt=_/8|0;return(tt[nt]|tt[nt+1]<<8)>>(_&7)&_e},bits16=function(tt,_){var _e=_/8|0;return(tt[_e]|tt[_e+1]<<8|tt[_e+2]<<16)>>(_&7)},shft=function(tt){return(tt/8|0)+(tt&7&&1)},slc=function(tt,_,_e){(_==null||_<0)&&(_=0),(_e==null||_e>tt.length)&&(_e=tt.length);var nt=new(tt instanceof u16?u16:tt instanceof u32?u32:u8)(_e-_);return nt.set(tt.subarray(_,_e)),nt},inflt=function(tt,_,_e){var nt=tt.length;if(!nt||_e&&!_e.l&&nt<5)return _||new u8(0);var rt=!_||_e,it=!_e||_e.i;_e||(_e={}),_||(_=new u8(nt*3));var ot=function(rn){var an=_.length;if(rn>an){var dn=new u8(Math.max(an*2,rn));dn.set(_),_=dn}},st=_e.f||0,at=_e.p||0,lt=_e.b||0,ct=_e.l,ut=_e.d,ht=_e.m,pt=_e.n,gt=nt*8;do{if(!ct){_e.f=st=bits(tt,at,1);var yt=bits(tt,at+1,3);if(at+=3,yt)if(yt==1)ct=flrm,ut=fdrm,ht=9,pt=5;else if(yt==2){var xt=bits(tt,at,31)+257,St=bits(tt,at+10,15)+4,Tt=xt+bits(tt,at+5,31)+1;at+=14;for(var Mt=new u8(Tt),bt=new u8(19),Pt=0;Pt<St;++Pt)bt[clim[Pt]]=bits(tt,at+Pt*3,7);at+=St*3;for(var wt=max(bt),Bt=(1<<wt)-1,Ot=hMap(bt,wt,1),Pt=0;Pt<Tt;){var Ut=Ot[bits(tt,at,Bt)];at+=Ut&15;var vt=Ut>>>4;if(vt<16)Mt[Pt++]=vt;else{var Nt=0,zt=0;for(vt==16?(zt=3+bits(tt,at,3),at+=2,Nt=Mt[Pt-1]):vt==17?(zt=3+bits(tt,at,7),at+=3):vt==18&&(zt=11+bits(tt,at,127),at+=7);zt--;)Mt[Pt++]=Nt}}var jt=Mt.subarray(0,xt),Yt=Mt.subarray(xt);ht=max(jt),pt=max(Yt),ct=hMap(jt,ht,1),ut=hMap(Yt,pt,1)}else throw"invalid block type";else{var vt=shft(at)+4,mt=tt[vt-4]|tt[vt-3]<<8,_t=vt+mt;if(_t>nt){if(it)throw"unexpected EOF";break}rt&&ot(lt+mt),_.set(tt.subarray(vt,_t),lt),_e.b=lt+=mt,_e.p=at=_t*8;continue}if(at>gt){if(it)throw"unexpected EOF";break}}rt&&ot(lt+131072);for(var qt=(1<<ht)-1,Gt=(1<<pt)-1,Xt=at;;Xt=at){var Nt=ct[bits16(tt,at)&qt],Vt=Nt>>>4;if(at+=Nt&15,at>gt){if(it)throw"unexpected EOF";break}if(!Nt)throw"invalid length/literal";if(Vt<256)_[lt++]=Vt;else if(Vt==256){Xt=at,ct=null;break}else{var Wt=Vt-254;if(Vt>264){var Pt=Vt-257,$t=fleb[Pt];Wt=bits(tt,at,(1<<$t)-1)+fl[Pt],at+=$t}var nn=ut[bits16(tt,at)&Gt],en=nn>>>4;if(!nn)throw"invalid distance";at+=nn&15;var Yt=fd[en];if(en>3){var $t=fdeb[en];Yt+=bits16(tt,at)&(1<<$t)-1,at+=$t}if(at>gt){if(it)throw"unexpected EOF";break}rt&&ot(lt+131072);for(var sn=lt+Wt;lt<sn;lt+=4)_[lt]=_[lt-Yt],_[lt+1]=_[lt+1-Yt],_[lt+2]=_[lt+2-Yt],_[lt+3]=_[lt+3-Yt];lt=sn}}_e.l=ct,_e.p=Xt,_e.b=lt,ct&&(st=1,_e.m=ht,_e.d=ut,_e.n=pt)}while(!st);return lt==_.length?_:slc(_,0,lt)},et=new u8(0),zlv=function(tt){if((tt[0]&15)!=8||tt[0]>>>4>7||(tt[0]<<8|tt[1])%31)throw"invalid zlib data";if(tt[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function unzlibSync(tt,_){return inflt((zlv(tt),tt.subarray(2,-4)),_)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch{}function findSpan(tt,_,_e){const nt=_e.length-tt-1;if(_>=_e[nt])return nt-1;if(_<=_e[tt])return tt;let rt=tt,it=nt,ot=Math.floor((rt+it)/2);for(;_<_e[ot]||_>=_e[ot+1];)_<_e[ot]?it=ot:rt=ot,ot=Math.floor((rt+it)/2);return ot}function calcBasisFunctions(tt,_,_e,nt){const rt=[],it=[],ot=[];rt[0]=1;for(let st=1;st<=_e;++st){it[st]=_-nt[tt+1-st],ot[st]=nt[tt+st]-_;let at=0;for(let lt=0;lt<st;++lt){const ct=ot[lt+1],ut=it[st-lt],ht=rt[lt]/(ct+ut);rt[lt]=at+ct*ht,at=ut*ht}rt[st]=at}return rt}function calcBSplinePoint(tt,_,_e,nt){const rt=findSpan(tt,nt,_),it=calcBasisFunctions(rt,nt,tt,_),ot=new Vector4(0,0,0,0);for(let st=0;st<=tt;++st){const at=_e[rt-tt+st],lt=it[st],ct=at.w*lt;ot.x+=at.x*ct,ot.y+=at.y*ct,ot.z+=at.z*ct,ot.w+=at.w*lt}return ot}function calcBasisFunctionDerivatives(tt,_,_e,nt,rt){const it=[];for(let ut=0;ut<=_e;++ut)it[ut]=0;const ot=[];for(let ut=0;ut<=nt;++ut)ot[ut]=it.slice(0);const st=[];for(let ut=0;ut<=_e;++ut)st[ut]=it.slice(0);st[0][0]=1;const at=it.slice(0),lt=it.slice(0);for(let ut=1;ut<=_e;++ut){at[ut]=_-rt[tt+1-ut],lt[ut]=rt[tt+ut]-_;let ht=0;for(let pt=0;pt<ut;++pt){const gt=lt[pt+1],yt=at[ut-pt];st[ut][pt]=gt+yt;const vt=st[pt][ut-1]/st[ut][pt];st[pt][ut]=ht+gt*vt,ht=yt*vt}st[ut][ut]=ht}for(let ut=0;ut<=_e;++ut)ot[0][ut]=st[ut][_e];for(let ut=0;ut<=_e;++ut){let ht=0,pt=1;const gt=[];for(let yt=0;yt<=_e;++yt)gt[yt]=it.slice(0);gt[0][0]=1;for(let yt=1;yt<=nt;++yt){let vt=0;const mt=ut-yt,_t=_e-yt;ut>=yt&&(gt[pt][0]=gt[ht][0]/st[_t+1][mt],vt=gt[pt][0]*st[mt][_t]);const xt=mt>=-1?1:-mt,St=ut-1<=_t?yt-1:_e-ut;for(let Mt=xt;Mt<=St;++Mt)gt[pt][Mt]=(gt[ht][Mt]-gt[ht][Mt-1])/st[_t+1][mt+Mt],vt+=gt[pt][Mt]*st[mt+Mt][_t];ut<=_t&&(gt[pt][yt]=-gt[ht][yt-1]/st[_t+1][ut],vt+=gt[pt][yt]*st[ut][_t]),ot[yt][ut]=vt;const Tt=ht;ht=pt,pt=Tt}}let ct=_e;for(let ut=1;ut<=nt;++ut){for(let ht=0;ht<=_e;++ht)ot[ut][ht]*=ct;ct*=_e-ut}return ot}function calcBSplineDerivatives(tt,_,_e,nt,rt){const it=rt<tt?rt:tt,ot=[],st=findSpan(tt,nt,_),at=calcBasisFunctionDerivatives(st,nt,tt,it,_),lt=[];for(let ct=0;ct<_e.length;++ct){const ut=_e[ct].clone(),ht=ut.w;ut.x*=ht,ut.y*=ht,ut.z*=ht,lt[ct]=ut}for(let ct=0;ct<=it;++ct){const ut=lt[st-tt].clone().multiplyScalar(at[ct][0]);for(let ht=1;ht<=tt;++ht)ut.add(lt[st-tt+ht].clone().multiplyScalar(at[ct][ht]));ot[ct]=ut}for(let ct=it+1;ct<=rt+1;++ct)ot[ct]=new Vector4(0,0,0);return ot}function calcKoverI(tt,_){let _e=1;for(let rt=2;rt<=tt;++rt)_e*=rt;let nt=1;for(let rt=2;rt<=_;++rt)nt*=rt;for(let rt=2;rt<=tt-_;++rt)nt*=rt;return _e/nt}function calcRationalCurveDerivatives(tt){const _=tt.length,_e=[],nt=[];for(let it=0;it<_;++it){const ot=tt[it];_e[it]=new Vector3(ot.x,ot.y,ot.z),nt[it]=ot.w}const rt=[];for(let it=0;it<_;++it){const ot=_e[it].clone();for(let st=1;st<=it;++st)ot.sub(rt[it-st].clone().multiplyScalar(calcKoverI(it,st)*nt[st]));rt[it]=ot.divideScalar(nt[0])}return rt}function calcNURBSDerivatives(tt,_,_e,nt,rt){const it=calcBSplineDerivatives(tt,_,_e,nt,rt);return calcRationalCurveDerivatives(it)}class NURBSCurve extends Curve{constructor(_,_e,nt,rt,it){super(),this.degree=_,this.knots=_e,this.controlPoints=[],this.startKnot=rt||0,this.endKnot=it||this.knots.length-1;for(let ot=0;ot<nt.length;++ot){const st=nt[ot];this.controlPoints[ot]=new Vector4(st.x,st.y,st.z,st.w)}}getPoint(_,_e=new Vector3){const nt=_e,rt=this.knots[this.startKnot]+_*(this.knots[this.endKnot]-this.knots[this.startKnot]),it=calcBSplinePoint(this.degree,this.knots,this.controlPoints,rt);return it.w!==1&&it.divideScalar(it.w),nt.set(it.x,it.y,it.z)}getTangent(_,_e=new Vector3){const nt=_e,rt=this.knots[0]+_*(this.knots[this.knots.length-1]-this.knots[0]),it=calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,rt,1);return nt.copy(it[1]).normalize(),nt}}let fbxTree,connections,sceneGraph;class FBXLoader extends Loader$1{constructor(_){super(_)}load(_,_e,nt,rt){const it=this,ot=it.path===""?LoaderUtils.extractUrlBase(_):it.path,st=new FileLoader(this.manager);st.setPath(it.path),st.setResponseType("arraybuffer"),st.setRequestHeader(it.requestHeader),st.setWithCredentials(it.withCredentials),st.load(_,function(at){try{_e(it.parse(at,ot))}catch(lt){rt?rt(lt):console.error(lt),it.manager.itemError(_)}},nt,rt)}parse(_,_e){if(isFbxFormatBinary(_))fbxTree=new BinaryParser().parse(_);else{const rt=convertArrayBufferToString(_);if(!isFbxFormatASCII(rt))throw new Error("THREE.FBXLoader: Unknown format.");if(getFbxVersion(rt)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+getFbxVersion(rt));fbxTree=new TextParser().parse(rt)}const nt=new TextureLoader(this.manager).setPath(this.resourcePath||_e).setCrossOrigin(this.crossOrigin);return new FBXTreeParser(nt,this.manager).parse(fbxTree)}}class FBXTreeParser{constructor(_,_e){this.textureLoader=_,this.manager=_e}parse(){connections=this.parseConnections();const _=this.parseImages(),_e=this.parseTextures(_),nt=this.parseMaterials(_e),rt=this.parseDeformers(),it=new GeometryParser().parse(rt);return this.parseScene(rt,it,nt),sceneGraph}parseConnections(){const _=new Map;return"Connections"in fbxTree&&fbxTree.Connections.connections.forEach(function(nt){const rt=nt[0],it=nt[1],ot=nt[2];_.has(rt)||_.set(rt,{parents:[],children:[]});const st={ID:it,relationship:ot};_.get(rt).parents.push(st),_.has(it)||_.set(it,{parents:[],children:[]});const at={ID:rt,relationship:ot};_.get(it).children.push(at)}),_}parseImages(){const _={},_e={};if("Video"in fbxTree.Objects){const nt=fbxTree.Objects.Video;for(const rt in nt){const it=nt[rt],ot=parseInt(rt);if(_[ot]=it.RelativeFilename||it.Filename,"Content"in it){const st=it.Content instanceof ArrayBuffer&&it.Content.byteLength>0,at=typeof it.Content=="string"&&it.Content!=="";if(st||at){const lt=this.parseImage(nt[rt]);_e[it.RelativeFilename||it.Filename]=lt}}}}for(const nt in _){const rt=_[nt];_e[rt]!==void 0?_[nt]=_e[rt]:_[nt]=_[nt].split("\\").pop()}return _}parseImage(_){const _e=_.Content,nt=_.RelativeFilename||_.Filename,rt=nt.slice(nt.lastIndexOf(".")+1).toLowerCase();let it;switch(rt){case"bmp":it="image/bmp";break;case"jpg":case"jpeg":it="image/jpeg";break;case"png":it="image/png";break;case"tif":it="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",nt),it="image/tga";break;default:console.warn('FBXLoader: Image type "'+rt+'" is not supported.');return}if(typeof _e=="string")return"data:"+it+";base64,"+_e;{const ot=new Uint8Array(_e);return window.URL.createObjectURL(new Blob([ot],{type:it}))}}parseTextures(_){const _e=new Map;if("Texture"in fbxTree.Objects){const nt=fbxTree.Objects.Texture;for(const rt in nt){const it=this.parseTexture(nt[rt],_);_e.set(parseInt(rt),it)}}return _e}parseTexture(_,_e){const nt=this.loadTexture(_,_e);nt.ID=_.id,nt.name=_.attrName;const rt=_.WrapModeU,it=_.WrapModeV,ot=rt!==void 0?rt.value:0,st=it!==void 0?it.value:0;if(nt.wrapS=ot===0?RepeatWrapping:ClampToEdgeWrapping,nt.wrapT=st===0?RepeatWrapping:ClampToEdgeWrapping,"Scaling"in _){const at=_.Scaling.value;nt.repeat.x=at[0],nt.repeat.y=at[1]}if("Translation"in _){const at=_.Translation.value;nt.offset.x=at[0],nt.offset.y=at[1]}return nt}loadTexture(_,_e){let nt;const rt=this.textureLoader.path,it=connections.get(_.id).children;it!==void 0&&it.length>0&&_e[it[0].ID]!==void 0&&(nt=_e[it[0].ID],(nt.indexOf("blob:")===0||nt.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let ot;const st=_.FileName.slice(-3).toLowerCase();if(st==="tga"){const at=this.manager.getHandler(".tga");at===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",_.RelativeFilename),ot=new Texture):(at.setPath(this.textureLoader.path),ot=at.load(nt))}else st==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",_.RelativeFilename),ot=new Texture):ot=this.textureLoader.load(nt);return this.textureLoader.setPath(rt),ot}parseMaterials(_){const _e=new Map;if("Material"in fbxTree.Objects){const nt=fbxTree.Objects.Material;for(const rt in nt){const it=this.parseMaterial(nt[rt],_);it!==null&&_e.set(parseInt(rt),it)}}return _e}parseMaterial(_,_e){const nt=_.id,rt=_.attrName;let it=_.ShadingModel;if(typeof it=="object"&&(it=it.value),!connections.has(nt))return null;const ot=this.parseParameters(_,_e,nt);let st;switch(it.toLowerCase()){case"phong":st=new MeshPhongMaterial;break;case"lambert":st=new MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',it),st=new MeshPhongMaterial;break}return st.setValues(ot),st.name=rt,st}parseParameters(_,_e,nt){const rt={};_.BumpFactor&&(rt.bumpScale=_.BumpFactor.value),_.Diffuse?rt.color=new Color$1().fromArray(_.Diffuse.value).convertSRGBToLinear():_.DiffuseColor&&(_.DiffuseColor.type==="Color"||_.DiffuseColor.type==="ColorRGB")&&(rt.color=new Color$1().fromArray(_.DiffuseColor.value).convertSRGBToLinear()),_.DisplacementFactor&&(rt.displacementScale=_.DisplacementFactor.value),_.Emissive?rt.emissive=new Color$1().fromArray(_.Emissive.value).convertSRGBToLinear():_.EmissiveColor&&(_.EmissiveColor.type==="Color"||_.EmissiveColor.type==="ColorRGB")&&(rt.emissive=new Color$1().fromArray(_.EmissiveColor.value).convertSRGBToLinear()),_.EmissiveFactor&&(rt.emissiveIntensity=parseFloat(_.EmissiveFactor.value)),_.Opacity&&(rt.opacity=parseFloat(_.Opacity.value)),rt.opacity<1&&(rt.transparent=!0),_.ReflectionFactor&&(rt.reflectivity=_.ReflectionFactor.value),_.Shininess&&(rt.shininess=_.Shininess.value),_.Specular?rt.specular=new Color$1().fromArray(_.Specular.value).convertSRGBToLinear():_.SpecularColor&&_.SpecularColor.type==="Color"&&(rt.specular=new Color$1().fromArray(_.SpecularColor.value).convertSRGBToLinear());const it=this;return connections.get(nt).children.forEach(function(ot){const st=ot.relationship;switch(st){case"Bump":rt.bumpMap=it.getTexture(_e,ot.ID);break;case"Maya|TEX_ao_map":rt.aoMap=it.getTexture(_e,ot.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":rt.map=it.getTexture(_e,ot.ID),rt.map!==void 0&&(rt.map.colorSpace=SRGBColorSpace);break;case"DisplacementColor":rt.displacementMap=it.getTexture(_e,ot.ID);break;case"EmissiveColor":rt.emissiveMap=it.getTexture(_e,ot.ID),rt.emissiveMap!==void 0&&(rt.emissiveMap.colorSpace=SRGBColorSpace);break;case"NormalMap":case"Maya|TEX_normal_map":rt.normalMap=it.getTexture(_e,ot.ID);break;case"ReflectionColor":rt.envMap=it.getTexture(_e,ot.ID),rt.envMap!==void 0&&(rt.envMap.mapping=EquirectangularReflectionMapping,rt.envMap.colorSpace=SRGBColorSpace);break;case"SpecularColor":rt.specularMap=it.getTexture(_e,ot.ID),rt.specularMap!==void 0&&(rt.specularMap.colorSpace=SRGBColorSpace);break;case"TransparentColor":case"TransparencyFactor":rt.alphaMap=it.getTexture(_e,ot.ID),rt.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",st);break}}),rt}getTexture(_,_e){return"LayeredTexture"in fbxTree.Objects&&_e in fbxTree.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),_e=connections.get(_e).children[0].ID),_.get(_e)}parseDeformers(){const _={},_e={};if("Deformer"in fbxTree.Objects){const nt=fbxTree.Objects.Deformer;for(const rt in nt){const it=nt[rt],ot=connections.get(parseInt(rt));if(it.attrType==="Skin"){const st=this.parseSkeleton(ot,nt);st.ID=rt,ot.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),st.geometryID=ot.parents[0].ID,_[rt]=st}else if(it.attrType==="BlendShape"){const st={id:rt};st.rawTargets=this.parseMorphTargets(ot,nt),st.id=rt,ot.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),_e[rt]=st}}}return{skeletons:_,morphTargets:_e}}parseSkeleton(_,_e){const nt=[];return _.children.forEach(function(rt){const it=_e[rt.ID];if(it.attrType!=="Cluster")return;const ot={ID:rt.ID,indices:[],weights:[],transformLink:new Matrix4().fromArray(it.TransformLink.a)};"Indexes"in it&&(ot.indices=it.Indexes.a,ot.weights=it.Weights.a),nt.push(ot)}),{rawBones:nt,bones:[]}}parseMorphTargets(_,_e){const nt=[];for(let rt=0;rt<_.children.length;rt++){const it=_.children[rt],ot=_e[it.ID],st={name:ot.attrName,initialWeight:ot.DeformPercent,id:ot.id,fullWeights:ot.FullWeights.a};if(ot.attrType!=="BlendShapeChannel")return;st.geoID=connections.get(parseInt(it.ID)).children.filter(function(at){return at.relationship===void 0})[0].ID,nt.push(st)}return nt}parseScene(_,_e,nt){sceneGraph=new Group;const rt=this.parseModels(_.skeletons,_e,nt),it=fbxTree.Objects.Model,ot=this;rt.forEach(function(at){const lt=it[at.ID];ot.setLookAtProperties(at,lt),connections.get(at.ID).parents.forEach(function(ut){const ht=rt.get(ut.ID);ht!==void 0&&ht.add(at)}),at.parent===null&&sceneGraph.add(at)}),this.bindSkeleton(_.skeletons,_e,rt),this.createAmbientLight(),sceneGraph.traverse(function(at){if(at.userData.transformData){at.parent&&(at.userData.transformData.parentMatrix=at.parent.matrix,at.userData.transformData.parentMatrixWorld=at.parent.matrixWorld);const lt=generateTransform(at.userData.transformData);at.applyMatrix4(lt),at.updateWorldMatrix()}});const st=new AnimationParser().parse();sceneGraph.children.length===1&&sceneGraph.children[0].isGroup&&(sceneGraph.children[0].animations=st,sceneGraph=sceneGraph.children[0]),sceneGraph.animations=st}parseModels(_,_e,nt){const rt=new Map,it=fbxTree.Objects.Model;for(const ot in it){const st=parseInt(ot),at=it[ot],lt=connections.get(st);let ct=this.buildSkeleton(lt,_,st,at.attrName);if(!ct){switch(at.attrType){case"Camera":ct=this.createCamera(lt);break;case"Light":ct=this.createLight(lt);break;case"Mesh":ct=this.createMesh(lt,_e,nt);break;case"NurbsCurve":ct=this.createCurve(lt,_e);break;case"LimbNode":case"Root":ct=new Bone;break;case"Null":default:ct=new Group;break}ct.name=at.attrName?PropertyBinding.sanitizeNodeName(at.attrName):"",ct.ID=st}this.getTransformData(ct,at),rt.set(st,ct)}return rt}buildSkeleton(_,_e,nt,rt){let it=null;return _.parents.forEach(function(ot){for(const st in _e){const at=_e[st];at.rawBones.forEach(function(lt,ct){if(lt.ID===ot.ID){const ut=it;it=new Bone,it.matrixWorld.copy(lt.transformLink),it.name=rt?PropertyBinding.sanitizeNodeName(rt):"",it.ID=nt,at.bones[ct]=it,ut!==null&&it.add(ut)}})}}),it}createCamera(_){let _e,nt;if(_.children.forEach(function(rt){const it=fbxTree.Objects.NodeAttribute[rt.ID];it!==void 0&&(nt=it)}),nt===void 0)_e=new Object3D;else{let rt=0;nt.CameraProjectionType!==void 0&&nt.CameraProjectionType.value===1&&(rt=1);let it=1;nt.NearPlane!==void 0&&(it=nt.NearPlane.value/1e3);let ot=1e3;nt.FarPlane!==void 0&&(ot=nt.FarPlane.value/1e3);let st=window.innerWidth,at=window.innerHeight;nt.AspectWidth!==void 0&&nt.AspectHeight!==void 0&&(st=nt.AspectWidth.value,at=nt.AspectHeight.value);const lt=st/at;let ct=45;nt.FieldOfView!==void 0&&(ct=nt.FieldOfView.value);const ut=nt.FocalLength?nt.FocalLength.value:null;switch(rt){case 0:_e=new PerspectiveCamera(ct,lt,it,ot),ut!==null&&_e.setFocalLength(ut);break;case 1:_e=new OrthographicCamera(-st/2,st/2,at/2,-at/2,it,ot);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+rt+"."),_e=new Object3D;break}}return _e}createLight(_){let _e,nt;if(_.children.forEach(function(rt){const it=fbxTree.Objects.NodeAttribute[rt.ID];it!==void 0&&(nt=it)}),nt===void 0)_e=new Object3D;else{let rt;nt.LightType===void 0?rt=0:rt=nt.LightType.value;let it=16777215;nt.Color!==void 0&&(it=new Color$1().fromArray(nt.Color.value).convertSRGBToLinear());let ot=nt.Intensity===void 0?1:nt.Intensity.value/100;nt.CastLightOnObject!==void 0&&nt.CastLightOnObject.value===0&&(ot=0);let st=0;nt.FarAttenuationEnd!==void 0&&(nt.EnableFarAttenuation!==void 0&&nt.EnableFarAttenuation.value===0?st=0:st=nt.FarAttenuationEnd.value);const at=1;switch(rt){case 0:_e=new PointLight(it,ot,st,at);break;case 1:_e=new DirectionalLight(it,ot);break;case 2:let lt=Math.PI/3;nt.InnerAngle!==void 0&&(lt=MathUtils.degToRad(nt.InnerAngle.value));let ct=0;nt.OuterAngle!==void 0&&(ct=MathUtils.degToRad(nt.OuterAngle.value),ct=Math.max(ct,1)),_e=new SpotLight(it,ot,st,lt,ct,at);break;default:console.warn("THREE.FBXLoader: Unknown light type "+nt.LightType.value+", defaulting to a PointLight."),_e=new PointLight(it,ot);break}nt.CastShadows!==void 0&&nt.CastShadows.value===1&&(_e.castShadow=!0)}return _e}createMesh(_,_e,nt){let rt,it=null,ot=null;const st=[];return _.children.forEach(function(at){_e.has(at.ID)&&(it=_e.get(at.ID)),nt.has(at.ID)&&st.push(nt.get(at.ID))}),st.length>1?ot=st:st.length>0?ot=st[0]:(ot=new MeshPhongMaterial({color:13421772}),st.push(ot)),"color"in it.attributes&&st.forEach(function(at){at.vertexColors=!0}),it.FBX_Deformer?(rt=new SkinnedMesh(it,ot),rt.normalizeSkinWeights()):rt=new Mesh(it,ot),rt}createCurve(_,_e){const nt=_.children.reduce(function(it,ot){return _e.has(ot.ID)&&(it=_e.get(ot.ID)),it},null),rt=new LineBasicMaterial({color:3342591,linewidth:1});return new Line(nt,rt)}getTransformData(_,_e){const nt={};"InheritType"in _e&&(nt.inheritType=parseInt(_e.InheritType.value)),"RotationOrder"in _e?nt.eulerOrder=getEulerOrder(_e.RotationOrder.value):nt.eulerOrder="ZYX","Lcl_Translation"in _e&&(nt.translation=_e.Lcl_Translation.value),"PreRotation"in _e&&(nt.preRotation=_e.PreRotation.value),"Lcl_Rotation"in _e&&(nt.rotation=_e.Lcl_Rotation.value),"PostRotation"in _e&&(nt.postRotation=_e.PostRotation.value),"Lcl_Scaling"in _e&&(nt.scale=_e.Lcl_Scaling.value),"ScalingOffset"in _e&&(nt.scalingOffset=_e.ScalingOffset.value),"ScalingPivot"in _e&&(nt.scalingPivot=_e.ScalingPivot.value),"RotationOffset"in _e&&(nt.rotationOffset=_e.RotationOffset.value),"RotationPivot"in _e&&(nt.rotationPivot=_e.RotationPivot.value),_.userData.transformData=nt}setLookAtProperties(_,_e){"LookAtProperty"in _e&&connections.get(_.ID).children.forEach(function(rt){if(rt.relationship==="LookAtProperty"){const it=fbxTree.Objects.Model[rt.ID];if("Lcl_Translation"in it){const ot=it.Lcl_Translation.value;_.target!==void 0?(_.target.position.fromArray(ot),sceneGraph.add(_.target)):_.lookAt(new Vector3().fromArray(ot))}}})}bindSkeleton(_,_e,nt){const rt=this.parsePoseNodes();for(const it in _){const ot=_[it];connections.get(parseInt(ot.ID)).parents.forEach(function(at){if(_e.has(at.ID)){const lt=at.ID;connections.get(lt).parents.forEach(function(ut){nt.has(ut.ID)&&nt.get(ut.ID).bind(new Skeleton(ot.bones),rt[ut.ID])})}})}}parsePoseNodes(){const _={};if("Pose"in fbxTree.Objects){const _e=fbxTree.Objects.Pose;for(const nt in _e)if(_e[nt].attrType==="BindPose"&&_e[nt].NbPoseNodes>0){const rt=_e[nt].PoseNode;Array.isArray(rt)?rt.forEach(function(it){_[it.Node]=new Matrix4().fromArray(it.Matrix.a)}):_[rt.Node]=new Matrix4().fromArray(rt.Matrix.a)}}return _}createAmbientLight(){if("GlobalSettings"in fbxTree&&"AmbientColor"in fbxTree.GlobalSettings){const _=fbxTree.GlobalSettings.AmbientColor.value,_e=_[0],nt=_[1],rt=_[2];if(_e!==0||nt!==0||rt!==0){const it=new Color$1(_e,nt,rt).convertSRGBToLinear();sceneGraph.add(new AmbientLight(it,1))}}}}class GeometryParser{constructor(){this.negativeMaterialIndices=!1}parse(_){const _e=new Map;if("Geometry"in fbxTree.Objects){const nt=fbxTree.Objects.Geometry;for(const rt in nt){const it=connections.get(parseInt(rt)),ot=this.parseGeometry(it,nt[rt],_);_e.set(parseInt(rt),ot)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),_e}parseGeometry(_,_e,nt){switch(_e.attrType){case"Mesh":return this.parseMeshGeometry(_,_e,nt);case"NurbsCurve":return this.parseNurbsGeometry(_e)}}parseMeshGeometry(_,_e,nt){const rt=nt.skeletons,it=[],ot=_.parents.map(function(ut){return fbxTree.Objects.Model[ut.ID]});if(ot.length===0)return;const st=_.children.reduce(function(ut,ht){return rt[ht.ID]!==void 0&&(ut=rt[ht.ID]),ut},null);_.children.forEach(function(ut){nt.morphTargets[ut.ID]!==void 0&&it.push(nt.morphTargets[ut.ID])});const at=ot[0],lt={};"RotationOrder"in at&&(lt.eulerOrder=getEulerOrder(at.RotationOrder.value)),"InheritType"in at&&(lt.inheritType=parseInt(at.InheritType.value)),"GeometricTranslation"in at&&(lt.translation=at.GeometricTranslation.value),"GeometricRotation"in at&&(lt.rotation=at.GeometricRotation.value),"GeometricScaling"in at&&(lt.scale=at.GeometricScaling.value);const ct=generateTransform(lt);return this.genGeometry(_e,st,it,ct)}genGeometry(_,_e,nt,rt){const it=new BufferGeometry;_.attrName&&(it.name=_.attrName);const ot=this.parseGeoNode(_,_e),st=this.genBuffers(ot),at=new Float32BufferAttribute(st.vertex,3);if(at.applyMatrix4(rt),it.setAttribute("position",at),st.colors.length>0&&it.setAttribute("color",new Float32BufferAttribute(st.colors,3)),_e&&(it.setAttribute("skinIndex",new Uint16BufferAttribute(st.weightsIndices,4)),it.setAttribute("skinWeight",new Float32BufferAttribute(st.vertexWeights,4)),it.FBX_Deformer=_e),st.normal.length>0){const lt=new Matrix3().getNormalMatrix(rt),ct=new Float32BufferAttribute(st.normal,3);ct.applyNormalMatrix(lt),it.setAttribute("normal",ct)}if(st.uvs.forEach(function(lt,ct){const ut=ct===0?"uv":`uv${ct}`;it.setAttribute(ut,new Float32BufferAttribute(st.uvs[ct],2))}),ot.material&&ot.material.mappingType!=="AllSame"){let lt=st.materialIndex[0],ct=0;if(st.materialIndex.forEach(function(ut,ht){ut!==lt&&(it.addGroup(ct,ht-ct,lt),lt=ut,ct=ht)}),it.groups.length>0){const ut=it.groups[it.groups.length-1],ht=ut.start+ut.count;ht!==st.materialIndex.length&&it.addGroup(ht,st.materialIndex.length-ht,lt)}it.groups.length===0&&it.addGroup(0,st.materialIndex.length,st.materialIndex[0])}return this.addMorphTargets(it,_,nt,rt),it}parseGeoNode(_,_e){const nt={};if(nt.vertexPositions=_.Vertices!==void 0?_.Vertices.a:[],nt.vertexIndices=_.PolygonVertexIndex!==void 0?_.PolygonVertexIndex.a:[],_.LayerElementColor&&(nt.color=this.parseVertexColors(_.LayerElementColor[0])),_.LayerElementMaterial&&(nt.material=this.parseMaterialIndices(_.LayerElementMaterial[0])),_.LayerElementNormal&&(nt.normal=this.parseNormals(_.LayerElementNormal[0])),_.LayerElementUV){nt.uv=[];let rt=0;for(;_.LayerElementUV[rt];)_.LayerElementUV[rt].UV&&nt.uv.push(this.parseUVs(_.LayerElementUV[rt])),rt++}return nt.weightTable={},_e!==null&&(nt.skeleton=_e,_e.rawBones.forEach(function(rt,it){rt.indices.forEach(function(ot,st){nt.weightTable[ot]===void 0&&(nt.weightTable[ot]=[]),nt.weightTable[ot].push({id:it,weight:rt.weights[st]})})})),nt}genBuffers(_){const _e={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let nt=0,rt=0,it=!1,ot=[],st=[],at=[],lt=[],ct=[],ut=[];const ht=this;return _.vertexIndices.forEach(function(pt,gt){let yt,vt=!1;pt<0&&(pt=pt^-1,vt=!0);let mt=[],_t=[];if(ot.push(pt*3,pt*3+1,pt*3+2),_.color){const xt=getData(gt,nt,pt,_.color);at.push(xt[0],xt[1],xt[2])}if(_.skeleton){if(_.weightTable[pt]!==void 0&&_.weightTable[pt].forEach(function(xt){_t.push(xt.weight),mt.push(xt.id)}),_t.length>4){it||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),it=!0);const xt=[0,0,0,0],St=[0,0,0,0];_t.forEach(function(Tt,Mt){let bt=Tt,Pt=mt[Mt];St.forEach(function(wt,Bt,Ot){if(bt>wt){Ot[Bt]=bt,bt=wt;const Ut=xt[Bt];xt[Bt]=Pt,Pt=Ut}})}),mt=xt,_t=St}for(;_t.length<4;)_t.push(0),mt.push(0);for(let xt=0;xt<4;++xt)ct.push(_t[xt]),ut.push(mt[xt])}if(_.normal){const xt=getData(gt,nt,pt,_.normal);st.push(xt[0],xt[1],xt[2])}_.material&&_.material.mappingType!=="AllSame"&&(yt=getData(gt,nt,pt,_.material)[0],yt<0&&(ht.negativeMaterialIndices=!0,yt=0)),_.uv&&_.uv.forEach(function(xt,St){const Tt=getData(gt,nt,pt,xt);lt[St]===void 0&&(lt[St]=[]),lt[St].push(Tt[0]),lt[St].push(Tt[1])}),rt++,vt&&(rt>4&&console.warn("THREE.FBXLoader: Polygons with more than four sides are not supported. Make sure to triangulate the geometry during export."),ht.genFace(_e,_,ot,yt,st,at,lt,ct,ut,rt),nt++,rt=0,ot=[],st=[],at=[],lt=[],ct=[],ut=[])}),_e}genFace(_,_e,nt,rt,it,ot,st,at,lt,ct){for(let ut=2;ut<ct;ut++)_.vertex.push(_e.vertexPositions[nt[0]]),_.vertex.push(_e.vertexPositions[nt[1]]),_.vertex.push(_e.vertexPositions[nt[2]]),_.vertex.push(_e.vertexPositions[nt[(ut-1)*3]]),_.vertex.push(_e.vertexPositions[nt[(ut-1)*3+1]]),_.vertex.push(_e.vertexPositions[nt[(ut-1)*3+2]]),_.vertex.push(_e.vertexPositions[nt[ut*3]]),_.vertex.push(_e.vertexPositions[nt[ut*3+1]]),_.vertex.push(_e.vertexPositions[nt[ut*3+2]]),_e.skeleton&&(_.vertexWeights.push(at[0]),_.vertexWeights.push(at[1]),_.vertexWeights.push(at[2]),_.vertexWeights.push(at[3]),_.vertexWeights.push(at[(ut-1)*4]),_.vertexWeights.push(at[(ut-1)*4+1]),_.vertexWeights.push(at[(ut-1)*4+2]),_.vertexWeights.push(at[(ut-1)*4+3]),_.vertexWeights.push(at[ut*4]),_.vertexWeights.push(at[ut*4+1]),_.vertexWeights.push(at[ut*4+2]),_.vertexWeights.push(at[ut*4+3]),_.weightsIndices.push(lt[0]),_.weightsIndices.push(lt[1]),_.weightsIndices.push(lt[2]),_.weightsIndices.push(lt[3]),_.weightsIndices.push(lt[(ut-1)*4]),_.weightsIndices.push(lt[(ut-1)*4+1]),_.weightsIndices.push(lt[(ut-1)*4+2]),_.weightsIndices.push(lt[(ut-1)*4+3]),_.weightsIndices.push(lt[ut*4]),_.weightsIndices.push(lt[ut*4+1]),_.weightsIndices.push(lt[ut*4+2]),_.weightsIndices.push(lt[ut*4+3])),_e.color&&(_.colors.push(ot[0]),_.colors.push(ot[1]),_.colors.push(ot[2]),_.colors.push(ot[(ut-1)*3]),_.colors.push(ot[(ut-1)*3+1]),_.colors.push(ot[(ut-1)*3+2]),_.colors.push(ot[ut*3]),_.colors.push(ot[ut*3+1]),_.colors.push(ot[ut*3+2])),_e.material&&_e.material.mappingType!=="AllSame"&&(_.materialIndex.push(rt),_.materialIndex.push(rt),_.materialIndex.push(rt)),_e.normal&&(_.normal.push(it[0]),_.normal.push(it[1]),_.normal.push(it[2]),_.normal.push(it[(ut-1)*3]),_.normal.push(it[(ut-1)*3+1]),_.normal.push(it[(ut-1)*3+2]),_.normal.push(it[ut*3]),_.normal.push(it[ut*3+1]),_.normal.push(it[ut*3+2])),_e.uv&&_e.uv.forEach(function(ht,pt){_.uvs[pt]===void 0&&(_.uvs[pt]=[]),_.uvs[pt].push(st[pt][0]),_.uvs[pt].push(st[pt][1]),_.uvs[pt].push(st[pt][(ut-1)*2]),_.uvs[pt].push(st[pt][(ut-1)*2+1]),_.uvs[pt].push(st[pt][ut*2]),_.uvs[pt].push(st[pt][ut*2+1])})}addMorphTargets(_,_e,nt,rt){if(nt.length===0)return;_.morphTargetsRelative=!0,_.morphAttributes.position=[];const it=this;nt.forEach(function(ot){ot.rawTargets.forEach(function(st){const at=fbxTree.Objects.Geometry[st.geoID];at!==void 0&&it.genMorphGeometry(_,_e,at,rt,st.name)})})}genMorphGeometry(_,_e,nt,rt,it){const ot=_e.PolygonVertexIndex!==void 0?_e.PolygonVertexIndex.a:[],st=nt.Vertices!==void 0?nt.Vertices.a:[],at=nt.Indexes!==void 0?nt.Indexes.a:[],lt=_.attributes.position.count*3,ct=new Float32Array(lt);for(let gt=0;gt<at.length;gt++){const yt=at[gt]*3;ct[yt]=st[gt*3],ct[yt+1]=st[gt*3+1],ct[yt+2]=st[gt*3+2]}const ut={vertexIndices:ot,vertexPositions:ct},ht=this.genBuffers(ut),pt=new Float32BufferAttribute(ht.vertex,3);pt.name=it||nt.attrName,pt.applyMatrix4(rt),_.morphAttributes.position.push(pt)}parseNormals(_){const _e=_.MappingInformationType,nt=_.ReferenceInformationType,rt=_.Normals.a;let it=[];return nt==="IndexToDirect"&&("NormalIndex"in _?it=_.NormalIndex.a:"NormalsIndex"in _&&(it=_.NormalsIndex.a)),{dataSize:3,buffer:rt,indices:it,mappingType:_e,referenceType:nt}}parseUVs(_){const _e=_.MappingInformationType,nt=_.ReferenceInformationType,rt=_.UV.a;let it=[];return nt==="IndexToDirect"&&(it=_.UVIndex.a),{dataSize:2,buffer:rt,indices:it,mappingType:_e,referenceType:nt}}parseVertexColors(_){const _e=_.MappingInformationType,nt=_.ReferenceInformationType,rt=_.Colors.a;let it=[];nt==="IndexToDirect"&&(it=_.ColorIndex.a);for(let ot=0,st=new Color$1;ot<rt.length;ot+=4)st.fromArray(rt,ot).convertSRGBToLinear().toArray(rt,ot);return{dataSize:4,buffer:rt,indices:it,mappingType:_e,referenceType:nt}}parseMaterialIndices(_){const _e=_.MappingInformationType,nt=_.ReferenceInformationType;if(_e==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:nt};const rt=_.Materials.a,it=[];for(let ot=0;ot<rt.length;++ot)it.push(ot);return{dataSize:1,buffer:rt,indices:it,mappingType:_e,referenceType:nt}}parseNurbsGeometry(_){const _e=parseInt(_.Order);if(isNaN(_e))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",_.Order,_.id),new BufferGeometry;const nt=_e-1,rt=_.KnotVector.a,it=[],ot=_.Points.a;for(let ut=0,ht=ot.length;ut<ht;ut+=4)it.push(new Vector4().fromArray(ot,ut));let st,at;if(_.Form==="Closed")it.push(it[0]);else if(_.Form==="Periodic"){st=nt,at=rt.length-1-st;for(let ut=0;ut<nt;++ut)it.push(it[ut])}const ct=new NURBSCurve(nt,rt,it,st,at).getPoints(it.length*12);return new BufferGeometry().setFromPoints(ct)}}class AnimationParser{parse(){const _=[],_e=this.parseClips();if(_e!==void 0)for(const nt in _e){const rt=_e[nt],it=this.addClip(rt);_.push(it)}return _}parseClips(){if(fbxTree.Objects.AnimationCurve===void 0)return;const _=this.parseAnimationCurveNodes();this.parseAnimationCurves(_);const _e=this.parseAnimationLayers(_);return this.parseAnimStacks(_e)}parseAnimationCurveNodes(){const _=fbxTree.Objects.AnimationCurveNode,_e=new Map;for(const nt in _){const rt=_[nt];if(rt.attrName.match(/S|R|T|DeformPercent/)!==null){const it={id:rt.id,attr:rt.attrName,curves:{}};_e.set(it.id,it)}}return _e}parseAnimationCurves(_){const _e=fbxTree.Objects.AnimationCurve;for(const nt in _e){const rt={id:_e[nt].id,times:_e[nt].KeyTime.a.map(convertFBXTimeToSeconds),values:_e[nt].KeyValueFloat.a},it=connections.get(rt.id);if(it!==void 0){const ot=it.parents[0].ID,st=it.parents[0].relationship;st.match(/X/)?_.get(ot).curves.x=rt:st.match(/Y/)?_.get(ot).curves.y=rt:st.match(/Z/)?_.get(ot).curves.z=rt:st.match(/DeformPercent/)&&_.has(ot)&&(_.get(ot).curves.morph=rt)}}}parseAnimationLayers(_){const _e=fbxTree.Objects.AnimationLayer,nt=new Map;for(const rt in _e){const it=[],ot=connections.get(parseInt(rt));ot!==void 0&&(ot.children.forEach(function(at,lt){if(_.has(at.ID)){const ct=_.get(at.ID);if(ct.curves.x!==void 0||ct.curves.y!==void 0||ct.curves.z!==void 0){if(it[lt]===void 0){const ut=connections.get(at.ID).parents.filter(function(ht){return ht.relationship!==void 0})[0].ID;if(ut!==void 0){const ht=fbxTree.Objects.Model[ut.toString()];if(ht===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",at);return}const pt={modelName:ht.attrName?PropertyBinding.sanitizeNodeName(ht.attrName):"",ID:ht.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};sceneGraph.traverse(function(gt){gt.ID===ht.id&&(pt.transform=gt.matrix,gt.userData.transformData&&(pt.eulerOrder=gt.userData.transformData.eulerOrder))}),pt.transform||(pt.transform=new Matrix4),"PreRotation"in ht&&(pt.preRotation=ht.PreRotation.value),"PostRotation"in ht&&(pt.postRotation=ht.PostRotation.value),it[lt]=pt}}it[lt]&&(it[lt][ct.attr]=ct)}else if(ct.curves.morph!==void 0){if(it[lt]===void 0){const ut=connections.get(at.ID).parents.filter(function(mt){return mt.relationship!==void 0})[0].ID,ht=connections.get(ut).parents[0].ID,pt=connections.get(ht).parents[0].ID,gt=connections.get(pt).parents[0].ID,yt=fbxTree.Objects.Model[gt],vt={modelName:yt.attrName?PropertyBinding.sanitizeNodeName(yt.attrName):"",morphName:fbxTree.Objects.Deformer[ut].attrName};it[lt]=vt}it[lt][ct.attr]=ct}}}),nt.set(parseInt(rt),it))}return nt}parseAnimStacks(_){const _e=fbxTree.Objects.AnimationStack,nt={};for(const rt in _e){const it=connections.get(parseInt(rt)).children;it.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const ot=_.get(it[0].ID);nt[rt]={name:_e[rt].attrName,layer:ot}}return nt}addClip(_){let _e=[];const nt=this;return _.layer.forEach(function(rt){_e=_e.concat(nt.generateTracks(rt))}),new AnimationClip(_.name,-1,_e)}generateTracks(_){const _e=[];let nt=new Vector3,rt=new Quaternion,it=new Vector3;if(_.transform&&_.transform.decompose(nt,rt,it),nt=nt.toArray(),rt=new Euler().setFromQuaternion(rt,_.eulerOrder).toArray(),it=it.toArray(),_.T!==void 0&&Object.keys(_.T.curves).length>0){const ot=this.generateVectorTrack(_.modelName,_.T.curves,nt,"position");ot!==void 0&&_e.push(ot)}if(_.R!==void 0&&Object.keys(_.R.curves).length>0){const ot=this.generateRotationTrack(_.modelName,_.R.curves,rt,_.preRotation,_.postRotation,_.eulerOrder);ot!==void 0&&_e.push(ot)}if(_.S!==void 0&&Object.keys(_.S.curves).length>0){const ot=this.generateVectorTrack(_.modelName,_.S.curves,it,"scale");ot!==void 0&&_e.push(ot)}if(_.DeformPercent!==void 0){const ot=this.generateMorphTrack(_);ot!==void 0&&_e.push(ot)}return _e}generateVectorTrack(_,_e,nt,rt){const it=this.getTimesForAllAxes(_e),ot=this.getKeyframeTrackValues(it,_e,nt);return new VectorKeyframeTrack(_+"."+rt,it,ot)}generateRotationTrack(_,_e,nt,rt,it,ot){_e.x!==void 0&&(this.interpolateRotations(_e.x),_e.x.values=_e.x.values.map(MathUtils.degToRad)),_e.y!==void 0&&(this.interpolateRotations(_e.y),_e.y.values=_e.y.values.map(MathUtils.degToRad)),_e.z!==void 0&&(this.interpolateRotations(_e.z),_e.z.values=_e.z.values.map(MathUtils.degToRad));const st=this.getTimesForAllAxes(_e),at=this.getKeyframeTrackValues(st,_e,nt);rt!==void 0&&(rt=rt.map(MathUtils.degToRad),rt.push(ot),rt=new Euler().fromArray(rt),rt=new Quaternion().setFromEuler(rt)),it!==void 0&&(it=it.map(MathUtils.degToRad),it.push(ot),it=new Euler().fromArray(it),it=new Quaternion().setFromEuler(it).invert());const lt=new Quaternion,ct=new Euler,ut=[];for(let ht=0;ht<at.length;ht+=3)ct.set(at[ht],at[ht+1],at[ht+2],ot),lt.setFromEuler(ct),rt!==void 0&&lt.premultiply(rt),it!==void 0&&lt.multiply(it),lt.toArray(ut,ht/3*4);return new QuaternionKeyframeTrack(_+".quaternion",st,ut)}generateMorphTrack(_){const _e=_.DeformPercent.curves.morph,nt=_e.values.map(function(it){return it/100}),rt=sceneGraph.getObjectByName(_.modelName).morphTargetDictionary[_.morphName];return new NumberKeyframeTrack(_.modelName+".morphTargetInfluences["+rt+"]",_e.times,nt)}getTimesForAllAxes(_){let _e=[];if(_.x!==void 0&&(_e=_e.concat(_.x.times)),_.y!==void 0&&(_e=_e.concat(_.y.times)),_.z!==void 0&&(_e=_e.concat(_.z.times)),_e=_e.sort(function(nt,rt){return nt-rt}),_e.length>1){let nt=1,rt=_e[0];for(let it=1;it<_e.length;it++){const ot=_e[it];ot!==rt&&(_e[nt]=ot,rt=ot,nt++)}_e=_e.slice(0,nt)}return _e}getKeyframeTrackValues(_,_e,nt){const rt=nt,it=[];let ot=-1,st=-1,at=-1;return _.forEach(function(lt){if(_e.x&&(ot=_e.x.times.indexOf(lt)),_e.y&&(st=_e.y.times.indexOf(lt)),_e.z&&(at=_e.z.times.indexOf(lt)),ot!==-1){const ct=_e.x.values[ot];it.push(ct),rt[0]=ct}else it.push(rt[0]);if(st!==-1){const ct=_e.y.values[st];it.push(ct),rt[1]=ct}else it.push(rt[1]);if(at!==-1){const ct=_e.z.values[at];it.push(ct),rt[2]=ct}else it.push(rt[2])}),it}interpolateRotations(_){for(let _e=1;_e<_.values.length;_e++){const nt=_.values[_e-1],rt=_.values[_e]-nt,it=Math.abs(rt);if(it>=180){const ot=it/180,st=rt/ot;let at=nt+st;const lt=_.times[_e-1],ut=(_.times[_e]-lt)/ot;let ht=lt+ut;const pt=[],gt=[];for(;ht<_.times[_e];)pt.push(ht),ht+=ut,gt.push(at),at+=st;_.times=inject(_.times,_e,pt),_.values=inject(_.values,_e,gt)}}}}class TextParser{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(_){this.nodeStack.push(_),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(_,_e){this.currentProp=_,this.currentPropName=_e}parse(_){this.currentIndent=0,this.allNodes=new FBXTree,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const _e=this,nt=_.split(/[\r\n]+/);return nt.forEach(function(rt,it){const ot=rt.match(/^[\s\t]*;/),st=rt.match(/^[\s\t]*$/);if(ot||st)return;const at=rt.match("^\\t{"+_e.currentIndent+"}(\\w+):(.*){",""),lt=rt.match("^\\t{"+_e.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),ct=rt.match("^\\t{"+(_e.currentIndent-1)+"}}");at?_e.parseNodeBegin(rt,at):lt?_e.parseNodeProperty(rt,lt,nt[++it]):ct?_e.popStack():rt.match(/^[^\s\t}]/)&&_e.parseNodePropertyContinued(rt)}),this.allNodes}parseNodeBegin(_,_e){const nt=_e[1].trim().replace(/^"/,"").replace(/"$/,""),rt=_e[2].split(",").map(function(at){return at.trim().replace(/^"/,"").replace(/"$/,"")}),it={name:nt},ot=this.parseNodeAttr(rt),st=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(nt,it):nt in st?(nt==="PoseNode"?st.PoseNode.push(it):st[nt].id!==void 0&&(st[nt]={},st[nt][st[nt].id]=st[nt]),ot.id!==""&&(st[nt][ot.id]=it)):typeof ot.id=="number"?(st[nt]={},st[nt][ot.id]=it):nt!=="Properties70"&&(nt==="PoseNode"?st[nt]=[it]:st[nt]=it),typeof ot.id=="number"&&(it.id=ot.id),ot.name!==""&&(it.attrName=ot.name),ot.type!==""&&(it.attrType=ot.type),this.pushStack(it)}parseNodeAttr(_){let _e=_[0];_[0]!==""&&(_e=parseInt(_[0]),isNaN(_e)&&(_e=_[0]));let nt="",rt="";return _.length>1&&(nt=_[1].replace(/^(\w+)::/,""),rt=_[2]),{id:_e,name:nt,type:rt}}parseNodeProperty(_,_e,nt){let rt=_e[1].replace(/^"/,"").replace(/"$/,"").trim(),it=_e[2].replace(/^"/,"").replace(/"$/,"").trim();rt==="Content"&&it===","&&(it=nt.replace(/"/g,"").replace(/,$/,"").trim());const ot=this.getCurrentNode();if(ot.name==="Properties70"){this.parseNodeSpecialProperty(_,rt,it);return}if(rt==="C"){const at=it.split(",").slice(1),lt=parseInt(at[0]),ct=parseInt(at[1]);let ut=it.split(",").slice(3);ut=ut.map(function(ht){return ht.trim().replace(/^"/,"")}),rt="connections",it=[lt,ct],append(it,ut),ot[rt]===void 0&&(ot[rt]=[])}rt==="Node"&&(ot.id=it),rt in ot&&Array.isArray(ot[rt])?ot[rt].push(it):rt!=="a"?ot[rt]=it:ot.a=it,this.setCurrentProp(ot,rt),rt==="a"&&it.slice(-1)!==","&&(ot.a=parseNumberArray(it))}parseNodePropertyContinued(_){const _e=this.getCurrentNode();_e.a+=_,_.slice(-1)!==","&&(_e.a=parseNumberArray(_e.a))}parseNodeSpecialProperty(_,_e,nt){const rt=nt.split('",').map(function(ct){return ct.trim().replace(/^\"/,"").replace(/\s/,"_")}),it=rt[0],ot=rt[1],st=rt[2],at=rt[3];let lt=rt[4];switch(ot){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":lt=parseFloat(lt);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":lt=parseNumberArray(lt);break}this.getPrevNode()[it]={type:ot,type2:st,flag:at,value:lt},this.setCurrentProp(this.getPrevNode(),it)}}class BinaryParser{parse(_){const _e=new BinaryReader(_);_e.skip(23);const nt=_e.getUint32();if(nt<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+nt);const rt=new FBXTree;for(;!this.endOfContent(_e);){const it=this.parseNode(_e,nt);it!==null&&rt.add(it.name,it)}return rt}endOfContent(_){return _.size()%16===0?(_.getOffset()+160+16&-16)>=_.size():_.getOffset()+160+16>=_.size()}parseNode(_,_e){const nt={},rt=_e>=7500?_.getUint64():_.getUint32(),it=_e>=7500?_.getUint64():_.getUint32();_e>=7500?_.getUint64():_.getUint32();const ot=_.getUint8(),st=_.getString(ot);if(rt===0)return null;const at=[];for(let ht=0;ht<it;ht++)at.push(this.parseProperty(_));const lt=at.length>0?at[0]:"",ct=at.length>1?at[1]:"",ut=at.length>2?at[2]:"";for(nt.singleProperty=it===1&&_.getOffset()===rt;rt>_.getOffset();){const ht=this.parseNode(_,_e);ht!==null&&this.parseSubNode(st,nt,ht)}return nt.propertyList=at,typeof lt=="number"&&(nt.id=lt),ct!==""&&(nt.attrName=ct),ut!==""&&(nt.attrType=ut),st!==""&&(nt.name=st),nt}parseSubNode(_,_e,nt){if(nt.singleProperty===!0){const rt=nt.propertyList[0];Array.isArray(rt)?(_e[nt.name]=nt,nt.a=rt):_e[nt.name]=rt}else if(_==="Connections"&&nt.name==="C"){const rt=[];nt.propertyList.forEach(function(it,ot){ot!==0&&rt.push(it)}),_e.connections===void 0&&(_e.connections=[]),_e.connections.push(rt)}else if(nt.name==="Properties70")Object.keys(nt).forEach(function(it){_e[it]=nt[it]});else if(_==="Properties70"&&nt.name==="P"){let rt=nt.propertyList[0],it=nt.propertyList[1];const ot=nt.propertyList[2],st=nt.propertyList[3];let at;rt.indexOf("Lcl ")===0&&(rt=rt.replace("Lcl ","Lcl_")),it.indexOf("Lcl ")===0&&(it=it.replace("Lcl ","Lcl_")),it==="Color"||it==="ColorRGB"||it==="Vector"||it==="Vector3D"||it.indexOf("Lcl_")===0?at=[nt.propertyList[4],nt.propertyList[5],nt.propertyList[6]]:at=nt.propertyList[4],_e[rt]={type:it,type2:ot,flag:st,value:at}}else _e[nt.name]===void 0?typeof nt.id=="number"?(_e[nt.name]={},_e[nt.name][nt.id]=nt):_e[nt.name]=nt:nt.name==="PoseNode"?(Array.isArray(_e[nt.name])||(_e[nt.name]=[_e[nt.name]]),_e[nt.name].push(nt)):_e[nt.name][nt.id]===void 0&&(_e[nt.name][nt.id]=nt)}parseProperty(_){const _e=_.getString(1);let nt;switch(_e){case"C":return _.getBoolean();case"D":return _.getFloat64();case"F":return _.getFloat32();case"I":return _.getInt32();case"L":return _.getInt64();case"R":return nt=_.getUint32(),_.getArrayBuffer(nt);case"S":return nt=_.getUint32(),_.getString(nt);case"Y":return _.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const rt=_.getUint32(),it=_.getUint32(),ot=_.getUint32();if(it===0)switch(_e){case"b":case"c":return _.getBooleanArray(rt);case"d":return _.getFloat64Array(rt);case"f":return _.getFloat32Array(rt);case"i":return _.getInt32Array(rt);case"l":return _.getInt64Array(rt)}const st=unzlibSync(new Uint8Array(_.getArrayBuffer(ot))),at=new BinaryReader(st.buffer);switch(_e){case"b":case"c":return at.getBooleanArray(rt);case"d":return at.getFloat64Array(rt);case"f":return at.getFloat32Array(rt);case"i":return at.getInt32Array(rt);case"l":return at.getInt64Array(rt)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+_e)}}}class BinaryReader{constructor(_,_e){this.dv=new DataView(_),this.offset=0,this.littleEndian=_e!==void 0?_e:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(_){this.offset+=_}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(_){const _e=[];for(let nt=0;nt<_;nt++)_e.push(this.getBoolean());return _e}getUint8(){const _=this.dv.getUint8(this.offset);return this.offset+=1,_}getInt16(){const _=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,_}getInt32(){const _=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,_}getInt32Array(_){const _e=[];for(let nt=0;nt<_;nt++)_e.push(this.getInt32());return _e}getUint32(){const _=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,_}getInt64(){let _,_e;return this.littleEndian?(_=this.getUint32(),_e=this.getUint32()):(_e=this.getUint32(),_=this.getUint32()),_e&2147483648?(_e=~_e&4294967295,_=~_&4294967295,_===4294967295&&(_e=_e+1&4294967295),_=_+1&4294967295,-(_e*4294967296+_)):_e*4294967296+_}getInt64Array(_){const _e=[];for(let nt=0;nt<_;nt++)_e.push(this.getInt64());return _e}getUint64(){let _,_e;return this.littleEndian?(_=this.getUint32(),_e=this.getUint32()):(_e=this.getUint32(),_=this.getUint32()),_e*4294967296+_}getFloat32(){const _=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,_}getFloat32Array(_){const _e=[];for(let nt=0;nt<_;nt++)_e.push(this.getFloat32());return _e}getFloat64(){const _=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,_}getFloat64Array(_){const _e=[];for(let nt=0;nt<_;nt++)_e.push(this.getFloat64());return _e}getArrayBuffer(_){const _e=this.dv.buffer.slice(this.offset,this.offset+_);return this.offset+=_,_e}getString(_){const _e=this.offset;let nt=new Uint8Array(this.dv.buffer,_e,_);this.skip(_);const rt=nt.indexOf(0);return rt>=0&&(nt=new Uint8Array(this.dv.buffer,_e,rt)),this._textDecoder.decode(nt)}}class FBXTree{add(_,_e){this[_]=_e}}function isFbxFormatBinary(tt){const _="Kaydara FBX Binary  \0";return tt.byteLength>=_.length&&_===convertArrayBufferToString(tt,0,_.length)}function isFbxFormatASCII(tt){const _=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let _e=0;function nt(rt){const it=tt[rt-1];return tt=tt.slice(_e+rt),_e++,it}for(let rt=0;rt<_.length;++rt)if(nt(1)===_[rt])return!1;return!0}function getFbxVersion(tt){const _=/FBXVersion: (\d+)/,_e=tt.match(_);if(_e)return parseInt(_e[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function convertFBXTimeToSeconds(tt){return tt/46186158e3}const dataArray=[];function getData(tt,_,_e,nt){let rt;switch(nt.mappingType){case"ByPolygonVertex":rt=tt;break;case"ByPolygon":rt=_;break;case"ByVertice":rt=_e;break;case"AllSame":rt=nt.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+nt.mappingType)}nt.referenceType==="IndexToDirect"&&(rt=nt.indices[rt]);const it=rt*nt.dataSize,ot=it+nt.dataSize;return slice(dataArray,nt.buffer,it,ot)}const tempEuler=new Euler,tempVec=new Vector3;function generateTransform(tt){const _=new Matrix4,_e=new Matrix4,nt=new Matrix4,rt=new Matrix4,it=new Matrix4,ot=new Matrix4,st=new Matrix4,at=new Matrix4,lt=new Matrix4,ct=new Matrix4,ut=new Matrix4,ht=new Matrix4,pt=tt.inheritType?tt.inheritType:0;if(tt.translation&&_.setPosition(tempVec.fromArray(tt.translation)),tt.preRotation){const Bt=tt.preRotation.map(MathUtils.degToRad);Bt.push(tt.eulerOrder||Euler.DEFAULT_ORDER),_e.makeRotationFromEuler(tempEuler.fromArray(Bt))}if(tt.rotation){const Bt=tt.rotation.map(MathUtils.degToRad);Bt.push(tt.eulerOrder||Euler.DEFAULT_ORDER),nt.makeRotationFromEuler(tempEuler.fromArray(Bt))}if(tt.postRotation){const Bt=tt.postRotation.map(MathUtils.degToRad);Bt.push(tt.eulerOrder||Euler.DEFAULT_ORDER),rt.makeRotationFromEuler(tempEuler.fromArray(Bt)),rt.invert()}tt.scale&&it.scale(tempVec.fromArray(tt.scale)),tt.scalingOffset&&st.setPosition(tempVec.fromArray(tt.scalingOffset)),tt.scalingPivot&&ot.setPosition(tempVec.fromArray(tt.scalingPivot)),tt.rotationOffset&&at.setPosition(tempVec.fromArray(tt.rotationOffset)),tt.rotationPivot&&lt.setPosition(tempVec.fromArray(tt.rotationPivot)),tt.parentMatrixWorld&&(ut.copy(tt.parentMatrix),ct.copy(tt.parentMatrixWorld));const gt=_e.clone().multiply(nt).multiply(rt),yt=new Matrix4;yt.extractRotation(ct);const vt=new Matrix4;vt.copyPosition(ct);const mt=vt.clone().invert().multiply(ct),_t=yt.clone().invert().multiply(mt),xt=it,St=new Matrix4;if(pt===0)St.copy(yt).multiply(gt).multiply(_t).multiply(xt);else if(pt===1)St.copy(yt).multiply(_t).multiply(gt).multiply(xt);else{const Ot=new Matrix4().scale(new Vector3().setFromMatrixScale(ut)).clone().invert(),Ut=_t.clone().multiply(Ot);St.copy(yt).multiply(gt).multiply(Ut).multiply(xt)}const Tt=lt.clone().invert(),Mt=ot.clone().invert();let bt=_.clone().multiply(at).multiply(lt).multiply(_e).multiply(nt).multiply(rt).multiply(Tt).multiply(st).multiply(ot).multiply(it).multiply(Mt);const Pt=new Matrix4().copyPosition(bt),wt=ct.clone().multiply(Pt);return ht.copyPosition(wt),bt=ht.clone().multiply(St),bt.premultiply(ct.invert()),bt}function getEulerOrder(tt){tt=tt||0;const _=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return tt===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),_[0]):_[tt]}function parseNumberArray(tt){return tt.split(",").map(function(_e){return parseFloat(_e)})}function convertArrayBufferToString(tt,_,_e){return _===void 0&&(_=0),_e===void 0&&(_e=tt.byteLength),new TextDecoder().decode(new Uint8Array(tt,_,_e))}function append(tt,_){for(let _e=0,nt=tt.length,rt=_.length;_e<rt;_e++,nt++)tt[nt]=_[_e]}function slice(tt,_,_e,nt){for(let rt=_e,it=0;rt<nt;rt++,it++)tt[it]=_[rt];return tt}function inject(tt,_,_e){return tt.slice(0,_).concat(_e).concat(tt.slice(_))}const AvatarContext=reactExports.createContext(),useAvatar=()=>reactExports.useContext(AvatarContext),AvatarProvider=({children:tt,customerId:_})=>{const[_e,nt]=reactExports.useState([]),[rt,it]=reactExports.useState([]),[ot,st]=reactExports.useState({}),[at,lt]=reactExports.useState(""),[ct,ut]=reactExports.useState(!1),[ht,pt]=reactExports.useState({title:"",subtitle:"",initialMessage:"",buttonColor:"",buttonColorHover:"",replayButtonColor:"",backgroundColor1:"",backgroundColor2:""}),[gt,yt]=reactExports.useState("");return reactExports.useEffect(()=>{(async()=>{try{const xt=(await(await fetch("https://edoarai.duckdns.org/webhook/serveConfig",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:_})})).json())[0];lt(xt.glbUrl);const St=new FBXLoader,Tt=await Promise.all(xt.animations.map(Mt=>St.loadAsync(Mt.url).then(bt=>(bt.animations[0].name=Mt.name,bt.animations[0]))));nt(Tt),it(xt.meshConfig||[]),st(xt.facialExpressions),pt({title:xt.branding.title,subtitle:xt.branding.subtitle,initialMessage:xt.branding.initialMessage,buttonColor:xt.branding.buttonColor,buttonColorHover:xt.branding.buttonColorHover,replayButtonColor:xt.branding.replayButtonColor,iconButtonColor:xt.branding.iconButtonColor,backgroundColor1:xt.branding.backgroundColor1,backgroundColor2:xt.branding.backgroundColor2}),yt(xt.backendUrl||"")}catch(mt){console.error("Error loading data:",mt)}finally{ut(!0)}})()},[]),jsx(AvatarContext.Provider,{value:{animations:_e,meshConfig:rt,facialExpressions:ot,isLoaded:ct,glbUrl:at,branding:ht,backendUrl:gt},children:tt})},generateUserId=()=>{const tt=_=>{let _e="";const nt="0123456789abcdef";for(let rt=0;rt<_;rt++)_e+=nt.charAt(Math.floor(Math.random()*nt.length));return _e};return`${tt(8)}-${tt(8)}-${tt(8)}-${tt(8)}`},dummyLipsyncData={metadata:{data:"replacement",duration:3.55,soundFile:"/home/46fd3aadddff.wav"},mouthCues:[{end:.07,start:0,value:"X"},{end:.14,start:.07,value:"B"},{end:2.96,start:2.84,value:"A"},{end:3.55,start:2.96,value:"X"}]},ChatContext=reactExports.createContext(),ChatProvider=({children:tt,customerId:_})=>{const[_e,nt]=reactExports.useState([]),[rt,it]=reactExports.useState([]),[ot,st]=reactExports.useState(null),[at,lt]=reactExports.useState(!1),[ct,ut]=reactExports.useState(!1),{backendUrl:ht}=useAvatar(),[pt,gt]=reactExports.useState(generateUserId()),yt=()=>{nt(xt=>xt.slice(1))},vt=xt=>{const St=rt[xt];St&&nt([St])},mt=async xt=>{try{const St=await fetch("https://edoarai.duckdns.org/webhook/getLipsync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messageId:xt,sessionId:_,userId:pt})});if(!St.ok)throw new Error("Failed to fetch lipsync data");return await St.json()}catch(St){return console.error("Error fetching lipsync data:",St),null}},_t=async xt=>{lt(!0);try{const St=await fetch(`${ht}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:xt,sessionId:_,user_id:pt})});if(!St.ok){console.error(`HTTP error! status: ${St.status}`);return}const Tt=await St.json();console.log("Received JSON data:",Tt);for(const Mt of Tt){const bt=Mt.messages;bt&&bt.length&&bt.forEach((Pt,wt)=>{setTimeout(async()=>{console.log(`Processing message ${Pt.messageId}`);const Bt=mt(Pt.messageId),Ot=new Promise(Nt=>setTimeout(()=>Nt({lipsync:dummyLipsyncData}),15e3)),Ut=await Promise.race([Bt,Ot]);Pt.lipsync=Ut?Ut.lipsync:dummyLipsyncData,nt(Nt=>[...Nt,Pt]),it(Nt=>[...Nt,Pt])},1e3*wt)})}}catch(St){console.error("Error in chat function:",St)}finally{lt(!1)}};return reactExports.useEffect(()=>{st(_e.length>0?_e[0]:null)},[_e]),jsx(ChatContext.Provider,{value:{chat:_t,message:ot,onMessagePlayed:yt,replayMessage:vt,loading:at,cameraZoomed:ct,setCameraZoomed:ut,displayMessages:rt},children:tt})},useChat=()=>{const tt=reactExports.useContext(ChatContext);if(!tt)throw new Error("useChat must be used within a ChatProvider");return tt},corresponding={A:"viseme_PP",B:"viseme_kk",C:"viseme_I",D:"viseme_AA",E:"viseme_O",F:"viseme_U",G:"viseme_FF",H:"viseme_TH",X:"viseme_PP"};let setupMode=!1;function Avatar(props){const{animations,meshConfig,isLoaded,facialExpressions,glbUrl}=useAvatar(),{nodes,materials,scene}=useGLTF(glbUrl||""),{message,onMessagePlayed,chat}=useChat(),[lipsync,setLipsync]=reactExports.useState(),[blink,setBlink]=reactExports.useState(!1),[winkLeft,setWinkLeft]=reactExports.useState(!1),[winkRight,setWinkRight]=reactExports.useState(!1),[facialExpression,setFacialExpression]=reactExports.useState(""),[audio,setAudio]=reactExports.useState(),[animation,setAnimation]=reactExports.useState("Idle");reactExports.useState({});const group=reactExports.useRef(),{actions}=useAnimations(animations,group),buildMeshAttributes=meshConfigItem=>{let attributes={key:meshConfigItem.name,name:meshConfigItem.name};return Object.keys(meshConfigItem).forEach(key=>{if(key!=="name"){const expression=meshConfigItem[key];attributes[key]=eval(expression)}}),attributes};reactExports.useEffect(()=>{if(isLoaded&&actions[animation])return actions[animation].reset().fadeIn(.5).play(),()=>{var tt;return(tt=actions[animation])==null?void 0:tt.fadeOut(.5)};isLoaded?console.warn(`Animation "${animation}" not found.`):console.log("Waiting for animations to load")},[animation,actions,isLoaded]),reactExports.useEffect(()=>{if(message){console.log("Message received:",message),setAnimation(message.animation),setFacialExpression(message.facialExpression),setLipsync(message.lipsync);const tt=new Audio("data:audio/mp3;base64,"+message.audio);tt.play(),setAudio(tt),tt.onended=onMessagePlayed}else setAnimation("Idle")},[message]);const lerpMorphTarget=(tt,_,_e=.1)=>{scene.traverse(nt=>{if(nt.isSkinnedMesh&&nt.morphTargetDictionary){const rt=nt.morphTargetDictionary[tt];if(rt===void 0||nt.morphTargetInfluences[rt]===void 0)return;if(nt.morphTargetInfluences[rt]=MathUtils.lerp(nt.morphTargetInfluences[rt],_,_e),!setupMode)try{set({[tt]:_})}catch{}}})};useFrame(()=>{if(!setupMode&&Object.keys(nodes.EyeLeft.morphTargetDictionary).forEach(_=>{const _e=facialExpressions[facialExpression];_==="eyeBlinkLeft"||_==="eyeBlinkRight"||(_e&&_e[_]?lerpMorphTarget(_,_e[_],.1):lerpMorphTarget(_,0,.1))}),lerpMorphTarget("eyeBlinkLeft",blink||winkLeft?1:0,.5),lerpMorphTarget("eyeBlinkRight",blink||winkRight?1:0,.5),setupMode)return;const tt=[];if(message&&lipsync){const _=audio.currentTime;for(let _e=0;_e<lipsync.mouthCues.length;_e++){const nt=lipsync.mouthCues[_e];if(_>=nt.start&&_<=nt.end){tt.push(corresponding[nt.value]),lerpMorphTarget(corresponding[nt.value],1,.2);break}}}Object.values(corresponding).forEach(_=>{tt.includes(_)||lerpMorphTarget(_,0,.1)})}),useControls("FacialExpressions",{chat:button(()=>chat()),winkLeft:button(()=>{setWinkLeft(!0),setTimeout(()=>setWinkLeft(!1),300)}),winkRight:button(()=>{setWinkRight(!0),setTimeout(()=>setWinkRight(!1),300)}),animation:{value:animation,options:animations.map(tt=>tt.name),onChange:tt=>setAnimation(tt)},facialExpression:{options:Object.keys(facialExpressions),onChange:tt=>setFacialExpression(tt)},enableSetupMode:button(()=>{setupMode=!0}),disableSetupMode:button(()=>{setupMode=!1}),logMorphTargetValues:button(()=>{const tt={};Object.keys(nodes.EyeLeft.morphTargetDictionary).forEach(_=>{if(_==="eyeBlinkLeft"||_==="eyeBlinkRight")return;const _e=nodes.EyeLeft.morphTargetInfluences[nodes.EyeLeft.morphTargetDictionary[_]];_e>.01&&(tt[_]=_e)}),console.log(JSON.stringify(tt,null,2))})});const[,set]=useControls("MorphTarget",()=>Object.assign({},...Object.keys(nodes.EyeLeft.morphTargetDictionary).map(tt=>({[tt]:{label:tt,value:0,min:nodes.EyeLeft.morphTargetInfluences[nodes.EyeLeft.morphTargetDictionary[tt]],max:1,onChange:_=>{setupMode&&lerpMorphTarget(tt,_,1)}}}))));return reactExports.useEffect(()=>{let tt;const _=()=>{tt=setTimeout(()=>{setBlink(!0),setTimeout(()=>{setBlink(!1),_()},200)},MathUtils.randInt(1e3,5e3))};return _(),()=>clearTimeout(tt)},[]),jsxs("group",{...props,dispose:null,ref:group,children:[jsx("primitive",{object:nodes.Hips}),meshConfig.map(tt=>jsx("skinnedMesh",{...buildMeshAttributes(tt)}))]})}const Dots=tt=>{const{loading:_}=useChat(),[_e,nt]=reactExports.useState("");return reactExports.useEffect(()=>{if(_){const rt=setInterval(()=>{nt(it=>it.length>2?".":it+".")},800);return()=>clearInterval(rt)}else nt("")},[_]),_?jsx("group",{...tt,children:jsxs(Text,{fontSize:.14,anchorX:"left",anchorY:"bottom",children:[_e,jsx("meshBasicMaterial",{attach:"material",color:"black"})]})}):null},Experience=()=>{const tt=reactExports.useRef(),{cameraZoomed:_}=useChat();return reactExports.useEffect(()=>{tt.current.setLookAt(0,2,5,0,1.5,0)},[]),reactExports.useEffect(()=>{_?tt.current.setLookAt(0,1.5,1.5,0,1.5,0,!0):tt.current.setLookAt(0,2.2,5,0,1,0,!0)},[_]),jsxs(Fragment,{children:[jsx(CameraControls,{ref:tt}),jsx(Environment,{preset:"sunset"}),jsx(reactExports.Suspense,{children:jsx(Dots,{"position-y":1.75,"position-x":-.02})}),jsx(Avatar,{}),jsx(ContactShadows,{opacity:.7})]})},UI=({hidden:tt,branding:_,noMessageText:_e,buttonColor:nt,replayButtonColor:rt,...it})=>{var xt;const ot=reactExports.useRef(),{chat:st,loading:at,cameraZoomed:lt,setCameraZoomed:ct,displayMessages:ut,replayMessage:ht}=useChat(),[pt,gt]=reactExports.useState(0);reactExports.useEffect(()=>{gt(ut.length-1)},[ut]);const yt=()=>{const St=ot.current.value;!at&&St&&(st(St),ot.current.value="")},vt=()=>{gt(St=>Math.max(St-1,0))},mt=()=>{gt(St=>Math.min(St+1,ut.length-1))},_t=()=>{ht(pt)};return tt?null:jsx(Fragment,{children:jsxs("div",{className:"absolute top-0 left-0 right-0 bottom-0 z-10 flex p-4 flex-col pointer-events-none",children:[jsxs("div",{className:"flex justify-between",children:[jsxs("div",{className:"backdrop-blur-md bg-white bg-opacity-50 p-4 rounded-lg",children:[jsx("h1",{className:"font-black text-xl",children:_.title}),jsx("p",{children:jsx("a",{href:`http://${_.subtitle}`,target:"_blank",rel:"noopener noreferrer",children:_.subtitle})})]}),jsxs("div",{className:"flex-grow flex items-center relative backdrop-blur-md bg-white bg-opacity-50 p-4 rounded-lg ml-4 pointer-events-none",children:[jsx("button",{onClick:vt,disabled:pt<=0,className:"absolute left-0 h-full bg-opacity-50 p-2 rounded-l-md pointer-events-auto",style:{width:"25px"},children:jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:`${_.iconButtonColor}`,viewBox:"0 0 24 24",stroke:`${_.iconButtonColor}`,children:[" ",jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})]})}),jsxs("p",{className:"mx-auto pointer-events-auto px-10",children:[" ",ut.length>0?(xt=ut[pt])==null?void 0:xt.text:_.initialMessage]}),jsx("button",{onClick:_t,className:"absolute right-10 h-full bg-opacity-50 p-2 pointer-events-auto",style:{width:"30px"},children:jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:`${_.replayButtonColor}`,viewBox:"0 0 24 24",children:[" ",jsx("path",{d:"M12 3C7.03 3 3 7.03 3 12s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm0 16.5c-4.14 0-7.5-3.36-7.5-7.5S7.86 4.5 12 4.5s7.5 3.36 7.5 7.5-3.36 7.5-7.5 7.5zm.75-6.75v-4.5l4.5 2.25-4.5 2.25zm.75-6a.75.75 0 00-1.5 0v6a.75.75 0 001.5 0v-6z"})]})}),jsx("button",{onClick:mt,disabled:pt>=ut.length-1,className:"absolute right-0 h-full bg-opacity-50 p-2 rounded-r-md pointer-events-auto",style:{width:"25px"},children:jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:`${_.iconButtonColor}`,viewBox:"0 0 24 24",stroke:`${_.iconButtonColor}`,children:[" ",jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})]})})]})]}),jsx("div",{className:"w-full flex flex-col items-end justify-center gap-4 h-full",children:jsx("button",{onClick:()=>ct(!lt),className:"pointer-events-auto text-white p-4 rounded-md",style:{backgroundColor:_.buttonColor},children:lt?jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM13.5 10.5h-6"})}):jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM10.5 7.5v6m3-3h-6"})})})}),jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex items-center gap-2 pointer-events-auto max-w-screen-sm w-full mx-auto",children:[jsx("input",{className:"w-full placeholder:text-gray-800 placeholder:italic p-4 rounded-md bg-opacity-50 bg-white backdrop-blur-md",placeholder:"Type a message...",ref:ot,onKeyDown:St=>{St.key==="Enter"&&yt()}}),jsx("button",{onClick:yt,disabled:at,className:`text-white p-4 px-10 font-semibold uppercase rounded-md ${at?"cursor-not-allowed opacity-50":""}`,style:{backgroundColor:_.buttonColor},children:"Send"})]})]})})};function App(){const{isLoaded:tt,branding:_}=useAvatar();return reactExports.useEffect(()=>{const _e=document.getElementById("root");_e&&(_e.style.backgroundImage=`linear-gradient(19deg, ${_.backgroundColor1} 0%, ${_.backgroundColor2} 100%)`)},[_.backgroundColor1,_.backgroundColor2]),jsxs(Fragment,{children:[jsx(Loader,{}),jsx(Leva,{hidden:!0}),jsx(UI,{branding:_})," ",jsx(Canvas$1,{shadows:!0,camera:{position:[0,0,1],fov:30},children:tt?jsx(Experience,{}):jsx(Html,{center:!0})})]})}const index="";function getCustomerId(){let _=new URLSearchParams(window.location.search).get("id");if(!_){const _e=document.getElementById("app-script")||document.querySelector("script[data-id]");_e&&(_=_e.getAttribute("data-id"))}return _}function renderApp(tt){console.log(tt),client.createRoot(document.getElementById("root")).render(jsx(React.StrictMode,{children:jsx(AvatarProvider,{customerId:tt,children:jsx(ChatProvider,{customerId:tt,children:jsx(App,{})})})}))}if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",()=>{const tt=getCustomerId();renderApp(tt)});else{const tt=getCustomerId();renderApp(tt)}
